<?xml version="1.0" encoding="UTF-8"?><rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/"><channel><title>White~Festa</title><description>ç™½è‰²åº†å…¸ğŸ‰</description><link>https://white-festa.net/</link><templateTheme>Firefly</templateTheme><templateThemeVersion>6.6.11</templateThemeVersion><templateThemeUrl>https://github.com/CuteLeaf/Firefly</templateThemeUrl><lastBuildDate>2026å¹´2æœˆ19æ—¥ 21:09:22</lastBuildDate><item><title>systemd-oomd åœ¨ cgroup v2 ä¸‹çš„è§¦å‘æœºåˆ¶ä¸æœåŠ¡çº§ OOM æ§åˆ¶å®è·µ</title><link>https://white-festa.net/posts/systemd-oomd/</link><guid isPermaLink="true">https://white-festa.net/posts/systemd-oomd/</guid><description>æœ¬æ–‡æ·±å…¥è§£æ systemd-oomd çš„å·¥ä½œåŸç†ï¼Œè¯´æ˜å…¶å¦‚ä½•åŸºäº PSI ä¸ cgroup v2 ç›‘æ§å†…å­˜å‹åŠ›ï¼Œå¹¶ä¸ä¼ ç»Ÿå†…æ ¸ OOM æœºåˆ¶è¿›è¡Œå¯¹æ¯”ã€‚é€šè¿‡ memory.highã€slice é…ç½®ä¸æœåŠ¡ç¤ºä¾‹ï¼Œæ¼”ç¤ºå¦‚ä½•åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å®ç°æ›´ç²¾ç»†çš„ OOM æ§åˆ¶ã€‚</description><pubDate>Mon, 09 Feb 2026 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;åœ¨ cgroup v2 æˆä¸ºä¸»æµä¹‹åï¼Œä¼ ç»Ÿçš„å†…æ ¸ OOM Killer å·²ç»ä¸å†æ˜¯å”¯ä¸€çš„å†…å­˜å›æ”¶æœºåˆ¶ã€‚systemd å¼•å…¥çš„ systemd-oomd é€šè¿‡ &lt;code&gt;PSI&lt;/code&gt;ï¼ˆPressure Stall Informationï¼‰æ„ŸçŸ¥ç³»ç»Ÿå†…å­˜å‹åŠ›ï¼Œåœ¨å†…æ ¸ OOM è§¦å‘å‰ä¸»åŠ¨ç»ˆæ­¢é«˜é£é™©æœåŠ¡ï¼Œä»è€Œé¿å…æ•´æœºå¡æ­»ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡å°†ä» PSI æŒ‡æ ‡å«ä¹‰å…¥æ‰‹ï¼Œåˆ†æ systemd-oomd çš„ä¸‰ç§è§¦å‘åœºæ™¯ï¼Œå¹¶ç»“åˆ &lt;code&gt;memory.high&lt;/code&gt;ã€&lt;code&gt;slice&lt;/code&gt; é…ç½®ä¸å®é™…ç¤ºä¾‹ï¼Œè¯´æ˜å®ƒä¸å†…æ ¸ OOM çš„åŒºåˆ«ä»¥åŠåœ¨ç”Ÿäº§ç¯å¢ƒä¸­çš„åº”ç”¨æ–¹å¼ã€‚&lt;/p&gt;
&lt;section&gt;&lt;h1&gt;PSIï¼ˆPressure Stall Informationï¼‰&lt;a href=&quot;#psipressure-stall-information&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;PSI (Pressure Stall Information) æ˜¯ Linux å†…æ ¸ï¼ˆ4.20+ï¼‰æä¾›çš„ä¸€é¡¹é«˜çº§åŠŸèƒ½ï¼Œç”¨äºå®æ—¶ç›‘æ§ CPUã€å†…å­˜å’Œ IO èµ„æºçš„å‹åŠ›æƒ…å†µã€‚å®ƒé‡åŒ–äº†ä»»åŠ¡å› ç­‰å¾…ç¡¬ä»¶èµ„æºè€Œåœé¡¿çš„æ—¶é—´ï¼Œèƒ½å‡†ç¡®åæ˜ èµ„æºç´§å¼ å¯¹ç³»ç»Ÿæ€§èƒ½çš„å½±å“ï¼Œå¸®åŠ©é¢„æµ‹ç³»ç»Ÿå´©æºƒå¹¶ä¼˜åŒ–èµ„æºåˆ©ç”¨ç‡ã€‚&lt;/p&gt;&lt;section&gt;&lt;h2&gt;è¢«ç›‘æ§çš„å››ç§èµ„æº&lt;a href=&quot;#è¢«ç›‘æ§çš„å››ç§èµ„æº&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;cpu&lt;/li&gt;
&lt;li&gt;io&lt;/li&gt;
&lt;li&gt;irq&lt;/li&gt;
&lt;li&gt;memory&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;PSI è¾“å‡ºç»“æ„&lt;a href=&quot;#psi-è¾“å‡ºç»“æ„&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;some&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;avg10=&lt;/span&gt;&lt;span&gt;12.50&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;avg60=&lt;/span&gt;&lt;span&gt;8.23&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;avg300=&lt;/span&gt;&lt;span&gt;5.01&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;full&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;avg10=&lt;/span&gt;&lt;span&gt;2.30&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;avg60=&lt;/span&gt;&lt;span&gt;1.10&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;avg300=&lt;/span&gt;&lt;span&gt;0.50&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;section&gt;&lt;h3&gt;some å’Œ full çš„åŒºåˆ«&lt;a href=&quot;#some-å’Œ-full-çš„åŒºåˆ«&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;some -  è‡³å°‘æœ‰ä¸€ä¸ªä»»åŠ¡å› ä¸ºå†…å­˜å‹åŠ›è€Œè¢«é˜»å¡&lt;/li&gt;
&lt;li&gt;full -  æ‰€æœ‰é idle ä»»åŠ¡éƒ½åœ¨ç­‰å¾…èµ„æº&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;avg&lt;a href=&quot;#avg&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;avg è¡¨ç¤ºæ—¶é—´è·¨åº¦ï¼Œæ˜¯â€œåœ¨è¿‡å»çš„ä¸€æ®µæ—¶é—´å†…â€çš„æ„æ€ï¼Œæ¯”å¦‚ avg10 å°±æ˜¯åœ¨è¿‡å» 10s å†…çš„æ„æ€ã€‚å› æ­¤ï¼Œç»“åˆèµ·æ¥ï¼Œ&lt;code&gt;some avg10=12.50&lt;/code&gt;  è¿™æ®µè¾“å‡ºå¯ä»¥ç†è§£ä¸º åœ¨è¿‡å» 10 ç§’é‡Œï¼Œæœ‰ 12.5% çš„æ—¶é—´è‡³å°‘æœ‰ä¸€ä¸ªä»»åŠ¡å› ä¸ºå†…å­˜é—®é¢˜è¢«å¡ä½ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨è¿™ 10 ç§’ä¸­ï¼Œæœ‰ &lt;code&gt;10 ç§’ Ã— 12.5% = 1.25 ç§’&lt;/code&gt;å¤„äºæœ‰è¿›ç¨‹è¢«å¡ä½çš„çŠ¶æ€ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;PSI ç›®å½•&lt;a href=&quot;#psi-ç›®å½•&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;/proc/pressure/cpu&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;/proc/pressure/memory&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;/proc/pressure/io&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;/proc/pressure/irq&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;systemd-oomd çš„è§¦å‘æ¡ä»¶&lt;a href=&quot;#systemd-oomd-çš„è§¦å‘æ¡ä»¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;å®ƒä¸»è¦æ ¹æ®ä¸‰ç§æƒ…å†µæ€è¿›ç¨‹&lt;/p&gt;&lt;section&gt;&lt;h2&gt;memory.high æŒç»­è¶…æ ‡ + PSI é«˜&lt;a href=&quot;#memoryhigh-æŒç»­è¶…æ ‡--psi-é«˜&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;å¦‚æœæŸä¸ª cgroupï¼š&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;memory.high&lt;/code&gt; (cgroups å†…å­˜è½¯æ€§é™åˆ¶ï¼Œè¶…è¿‡åªä¼šè¢«é™åˆ¶å’Œå›æ”¶èµ„æºï¼Œä¸ä¼šç›´æ¥è§¦å‘ OOM) è¢«æŒç»­è¶…è¿‡&lt;/li&gt;
&lt;li&gt;PSI memory pressure é«˜&lt;/li&gt;
&lt;li&gt;æŒç»­ä¸€æ®µæ—¶é—´&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;å®ƒå°±ä¼šé€‰ä¸€ä¸ªè¿›ç¨‹æ€ï¼ˆä¾æ® cgroups &lt;code&gt;oom_score_adj&lt;/code&gt; å’Œå®æ—¶è®¡ç®—çš„&lt;code&gt;oom_score&lt;/code&gt;ï¼‰&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;swap ç”¨å°½&lt;a href=&quot;#swap-ç”¨å°½&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;åŒ…æ‹¬&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;swap ä½¿ç”¨ç‡è¿‡é«˜&lt;/li&gt;
&lt;li&gt;ç³»ç»Ÿæ¥è¿‘&lt;code&gt;swap exhaustion&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;æ­¤æ—¶ä¼šä¼˜å…ˆæ€å¤§å†…å­˜è¿›ç¨‹&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;å…¨å±€å†…å­˜å‹åŠ›ä¸¥é‡&lt;a href=&quot;#å…¨å±€å†…å­˜å‹åŠ›ä¸¥é‡&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;å¦‚æœæ•´æœº memory pressure å¾ˆé«˜ï¼ŒåŒ…æ‹¬ &lt;code&gt;PSI full&lt;/code&gt;è¶…è¿‡é˜ˆå€¼ä¸” æŒç»­ä¸€å®šæ—¶é—´ï¼Œä¼šéšæœºæ€æ­» æŸä¸ª service  æ¥å°è¯•è§£å†³å†…å­˜å‹åŠ›ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;æœåŠ¡ä½¿ç”¨çš„å†…å­˜è¶…è¿‡ memory.max çš„æƒ…å†µ&lt;a href=&quot;#æœåŠ¡ä½¿ç”¨çš„å†…å­˜è¶…è¿‡-memorymax-çš„æƒ…å†µ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;å½“æœåŠ¡æ‰€åœ¨ cgroup çš„ &lt;code&gt;memory.max&lt;/code&gt; è¢«çªç ´æ—¶ï¼Œè§¦å‘ OOM çš„æ˜¯å†…æ ¸ï¼ˆkernelï¼‰ï¼Œä¸æ˜¯ systemd-oomdã€‚&lt;/p&gt;&lt;p&gt;è¿™æ˜¯æ•…æ„çš„è®¾è®¡ï¼Œå› ä¸º&lt;code&gt;memory.max&lt;/code&gt;æ˜¯å†…å­˜ç¡¬é™åˆ¶ï¼Œ å¿…é¡»ç”±å†…æ ¸ç«‹å³å¤„ç†ï¼Œä¸€æ—¦&lt;code&gt;alloc_pages()&lt;/code&gt;å¤±è´¥ï¼Œå³åˆ»è§¦å‘ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;systemd-oomd ä¸å†…æ ¸ OOM çš„åŒºåˆ«&lt;a href=&quot;#systemd-oomd-ä¸å†…æ ¸-oom-çš„åŒºåˆ«&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;


































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å¯¹æ¯”&lt;/th&gt;&lt;th&gt;å†…æ ¸ OOM&lt;/th&gt;&lt;th&gt;systemd-oomd&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;è¿è¡Œä½ç½®&lt;/td&gt;&lt;td&gt;å†…æ ¸æ€&lt;/td&gt;&lt;td&gt;ç”¨æˆ·æ€&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;è§¦å‘æ—¶æœº&lt;/td&gt;&lt;td&gt;å†…å­˜è€—å°½&lt;/td&gt;&lt;td&gt;å†…å­˜å‹åŠ›é«˜&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;ä¾æ®&lt;/td&gt;&lt;td&gt;oom_score&lt;/td&gt;&lt;td&gt;PSI + cgroup&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;ç²¾ç»†åº¦&lt;/td&gt;&lt;td&gt;è¾ƒç²—&lt;/td&gt;&lt;td&gt;æŒ‰ service ç²’åº¦&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;å¯æ§æ€§&lt;/td&gt;&lt;td&gt;ä½&lt;/td&gt;&lt;td&gt;é«˜&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;systemd-oomd é…ç½®æ–‡ä»¶&lt;a href=&quot;#systemd-oomd-é…ç½®æ–‡ä»¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;ä¸»é…ç½®æ–‡ä»¶ï¼š&lt;code&gt;/etc/systemd/oomd.conf&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;é»˜è®¤æ¨¡æ¿ï¼š&lt;code&gt;/usr/lib/systemd/oomd.conf&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;æŸ¥çœ‹å½“å‰ç”Ÿæ•ˆé…ç½®ï¼š&lt;code&gt;systemd-analyze cat-config systemd/oomd.conf&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;section&gt;&lt;h2&gt;[OOM] SECTION OPTIONS&lt;a href=&quot;#oom-section-options&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;code&gt;DefaultMemoryPressureLimit&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;å½“æŸä¸ªå—ç®¡æ§çš„ cgroup çš„ memory PSI è¶…è¿‡ æŒ‡å®šçš„ç™¾åˆ†æ¯”æ—¶ï¼ˆæ¯”å¦‚ 60%ï¼‰ æ—¶ï¼Œè¿›å…¥å€™é€‰æ€åå•ã€‚è¿™ä¸ªç™¾åˆ†æ¯”é’ˆå¯¹çš„æ˜¯&lt;code&gt;PSI some avg10&lt;/code&gt;ï¼Œè€Œä¸æ˜¯å†…å­˜ä½¿ç”¨ç‡æˆ– free memory çš„ç™¾åˆ†æ¯”ã€‚&lt;/p&gt;&lt;ol&gt;
&lt;li&gt;&lt;code&gt;DefaultMemoryPressureDurationSec&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;memory pressure è¶…è¿‡é˜ˆå€¼æŒç»­ä¸€å®šæ—¶é•¿æ‰è§¦å‘ï¼ˆæ¯”å¦‚ 30sï¼‰ï¼Œè¿™æ˜¯ä¸€ä¸ªæŠ—æŠ–åŠ¨çš„æœºåˆ¶ï¼Œé€šè¿‡è®¾å®šä¸€å®šçš„å†—ä½™æ—¶é—´ï¼Œå…è®¸è¿›ç¨‹å¶å°”è¶…è¿‡è®¾å®šçš„æ ‡å‡†è€Œä¸è¢«æ€æ­»ã€‚&lt;/p&gt;&lt;ol&gt;
&lt;li&gt;&lt;code&gt;SwapUsedLimit&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;å¦‚æœ swap ä½¿ç”¨ç‡è¶…è¿‡ æŒ‡å®šçš„ç™¾åˆ†æ¯”ï¼ˆæ¯”å¦‚ 90%ï¼‰ï¼Œåˆ™å¯ä»¥è§¦å‘ killã€‚&lt;/p&gt;&lt;ol&gt;
&lt;li&gt;å…¸å‹ systemd-oomd é…ç½®&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[OOM]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;DefaultMemoryPressureLimit&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;60%&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;DefaultMemoryPressureDurationSec&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;30s&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;SwapUsedLimit&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;90%&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;å¦‚ä½•è®©æŒ‡å®šçš„æœåŠ¡å¯åŠ¨ systemd-oomd&lt;a href=&quot;#å¦‚ä½•è®©æŒ‡å®šçš„æœåŠ¡å¯åŠ¨-systemd-oomd&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;éœ€è¦ä¿®æ”¹æœåŠ¡çš„ service æ–‡ä»¶ï¼Œå¢åŠ ä¸¤ä¸ªå‚æ•°ï¼š&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;ManagedOOMMemoryPressure&lt;/li&gt;
&lt;li&gt;ManagedOOMSwap&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;éƒ½æœ‰ä¸‰ç§å¯é€‰å€¼ï¼š&lt;/p&gt;




















&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å€¼&lt;/th&gt;&lt;th&gt;å«ä¹‰&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;auto&lt;/td&gt;&lt;td&gt;é»˜è®¤è¡Œä¸º&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;kill&lt;/td&gt;&lt;td&gt;å…è®¸è¢« oomd æ€&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;none&lt;/td&gt;&lt;td&gt;ç¦æ­¢è¢« oomd æ€&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;æ¯”å¦‚ï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[Service]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ManagedOOMMemoryPressure&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;kill&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ManagedOOMSwap&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;kill&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;section&gt;&lt;h3&gt;å’Œ memory.high çš„å…³ç³»&lt;a href=&quot;#å’Œ-memoryhigh-çš„å…³ç³»&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;systemd-oomd åªä¼šé‡ç‚¹å…³æ³¨è®¾ç½®äº† &lt;code&gt;memory.high&lt;/code&gt; çš„ cgroupæˆ– memory pressure æ˜¾è‘—çš„ cgroupï¼›å› æ­¤å¦‚æœä¸€ä¸ªæœåŠ¡æ²¡æœ‰è®¾ç½® &lt;code&gt;memory.high&lt;/code&gt;ï¼ŒPSI ç¬¦åˆé…ç½®æ–‡ä»¶çš„å®šä¹‰æ—¶ï¼Œä»å¯èƒ½è§¦å‘ systemd-oomdï¼Œä½†ä¼˜å…ˆçº§é€šå¸¸ä½ä¸€äº›ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;ä¸ºæ•´ä¸ª slice å¯ç”¨é…ç½®&lt;a href=&quot;#ä¸ºæ•´ä¸ª-slice-å¯ç”¨é…ç½®&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;ä¾‹å¦‚ï¼Œè¦ä¸ºæ‰€æœ‰ &lt;code&gt;user.slice&lt;/code&gt; ä¸‹çš„æœåŠ¡å¯ç”¨é…ç½®&lt;/p&gt;&lt;ol&gt;
&lt;li&gt;åˆ›å»º drop-in ç›®å½•ï¼š&lt;code&gt;/etc/systemd/system/user.slice.d/&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;åˆ›å»ºé…ç½®æ–‡ä»¶ï¼š&lt;code&gt;/etc/systemd/system/user.slice.d/oom.conf&lt;/code&gt;ï¼Œå†™å…¥é…ç½®ï¼Œä¾‹å¦‚&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[Slice]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ManagedOOMMemoryPressure&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;kill&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;é‡è½½ systemd é…ç½® &lt;code&gt;systemctl daemon-reload&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;ç¡®è®¤é…ç½®ï¼š&lt;code&gt;systemctl show user.slice&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;åˆ›å»ºç‹¬ç«‹çš„ slice å¹¶å°†æœåŠ¡çº³å…¥è¯¥ slice ä»¥å®ç°èµ„æºç»„æ§åˆ¶&lt;a href=&quot;#åˆ›å»ºç‹¬ç«‹çš„-slice-å¹¶å°†æœåŠ¡çº³å…¥è¯¥-slice-ä»¥å®ç°èµ„æºç»„æ§åˆ¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;ä»¥åˆ›å»ºä¸€ä¸ª web sliceï¼Œå¹¶ä¸ºè¯¥ slice ä¸‹çš„ nginx å’Œ node æœåŠ¡ç»Ÿä¸€è®¾ç½®å†…å­˜å’Œ cpu é™åˆ¶&lt;/p&gt;&lt;section&gt;&lt;h3&gt;åˆ›å»º web.slice&lt;a href=&quot;#åˆ›å»º-webslice&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;åˆ›å»ºé…ç½®æ–‡ä»¶ï¼š&lt;code&gt;/etc/systemd/system/web.slice&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;å†™å…¥é…ç½®&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[Unit]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Description&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Web Services Slice&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[Slice]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;CPUAccounting&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;yes&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;MemoryAccounting&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;yes&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;MemoryHigh&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;2G&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;CPUQuota&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;100%&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ManagedOOMMemoryPressure&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;kill&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;å…¶ä¸­&lt;code&gt;CPUAccounting&lt;/code&gt; å’Œ &lt;code&gt;MemoryAccounting&lt;/code&gt; æ˜¯ç”¨æ¥å¯ç”¨èµ„æºé™åˆ¶çš„å‚æ•°ï¼ŒåŒæ—¶ä¹Ÿä¸º &lt;code&gt;systemd-cgtop&lt;/code&gt; æä¾›äº†æ ¹æ® cgroups slice åˆ†ç»„çš„èµ„æºå¯è§†åŒ–&lt;/p&gt;&lt;p&gt;&lt;code&gt;ManagedOOMMemoryPressure&lt;/code&gt;é…ç½®ä¸º &lt;code&gt;kill&lt;/code&gt;ï¼Œè¿™æ„å‘³ç€å½“ slice ç»„çš„èµ„æºä½¿ç”¨é‡ä¹‹å’Œè¶…è¿‡å£°æ˜çš„é‡æ—¶ï¼Œsystemd-oomd ä¼šç”Ÿæ•ˆï¼Œä»å ç”¨èµ„æºæœ€å¤šçš„è¿›ç¨‹å¼€å§‹æ€ã€‚&lt;/p&gt;&lt;ol&gt;
&lt;li&gt;ç”Ÿæ•ˆé…ç½®ï¼š&lt;code&gt;systemctl daemon-reload&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;è®© nginx.service ä½¿ç”¨ web.slice (ä½¿ç”¨ drop-in æ–¹å¼)&lt;a href=&quot;#è®©-nginxservice-ä½¿ç”¨-webslice-ä½¿ç”¨-drop-in-æ–¹å¼&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;åˆ›å»º drop-in ç›®å½•ï¼š&lt;code&gt;/etc/systemd/system/nginx.service.d/&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;åˆ›å»ºé…ç½®æ–‡ä»¶ï¼š&lt;code&gt;/etc/systemd/system/nginx.service.d/slice.conf&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;åœ¨é…ç½®æ–‡ä»¶ä¸­å£°æ˜ nginx æœåŠ¡æ‰€å½’å±çš„ slice&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[Service]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Slice&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;web.slice&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;åº”ç”¨é…ç½®&lt;/li&gt;
&lt;/ol&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;åˆ›å»º node åº”ç”¨å¹¶é…ç½® sliceï¼ˆåœ¨ä¸»æœåŠ¡æ–‡ä»¶ä¸­æ˜¾å¼å£°æ˜ï¼‰&lt;a href=&quot;#åˆ›å»º-node-åº”ç”¨å¹¶é…ç½®-sliceåœ¨ä¸»æœåŠ¡æ–‡ä»¶ä¸­æ˜¾å¼å£°æ˜&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;node app ä»£ç &lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;const&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;http&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;require&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&apos;http&apos;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;const&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;server&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;http&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;createServer&lt;/span&gt;&lt;span&gt;&lt;span&gt;((&lt;/span&gt;&lt;span&gt;req&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;res&lt;/span&gt;&lt;span&gt;) &lt;/span&gt;&lt;/span&gt;&lt;span&gt;=&amp;gt;&lt;/span&gt;&lt;span&gt; {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;res&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;writeHead&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;200&lt;/span&gt;&lt;span&gt;, { &lt;/span&gt;&lt;span&gt;&apos;Content-Type&apos;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;text/plain&apos;&lt;/span&gt;&lt;span&gt; });&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;res&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;end&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&apos;Hello World&lt;/span&gt;&lt;span&gt;\n&lt;/span&gt;&lt;span&gt;&apos;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;});&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;server&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;listen&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;8000&lt;/span&gt;&lt;span&gt;, () &lt;/span&gt;&lt;span&gt;=&amp;gt;&lt;/span&gt;&lt;span&gt; {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;console&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;log&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&apos;Server running at http://localhost:8000/&apos;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;});&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;åˆ›å»º service æœåŠ¡æ–‡ä»¶&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[Unit]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Description&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Node.js App on Port 8000&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;After&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;network.target&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[Service]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Slice&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;web.slice &lt;/span&gt;&lt;/span&gt;&lt;span&gt;# åœ¨è¿™é‡Œæ˜¾å¼å£°æ˜æ‰€å±çš„slice&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Type&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;simple&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;User&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;root&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;WorkingDirectory&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;/opt/node-app&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ExecStart&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;/root/.nvm/versions/node/v20.19.0/bin/node /opt/node-app/app.js&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Restart&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;on-failure&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;RestartSec&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;10&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;StandardOutput&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;journal&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;StandardError&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;journal&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Environment&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;NODE_ENV&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;testing&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[Install]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;WantedBy&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;multi-user.target&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;è¿è¡ŒæœåŠ¡&lt;/li&gt;
&lt;/ol&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;éªŒè¯&lt;a href=&quot;#éªŒè¯&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;ä½¿ç”¨ &lt;code&gt;systemd-cgls&lt;/code&gt;å‘½ä»¤&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[root@exp-bridge system]# systemd-cgls -u web.slice  # ç›´æ¥æŸ¥çœ‹ slice çš„å®Œæ•´å†…å®¹&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Unit web.slice (/web.slice):&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;â”œâ”€nginx.service&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;â”‚ â”œâ”€1750 nginx: master process /usr/sbin/nginx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;â”‚ â”œâ”€1751 nginx: worker process&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;â”‚ â”œâ”€1752 nginx: worker process&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;â”‚ â”œâ”€1753 nginx: worker process&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;â”‚ â””â”€1754 nginx: worker process&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;â””â”€node-app.service&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;â””â”€3103 /root/.nvm/versions/node/v20.19.0/bin/node /opt/node-app/app.js&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;ä½¿ç”¨ systemd-cgtop æŸ¥çœ‹ slice çš„èµ„æºåˆ©ç”¨ç‡&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;CGroup                                                                  Tasks   &lt;/span&gt;&lt;span&gt;%CPU   Memory  Input/s Output/s&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;/web.slice                                                                 12      -    12.8M        -        -&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;/web.slice/nginx.service                                                    5      -     5.8M        -        -&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;/web.slice/node-app.service                                                 7      -     6.9M        -        -&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;</content:encoded></item><item><title>KubernetesèŠ‚ç‚¹å‹åŠ›é©±é€ã€cgroupsä¸Kernel OOMä¹‹é—´çš„å…³ç³»</title><link>https://white-festa.net/posts/kubernetes-oom/</link><guid isPermaLink="true">https://white-festa.net/posts/kubernetes-oom/</guid><description>Kuberneteså†…å­˜ç®¡ç†æ·±åº¦è§£æï¼šå½“å†…å­˜ä¸è¶³æ—¶ï¼ŒPodå¦‚ä½•è¢«é©±é€æˆ–æ€æ­»ï¼Ÿæœ¬æ–‡ä»èŠ‚ç‚¹é©±é€ã€cgroupsé™åˆ¶ã€å†…æ ¸OOMä¸‰ä¸ªå±‚é¢ï¼Œç»“åˆLogstashå®ä¾‹è¿½è¸ªcgroupsè·¯å¾„ï¼Œè¯¦è§£QoSä¸oom_score_adjå¦‚ä½•å†³å®šPodç”Ÿæ­»ã€‚</description><pubDate>Wed, 10 Dec 2025 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Kubernetes çš„å†…å­˜ç®¡ç†æ˜¯ä¸€ä¸ªå¤šå±‚çº§çš„ç²¾å¯†ä½“ç³»ã€‚å½“ Pod å› å†…å­˜å‹åŠ›è¢«æ€æ­»æ—¶ï¼Œå…¶å†³ç­–å¯èƒ½å‘ç”Ÿåœ¨ä¸‰ä¸ªä¸åŒçš„å±‚é¢ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è°ƒåº¦å±‚ï¼škubelet åŸºäº Pod çš„ QoS å’Œèµ„æºä½¿ç”¨é‡ï¼Œä¸»åŠ¨è¿›è¡Œæœ‰åºé©±é€ã€‚&lt;/li&gt;
&lt;li&gt;å®¹å™¨å±‚ï¼šé€šè¿‡ Linux cgroups å¼ºåˆ¶å®æ–½ Pod çš„å†…å­˜é™åˆ¶ï¼ˆlimits.memoryï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å†…æ ¸å±‚ï¼šå½“è¿›ç¨‹è§¦å‘ cgroup å†…å­˜ä¸Šé™ï¼ˆmemory.maxï¼‰æˆ–ç³»ç»Ÿå…¨å±€å†…å­˜æ¯ç«­æ—¶ï¼Œç”±å†…æ ¸ OOM æœºåˆ¶ä»‹å…¥ï¼Œé€‰æ‹©è¿›ç¨‹ç»ˆæ­¢ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™ä¸‰è€…ç¯ç¯ç›¸æ‰£ï¼Œå…±åŒå†³å®šäº† Pod çš„â€œç”Ÿæ­»â€ã€‚æœ¬æ–‡å°†é€ä¸€è®¨è®ºè¿™ä¸‰ç§æƒ…å†µï¼Œå¹¶é€šè¿‡åœ¨çœŸå®èŠ‚ç‚¹ä¸Šè¿½è¸ªä¸€ä¸ª Logstash Pod çš„ cgroups è·¯å¾„ä¸å†…æ ¸å‚æ•°ï¼Œç›´è§‚å±•ç¤ºè¿™å¥—æœºåˆ¶æ˜¯å¦‚ä½•è¿ä½œçš„ã€‚&lt;/p&gt;
&lt;section&gt;&lt;h1&gt;Kubernetes èŠ‚ç‚¹å‹åŠ›é©±é€æœºåˆ¶&lt;a href=&quot;#kubernetes-èŠ‚ç‚¹å‹åŠ›é©±é€æœºåˆ¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;Kubernetes èŠ‚ç‚¹å‹åŠ›é©±é€çš„é¡ºåºå—ä¸¤ä¸ªå› ç´ å½±å“ï¼Œåˆ†åˆ«æ˜¯&lt;code&gt;Quality of Service&lt;/code&gt;ã€&lt;code&gt;PriorityClass&lt;/code&gt;ä¸å®é™…çš„&lt;code&gt;èµ„æºä½¿ç”¨é‡&lt;/code&gt;
é¦–å…ˆæ˜¯çœ‹Qosï¼Œé©±é€å…ˆåé¡ºåºå¦‚ä¸‹ï¼š&lt;/p&gt;
























&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;QoS&lt;/th&gt;&lt;th&gt;æ¡ä»¶&lt;/th&gt;&lt;th&gt;ç‰¹ç‚¹&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;Guaranteed&lt;/td&gt;&lt;td&gt;request == limit&lt;/td&gt;&lt;td&gt;æœ€ä¸å®¹æ˜“è¢«æ€&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Burstable&lt;/td&gt;&lt;td&gt;æœ‰ request / limit ä½†ä¸ç›¸ç­‰&lt;/td&gt;&lt;td&gt;ä¸­é—´&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;BestEffort&lt;/td&gt;&lt;td&gt;æ²¡æœ‰ä»»ä½• request/limit&lt;/td&gt;&lt;td&gt;æœ€å®¹æ˜“è¢«æ€&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;å…¶æ¬¡çœ‹PriorityClassï¼šåŒä¸€Qosä¸­ï¼ŒPriorityClassæ›´é«˜çš„æ›´å®¹æ˜“å­˜æ´»&lt;/p&gt;&lt;p&gt;æœ€åçœ‹èµ„æºä½¿ç”¨é‡ï¼šåŒä¸€Qosä¸”PriorityClassç›¸åŒçš„æƒ…å†µä¸‹(é»˜è®¤ä¸º0æˆ–è€…ä½¿ç”¨äº†åŒä¸€PriorityClass)ï¼šå†…å­˜ä½¿ç”¨é‡æ›´å¤§çš„æ›´å®¹æ˜“è¢«é©±é€&lt;/p&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;Kubeletå¦‚ä½•é€šè¿‡cgroupsé…ç½®å½±å“OOMè¡Œä¸º(åŸºäºcgroups v2)&lt;a href=&quot;#kubeletå¦‚ä½•é€šè¿‡cgroupsé…ç½®å½±å“oomè¡Œä¸ºåŸºäºcgroups-v2&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;é¦–å…ˆè¦çŸ¥é“ï¼Œkubernetesæ‰€æœ‰çš„å¯¹èµ„æºçš„ç»Ÿè®¡ã€ç®¡ç†ã€é™é¢å’Œé©±é€éƒ½æ˜¯åŸºäºcgroupså®ç°çš„&lt;/p&gt;&lt;section&gt;&lt;h2&gt;kubernetes Pod åœ¨ Nodeä¸»æœºä¸Šçš„cgroupsæ˜ å°„&lt;a href=&quot;#kubernetes-pod-åœ¨-nodeä¸»æœºä¸Šçš„cgroupsæ˜ å°„&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;ä»¥ä¸€ä¸ªlogstash podä¸ºä¾‹ã€‚
é¦–å…ˆï¼ŒæŸ¥çœ‹è¯¥Podè¢«éƒ¨ç½²åœ¨äº†å“ªä¸ªNodeä¸Šï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[root@k8s-master-05 logstash]# kubectl get pods -n logging -o wide | &lt;/span&gt;&lt;span&gt;grep&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;logstash&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;logstash-7c748fcf64-nt52r&lt;/span&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;1/1&lt;/span&gt;&lt;span&gt;     &lt;/span&gt;&lt;span&gt;Running&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;               &lt;/span&gt;&lt;span&gt;116m&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;10.244.232.85&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;k8s-node-06&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;&amp;lt;none&amp;gt;&lt;/span&gt;&lt;span&gt;           &lt;/span&gt;&lt;span&gt;&amp;lt;none&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;ç„¶åï¼Œéœ€è¦æŸ¥çœ‹Podçš„uidï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[root@k8s-master-05 logstash]# kubectl get pod -n logging logstash-7c748fcf64-nt52r -o &lt;/span&gt;&lt;span&gt;jsonpath&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&apos;{.metadata.uid}&apos;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;745d59b2-bda3-4f6d-94a2-c5bafa3560b9&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;åœ¨k8s-node-06ä¸»æœºä¸Šï¼Œæ‰¾åˆ°å¯¹åº”çš„cgroupsç›®å½•&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;/sys/fs/cgroup/kubepods.slice/kubepods-burstable.slice/kubepods-burstable-pod745d59b2_bda3_4f6d_94a2_c5bafa3560b9.slice&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;åœ¨è¿™ä¸ªç›®å½•ä¸­ï¼Œ&lt;code&gt;/sys/fs/cgroup/&lt;/code&gt; æ˜¯å›ºæœ‰çš„cgroupsæ§åˆ¶ç»„ç›®å½•ï¼Œå¯ä»¥ç”¨æ¥ç®¡ç†ä¸»æœºä¸Šçš„è¿›ç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;kubepods.slice&lt;/code&gt;å­˜æ”¾äº†æ‰€æœ‰kubernetes Podçš„æ§åˆ¶ç»„ï¼Œå…¶ä¸‹è¿˜æœ‰ä¸‰ç§ç›®å½•ï¼Œåˆ†åˆ«æ˜¯&lt;code&gt;kubepods-besteffort.slice&lt;/code&gt;ï¼Œ&lt;code&gt;kubepods-burstable.slice&lt;/code&gt;å’Œ&lt;code&gt;kubepods-guaranteed.slice&lt;/code&gt;ï¼Œåˆ†åˆ«ä»£è¡¨äº†ä¸‰ç§ä¸åŒçš„QoSç­‰çº§ã€‚&lt;/li&gt;
&lt;li&gt;æœ€åï¼Œ&lt;code&gt;kubepods-burstable-pod745d59b2_bda3_4f6d_94a2_c5bafa3560b9.slice&lt;/code&gt;ç›®å½•åˆ™æ˜¯å®é™…çš„Podåœ¨èŠ‚ç‚¹ä¸Šcgroupsæ˜ å°„ï¼Œå…¶ä¸­&lt;code&gt;745d59b2_bda3_4f6d_94a2_c5bafa3560b9&lt;/code&gt;å°±æ˜¯ä¹‹å‰è·å–çš„Pod uidã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;åœ¨è¿™ä¹‹ä¸­ï¼Œé€šå¸¸è¿˜ä¼šæœ‰è‡³å°‘ä¸¤ä¸ªå®¹å™¨ï¼Œä¸€ä¸ªæ˜¯ä¸»ä¸šåŠ¡å®¹å™¨ï¼Œä¸€ä¸ªæ˜¯Pauseå®¹å™¨ï¼Œä¾‹å¦‚ï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[root@k8s-node-06 kubepods-burstable-pod745d59b2_bda3_4f6d_94a2_c5bafa3560b9.slice]# ls -d */&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;cri-containerd-3d9508ad8b835c31b9ab4551b977bf16bef8025f6bfb61c17a8da9b60e50fd4b.scope/&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;cri-containerd-557e374182e9f183aac7b6537d44d8a74565891a231468599032dce0f6b9cad2.scope/&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;section&gt;&lt;h3&gt;ç¬¬ä¸€ä¸ªç›®å½•&lt;a href=&quot;#ç¬¬ä¸€ä¸ªç›®å½•&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;æŸ¥çœ‹pid&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[root@k8s-node-06 cri-containerd-3d9508ad8b835c31b9ab4551b977bf16bef8025f6bfb61c17a8da9b60e50fd4b.scope]# cat cgroup.procs&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;154733&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;æ ¹æ®pidæŸ¥çœ‹å¯¹åº”çš„è¿›ç¨‹ï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[root@k8s-node-06 cri-containerd-3d9508ad8b835c31b9ab4551b977bf16bef8025f6bfb61c17a8da9b60e50fd4b.scope]# ps -fp 154733&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;UID&lt;/span&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;PID&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;PPID&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;C&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;STIME&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;TTY&lt;/span&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;TIME&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;CMD&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;65535&lt;/span&gt;&lt;span&gt;     &lt;/span&gt;&lt;span&gt;154733&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;154706&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;17:35&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;?&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;00:00:00&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/pause&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;å¯ä»¥çœ‹å‡ºè¿™ä¸ªå®¹å™¨å°±æ˜¯logstash Podçš„Pauseå®¹å™¨ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;ç¬¬äºŒä¸ªç›®å½•&lt;a href=&quot;#ç¬¬äºŒä¸ªç›®å½•&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;æŸ¥çœ‹pid&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[root@k8s-node-06 cri-containerd-3d9508ad8b835c31b9ab4551b977bf16bef8025f6bfb61c17a8da9b60e50fd4b.scope]# cd ../cri-containerd-557e374182e9f183aac7b6537d44d8a74565891a231468599032dce0f6b9cad2.scope/&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[root@k8s-node-06 cri-containerd-557e374182e9f183aac7b6537d44d8a74565891a231468599032dce0f6b9cad2.scope]# cat cgroup.procs&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;164485&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;164497&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;æ ¹æ®pidæŸ¥çœ‹å¯¹åº”è¿›ç¨‹&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[root@k8s-node-06 ~]# ps -fp 164485&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;UID&lt;/span&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;PID&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;PPID&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;C&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;STIME&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;TTY&lt;/span&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;TIME&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;CMD&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;1000&lt;/span&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;164485&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;154706&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;17:47&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;?&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;00:00:00&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/bin/sh&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-c&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/opt/logstash/bin/logstash&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-f&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/opt/logstash/confi&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;ä»¥åŠ&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[root@k8s-node-06 ~]# ps -fp 164497&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;UID&lt;/span&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;PID&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;PPID&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;C&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;STIME&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;TTY&lt;/span&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;TIME&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;CMD&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;1000&lt;/span&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;164497&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;164485&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;17:47&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;?&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;00:03:26&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/opt/logstash/jdk/bin/java&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-Xms1g&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-Xmx1g&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-XX:+UseConcMarkSwe&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;è¿›å…¥åˆ°logstashè¿›è¡ŒéªŒè¯&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[root@k8s-master-05 logstash]# kubectl exec -it -n logging logstash-7c748fcf64-nt52r -- sh&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;$&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;ps&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-aux&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;USER&lt;/span&gt;&lt;span&gt;         &lt;/span&gt;&lt;span&gt;PID&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;%CPU&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;%MEM&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;VSZ&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;RSS&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;TTY&lt;/span&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;STAT&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;START&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;TIME&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;COMMAND&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;logstash&lt;/span&gt;&lt;span&gt;       &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;0.0&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;0.0&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;2624&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;96&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;?&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;Ss&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;09:47&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;0:00&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/bin/sh&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-c&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/opt/logstash/bin/logstash&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-f&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/opt/logstash/config/&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;logstash&lt;/span&gt;&lt;span&gt;       &lt;/span&gt;&lt;span&gt;6&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;2.7&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;16.9&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;5012196&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1029084&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;?&lt;/span&gt;&lt;span&gt;     &lt;/span&gt;&lt;span&gt;Sl&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;09:47&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;3:27&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/opt/logstash/jdk/bin/java&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-Xms1g&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-Xmx1g&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-XX:+UseConcMarkSweep&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;logstash&lt;/span&gt;&lt;span&gt;     &lt;/span&gt;&lt;span&gt;197&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;0.0&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;0.0&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;2624&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;1672&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;pts/0&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;Ss&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;11:51&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;0:00&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;sh&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;logstash&lt;/span&gt;&lt;span&gt;     &lt;/span&gt;&lt;span&gt;203&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;0.0&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;0.0&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;8904&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;3380&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;pts/0&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;R+&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;11:51&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;0:00&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;ps&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-aux&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;å¯è§164485å’Œ164497è¿™ä¸¤ä¸ªè¿›ç¨‹å°±æ˜¯å®¹å™¨åŒ–çš„logstashè¿›ç¨‹åœ¨Nodeä¸»æœºä¸Šçš„æ˜ å°„&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;æŸ¥çœ‹Podçš„requestå’Œlimitåœ¨cgroupsæ§åˆ¶ç»„ä¸­çš„æ˜ å°„&lt;a href=&quot;#æŸ¥çœ‹podçš„requestå’Œlimitåœ¨cgroupsæ§åˆ¶ç»„ä¸­çš„æ˜ å°„&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;æŸ¥çœ‹Podé™åˆ¶&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[root@k8s-master-05 logstash]# kubectl get pods -n logging logstash-7c748fcf64-nt52r  -o &lt;/span&gt;&lt;span&gt;jsonpath&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&apos;{range .spec.containers[*]}{&quot;å®¹å™¨:&quot;}{.name}{&quot;\n&quot;}{&quot;CPUè¯·æ±‚:&quot;}{.resources.requests.cpu}{&quot; &quot;}{&quot;CPUé™åˆ¶:&quot;}{.resources.limits.cpu}{&quot;\n&quot;}{&quot;å†…å­˜è¯·æ±‚:&quot;}{.resources.requests.memory}{&quot; &quot;}{&quot;å†…å­˜é™åˆ¶:&quot;}{.resources.limits.memory}{&quot;\n&quot;}{end}&apos;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;å®¹å™¨:logstash&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;CPUè¯·æ±‚:500m&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;CPUé™åˆ¶:1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;å†…å­˜è¯·æ±‚:512Mi&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;å†…å­˜é™åˆ¶:1Gi&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;æŸ¥çœ‹cgroups memory.maxå‚æ•°&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[root@k8s-node-06 cri-containerd-557e374182e9f183aac7b6537d44d8a74565891a231468599032dce0f6b9cad2.scope]# cat memory.max | &lt;/span&gt;&lt;span&gt;awk&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;{print $1/1024/1024}&apos;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;1024&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;å†…å­˜ä¸Šé™ä¸Pod limitsç›¸ç¬¦&lt;/p&gt;&lt;ol&gt;
&lt;li&gt;æŸ¥çœ‹ cpu.maxå‚æ•°&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[root@k8s-node-06 cri-containerd-557e374182e9f183aac7b6537d44d8a74565891a231468599032dce0f6b9cad2.scope]# cat cpu.max&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;100000&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;100000&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;å³æœ€å¤šæ— é™åˆ¶åœ°ä½¿ç”¨1ä¸ªCPUã€‚&lt;/p&gt;&lt;p&gt;ç”±æ­¤å¯è§ï¼Œkubeletæ˜¯å®Œå…¨ä¾é cgroupsç®¡ç†èµ„æºçš„ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;OOMä¸ºä½•èƒ½å¤ŸåŒæ—¶æ€æ­»ä¸€ä¸ªå®¹å™¨ä¸­çš„å¤šä¸ªè¿›ç¨‹ï¼Ÿ&lt;a href=&quot;#oomä¸ºä½•èƒ½å¤ŸåŒæ—¶æ€æ­»ä¸€ä¸ªå®¹å™¨ä¸­çš„å¤šä¸ªè¿›ç¨‹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;è¿™é‡Œä¾é çš„æ˜¯&lt;code&gt;memory.oom.group&lt;/code&gt;å‚æ•°ï¼Œè¯¥å‚æ•°ä½¿ OOM å‘ç”Ÿæ—¶ä»¥ Pod ä¸ºå•ä½æ•´ä½“ç»ˆæ­¢å®¹å™¨è¿›ç¨‹ã€‚&lt;/p&gt;&lt;p&gt;åœ¨ cgroups v1 æ—¶ä»£ï¼ŒLinux å†…æ ¸å¹¶æ²¡æœ‰æä¾›ç›´æ¥å‘æ•´ä¸ª cgroup å†…æ‰€æœ‰è¿›ç¨‹åŒæ—¶å‘é€ç»ˆæ­¢ä¿¡å·çš„åŸå­æ“ä½œã€‚å½“ Kubernetes éœ€è¦ç»ˆæ­¢ä¸€ä¸ª Pod ä¸­çš„æ‰€æœ‰è¿›ç¨‹æ—¶ï¼ˆä¾‹å¦‚åˆ é™¤ Pod æˆ–å®¹å™¨å¤±è´¥ï¼‰ï¼Œå®é™…å·¥ä½œæ˜¯ç”±å®¹å™¨è¿è¡Œæ—¶ï¼ˆå¦‚ Dockerã€containerdï¼‰å®Œæˆçš„ï¼Œå…¶æ ¸å¿ƒæœºåˆ¶æ˜¯éå† cgroup å†…çš„è¿›ç¨‹åˆ—è¡¨å¹¶é€ä¸ªå‘é€ä¿¡å·ã€‚&lt;/p&gt;&lt;p&gt;å› æ­¤ï¼Œåœ¨ä¸€äº›æç«¯æƒ…å†µä¸­ï¼Œå­˜åœ¨å®¹å™¨è¿›ç¨‹ä»kubeletä¸­é€ƒé€¸çš„ç°è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œkubeletåˆ¤æ–­Podå·²ç»ç»ˆæ­¢ï¼Œç„¶è€ŒPodä¸­çš„éƒ¨åˆ†å®¹å™¨è¿›ç¨‹ä»å­˜åœ¨ä¸å®¿ä¸»æœºä¸Šï¼Œè¡¨ç°ä¸ºèŠ‚ç‚¹ç«¯å£è¢«ä¸æ˜è¿›ç¨‹å ä¸­ï¼ŒæŒç»­å æœ‰å†…å­˜èµ„æºç­‰ã€‚&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[root@k8s-node-06 cri-containerd-557e374182e9f183aac7b6537d44d8a74565891a231468599032dce0f6b9cad2.scope]# cat memory.oom.group&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;å†…æ ¸çº§OOM&lt;a href=&quot;#å†…æ ¸çº§oom&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;å†…æ ¸çº§OOMä¾é çš„æ˜¯å¦ä¸€å¥—æœºåˆ¶ï¼š&lt;code&gt;oom_score&lt;/code&gt;å’Œ&lt;code&gt;oom_score_adj&lt;/code&gt;&lt;/p&gt;&lt;section&gt;&lt;h2&gt;oom_score&lt;a href=&quot;#oom_score&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Linuxå†…æ ¸é€šè¿‡ä¸€å¥—å¯å‘å¼ç®—æ³•ï¼ŒæŒç»­ä¸ºæ¯ä¸ªè¿›ç¨‹ç»´æŠ¤ä¸€ä¸ª&lt;code&gt;oom_score&lt;/code&gt;ï¼Œè¿™ä¸ªèŒƒå›´ä¸€èˆ¬æ˜¯åœ¨0-1000ï¼Œä¸è¿‡å®é™…ä¸Šæ²¡æœ‰ä¸Šé™ã€‚å†…æ ¸ä¼šåœ¨ OOM å‘ç”Ÿæ—¶ï¼Œæ ¹æ®è¿™å¥—å¯å‘å¼ç®—æ³•é‡æ–°è¯„ä¼°å„å€™é€‰è¿›ç¨‹çš„ oom_scoreï¼Œå¹¶ä» oom_score åˆ†æ•°æœ€é«˜çš„è¿›ç¨‹å¼€å§‹æ€ï¼Œç›´åˆ°ç³»ç»Ÿè·å¾—è¶³å¤Ÿçš„å¯ç”¨å†…å­˜ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;oom_score_adj&lt;a href=&quot;#oom_score_adj&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;&lt;code&gt;oom_score_adj&lt;/code&gt;æ˜¯ç”¨æ¥è®¡ç®—&lt;code&gt;oom_score&lt;/code&gt;çš„ä¸€ä¸ªé‡è¦å‚æ•°ï¼ŒåŒæ—¶ä»–ä¹Ÿä»£è¡¨äº†äººä¸ºèµ‹äºˆçš„è¿›ç¨‹ä¼˜å…ˆçº§ã€‚
ä¸€èˆ¬èŒƒå›´æ˜¯ä»-1000åˆ°1000ï¼Œå…¶ä¸­å†…æ ¸çº§è¿›ç¨‹åŸºæœ¬éƒ½æ˜¯-1000ï¼Œè¿™ä»£è¡¨äº†è¿™äº›è¿›ç¨‹çš„ç»å¯¹é‡è¦æ€§ï¼Œä¸èƒ½è¢«è½»æ˜“æ€æ­»ï¼Œè€Œ1000åˆ™æ˜¯æœ€å®¹æ˜“è¢«æ€æ­»çš„ã€‚æ ¹æ®oom_scoreçš„è®¡ç®—æ–¹å¼ï¼Œ-1000çš„ oom_score_adj çš„è¿›ç¨‹è®¡ç®—å‡ºçš„ oom_score éƒ½æ˜¯0ï¼Œå› æ­¤åœ¨oomæ’åºä¸­éƒ½å¤„åœ¨æœ«å°¾ï¼ˆæœ€ä¸å®¹æ˜“è¢«æ€æ­»çš„èŒƒå›´ï¼‰&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;kubeletä¸ºPodè®¾ç½®çš„oom_score_adj&lt;a href=&quot;#kubeletä¸ºpodè®¾ç½®çš„oom_score_adj&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;åœ¨Podè¢«åˆ›å»ºæ—¶ï¼Œkubeletä¼šä¸ºæ¯ä¸ªPodç”Ÿæˆ oom_score_adjï¼Œå…·ä½“æ•°å€¼æ˜¯ç”±QoSå†³å®šçš„ï¼š&lt;/p&gt;




















&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;QoS&lt;/th&gt;&lt;th&gt;oom_score_adj é»˜è®¤&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;Guaranteed&lt;/td&gt;&lt;td&gt;-998&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Burstable&lt;/td&gt;&lt;td&gt;åŠ¨æ€è®¡ç®—&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;BestEffort&lt;/td&gt;&lt;td&gt;1000&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;å…¶ä¸­Burstable Podçš„oom_score_adjæ˜¯é€šè¿‡&lt;code&gt;requests.memory&lt;/code&gt; å’Œ &lt;code&gt;node allocatable memory&lt;/code&gt;ç­‰å‚æ•°ç»¼åˆè®¡ç®—å‡ºæ¥çš„&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;oom_score_adj = 1000 - (1000 * memory_request) / node_allocatable_memory&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;(è¿™ä¸ªç®—å¼åªæ˜¯ä¸ºBurstable Podè®¡ç®—oom_score_adjçš„è¿‘ä¼¼è®¡ç®—é€»è¾‘ï¼Œå®é™…å®ç°ä¸­è¿˜åŒ…å«è¾¹ç•Œé™åˆ¶ä¸ç‰¹åˆ¤ã€‚)&lt;/p&gt;&lt;p&gt;å¦å¤–ï¼Œkubeletè‡ªèº«çš„oom_score_adjæ˜¯-999ï¼Œè¿™æ„å‘³ç€kubeletå‡ ä¹æ˜¯åœ¨æ‰€æœ‰ç”¨æˆ·æ€åº”ç”¨ä¸­æ‹¥æœ‰æœ€é«˜oomä¼˜å…ˆçº§çš„åº”ç”¨ï¼Œç„¶è€Œå½“æç«¯æƒ…å†µå‘ç”Ÿæ—¶ï¼Œkubeletå¹¶éä¸å¯æŠ›å¼ƒï¼ŒåŸå› å¾ˆç®€å•ï¼škubeletæŒ‚äº†ï¼ŒèŠ‚ç‚¹è¿˜æœ‰è‡ªæ„ˆçš„å¯èƒ½ï¼Œè€ŒèŠ‚ç‚¹å¦‚æœå› ä¸ºå†…å­˜æ— æ³•é‡Šæ”¾å¯¼è‡´å¡æ­»ï¼Œå‡ ä¹æ— æ³•é€šè¿‡é‡å¯ä»¥å¤–çš„æ–¹å¼å¤åŸï¼Œå› ä¸ºæ“ä½œçª—å£ï¼ˆæ¯”å¦‚sshï¼‰éƒ½æ— æ³•ä½¿ç”¨ï¼Œä¸¤è€…çš„ä¸¥é‡ç¨‹åº¦è¿˜æ˜¯ç›¸å·®å¾ˆå¤šçš„ã€‚&lt;/p&gt;&lt;p&gt;é€šè¿‡è¿™ä¸ªoom_score_adjï¼Œkubernetesèƒ½å¤Ÿç¡®ä¿é«˜ä»·å€¼Podåœ¨ç³»ç»ŸOOMå‘ç”Ÿæ—¶æ‹¥æœ‰æ›´é«˜çš„å­˜æ´»æ¦‚ç‡ï¼Œè¿™ä¸ªè®¾è®¡éå¸¸å‡ºè‰²ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;VPA å½±å“ oom_score_adj&lt;a href=&quot;#vpa-å½±å“-oom_score_adj&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;VPA å¯ä»¥åœ¨éƒ¨ç½²æ—¶æ ¹æ®å®é™…æƒ…å†µè‡ªåŠ¨ä¿®æ­£ requests çš„å€¼ï¼Œä½¿å¾— Pod æ›´å®¹æ˜“è¢«è°ƒåº¦åˆ°çœŸæ­£æ‹¥æœ‰è¶³å¤Ÿèµ„æºçš„èŠ‚ç‚¹ä¸Šï¼Œè€Œä¸æ˜¯å› ä¸ºå…¶è¾ƒå° requests çš„å€¼è¢«è°ƒåº¦åˆ°ä¸€ä¸ªèµ„æºä¸å……è¶³çš„èŠ‚ç‚¹ä¸Šï¼Œå¹¶åœ¨èµ„æºä½¿ç”¨é‡é€æ¸æé«˜åè¢« kubelet é©±é€ï¼›&lt;/p&gt;&lt;p&gt;VPA ä¿®æ”¹ requests çš„å€¼ä¼šå½±å“ Pod åœ¨èŠ‚ç‚¹å®¿ä¸»æœºä¸Šæ˜ å°„å‡ºæ¥çš„ cgroups oom_score_adj çš„å€¼ã€‚ç”±äº Burstable Pod çš„oom_score_adj æ˜¯ 0-999ï¼ŒVPA é€šè¿‡é€‚å½“ä¿®æ­£ requests çš„å€¼ï¼Œå¯ä»¥ä½¿ request ä¸ limits ä¹‹é—´çš„å·®è·ç¼©å°ï¼Œä½¿ oom_score_adj çš„å–å€¼åŒºé—´é™ä½ï¼Œè¿™ä¼šå¯¼è‡´å½“ç³»ç»Ÿçº§ OOM å‘ç”Ÿæ—¶ï¼ŒPod æ›´æ™šè¢« OOMã€‚&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;Tip&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;p&gt;VPA ä¸ä¼šåŠ¨æ€ä¿®æ”¹è¿è¡Œä¸­ Pod çš„ oom_score_adjï¼Œä»…å½±å“æ–°åˆ›å»ºçš„ Pod æˆ–é€šè¿‡é‡å»ºç”Ÿæ•ˆ&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;æ€»ç»“&lt;a href=&quot;#æ€»ç»“&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;èŠ‚ç‚¹å‹åŠ›é©±é€ï¼šæ˜¯kubeletä¸»åŠ¨å‘èµ·çš„ã€åŸºäºkubeletç›‘æ§æ•°æ®çš„Podåˆ é™¤è¡Œä¸ºï¼Œæ—¨åœ¨é˜²æ­¢èŠ‚ç‚¹å´©æºƒã€‚å®ƒæ˜¯ä¸€ä¸ªç›¸å¯¹â€œæ¸©å’Œâ€ã€æœ‰é¡ºåºçš„æ¸…ç†è¿‡ç¨‹ã€‚&lt;/p&gt;&lt;p&gt;å†…æ ¸OOM Killerï¼šæ˜¯Linuxå†…æ ¸åœ¨æç«¯å‹åŠ›ä¸‹ï¼ˆå·²æ— å¯ç”¨å†…å­˜ï¼Œäº¤æ¢ç©ºé—´ä¹Ÿå¯èƒ½ç”¨å°½ï¼‰çš„è¢«åŠ¨ã€æœ€åæ‰‹æ®µã€‚åœ¨å®ƒçš„è§†è§’ä¸­åªæœ‰è¿›ç¨‹ï¼Œè€Œæ²¡æœ‰kubeletä¸Podç­‰ä¸Šä¸‹çº§å…³ç³»ï¼Œåªæ ¹æ®å†…æ ¸çš„oom_scoreå†³å®šæ€å“ªä¸ªè¿›ç¨‹ã€‚&lt;/p&gt;&lt;p&gt;cgroupsï¼šæ˜¯ä¸¤è€…å…±åŒçš„æŠ€æœ¯åŸºç¡€ã€‚å®ƒä¸ºkubeletæä¾›äº†å®æ–½èµ„æºé™åˆ¶ï¼ˆmemory.maxï¼‰å’Œå½±å“å†…æ ¸OOMå†³ç­–ï¼ˆé€šè¿‡memory.oom.groupå’Œoom_score_adjï¼‰çš„èƒ½åŠ›ã€‚&lt;/p&gt;&lt;p&gt;å…³ç³»ï¼šåˆç†çš„Podèµ„æºé™åˆ¶ï¼ˆé€šè¿‡cgroupså®ç°ï¼‰å¯ä»¥é™ä½èŠ‚ç‚¹å‹åŠ›é©±é€å’Œå†…æ ¸OOMå‘ç”Ÿçš„æ¦‚ç‡ã€‚å½“èŠ‚ç‚¹å‹åŠ›å‡ºç°æ—¶ï¼Œkubeletçš„é©±é€æ˜¯å¯¹å†…æ ¸OOMçš„ä¸€ç§é¢„é˜²ã€‚å¦‚æœé¢„é˜²å¤±è´¥ï¼Œå†…æ ¸OOMå°†æ ¹æ®å—cgroupså½±å“çš„oom_scoreæ¥æ¥ç®¡ã€‚&lt;/p&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;è‹±æ–‡ç‰ˆ&lt;a href=&quot;#è‹±æ–‡ç‰ˆ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;https://dev.to/chunyi_wang/why-your-kubernetes-pod-was-oom-killed-and-who-really-killed-it-1jab&quot;&gt;Avaliable on Dev Community&lt;/a&gt;&lt;/p&gt;&lt;/section&gt;</content:encoded></item><item><title>é«˜ä»·å€¼ç¤¼å“ç å…‘æ¢ç³»ç»Ÿè®¾è®¡æ€è·¯ - åŸºäºä¸­å¿ƒæ•°æ®åº“+è¾¹ç¼˜è®¡ç®—èŠ‚ç‚¹æ¶æ„</title><link>https://white-festa.net/posts/hybrid-app/cdk-system/</link><guid isPermaLink="true">https://white-festa.net/posts/hybrid-app/cdk-system/</guid><description>æœ¬æ–‡æè¿°äº†å¦‚ä½•å®ç°ä¸€ä¸ªé«˜ä»·å€¼çš„ç¤¼å“ç å…‘æ¢ç³»ç»Ÿçš„è®¾è®¡æ€è·¯ï¼ŒåŒ…å«äº†CDKEYè®¾è®¡æ–¹æ³•ã€éªŒè¯ã€ç³»ç»Ÿæ¶æ„ç­‰å†…å®¹</description><pubDate>Mon, 17 Nov 2025 00:00:00 GMT</pubDate><content:encoded>&lt;section&gt;&lt;h1&gt;ä¸€ã€ç³»ç»Ÿä»‹ç»&lt;a href=&quot;#ä¸€ç³»ç»Ÿä»‹ç»&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;è¯¥ç³»ç»Ÿç›®çš„æ˜¯å®ç°å¯¹é«˜ä»·å€¼ç¤¼å“ç å•†å“çš„å…‘æ¢ï¼Œéœ€è¦ç¡®ä¿ç³»ç»Ÿçš„é«˜å¹¶å‘èƒ½åŠ›ã€å¯ç”¨æ€§ã€CDKé˜²ç ´è§£ç­‰é—®é¢˜ã€‚
å› æ­¤ï¼Œå¼•å…¥äº†è¾¹ç¼˜è®¡ç®—èŠ‚ç‚¹ã€è¾¹ç¼˜ç¼“å­˜ä¸ä¸­å¿ƒåŒ–åç«¯å’Œæ•°æ®åº“çš„æ¶æ„ï¼Œå…¶ä¸­è¾¹ç¼˜èŠ‚ç‚¹ç”¨äºå¦å®šâ€œå¿…ç„¶å¤±è´¥çš„è¯·æ±‚â€ã€å®ç°è®¿é—®é€Ÿç‡é™åˆ¶ç­‰åŠŸèƒ½ï¼Œé˜²æ­¢æ’åº“ã€æš´åŠ›æšä¸¾ç­‰é»‘äº§ç ´è§£æŠ€æœ¯äº§ç”Ÿçš„å¹¶å‘å‹åŠ›ç»™åˆ°åç«¯èŠ‚ç‚¹å’Œæ•°æ®åº“ï¼Œå½±å“å¯ç”¨æ€§ï¼›
ä¸­å¿ƒåŒ–åç«¯å’Œæ•°æ®åº“æ˜¯ä¸ºäº†å®ç°åŸå­äº‹åŠ¡æ›´æ–°ï¼Œé˜²æ­¢è¶…å–ï¼Œé€»è¾‘å…‘æ¢æˆåŠŸä½†æ•°æ®åº“æœªå†™å…¥ç­‰æ¼æ´ã€‚&lt;/p&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;äºŒã€CD-KEYè¯­ä¹‰åŒ–è®¾è®¡ã€å‘æ”¾æœºåˆ¶&lt;a href=&quot;#äºŒcd-keyè¯­ä¹‰åŒ–è®¾è®¡å‘æ”¾æœºåˆ¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;section&gt;&lt;h2&gt;1. CD-KEYåˆ†æ®µè§£é‡Š&lt;a href=&quot;#1-cd-keyåˆ†æ®µè§£é‡Š&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;AAAAA-BBBBB-CCCCC-DDDDD-EEEEE&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;å…¶ä¸­ï¼š&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;AAAAAï¼šçº¯éšæœºè½½è·1&lt;/li&gt;
&lt;li&gt;BBBBBï¼šç»HMACç®—æ³•å’Œå¯†é’¥åŠ å¯†åäº§ç”Ÿçš„æ‰¹æ¬¡ç ï¼Œå†…å«è¯­ä¹‰åŒ–çš„æ‰¹æ¬¡ï¼ˆå¦‚æ—¥æœŸ20250821ï¼‰ï¼Œé€šè¿‡HMACç®—æ³•åŠ å¯†åå–å‰4å­—èŠ‚ï¼Œå†é€šè¿‡Base32ç¼–ç å–å…¶ä¸­5ä½ã€‚&lt;/li&gt;
&lt;li&gt;CCCCCï¼šçº¯éšæœºè½½è·2&lt;/li&gt;
&lt;li&gt;DDDDD/EEEEEï¼šé€šè¿‡AAAAAã€BBBBBã€CCCCCé…åˆHMACè®¡ç®—å‡ºçš„æ ¡éªŒä½ï¼Œæˆªå–å¹¶é€šè¿‡Base32ç®—æ³•é‡æ–°ç¼–ç ä¸º10ä½çš„æ ¡éªŒç ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;2. ä»£ç å®ç°&lt;a href=&quot;#2-ä»£ç å®ç°&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; hmac&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; string&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; secrets&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; base64&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; struct&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;from&lt;/span&gt;&lt;span&gt; datetime &lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; datetime&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# ä»ç¯å¢ƒå˜é‡è·å–æ ¹å¯†é’¥ (å¿…é¡»ä¸éªŒè¯å™¨ä¸€è‡´!)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; os&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;CDK_LONG_TERM_SECRET&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; os.environ.&lt;/span&gt;&lt;span&gt;get&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&quot;CDK_LONG_TERM_SECRET&quot;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;&quot;your_32_byte_secure_secret_here&quot;&lt;/span&gt;&lt;span&gt;&lt;span&gt;).&lt;/span&gt;&lt;span&gt;encode&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;CHARSET&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; string.digits &lt;/span&gt;&lt;span&gt;+&lt;/span&gt;&lt;span&gt; string.ascii_uppercase&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;get_random&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;charset&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;str&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;length&lt;/span&gt;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;int&lt;/span&gt;&lt;span&gt;) -&amp;gt; &lt;/span&gt;&lt;span&gt;str&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;&apos;&lt;/span&gt;&lt;span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;join&lt;/span&gt;&lt;span&gt;(secrets.&lt;/span&gt;&lt;span&gt;choice&lt;/span&gt;&lt;span&gt;(charset) &lt;/span&gt;&lt;/span&gt;&lt;span&gt;for&lt;/span&gt;&lt;span&gt; _ &lt;/span&gt;&lt;span&gt;in&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;range&lt;/span&gt;&lt;span&gt;(length))&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;get_batch_code&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;date&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;str&lt;/span&gt;&lt;span&gt;) -&amp;gt; &lt;/span&gt;&lt;span&gt;str&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;# æ´¾ç”Ÿæ¯æ—¥å¯†é’¥: HMAC(root_secret, date)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;daily_key &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; hmac.&lt;/span&gt;&lt;span&gt;new&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;CDK_LONG_TERM_SECRET&lt;/span&gt;&lt;span&gt;, date.&lt;/span&gt;&lt;span&gt;encode&lt;/span&gt;&lt;span&gt;(), &lt;/span&gt;&lt;span&gt;&apos;sha256&apos;&lt;/span&gt;&lt;span&gt;&lt;span&gt;).&lt;/span&gt;&lt;span&gt;digest&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;# ç”Ÿæˆæ‰¹æ¬¡ç : HMAC(daily_key, &quot;batch_code&quot;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;mac &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; hmac.&lt;/span&gt;&lt;span&gt;new&lt;/span&gt;&lt;span&gt;(daily_key, &lt;/span&gt;&lt;span&gt;b&lt;/span&gt;&lt;span&gt;&quot;batch_code&quot;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;&apos;sha256&apos;&lt;/span&gt;&lt;span&gt;&lt;span&gt;).&lt;/span&gt;&lt;span&gt;digest&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;value &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; struct.&lt;/span&gt;&lt;span&gt;unpack&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&quot;&amp;gt;I&quot;&lt;/span&gt;&lt;span&gt;, mac[:&lt;/span&gt;&lt;span&gt;4&lt;/span&gt;&lt;span&gt;])[&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;b32 &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; base64.&lt;/span&gt;&lt;span&gt;b32encode&lt;/span&gt;&lt;span&gt;(struct.&lt;/span&gt;&lt;span&gt;pack&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&quot;&amp;gt;I&quot;&lt;/span&gt;&lt;span&gt;&lt;span&gt;, value)).&lt;/span&gt;&lt;span&gt;decode&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; b32[:&lt;/span&gt;&lt;span&gt;5&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;get_verification_code&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;r1&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;str&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;r2&lt;/span&gt;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;str&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;batch_code&lt;/span&gt;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;str&lt;/span&gt;&lt;span&gt;) -&amp;gt; tuple[&lt;/span&gt;&lt;span&gt;str&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;str&lt;/span&gt;&lt;span&gt;]:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;27&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;# æ´¾ç”ŸéªŒè¯å¯†é’¥: HMAC(root_secret, &quot;verification&quot;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;28&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;verif_key &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; hmac.&lt;/span&gt;&lt;span&gt;new&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;CDK_LONG_TERM_SECRET&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;b&lt;/span&gt;&lt;span&gt;&quot;verification&quot;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;&apos;sha256&apos;&lt;/span&gt;&lt;span&gt;&lt;span&gt;).&lt;/span&gt;&lt;span&gt;digest&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;29&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;msg &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; (batch_code &lt;/span&gt;&lt;span&gt;+&lt;/span&gt;&lt;span&gt; r1 &lt;/span&gt;&lt;span&gt;+&lt;/span&gt;&lt;span&gt; r2).&lt;/span&gt;&lt;span&gt;encode&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;30&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;mac &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; hmac.&lt;/span&gt;&lt;span&gt;new&lt;/span&gt;&lt;span&gt;(verif_key, msg, &lt;/span&gt;&lt;span&gt;&apos;sha256&apos;&lt;/span&gt;&lt;span&gt;&lt;span&gt;).&lt;/span&gt;&lt;span&gt;digest&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;31&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;mac_part &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; mac[:&lt;/span&gt;&lt;span&gt;8&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;32&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;b32 &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; base64.&lt;/span&gt;&lt;span&gt;b32encode&lt;/span&gt;&lt;span&gt;(mac_part).&lt;/span&gt;&lt;span&gt;decode&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;33&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; b32[:&lt;/span&gt;&lt;span&gt;5&lt;/span&gt;&lt;span&gt;], b32[&lt;/span&gt;&lt;span&gt;5&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;10&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;34&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;35&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;main&lt;/span&gt;&lt;span&gt;():&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;36&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;# ä½¿ç”¨å½“å‰æ—¥æœŸ (UTC)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;37&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;date &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; datetime.&lt;/span&gt;&lt;span&gt;utcnow&lt;/span&gt;&lt;span&gt;().&lt;/span&gt;&lt;span&gt;strftime&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&quot;%Y%m&lt;/span&gt;&lt;span&gt;%d&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;38&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;for&lt;/span&gt;&lt;span&gt; i &lt;/span&gt;&lt;span&gt;in&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;range&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;6&lt;/span&gt;&lt;span&gt;):&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;39&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;# print(get_batch_code(date))&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;40&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;r1 &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;get_random&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;CHARSET&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;5&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;41&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;r2 &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;get_random&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;CHARSET&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;5&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;42&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;43&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;bc &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;get_batch_code&lt;/span&gt;&lt;span&gt;(date)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;44&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;v1, v2 &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;get_verification_code&lt;/span&gt;&lt;span&gt;(r1, r2, bc)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;45&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;46&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;print&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;f&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;span&gt;r1&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;-&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;span&gt;bc&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;-&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;span&gt;r2&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;-&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;span&gt;v1&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;-&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;span&gt;v2&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;47&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;48&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;__name__&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;==&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&quot;__main__&quot;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;49&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;main&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;è¿™ç§åŠ å¯†æ–¹å¼çš„æœ€å¤§ä¼˜ç‚¹æ˜¯æ²¡æœ‰å¯é€†æ€§ï¼Œä¸å­˜åœ¨é€†å‘ç ´è§£çš„å¯èƒ½&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;HMACæœ¬èº«æ˜¯ä¸å¯é€†ç®—æ³•ï¼Œåªèƒ½é€šè¿‡å¯†é’¥è§£ç &lt;/li&gt;
&lt;li&gt;Base32ç¼–ç æ˜¯åŸºäºè¢«æˆªæ–­çš„HMACç”Ÿæˆçš„ï¼Œè‡ªèº«ç¼ºå¤±å¤§é‡ä¿¡æ¯&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;3. å¦‚ä½•åœ¨è¾¹ç¼˜èŠ‚ç‚¹ä¸ŠéªŒè¯åˆæ³•æ€§&lt;a href=&quot;#3-å¦‚ä½•åœ¨è¾¹ç¼˜èŠ‚ç‚¹ä¸ŠéªŒè¯åˆæ³•æ€§&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;è¿™é‡Œéœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œè¾¹ç¼˜èŠ‚ç‚¹åªéªŒè¯CDKçš„åˆæ³•æ€§ï¼Œè€Œä¸éªŒè¯å…·ä½“å†…å®¹ï¼Œå› æ­¤é‡ç‚¹å›´ç»•çš„æ˜¯åä¸¤ä½æ ¡éªŒç ã€‚
åœ¨è¾¹ç¼˜èŠ‚ç‚¹ä¸Šé€šè¿‡è¾“å…¥çš„CDKï¼Œæå–åˆ°ä¸¤æ®µéšæœºè½½è·+æ‰¹æ¬¡ç åï¼Œåˆ©ç”¨è‡ªå·±çš„å¯†é’¥é‡æ–°ç”Ÿæˆä¸€æ¬¡æ ¡éªŒç ï¼Œå¹¶æ£€æŸ¥ä¸CDKä¸­åŒ…å«çš„æ ¡éªŒç æ˜¯å¦ä¸€è‡´ï¼Œåªæœ‰ä¸€è‡´æ—¶æ‰è¢«è§†ä¸ºåˆæ³•çš„ï¼Œéšæœºè½½è·éƒ¨åˆ†åªèƒ½æœ€ç»ˆé€šè¿‡ä¸­å¿ƒåŒ–æ•°æ®åº“è¿›è¡Œæ ¡éªŒã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;4. æš´åŠ›æšä¸¾æˆåŠŸæ¦‚ç‡åˆ†æ&lt;a href=&quot;#4-æš´åŠ›æšä¸¾æˆåŠŸæ¦‚ç‡åˆ†æ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;æ”»å‡»è€…å¦‚æœæƒ³è¦æ„é€ å‡ºä¸€ä¸ªèƒ½å¤Ÿç»è¿‡è¾¹ç¼˜èŠ‚ç‚¹åˆæ³•éªŒè¯çš„CDKï¼Œå¿…é¡»å®Œç¾çŒœæµ‹å‡ºä¸¤æ®µéšæœºè½½è·ï¼ŒåŠ ä¸Šæœ‰æ•ˆæ‰¹æ¬¡ç ï¼Œå•æ¬¡çŒœå‡ºçš„æ¦‚ç‡å¤§æ¦‚æ˜¯8.1 Ã— 10^-21ï¼Œè¿™æ˜¯æä½çš„æ¦‚ç‡ï¼Œå³ä½¿æ”»å‡»è€…æ¯ç§’å¯ä»¥æš´åŠ›å°è¯•100ä¸‡æ¬¡ï¼Œåœ¨å°è¯•100å¹´åæˆåŠŸç‡ä¹Ÿä»…æœ‰0.0000026%ï¼Œå› æ­¤ï¼Œè¿™æ˜¯å¯†ç å­¦çš„å®‰å…¨çº§åˆ«ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;ä¸‰ã€æ ¡éªŒæµç¨‹&lt;a href=&quot;#ä¸‰æ ¡éªŒæµç¨‹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;å®¢æˆ·ç«¯&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;â†“&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Edgeï¼ˆCloudflare Workers / Edgeï¼‰&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;â†“&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Core APIï¼ˆä¸­å¿ƒæœåŠ¡ï¼‰&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;â†“&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;æ•°æ®åº“ï¼ˆæœ€ç»ˆçœŸç›¸ï¼‰&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;section&gt;&lt;h2&gt;1. è¾¹ç¼˜å±‚æ ¡éªŒ&lt;a href=&quot;#1-è¾¹ç¼˜å±‚æ ¡éªŒ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;è¾“å…¥ï¼šHTTPè¯·æ±‚ã€ç™»å½•æ€ã€Session/Tokenã€IP/ASN/åœ°ç†ä¿¡æ¯&lt;/li&gt;
&lt;li&gt;æ ¡éªŒå†…å®¹ï¼šæ˜¯å¦å·²ç™»å½•ã€æ˜¯å¦æœ‰IPé€Ÿç‡é™åˆ¶(å¦‚IPåœ¨äº‘å‚å•†IPåˆ—è¡¨ä¸­)ã€æ˜¯å¦å­˜åœ¨ä¸´æ—¶/æ°¸ä¹…å°ç¦æ ‡è®°&lt;/li&gt;
&lt;li&gt;å¤±è´¥å¤„ç†ï¼šè¿”å›ç»Ÿä¸€é”™è¯¯ä¿¡æ¯å’ŒçŠ¶æ€ç &lt;/li&gt;
&lt;li&gt;æœ¬å±‚ç›®çš„ï¼šç”¨æœ€å°‘çš„èµ„æºå°†è‡ªåŠ¨åŒ–/ä½æˆæœ¬æ”»å‡»é˜»æŒ¡åœ¨ç³»ç»Ÿæœ€å¤–å›´&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;2. CDKæ ¼å¼ä¸ç»“æ„æ ¡éªŒ&lt;a href=&quot;#2-cdkæ ¼å¼ä¸ç»“æ„æ ¡éªŒ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;è¾“å…¥ï¼šCDKå­—ç¬¦ä¸²&lt;/li&gt;
&lt;li&gt;æ ¡éªŒå†…å®¹ï¼šCDKé•¿åº¦ã€æ ¼å¼ã€å­—ç¬¦é›†ã€æ˜¯å¦èƒ½å¤Ÿè§£æå‡ºæ‰¹æ¬¡ç &lt;/li&gt;
&lt;li&gt;å¤±è´¥å¤„ç†ï¼šè¿”å›ç»Ÿä¸€é”™è¯¯ä¿¡æ¯å’ŒçŠ¶æ€ç &lt;/li&gt;
&lt;li&gt;æœ¬å±‚ç›®çš„ï¼šè¿‡æ»¤è„šæœ¬æµé‡ã€é¿å…è§¦å‘ä»»ä½•å¯†ç å­¦æ ¡éªŒé€»è¾‘ï¼Œé€ æˆè®¡ç®—èµ„æºæµªè´¹&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;3. æ‰¹æ¬¡æ ¡éªŒ&lt;a href=&quot;#3-æ‰¹æ¬¡æ ¡éªŒ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;è¾“å…¥ï¼šè§£æå‡ºçš„æ‰¹æ¬¡ç &lt;/li&gt;
&lt;li&gt;æ ¡éªŒå†…å®¹ï¼šç¼“å­˜åœ¨è¾¹ç¼˜èŠ‚ç‚¹çš„æ‰¹æ¬¡ç åˆ—è¡¨ï¼Œæ˜¯å¦æ˜¯è¢«è®°å½•ä¸ºï¼šæ‰¹æ¬¡å·²å…‘æ¢å®Œæˆã€æ‰¹æ¬¡å·²ä½œåºŸç­‰ä¸è¢«å…è®¸ä½¿ç”¨çš„çŠ¶æ€&lt;/li&gt;
&lt;li&gt;å¤±è´¥å¤„ç†ï¼šè¿”å›ç»Ÿä¸€é”™è¯¯ä¿¡æ¯å’ŒçŠ¶æ€ç &lt;/li&gt;
&lt;li&gt;æœ¬å±‚ç›®çš„ï¼šç”¨æ—¶é—´å¤æ‚åº¦ä¸ºO(1)çš„ç¼“å­˜æŸ¥è¯¢ï¼Œæ‹’ç»å¤§é‡çš„æ— æ„ä¹‰è¯·æ±‚&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;4. Core å±‚æ ¡éªŒæµç¨‹(å¯ä¿¡è¯·æ±‚)&lt;a href=&quot;#4-core-å±‚æ ¡éªŒæµç¨‹å¯ä¿¡è¯·æ±‚&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;è¾“å…¥ï¼šå®Œæ•´CDKã€è‡ªèº«å­˜å‚¨çš„å½“æœˆæ ¡éªŒå¯†é’¥&lt;/li&gt;
&lt;li&gt;æ ¡éªŒå†…å®¹ï¼šæ£€æŸ¥æ‰¹æ¬¡ç æ˜¯å¦ä»æœ‰æ•ˆã€åˆ©ç”¨ä¸¤æ®µéšæœºè½½è·+æ‰¹æ¬¡ç é‡æ–°è®¡ç®—æ ¡éªŒä½ã€å¯¹æ¯”ä¸¤è€…çš„æ ¡éªŒä½æ˜¯å¦ä¸€è‡´&lt;/li&gt;
&lt;li&gt;å¤±è´¥å¤„ç†ï¼šè¿”å›ç»Ÿä¸€é”™è¯¯ä¿¡æ¯å’ŒçŠ¶æ€ç ã€è®°å½•ç”¨æˆ·å¤±è´¥æ¬¡æ•°ã€è®¡ç®—å•ä½æ—¶é—´å†…çš„å¤±è´¥ç‡&lt;/li&gt;
&lt;li&gt;æœ¬å±‚ç›®çš„ï¼šç¡®ä¿è¯·æ±‚ä¸æ˜¯éšæœºæ„é€ æˆ–æ ¼å¼ä¼ªé€ ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;5. æ•°æ®åº“å­˜åœ¨æ€§ä¸çŠ¶æ€æ ¡éªŒ(æœ€ç»ˆåˆ¤å®š)&lt;a href=&quot;#5-æ•°æ®åº“å­˜åœ¨æ€§ä¸çŠ¶æ€æ ¡éªŒæœ€ç»ˆåˆ¤å®š&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;è¾“å…¥ï¼šå®Œæ•´çš„CDKã€ç”¨æˆ·id&lt;/li&gt;
&lt;li&gt;æ ¡éªŒå†…å®¹ï¼šCDKæ˜¯å¦å­˜åœ¨ã€æ˜¯å¦æœªè¢«ä½¿ç”¨ã€æ˜¯å¦ç¬¦åˆå¯¹åº”ç”¨æˆ·çš„å…‘æ¢æ¡ä»¶&lt;/li&gt;
&lt;li&gt;å¤±è´¥å¤„ç†ï¼šè¿”å›ç»Ÿä¸€é”™è¯¯ä¿¡æ¯å’ŒçŠ¶æ€ç ã€è®°å½•ç”¨æˆ·å¤±è´¥æ¬¡æ•°ã€è®¡ç®—å•ä½æ—¶é—´å†…çš„å¤±è´¥ç‡ã€æ ‡è®°é«˜é£é™©å…‘æ¢è¡Œä¸º(ç–‘ä¼¼æ³„éœ²)&lt;/li&gt;
&lt;li&gt;ç›®çš„ï¼šæœ€ç»ˆæ ¡éªŒ&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;6. åŸå­æ€§å…‘æ¢(æˆåŠŸè·¯å¾„)&lt;a href=&quot;#6-åŸå­æ€§å…‘æ¢æˆåŠŸè·¯å¾„&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;æ“ä½œï¼š&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;æ ‡è®°CDKä¸ºå·²ä½¿ç”¨&lt;/li&gt;
&lt;li&gt;ç»‘å®šå…‘æ¢è€…(user id)&lt;/li&gt;
&lt;li&gt;è®°å½•å…‘æ¢æ—¶é—´ç­‰ä¿¡æ¯
åç»­æ“ä½œï¼š&lt;/li&gt;
&lt;li&gt;æ£€æŸ¥å¯¹åº”æ‰¹æ¬¡çš„å…‘æ¢æƒ…å†µï¼Œè‹¥å·²æ•´æ‰¹æ¬¡å…‘æ¢å®Œæ¯•ï¼Œé€šçŸ¥è¾¹ç¼˜èŠ‚ç‚¹å°½å¿«å°†å¯¹åº”çš„æ‰¹æ¬¡ç åŠ å…¥å¦å†³ç¼“å­˜åˆ—è¡¨
ç›®çš„ï¼šé¿å…å¹¶å‘å…‘æ¢ã€é‡æ”¾æ”»å‡»&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;7. çŠ¶æ€æœº&lt;a href=&quot;#7-çŠ¶æ€æœº&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;graph TD
    START[START&amp;lt;br/&amp;gt;æ¥æ”¶åˆ°å…‘æ¢è¯·æ±‚] --&amp;gt; AUTH[ç™»å½•æ€ / é£æ§æ ¡éªŒ&amp;lt;br/&amp;gt;- æ˜¯å¦ç™»å½•&amp;lt;br/&amp;gt;- IP / ASN é™é€Ÿ&amp;lt;br/&amp;gt;]

    AUTH -- é€šè¿‡ --&amp;gt; CDK_FORMAT[CDK ç»“æ„æ ¡éªŒï¼ˆEdgeï¼‰&amp;lt;br/&amp;gt;- é•¿åº¦ / åˆ†éš”ç¬¦&amp;lt;br/&amp;gt;- å­—ç¬¦é›†&amp;lt;br/&amp;gt;- è§£ææ‰¹æ¬¡ç ]
    AUTH -- å¤±è´¥ --&amp;gt; REJECT_AUTH[REJECT&amp;lt;br/&amp;gt;ç»Ÿä¸€å¤±è´¥å“åº”]

    CDK_FORMAT -- é€šè¿‡ --&amp;gt; BATCH_EDGE[æ‰¹æ¬¡ Edge åˆ¤å®š&amp;lt;br/&amp;gt;- æ‰¹æ¬¡ç  æ˜¯å¦è€—å°½&amp;lt;br/&amp;gt;- æ˜¯å¦è¢«å°ç¦&amp;lt;br/&amp;gt;- æ˜¯å¦è¿‡æœŸ]
    CDK_FORMAT -- å¤±è´¥ --&amp;gt; REJECT_FORMAT[REJECT&amp;lt;br/&amp;gt;éæ³•æ ¼å¼]

    BATCH_EDGE -- é€šè¿‡ --&amp;gt; FORWARD[è½¬å‘è‡³ Core API]
    BATCH_EDGE -- å¤±è´¥ --&amp;gt; REJECT_BATCH_EDGE[REJECT&amp;lt;br/&amp;gt;æ‰¹æ¬¡æ— æ•ˆ]

    FORWARD --&amp;gt; MAC_CHECK[æ ¡éªŒä½ / MAC éªŒè¯&amp;lt;br/&amp;gt;- ä½¿ç”¨å½“æœˆå¯†é’¥&amp;lt;br/&amp;gt;- æ ¡éªŒ DDDDD - EEEEE]

    MAC_CHECK -- é€šè¿‡ --&amp;gt; BATCH_CORE[æ‰¹æ¬¡ Core æœ‰æ•ˆæ€§ç¡®è®¤&amp;lt;br/&amp;gt;- æœ‰æ•ˆæœŸ&amp;lt;br/&amp;gt;- è¿è¥åŠé”€&amp;lt;br/&amp;gt;- å¯†é’¥å‘¨æœŸåŒ¹é…]
    MAC_CHECK -- å¤±è´¥ --&amp;gt; REJECT_MAC[REJECT&amp;lt;br/&amp;gt;æ ¡éªŒå¤±è´¥]

    BATCH_CORE -- é€šè¿‡ --&amp;gt; DB_CHECK[æ•°æ®åº“å­˜åœ¨æ€§æ ¡éªŒ&amp;lt;br/&amp;gt;- CDK æ˜¯å¦å­˜åœ¨&amp;lt;br/&amp;gt;- æ˜¯å¦æœªå…‘æ¢&amp;lt;br/&amp;gt;- æ˜¯å¦ç¬¦åˆè´¦å·æ¡ä»¶]
    BATCH_CORE -- å¤±è´¥ --&amp;gt; REJECT_BATCH_CORE[REJECT&amp;lt;br/&amp;gt;æ‰¹æ¬¡å¤±æ•ˆ]

    DB_CHECK -- é€šè¿‡ --&amp;gt; SUCCESS[åŸå­å…‘æ¢ï¼ˆSUCCESSï¼‰&amp;lt;br/&amp;gt;- æ ‡è®°å·²ä½¿ç”¨&amp;lt;br/&amp;gt;- ç»‘å®šè´¦å·&amp;lt;br/&amp;gt;- è®°å½•å®¡è®¡æ—¥å¿—]
    DB_CHECK -- å¤±è´¥ --&amp;gt; REJECT_DB[REJECT&amp;lt;br/&amp;gt;ä¸å­˜åœ¨ / å·²ç”¨]&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;å››ã€äº‘æ¶æ„&lt;a href=&quot;#å››äº‘æ¶æ„&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;åŸºäºCloudFlare Workersã€CloudFlare KVã€Azure Kuberneteså’ŒAzure Database for MySQLçš„åŠServerlessæ¶æ„&lt;/p&gt;&lt;section&gt;&lt;h2&gt;1. æœåŠ¡ä»‹ç»&lt;a href=&quot;#1-æœåŠ¡ä»‹ç»&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;1.1 Cloudflare Workersï¼šè¾¹ç¼˜è®¡ç®—å¹³å°&lt;a href=&quot;#11-cloudflare-workersè¾¹ç¼˜è®¡ç®—å¹³å°&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Cloudflare Workers å…è®¸å¼€å‘è€…åœ¨è·ç¦»ç”¨æˆ·æœ€è¿‘çš„è¾¹ç¼˜èŠ‚ç‚¹ä¸Šè¿è¡Œä»£ç ï¼ˆJavaScript, Rust, Python ç­‰ï¼‰ã€‚&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;æŠ€æœ¯åŸç†ï¼š ä¸åŒäºä¼ ç»Ÿçš„å®¹å™¨æˆ–è™šæ‹Ÿæœºï¼ŒWorkersåŸºäºV8 Isolates æŠ€æœ¯ã€‚è¿™ä½¿å¾—å®ƒçš„å¯åŠ¨é€Ÿåº¦æå¿«ï¼Œå®Œå…¨æ²¡æœ‰ä¼ ç»Ÿ Serverlessï¼Œæ¯”å¦‚ AWS Lambdaçš„â€œå†·å¯åŠ¨â€å»¶è¿Ÿã€‚&lt;/li&gt;
&lt;li&gt;æ ¸å¿ƒä¼˜åŠ¿ï¼š
&lt;ul&gt;
&lt;li&gt;æä½å»¶è¿Ÿï¼š ä»£ç ç›´æ¥åœ¨ç”¨æˆ·é™„è¿‘çš„ç½‘å…³ä¸Šè¿è¡Œã€‚&lt;/li&gt;
&lt;li&gt;é«˜å¹¶å‘ï¼š è½»æ¾å¤„ç†æ¯ç§’æ•°ç™¾ä¸‡æ¬¡çš„è¯·æ±‚ã€‚&lt;/li&gt;
&lt;li&gt;æˆæœ¬æä½ï¼š å…è´¹é¢åº¦æ…·æ…¨ï¼ˆ&lt;code&gt;æ¯å¤©10ä¸‡æ¬¡&lt;/code&gt;è¯·æ±‚ï¼‰ï¼Œä»˜è´¹ç‰ˆèµ·æ­¥ä»·ä¹Ÿå¾ˆå…·ç«äº‰åŠ›ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;1.2 Azure Kubernetes&lt;a href=&quot;#12-azure-kubernetes&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Azure Kubernetes Serviceï¼ˆAKSï¼‰æ˜¯å¾®è½¯ Azure æä¾›çš„æ‰˜ç®¡å¼ Kubernetes æœåŠ¡ï¼Œå¯è®©ä½ åœ¨äº‘ä¸­å¿«é€Ÿéƒ¨ç½²ã€ç®¡ç†å’Œæ‰©å±•å®¹å™¨åŒ–åº”ç”¨ï¼Œè€Œæ— éœ€ç»´æŠ¤åº•å±‚ Kubernetes æ§åˆ¶å¹³é¢ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;1.3 Azure Database for MySQL&lt;a href=&quot;#13-azure-database-for-mysql&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Azure Database for MySQL æ˜¯å¾®è½¯ Azure æä¾›çš„å®Œå…¨æ‰˜ç®¡çš„å…³ç³»æ•°æ®åº“æœåŠ¡ï¼ŒåŸºäº MySQL ç¤¾åŒºç‰ˆå¼•æ“æ„å»ºï¼Œå…è®¸å¼€å‘è€…åœ¨äº‘ç«¯æ‰˜ç®¡ã€ç®¡ç†å’Œç¼©æ”¾MySQLæ•°æ®åº“ï¼Œè€Œæ— éœ€å¤„ç†åº•å±‚æœåŠ¡å™¨åŸºç¡€è®¾æ–½ã€‚
ä¼˜ç‚¹ï¼šè‡ªåŠ¨åŒ–è¿ç»´ã€99.9%å¯ç”¨æ—¶é—´&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;2. é…ç½®è¾¹ç¼˜å±‚&lt;a href=&quot;#2-é…ç½®è¾¹ç¼˜å±‚&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;Tip&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;p&gt;ä»¥ä¸‹æ‰€æœ‰ä»£ç ç›¸å…³çš„éƒ¨åˆ†éƒ½æ˜¯æœ€å°å®ç°ï¼Œåªç”¨æ¥æ¼”ç¤ºæ¶æ„çš„ç”¨æ³•ï¼Œéƒ¨åˆ†æŠ€æœ¯æœªä½¿ç”¨ï¼ˆæ¯”å¦‚KVï¼‰ã€‚&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;section&gt;&lt;h3&gt;2.1 Nodeåç«¯ä»£ç å’ŒWorkerséƒ¨ç½²&lt;a href=&quot;#21-nodeåç«¯ä»£ç å’Œworkerséƒ¨ç½²&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;â”œâ”€â”€ package-lock.json&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;â”œâ”€â”€ package.json&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;â”œâ”€â”€ workers&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;â”‚Â Â  â””â”€â”€ cdk_verify.js&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;â””â”€â”€ wrangler.toml&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;å…¶ä¸­workers/cdkey.jsæ˜¯åç«¯æ–‡ä»¶ï¼Œwrangler.tomlæ˜¯é…ç½®æ–‡ä»¶
Nodeåç«¯ä»£ç ï¼š&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;// ===== å¯é…ç½®é¡¹ =====&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;const&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;BACKEND_VERIFY_URL&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;http://origin.white-festa.net/cdk/verify&apos;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;const&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;VERIFICATION_SALT&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;verification&apos;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;// 5 Ã— 5 CDK æ ¼å¼&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;const&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;CDK_FORMAT&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; /&lt;/span&gt;&lt;span&gt;^&lt;/span&gt;&lt;span&gt;[A-Z0-9]&lt;/span&gt;&lt;span&gt;&lt;span&gt;{5}&lt;/span&gt;&lt;span&gt;(-&lt;/span&gt;&lt;/span&gt;&lt;span&gt;[A-Z0-9]&lt;/span&gt;&lt;span&gt;&lt;span&gt;{5}&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;{4}&lt;/span&gt;&lt;/span&gt;&lt;span&gt;$&lt;/span&gt;&lt;span&gt;/&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;/**&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;* Base32 (RFC4648, no padding)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;base32Encode&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;input&lt;/span&gt;&lt;span&gt;) {&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;const&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;ALPHABET&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;ABCDEFGHIJKLMNOPQRSTUVWXYZ234567&apos;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;output&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;&apos;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;bits&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;for&lt;/span&gt;&lt;span&gt; (&lt;/span&gt;&lt;span&gt;const&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;byte&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;of&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;input&lt;/span&gt;&lt;span&gt;) {&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&lt;span&gt; (&lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;8&lt;/span&gt;&lt;span&gt;) &lt;/span&gt;&lt;span&gt;|&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;byte&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;bits&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;+=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;8&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;while&lt;/span&gt;&lt;span&gt;&lt;span&gt; (&lt;/span&gt;&lt;span&gt;bits&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&amp;gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;5&lt;/span&gt;&lt;span&gt;) {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;output&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;+=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;ALPHABET&lt;/span&gt;&lt;span&gt;&lt;span&gt;[(&lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt; (&lt;/span&gt;&lt;span&gt;bits&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;-&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;5&lt;/span&gt;&lt;span&gt;)) &lt;/span&gt;&lt;span&gt;&amp;amp;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;31&lt;/span&gt;&lt;span&gt;];&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;bits&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;5&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt;&lt;span&gt; (&lt;/span&gt;&lt;span&gt;bits&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;) {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;27&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;output&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;+=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;ALPHABET&lt;/span&gt;&lt;span&gt;&lt;span&gt;[(&lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span&gt; (&lt;/span&gt;&lt;span&gt;5&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;bits&lt;/span&gt;&lt;span&gt;)) &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&amp;amp;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;31&lt;/span&gt;&lt;span&gt;];&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;28&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;29&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;30&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;output&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;31&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;32&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;33&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;/**&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;34&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;* HMAC-SHA256 (WebCrypto)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;35&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;36&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;async&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;hmacSha256&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;keyBytes&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;msgBytes&lt;/span&gt;&lt;span&gt;) {&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;37&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;const&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;key&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;await&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;crypto&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;subtle&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;importKey&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;38&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;&apos;raw&apos;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;39&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;keyBytes&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;40&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;{ &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;HMAC&apos;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;hash&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;SHA-256&apos;&lt;/span&gt;&lt;span&gt; },&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;41&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;false&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;42&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;&apos;sign&apos;&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;43&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;44&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;const&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;sig&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;await&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;crypto&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;subtle&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;sign&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&apos;HMAC&apos;&lt;/span&gt;&lt;span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;key&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;msgBytes&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;45&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;new&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Uint8Array&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;sig&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;46&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;47&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;48&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;/**&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;49&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;* é‡æ–°è®¡ç®— v1 / v2&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;50&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;51&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;async&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;getVerificationCode&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;r1&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;r2&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;bc&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;longTermSecret&lt;/span&gt;&lt;span&gt;) {&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;52&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;const&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;encoder&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;new&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;TextEncoder&lt;/span&gt;&lt;span&gt;();&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;53&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;54&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;const&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;verifKey&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;await&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;hmacSha256&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;55&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;encoder&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;encode&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;longTermSecret&lt;/span&gt;&lt;span&gt;),&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;56&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;encoder&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;encode&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;VERIFICATION_SALT&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;57&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;58&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;59&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;const&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;msg&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;encoder&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;encode&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;`&lt;/span&gt;&lt;span&gt;${&lt;/span&gt;&lt;span&gt;bc&lt;/span&gt;&lt;span&gt;}${&lt;/span&gt;&lt;span&gt;r1&lt;/span&gt;&lt;span&gt;}${&lt;/span&gt;&lt;span&gt;r2&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;`&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;60&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;const&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;mac&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;await&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;hmacSha256&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;verifKey&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;msg&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;61&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;62&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;const&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;macPart&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;mac&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;slice&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;8&lt;/span&gt;&lt;span&gt;); &lt;/span&gt;&lt;span&gt;// 64 bit&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;63&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;const&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;b32&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;base32Encode&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;macPart&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;64&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;65&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt;&lt;span&gt; [&lt;/span&gt;&lt;span&gt;b32&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;slice&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;5&lt;/span&gt;&lt;span&gt;&lt;span&gt;), &lt;/span&gt;&lt;span&gt;b32&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;slice&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;5&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;10&lt;/span&gt;&lt;span&gt;)];&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;66&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;67&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;68&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;/**&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;69&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;* Edge æ ¡éªŒ CDK&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;70&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;71&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;async&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;edgeVerifyCDK&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;cdk&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;env&lt;/span&gt;&lt;span&gt;) {&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;72&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; (&lt;/span&gt;&lt;span&gt;!&lt;/span&gt;&lt;span&gt;CDK_FORMAT&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;test&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;cdk&lt;/span&gt;&lt;span&gt;)) {&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;73&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;false&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;74&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;75&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;76&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;const&lt;/span&gt;&lt;span&gt; [&lt;/span&gt;&lt;span&gt;r1&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;bc&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;r2&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;v1Given&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;v2Given&lt;/span&gt;&lt;span&gt;] &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;cdk&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;split&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&apos;-&apos;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;77&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;const&lt;/span&gt;&lt;span&gt; [&lt;/span&gt;&lt;span&gt;v1Exp&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;v2Exp&lt;/span&gt;&lt;span&gt;] &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;await&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;getVerificationCode&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;78&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;r1&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;79&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;r2&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;80&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;bc&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;81&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;env&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;CDK_LONG_TERM_SECRET&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;82&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;83&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;84&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;v1Given&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;===&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;v1Exp&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;v2Given&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;===&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;v2Exp&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;85&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;86&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;87&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;// ======================&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;88&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;// Worker å…¥å£&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;89&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;// ======================&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;90&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;91&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;export&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;default&lt;/span&gt;&lt;span&gt; {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;92&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;93&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;async&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;fetch&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;request&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;env&lt;/span&gt;&lt;span&gt;) {&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;94&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;// 1. ä»…å…è®¸ POST&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;95&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt;&lt;span&gt; (&lt;/span&gt;&lt;span&gt;request&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;method&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;!==&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;POST&apos;&lt;/span&gt;&lt;span&gt;) {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;96&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;new&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Response&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;97&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;JSON&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;stringify&lt;/span&gt;&lt;span&gt;({ &lt;/span&gt;&lt;span&gt;error&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;Method Not Allowed&apos;&lt;/span&gt;&lt;span&gt; }),&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;98&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;{ &lt;/span&gt;&lt;span&gt;status&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;405&lt;/span&gt;&lt;span&gt; }&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;99&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;100&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;101&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;102&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;// 2. è§£æ JSON è¯·æ±‚ä½“&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;103&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;body&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;104&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt; {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;105&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;body&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;await&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;request&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;json&lt;/span&gt;&lt;span&gt;();&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;106&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;} &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;107&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;new&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Response&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;108&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;JSON&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;stringify&lt;/span&gt;&lt;span&gt;({ &lt;/span&gt;&lt;span&gt;error&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;Invalid JSON body&apos;&lt;/span&gt;&lt;span&gt; }),&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;109&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;{ &lt;/span&gt;&lt;span&gt;status&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;400&lt;/span&gt;&lt;span&gt; }&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;110&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;111&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;112&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;113&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;const&lt;/span&gt;&lt;span&gt; { &lt;/span&gt;&lt;span&gt;user_id&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;userId&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;cdk&lt;/span&gt;&lt;span&gt; } &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;body&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;||&lt;/span&gt;&lt;span&gt; {};&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;114&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;115&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; (&lt;/span&gt;&lt;span&gt;!&lt;/span&gt;&lt;span&gt;userId&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;||&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;!&lt;/span&gt;&lt;span&gt;cdk&lt;/span&gt;&lt;span&gt;) {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;116&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;new&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Response&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;117&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;JSON&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;stringify&lt;/span&gt;&lt;span&gt;({ &lt;/span&gt;&lt;span&gt;error&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;missing user_id or cdk&apos;&lt;/span&gt;&lt;span&gt; }),&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;118&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;{ &lt;/span&gt;&lt;span&gt;status&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;400&lt;/span&gt;&lt;span&gt; }&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;119&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;120&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;121&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;122&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;// 3. Edge æ ¡éªŒ&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;123&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;const&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;edgeVerifyResult&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;await&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;edgeVerifyCDK&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;cdk&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;env&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;124&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; (&lt;/span&gt;&lt;span&gt;!&lt;/span&gt;&lt;span&gt;edgeVerifyResult&lt;/span&gt;&lt;span&gt;) {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;125&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;new&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Response&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;126&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;//è¿™é‡Œåœ¨å®é™…ç”Ÿäº§ä¸­å»ºè®®å‰åç«¯çš„è¿”å›å€¼å’ŒçŠ¶æ€ç ä¿æŒä¸€è‡´ï¼Œé˜²æ­¢æ”»å‡»è€…æ‘¸æ¸…ç»“æ„&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;127&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;JSON&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;stringify&lt;/span&gt;&lt;span&gt;({ &lt;/span&gt;&lt;span&gt;error&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;CDK verification failed at edge&apos;&lt;/span&gt;&lt;span&gt; }),&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;128&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;{ &lt;/span&gt;&lt;span&gt;status&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;400&lt;/span&gt;&lt;span&gt; }&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;129&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;130&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;131&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;132&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;// 4. æ„é€ è½¬å‘è½½è·&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;133&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;const&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;payload&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;134&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;user_id&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;userId&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;135&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;cdk&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;136&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;edge_verify&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;edgeVerifyResult&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;137&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;timestamp&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Math&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;floor&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;Date&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;now&lt;/span&gt;&lt;span&gt;() &lt;/span&gt;&lt;span&gt;/&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1000&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;138&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;};&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;139&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;140&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;// 5. è½¬å‘ç»™åç«¯&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;141&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;const&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;backendResp&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;await&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;fetch&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;BACKEND_VERIFY_URL&lt;/span&gt;&lt;span&gt;, {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;142&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;method&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;POST&apos;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;143&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;headers&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;144&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;&apos;Content-Type&apos;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;application/json&apos;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;145&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;&apos;User-Agent&apos;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;PostmanRuntime/7.51.0&apos;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;146&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;&apos;Accept&apos;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;*/*&apos;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;147&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;&apos;Connection&apos;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;keep-alive&apos;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;148&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;},&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;149&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;body&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;JSON&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;stringify&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;payload&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;150&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;});&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;151&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;152&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;// 6. é€ä¼ åç«¯å“åº”&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;153&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;new&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Response&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;await&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;backendResp&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;text&lt;/span&gt;&lt;span&gt;(), {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;154&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;status&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;backendResp&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;status&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;155&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;headers&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;156&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;&apos;Content-Type&apos;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;application/json&apos;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;157&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;158&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;});&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;159&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;160&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;};&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;2.2 wrangleré…ç½®&lt;a href=&quot;#22-wrangleré…ç½®&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;å®Œæˆwrangleré…ç½®å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt; = &lt;/span&gt;&lt;span&gt;&quot;cdkey-verify&quot;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;# Workersåº”ç”¨åç§°&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;main&lt;/span&gt;&lt;span&gt; = &lt;/span&gt;&lt;span&gt;&quot;workers/cdkey.js&quot;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;# ä¸»ç¨‹åºæ–‡ä»¶&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;compatibility_date&lt;/span&gt;&lt;span&gt; = &lt;/span&gt;&lt;span&gt;&quot;2024-12-25&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;compatibility_flags&lt;/span&gt;&lt;span&gt; = [&lt;/span&gt;&lt;span&gt;&quot;nodejs_compat&quot;&lt;/span&gt;&lt;span&gt;] &lt;/span&gt;&lt;span&gt;# å…¼å®¹Nodeåº”ç”¨&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# ä»¥ä¸‹æ˜¯æ—¥å¿—é…ç½®ï¼Œå¯ç”¨æ—¥å¿—ä¾¿äºdebug&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;observability&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;enabled&lt;/span&gt;&lt;span&gt; = &lt;/span&gt;&lt;span&gt;false&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;head_sampling_rate&lt;/span&gt;&lt;span&gt; = &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;observability&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;logs&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;enabled&lt;/span&gt;&lt;span&gt; = &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;head_sampling_rate&lt;/span&gt;&lt;span&gt; = &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;persist&lt;/span&gt;&lt;span&gt; = &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;invocation_logs&lt;/span&gt;&lt;span&gt; = &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;observability&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;traces&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;enabled&lt;/span&gt;&lt;span&gt; = &lt;/span&gt;&lt;span&gt;false&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;persist&lt;/span&gt;&lt;span&gt; = &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;head_sampling_rate&lt;/span&gt;&lt;span&gt; = &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;2.3. éƒ¨ç½²ç¨‹åº&lt;a href=&quot;#23-éƒ¨ç½²ç¨‹åº&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;ç¡®ä¿wranglerå·²å®‰è£…&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;å¦‚æœæ²¡æœ‰å®‰è£…ï¼Œä½¿ç”¨npmå®‰è£…&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;npm&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;install&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-g&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;wrangler&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;ç™»å½•CloudFlare&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;wrangler&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;login&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;è¿™ä¸€æ­¥ä¼šè‡ªåŠ¨å”¤èµ·æµè§ˆå™¨å¹¶è¿›å…¥CloudFlareè·å–æˆæƒ
3. Deploy&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;wrangler&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;deploy&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;å¦‚æœæ²¡æœ‰ä»»ä½•æŠ¥é”™ï¼Œåˆ™workerså·²ç»éƒ¨ç½²æˆåŠŸ&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;2.4. åœ¨Cloudflareä¸­é…ç½®workers&lt;a href=&quot;#24-åœ¨cloudflareä¸­é…ç½®workers&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;é…ç½®å¯†é’¥&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;å°†å¯†é’¥é…ç½®åœ¨ç¯å¢ƒå˜é‡ä¸­ä¾›workerè°ƒç”¨å¹¶é‡æ–°è®¡ç®—æ ¡éªŒä½
&lt;/p&gt;&lt;figure&gt;&lt;img loading=&quot;lazy&quot; width=&quot;2751&quot; height=&quot;1427&quot; src=&quot;/_astro/1.CLXTnp2l_16ccFV.webp&quot; /&gt;&lt;figcaption&gt;é…ç½®å¯†é’¥&lt;/figcaption&gt;&lt;/figure&gt;
2. ä¸ºAzure Kubernetes Serviceé…ç½®ä¸´æ—¶åŸŸå&lt;p&gt;&lt;/p&gt;&lt;p&gt;Cloudflareé»˜è®¤ç¦æ­¢ç›´æ¥å‘è£¸IPåœ°å€å‘é€è¯·æ±‚ï¼Œå› æ­¤å¿…é¡»ä¸ºAKSæš´éœ²çš„æœåŠ¡é…ç½®åŸŸåï¼Œå¯ä»¥æ˜¯éHTTPSï¼Œä½†å¿…é¡»æœ‰åŸŸåï¼Œå¦åˆ™è¯·æ±‚ä¼šè¢«Cloudflareè‡ªåŠ¨è¿”å›403ï¼Œå“åº”ä½“è¿”å› &lt;code&gt;error: 1003&lt;/code&gt;&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;Tip&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;p&gt;è¿™ä¸ªéƒ¨åˆ†éœ€è¦å®Œæˆåç«¯éƒ¨ç½²æ‰ä¼šæœ‰æœåŠ¡IP&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;&lt;/p&gt;&lt;figure&gt;&lt;img loading=&quot;lazy&quot; width=&quot;2093&quot; height=&quot;785&quot; src=&quot;/_astro/2.DdtteNqB_107zY.webp&quot; /&gt;&lt;figcaption&gt;é…ç½®ä¸´æ—¶åŸŸå&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;3. éƒ¨ç½²å’Œé…ç½®Azure Database for MySQL&lt;a href=&quot;#3-éƒ¨ç½²å’Œé…ç½®azure-database-for-mysql&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;è¿™éƒ¨åˆ†æ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œåªéœ€è¦ç™»å½•Azureéƒ¨ç½²èµ„æºï¼Œå…¶å®åªè¦èƒ½å¤Ÿè¢«è®¿é—®åˆ°ï¼Œä»»ä½•äº‘å‚å•†çš„MySQLæ•°æ®åº“éƒ½ä¸€æ ·ã€‚
å”¯ä¸€æ³¨æ„çš„ç‚¹æ˜¯éœ€è¦å…è®¸å¤–éƒ¨è®¿é—®æ•°æ®åº“(å®éªŒç¯å¢ƒä¸­å¯ä»¥è®¾ç½®å®‰å…¨ç»„ä¸º0.0.0.0ã€ç”Ÿäº§ç¯å¢ƒä¸‹ä¸å¯ä»¥)&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;Tip&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;p&gt;å®‰å…¨ç»„è®¾ç½®ä¸º0.0.0.0å»ºè®®åªåœ¨æµ‹è¯•ã€å®éªŒç¯å¢ƒä¸‹ï¼›æ•æ„Ÿã€ç”Ÿäº§ç¯å¢ƒä¸­è¯·æ‰‹åŠ¨ä¸‹è½½ &lt;a href=&quot;https://www.cloudflare.com/ips-v4/&quot;&gt;Cloudflare IPåœ°å€èŒƒå›´&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;section&gt;&lt;h3&gt;3.1 åˆ›å»ºæ•°æ®åº“ã€è¡¨å’Œç´¢å¼•&lt;a href=&quot;#31-åˆ›å»ºæ•°æ®åº“è¡¨å’Œç´¢å¼•&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;Tip&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;p&gt;åœ¨å®é™…ç”Ÿäº§ç¯å¢ƒä¸‹ï¼Œéœ€è¦æ›´å®Œå–„çš„æ•°æ®è¡¨ç»“æ„ï¼ŒåŒ…æ‹¬å…‘æ¢è€…idã€çŠ¶æ€ã€æ‰¹æ¬¡ç ã€å®Œæ•´CDKEYã€é€šè¿‡éšæœºè½½è·å’Œæ‰¹æ¬¡ç ç”Ÿæˆçš„å®Œæ•´HMACç ç­‰ç­‰å†…å®¹ï¼Œè¿™é‡Œè¿˜æ˜¯æœ€å°å®ç°&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;-- åˆ›å»ºæ•°æ®åº“&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;CREATE&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;DATABASE&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;cdk&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;-- åˆ›å»ºæ•°æ®è¡¨&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;CREATE&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;TABLE&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;cdk&lt;/span&gt;&lt;span&gt; (&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;id &lt;/span&gt;&lt;span&gt;INT&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;NOT NULL&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;PRIMARY KEY&lt;/span&gt;&lt;span&gt; AUTO_INCREMENT,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;cdk &lt;/span&gt;&lt;span&gt;VARCHAR&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;64&lt;/span&gt;&lt;span&gt;) &lt;/span&gt;&lt;span&gt;NOT NULL&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;UNIQUE&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;used &lt;/span&gt;&lt;span&gt;BOOLEAN&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;NOT NULL&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;DEFAULT&lt;/span&gt;&lt;span&gt; FALSE,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;used_by &lt;/span&gt;&lt;span&gt;INT&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;NULL&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;used_at &lt;/span&gt;&lt;span&gt;DATETIME&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;NULL&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;content &lt;/span&gt;&lt;span&gt;VARCHAR&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;50&lt;/span&gt;&lt;span&gt;) &lt;/span&gt;&lt;span&gt;NOT NULL&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;INDEX&lt;/span&gt;&lt;span&gt; idx_cdk (cdk),&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;INDEX&lt;/span&gt;&lt;span&gt; idx_id (id)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;) ENGINE&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;InnoDB &lt;/span&gt;&lt;/span&gt;&lt;span&gt;DEFAULT&lt;/span&gt;&lt;span&gt;&lt;span&gt; CHARSET&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;utf8mb4 &lt;/span&gt;&lt;/span&gt;&lt;span&gt;COLLATE&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;utf8mb4_unicode_ci;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;3.2 æ³¨å…¥æµ‹è¯•æ•°æ®&lt;a href=&quot;#32-æ³¨å…¥æµ‹è¯•æ•°æ®&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;INSERT INTO&lt;/span&gt;&lt;span&gt; cdk (cdk, content) &lt;/span&gt;&lt;span&gt;VALUES&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&apos;NUZOQ-QTVFM-14YMQ-6PBEP-BYBDJ&apos;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;&apos;1000 coins&apos;&lt;/span&gt;&lt;span&gt;),&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&apos;TH3T3-QTVFM-K8OAC-PSY63-XJOF2&apos;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;&apos;1000 coins&apos;&lt;/span&gt;&lt;span&gt;),&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&apos;UXT9B-QTVFM-TBQ1H-WW664-AWYTJ&apos;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;&apos;1000 coins&apos;&lt;/span&gt;&lt;span&gt;),&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&apos;HZOY6-QTVFM-8ZL53-YNIDE-4A3XN&apos;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;&apos;1000 coins&apos;&lt;/span&gt;&lt;span&gt;),&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&apos;FQM9I-QTVFM-XB6QR-VNCY4-F32PB&apos;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;&apos;1000 coins&apos;&lt;/span&gt;&lt;span&gt;),&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&apos;PXIWX-QTVFM-5LJEJ-KLYSP-6QIUB&apos;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;&apos;1000 coins&apos;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;4.éƒ¨ç½²AKSåç«¯&lt;a href=&quot;#4éƒ¨ç½²aksåç«¯&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;4.1 åç«¯ä»£ç &lt;a href=&quot;#41-åç«¯ä»£ç &quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/chunyiw8080/cdk-backend.git&quot;&gt;https://github.com/chunyiw8080/cdk-backend.git&lt;/a&gt;&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;4.2 ç¼–å†™Dockerfileå¹¶æ‰“åŒ…ä¸ºé•œåƒ&lt;a href=&quot;#42-ç¼–å†™dockerfileå¹¶æ‰“åŒ…ä¸ºé•œåƒ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;FROM python:3.12.2&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;WORKDIR /cdk&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;COPY requirements.txt ./&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;RUN pip install --no-cache-dir -r requirements.txt&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;COPY . .&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ENV PYTHONDONTWRITEBYTECODE=1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ENV PYTHONUNBUFFERED=1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;EXPOSE 8000&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;CMD [&quot;uvicorn&quot;, &quot;app.main:app&quot;, &quot;--host&quot;, &quot;0.0.0.0&quot;, &quot;--port&quot;, &quot;8000&quot;, &quot;--proxy-headers&quot;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;æ‰“åŒ…ä¸ºé•œåƒ&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;docker&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;build&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-t&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;cdkeyappacr.azurecr.io/cdk-backend/backend:3&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-f&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;./deployments/Dockerfile&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;ä¸Šä¼ é•œåƒ&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# é¦–å…ˆç™»å½•Azure Container Registry&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;az&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;login&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;az&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;acr&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;login&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--name&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;cdkeyappacr&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# æ¨é€é•œåƒ&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;docker&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;push&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;cdkeyappacr.azurecr.io/cdk-backend/backend:3&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;4.3 ç¼–å†™Kubernetes deploymentã€serviceå’Œautoscale&lt;a href=&quot;#43-ç¼–å†™kubernetes-deploymentserviceå’Œautoscale&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;---&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;apps/v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Deployment&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;cdk-app&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;labels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;cdk-app&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;replicas&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;selector&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;matchLabels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;cdk-app&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;template&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;labels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;cdk-app&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;containers&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;cdk-app&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;image&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;cdkeyappacr.azurecr.io/cdk-backend/backend:3&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;ports&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;containerPort&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;8000&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;env&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;PYTHONUNBUFFERED&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;1&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;resources&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;27&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;requests&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;28&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;memory&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;128Mi&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;29&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;cpu&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;100m&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;30&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;limits&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;31&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;memory&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;256Mi&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;32&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;cpu&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;500m&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;33&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;livenessProbe&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;34&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;httpGet&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;35&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;path&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/health&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;36&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;port&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;8000&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;37&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;initialDelaySeconds&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;10&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;38&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;periodSeconds&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;15&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;39&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;readinessProbe&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;40&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;httpGet&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;41&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;path&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/health&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;42&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;port&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;8000&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;43&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;initialDelaySeconds&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;5&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;44&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;periodSeconds&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;10&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;45&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;---&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;46&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;47&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Service&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;48&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;49&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;cdk-app-service&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;50&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;51&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;LoadBalancer&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;52&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;ports&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;53&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;port&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;80&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;54&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;targetPort&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;8000&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;55&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;protocol&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;TCP&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;56&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;selector&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;57&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;cdk-app&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;58&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;---&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;59&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;autoscaling/v2&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;60&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;HorizontalPodAutoscaler&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;61&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;62&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;cdk-app-hpa&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;63&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;64&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;scaleTargetRef&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;65&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;apps/v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;66&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Deployment&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;67&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;cdk-app&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;68&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;minReplicas&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;69&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;maxReplicas&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;10&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;70&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;metrics&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;71&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Resource&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;72&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;resource&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;73&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;cpu&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;74&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;target&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;75&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Utilization&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;76&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;averageUtilization&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;70&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;77&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Resource&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;78&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;resource&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;79&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;memory&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;80&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;target&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;81&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Utilization&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;82&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;averageUtilization&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;80&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;4.4 éƒ¨ç½²&lt;a href=&quot;#44-éƒ¨ç½²&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;å°†æœ¬åœ°kubernetesä¸Šä¸‹æ–‡åˆ‡æ¢ä¸ºAKS&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# ç™»å½•&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;az&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;login&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# è®¾ç½®é›†ç¾¤è®¢é˜…&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;az&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;account&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;set&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--subscription&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;your_subscription_id&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# ä¸‹è½½é›†ç¾¤å‡­æ®&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;az&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;aks&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;get-credentials&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--resource-group&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;your_res_group&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--name&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;your_cluster_name&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--overwrite-existing&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# ç¡®ä¿ä½ çš„ä¸Šä¸‹æ–‡åç§°å’ŒAKSä¸€è‡´&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kubectl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;config&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;current-context&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;éƒ¨ç½²&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kubectl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;apply&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-f&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;./deployments/deployment.yaml&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;äº”ã€æµ‹è¯•&lt;a href=&quot;#äº”æµ‹è¯•&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;section&gt;&lt;h2&gt;1. æµ‹è¯•æ¿€æ´»æœ‰æ•ˆCDK&lt;a href=&quot;#1-æµ‹è¯•æ¿€æ´»æœ‰æ•ˆcdk&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;&lt;/p&gt;&lt;figure&gt;&lt;img loading=&quot;lazy&quot; width=&quot;1745&quot; height=&quot;1373&quot; src=&quot;/_astro/3.DbLFuH0I_ZhrLlo.webp&quot; /&gt;&lt;figcaption&gt;æœ‰æ•ˆCDK&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;2. æµ‹è¯•æ¿€æ´»ä¸åˆæ³•çš„CDK&lt;a href=&quot;#2-æµ‹è¯•æ¿€æ´»ä¸åˆæ³•çš„cdk&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;&lt;/p&gt;&lt;figure&gt;&lt;img loading=&quot;lazy&quot; width=&quot;1695&quot; height=&quot;1393&quot; src=&quot;/_astro/5.t0zxtI89_1P90xQ.webp&quot; /&gt;&lt;figcaption&gt;ä¸åˆæ³•çš„CDK&lt;/figcaption&gt;&lt;/figure&gt;
å¯ä»¥å‘ç°è¯·æ±‚åœ¨è¾¹ç¼˜èŠ‚ç‚¹å°±è¢«æ‹’ç»äº†ï¼Œå› ä¸ºæ²¡æœ‰é€šè¿‡å¯†ç å­¦éªŒè¯&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;3. æµ‹è¯•æ¿€æ´»å·²ä½¿ç”¨çš„CDK&lt;a href=&quot;#3-æµ‹è¯•æ¿€æ´»å·²ä½¿ç”¨çš„cdk&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;&lt;/p&gt;&lt;figure&gt;&lt;img loading=&quot;lazy&quot; width=&quot;1709&quot; height=&quot;1357&quot; src=&quot;/_astro/4.DvWr0y7B_Z1zfKWF.webp&quot; /&gt;&lt;figcaption&gt;å·²ä½¿ç”¨çš„CDK&lt;/figcaption&gt;&lt;/figure&gt;
è¿™é‡Œè¯·æ±‚è¿˜æ˜¯èµ°åˆ°åç«¯äº†ï¼Œå› ä¸ºè¿™ä¸ªCDKåœ¨å¯†ç å­¦æ ¡éªŒæ˜¯åˆæ³•çš„ï¼Œè€Œè¾¹ç¼˜èŠ‚ç‚¹ä¸ä¿å­˜CDKçš„ä½¿ç”¨çŠ¶æ€ï¼Œå› æ­¤å¿…é¡»å‘é€åˆ°åç«¯åšäºŒæ¬¡éªŒè¯&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;å…­ã€è¯¥æ¶æ„è§£å†³äº†ä»€ä¹ˆé—®é¢˜&lt;a href=&quot;#å…­è¯¥æ¶æ„è§£å†³äº†ä»€ä¹ˆé—®é¢˜&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;ol&gt;
&lt;li&gt;è¶…è¿‡99%çš„éæ³•ã€æ ¼å¼é”™è¯¯æˆ–æš´åŠ›æšä¸¾è¯·æ±‚åœ¨è¾¹ç¼˜å±‚è¢«æ‹¦æˆªï¼Œæ˜¾è‘—é™ä½åç«¯æœåŠ¡ä¸æ•°æ®åº“å‹åŠ›&lt;/li&gt;
&lt;li&gt;é€šè¿‡æ‰¹æ¬¡ç +KVç¼“å­˜æœºåˆ¶ï¼Œå®ç°å•æ¡KVè®°å½•æ‹’ç»ä¸Šåƒæ¡æ— æ•ˆç¤¼å“ç è¯·æ±‚ï¼Œè¾¹ç¼˜å¤„ç†å¤æ‚åº¦ä¿æŒåœ¨O(1)ï¼Œä¸”æ— éœ€è®¿é—®åç«¯ï¼ˆåœ¨è¿™ä¸ªå®ç°ä¸­KVæ²¡æœ‰å¼•å…¥ï¼Œä¸è¿‡å¯ä»¥è½»æ¾æ‰©å±•ï¼‰&lt;/li&gt;
&lt;li&gt;é…åˆé€Ÿç‡é™åˆ¶ä¸IPé£æ§ç­–ç•¥ï¼Œä½¿ç¤¼å“ç æš´åŠ›æšä¸¾æ”»å‡»çš„å®é™…æˆæœ¬æå‡å¤šä¸ªæ•°é‡çº§&lt;/li&gt;
&lt;li&gt;åœ¨å¤šåœ°åŸŸéƒ¨ç½²åœºæ™¯ä¸‹ï¼Œæ•°æ®åº“è®¿é—®å»¶è¿Ÿå¹³å‡é™ä½çº¦ 10â€“20msï¼ˆè§†èŠ‚ç‚¹ä½ç½®ï¼‰&lt;/li&gt;
&lt;li&gt;åˆ©ç”¨Cloudflareè¾¹ç¼˜é˜²æŠ¤èƒ½åŠ›ï¼Œåœ¨ä½æˆæœ¬æ–¹æ¡ˆä¸‹å³å¯åº”å¯¹ä¸­ç­‰è§„æ¨¡çš„æ¶æ„æµé‡å†²å‡»ï¼Œä¿éšœæœåŠ¡ç¨³å®šæ€§&lt;/li&gt;
&lt;li&gt;åç«¯ä»…å¤„ç†é«˜ä»·å€¼è¯·æ±‚ï¼Œæ•´ä½“äº‘èµ„æºä½¿ç”¨ç‡ä¸æ•°æ®åº“è´Ÿè½½æ˜¾è‘—ä¸‹é™&lt;/li&gt;
&lt;/ol&gt;&lt;/section&gt;</content:encoded></item><item><title>ä»¥çœŸå®ä¸–ç•Œçš„ç½‘ç»œæ•…éšœä¸ºä¾‹ï¼Œåˆ†æå¦‚ä½•é€šè¿‡HTTP response headerå®šä½æ•…éšœåŸŸ</title><link>https://white-festa.net/posts/http_header_analysis/http%E5%93%8D%E5%BA%94%E5%A4%B4%E5%88%86%E6%9E%90/</link><guid isPermaLink="true">https://white-festa.net/posts/http_header_analysis/http%E5%93%8D%E5%BA%94%E5%A4%B4%E5%88%86%E6%9E%90/</guid><description>æœ¬æ–‡ä»¥æ¾³æ´²å¤´éƒ¨é›¶å”®ç½‘ç«™ JB-HIFI çš„çœŸå®å®•æœºäº‹ä»¶ä¸ºæ ·æœ¬ï¼Œæ·±åº¦è§£æå…¶ HTTP å“åº”å¤´ã€‚ä½ å°†çœ‹åˆ°ï¼Œæ— éœ€å†…éƒ¨æ—¥å¿—ï¼Œä»…å‡­å®¢æˆ·ç«¯å¯è§ä¿¡æ¯ï¼Œå³å¯å®Œæˆä»è¾¹ç¼˜åˆ°æºç«™çš„å…¨é“¾è·¯æ•…éšœåŸŸæ¨æ–­ã€‚</description><pubDate>Tue, 18 Nov 2025 00:00:00 GMT</pubDate><content:encoded>&lt;section&gt;&lt;h1&gt;æ¡ˆä¾‹ä¸€ã€æ­£ç¡®çš„å“åº”å¤´ - JBHIFI&lt;a href=&quot;#æ¡ˆä¾‹ä¸€æ­£ç¡®çš„å“åº”å¤´---jbhifi&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;* Host www.jbhifi.com.au:443 was resolved.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# æˆåŠŸè§£æåŸŸååˆ°443ç«¯å£&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;* IPv6: (none)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;* IPv4: 172.67.154.62, 104.21.4.235&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# æºç«™ä¸æä¾›IPv6åœ°å€ï¼Œä½†æä¾›ä¸¤ä¸ªIPv4åœ°å€&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;*   Trying 172.67.154.62:443...&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# å°è¯•è¿æ¥ç¬¬ä¸€ä¸ªIPåœ°å€&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;* ALPN: curl offers h2,http/1.1 (ALPN: Application Layer Protocol Negotiation - åº”ç”¨å±‚åè®®åå•†)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# å®¢æˆ·ç«¯ï¼šcurlå‘½ä»¤æä¾›å®ƒæ‰€æ”¯æŒçš„ä¸¤ç§HTTPåè®®&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;* TLSv1.3 (OUT), TLS handshake, Client hello (1):&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# å®¢æˆ·ç«¯å‘é€æ¡æ‰‹ä¿¡æ¯&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;*  CAfile: /etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;*  CApath: none&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# ç”¨äºéªŒè¯æœåŠ¡ç«¯è¯ä¹¦çš„æœ¬åœ°è¯ä¹¦è·¯å¾„&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;* TLSv1.3 (IN), TLS handshake, Server hello (2):&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# æœåŠ¡ç«¯å‘é€æ¡æ‰‹ä¿¡æ¯&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;* TLSv1.3 (IN), TLS handshake, Encrypted Extensions (8):&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# åœ¨Client hello (1)å’ŒServer hello (2)ä¹‹åï¼ŒHTTPåŠ å¯†ä¿¡é“å»ºç«‹å®Œæˆï¼Œä¹‹åæ‰€æœ‰çš„å†…å®¹éƒ½æ˜¯é€šè¿‡è¯¥ä¿¡é“ä¼ è¾“çš„&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# Encrypted Extensionså°†åœ¨æ¡æ‰‹åˆæœŸæ— æ³•åŠ å¯†ã€ä½†åˆä¸åº”è¯¥ç»§ç»­æ˜æ–‡æš´éœ²çš„æ‰©å±•ä¿¡æ¯æ”¾åˆ°åŠ å¯†é€šé“é‡Œå‘é€ï¼Œæ¯”å¦‚åè®®åå•†ç»“æœã€æ”¯æŒçš„ç­¾åç®—æ³•ç­‰å„ç§å‚æ•°&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;* TLSv1.3 (IN), TLS handshake, Certificate (11):&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# æœåŠ¡å™¨çš„æ•°å­—è¯ä¹¦é“¾&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;* TLSv1.3 (IN), TLS handshake, CERT verify (15):&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# æœåŠ¡å™¨çš„æ•°å­—ç­¾åã€‚&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;* TLSv1.3 (IN), TLS handshake, Finished (20):&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# å®¢æˆ·ç«¯æœ€åä¸€æ¬¡æ¡æ‰‹&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;* TLSv1.3 (OUT), TLS change cipher, Change cipher spec (1):&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;27&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# åœ¨TLS 1.2ä¸­ï¼šåŒæ–¹ä¸‹ä¸€æ¡æ¶ˆæ¯å¼€å§‹å°†ä½¿ç”¨åˆšåˆšåå•†å¥½çš„å¯†é’¥ä¸åŠ å¯†ç®—æ³•ï¼›åœ¨TLS1.3ä¸­ï¼šTLS 1.3 å®Œå…¨ä¸å†ä½¿ç”¨ CCS æ¥åˆ‡æ¢åŠ å¯†ã€‚æ¡æ‰‹è¿‡ç¨‹æ˜¯â€œè‡ªåŠ¨â€è¿›å…¥åŠ å¯†çŠ¶æ€çš„ã€‚CCS åœ¨ TLS 1.3 ä¸­å˜æˆäº†å‡ ä¹â€œæ— æ„ä¹‰çš„å…¼å®¹å ä½ç¬¦â€ï¼ˆä¸ºäº†å…¼å®¹æ—§çš„ä¸­é—´è®¾å¤‡ï¼‰ã€‚&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;28&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;* TLSv1.3 (OUT), TLS handshake, Finished (20):&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;29&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# æœåŠ¡ç«¯æœ€åä¸€æ¬¡æ¡æ‰‹&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;30&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# åœ¨1.3ä¸­ï¼ŒåŒæ–¹åœ¨ç»“æŸæ¡æ‰‹åä»å¯ä»¥å‘é€æ¡æ‰‹ç›¸å…³ä½†ä¸å±äºæ¡æ‰‹é˜¶æ®µçš„æ¶ˆæ¯ï¼Œæ¯”å¦‚NewSessionTicketï¼›ä½†æ˜¯åœ¨1.2ä¸­ï¼ŒTLS handshake, Finishedæ„å‘³ç€æ¡æ‰‹æ­£å¼ç»“æŸ&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;31&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;* SSL connection using TLSv1.3 / TLS_AES_256_GCM_SHA384 / x25519 / id-ecPublicKey&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;32&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;* ALPN: server accepted h2&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;33&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# åº”ç”¨å±‚åè®®åå•†ç»“æœï¼šä½¿ç”¨HTTP/2åè®®&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;34&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;* Server certificate:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;35&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;*  subject: CN=www.jbhifi.com.au&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;36&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;*  start date: Nov 21 02:14:02 2025 GMT&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;37&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;*  expire date: Feb 19 03:14:00 2026 GMT&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;38&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;*  subjectAltName: host &quot;www.jbhifi.com.au&quot; matched cert&apos;s &quot;www.jbhifi.com.au&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;39&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;*  issuer: C=US; O=Google Trust Services; CN=WE1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;40&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;*  SSL certificate verify ok.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;41&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# æœåŠ¡ç«¯è¯ä¹¦éªŒè¯ç»“æœ&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;42&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;*   Certificate level 0: Public key type EC/prime256v1 (256/128 Bits/secBits), signed using ecdsa-with-SHA256&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;43&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;*   Certificate level 1: Public key type EC/prime256v1 (256/128 Bits/secBits), signed using ecdsa-with-SHA384&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;44&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;*   Certificate level 2: Public key type EC/secp384r1 (384/192 Bits/secBits), signed using ecdsa-with-SHA384&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;45&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# è¯ä¹¦é“¾å±‚çº§ - Level 2ï¼šæ ¹è¯ä¹¦&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;46&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;* Connected to www.jbhifi.com.au (172.67.154.62) port 443&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;47&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;* using HTTP/2&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;48&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;* [&lt;/span&gt;&lt;span&gt;HTTP/&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;] [&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;] OPENED stream for https:&lt;/span&gt;&lt;span&gt;//www.jbhifi.com.au/&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;49&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;* [&lt;/span&gt;&lt;span&gt;HTTP/&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;] [&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;] [&lt;/span&gt;&lt;span&gt;:method:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;HEAD&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;50&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;* [&lt;/span&gt;&lt;span&gt;HTTP/&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;] [&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;] [&lt;/span&gt;&lt;span&gt;:scheme:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;https&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;51&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;* [&lt;/span&gt;&lt;span&gt;HTTP/&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;] [&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;] [&lt;/span&gt;&lt;span&gt;:authority:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;www.jbhifi.com.au&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;52&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;* [&lt;/span&gt;&lt;span&gt;HTTP/&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;] [&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;] [&lt;/span&gt;&lt;span&gt;:path:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;53&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;* [&lt;/span&gt;&lt;span&gt;HTTP/&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;] [&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;] [&lt;/span&gt;&lt;span&gt;user-agent:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;curl/&lt;/span&gt;&lt;span&gt;8.11&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;54&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;* [&lt;/span&gt;&lt;span&gt;HTTP/&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;] [&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;] [&lt;/span&gt;&lt;span&gt;accept:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;*&lt;/span&gt;&lt;span&gt;/*]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;55&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;gt; HEAD / HTTP/2&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;56&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;gt; Host: www.jbhifi.com.au&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;57&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;gt; User-Agent: curl/8.11.1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;58&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;gt; Accept: */&lt;/span&gt;&lt;span&gt;*&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;59&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;60&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;*&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Request&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;completely&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;sent&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;off&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;61&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;*&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;TLSv&lt;/span&gt;&lt;span&gt;1.3&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;(IN)&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;TLS&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;handshake&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;Newsession&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Ticket&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;4&lt;/span&gt;&lt;span&gt;):&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;62&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;*&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;TLSv&lt;/span&gt;&lt;span&gt;1.3&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;(IN)&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;TLS&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;handshake&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;Newsession&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Ticket&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;4&lt;/span&gt;&lt;span&gt;):&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;63&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;HTTP/&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;103&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;64&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;HTTP/&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;103&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;65&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;link:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&amp;lt;https:&lt;/span&gt;&lt;span&gt;//cdn.shopify.com&amp;gt;; rel=preconnect, &amp;lt;https://cdn.shopify.com&amp;gt;; crossorigin; rel=preconnect&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;66&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;link:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&amp;lt;https:&lt;/span&gt;&lt;span&gt;//cdn.shopify.com&amp;gt;; rel=preconnect, &amp;lt;https://cdn.shopify.com&amp;gt;; crossorigin; rel=preconnect&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;67&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;68&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;ç¬¬ä¸€ä¸ªå“åº”éƒ¨åˆ†ï¼šè¿”å›ä¸Šæ¸¸æºç«™åœ°å€ä»¥åŠ&lt;/span&gt;&lt;span&gt;103&lt;/span&gt;&lt;span&gt;çŠ¶æ€ç ï¼Œå‘ŠçŸ¥å®¢æˆ·ç«¯å¯ä»¥åœ¨ç­‰å¾…æœŸé—´é¢„è¿æ¥å’Œé¢„è§£æä¸Šæ¸¸æºç«™çš„å†…å®¹ï¼ˆè¿™ä¸ªéƒ¨åˆ†å…¶å®æ˜¯ç”±è¾¹ç¼˜èŠ‚ç‚¹é€šè¿‡æ—§ç¼“å­˜å¾—åˆ°çš„ï¼‰&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;69&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;HTTP/&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;200&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;70&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;HTTP/&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;200&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;71&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;date:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Sun&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;23&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Nov&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;2025&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;00&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;40&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;47&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;GMT&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;72&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;date:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Sun&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;23&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Nov&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;2025&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;00&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;40&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;47&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;GMT&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;73&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;content-type:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;text/html;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;charset=utf&lt;/span&gt;&lt;span&gt;-8&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;74&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;content-type:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;text/html;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;charset=utf&lt;/span&gt;&lt;span&gt;-8&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;75&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;x-download-options:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;noopen&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;76&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;x-download-options:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;noopen&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;77&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;x-content-type-options:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;nosniff&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;78&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;x-content-type-options:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;nosniff&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;79&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;server:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;cloudflare&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;80&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;server:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;cloudflare&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;81&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;ç½‘ç«™ä½¿ç”¨äº†Cloudflareçš„æœåŠ¡ï¼Œè¯·æ±‚å®é™…ä¸Šå…ˆåˆ°è¾¾äº†Cloudflareçš„è¾¹ç¼˜æœåŠ¡å™¨ï¼Œè€Œä¸æ˜¯ç›´æ¥è®¿é—®æºç«™&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;82&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;x-sorting-hat-podid:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;200&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;83&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;x-sorting-hat-podid:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;200&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;84&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;x-sorting-hat-shopid:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;2498035810&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;85&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;x-sorting-hat-shopid:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;2498035810&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;86&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;x-storefront-renderer-rendered:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;87&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;x-storefront-renderer-rendered:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;88&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;nel:&lt;/span&gt;&lt;span&gt; {&lt;/span&gt;&lt;span&gt;&quot;success_fraction&quot;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;0.01&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;&quot;report_to&quot;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;&quot;cf-nel&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;&quot;max_age&quot;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;604800&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;89&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;nel:&lt;/span&gt;&lt;span&gt; {&lt;/span&gt;&lt;span&gt;&quot;success_fraction&quot;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;0.01&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;&quot;report_to&quot;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;&quot;cf-nel&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;&quot;max_age&quot;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;604800&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;90&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;x-xss-protection:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;mode=block&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;91&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;x-xss-protection:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;mode=block&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;92&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;link:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&amp;lt;https:&lt;/span&gt;&lt;span&gt;//cdn.shopify.com&amp;gt;; rel=&quot;preconnect&quot;, &amp;lt;https://cdn.shopify.com&amp;gt;; rel=&quot;preconnect&quot;; crossorigin&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;93&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;link:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&amp;lt;https:&lt;/span&gt;&lt;span&gt;//cdn.shopify.com&amp;gt;; rel=&quot;preconnect&quot;, &amp;lt;https://cdn.shopify.com&amp;gt;; rel=&quot;preconnect&quot;; crossorigin&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;94&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;speculation-rules:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;/cdn/shopifycloud/storefront/assets/storefront/storefronts.specrules-dd5621a1.json&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;95&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;speculation-rules:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;/cdn/shopifycloud/storefront/assets/storefront/storefronts.specrules-dd5621a1.json&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;96&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;x-permitted-cross-domain-policies:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;none&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;97&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;x-permitted-cross-domain-policies:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;none&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;98&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;shopify-complexity-score:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;630&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;99&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;shopify-complexity-score:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;630&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;100&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;x-frame-options:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;DENY&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;101&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;x-frame-options:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;DENY&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;102&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;content-security-policy:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;block-all-mixed-content;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;frame-ancestors&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;none&apos;;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;upgrade-insecure-requests;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;103&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;content-security-policy:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;block-all-mixed-content;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;frame-ancestors&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;none&apos;;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;upgrade-insecure-requests;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;104&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;strict-transport-security:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;max-age=&lt;/span&gt;&lt;span&gt;7889238&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;105&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;strict-transport-security:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;max-age=&lt;/span&gt;&lt;span&gt;7889238&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;106&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;HTTP&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Strict&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Transport&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Security&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;è¦æ±‚æµè§ˆå™¨åœ¨æ¥ä¸‹æ¥çš„&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;7889238&lt;/span&gt;&lt;span&gt;ç§’ï¼ˆçº¦&lt;/span&gt;&lt;span&gt;91&lt;/span&gt;&lt;span&gt;å¤©ï¼‰å†…ï¼Œæ‰€æœ‰è®¿é—®éƒ½å¿…é¡»é€šè¿‡&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;HTTPS&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;è¿›è¡Œï¼Œå³ä½¿ç”¨æˆ·æ‰‹åŠ¨è¾“å…¥HTTPå‰ç¼€ä¹Ÿä¸è¡Œ&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;107&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;x-shopid:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;2498035810&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;108&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;x-shopid:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;2498035810&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;109&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;x-shardid:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;200&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;110&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;x-shardid:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;200&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;111&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;vary:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Accept&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;112&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;vary:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Accept&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;113&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;alt-svc:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;clear&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;114&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;alt-svc:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;clear&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;115&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;content-language:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;en-AU&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;116&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;content-language:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;en-AU&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;117&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;powered-by:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Shopify&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;118&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;powered-by:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Shopify&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;119&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;server-timing:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;processing;dur=&lt;/span&gt;&lt;span&gt;65&lt;/span&gt;&lt;span&gt;;desc=&lt;/span&gt;&lt;span&gt;&quot;gc:3&quot;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;db;dur=&lt;/span&gt;&lt;span&gt;5&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;asn;desc=&lt;/span&gt;&lt;span&gt;&quot;38195&quot;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;edge;desc=&lt;/span&gt;&lt;span&gt;&quot;MEL&quot;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;country;desc=&lt;/span&gt;&lt;span&gt;&quot;AU&quot;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;theme;desc=&lt;/span&gt;&lt;span&gt;&quot;124174237897&quot;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;pageType;desc=&lt;/span&gt;&lt;span&gt;&quot;index&quot;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;servedBy;desc=&lt;/span&gt;&lt;span&gt;&quot;qtf2&quot;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;requestID;desc=&lt;/span&gt;&lt;span&gt;&quot;0426ca1a-3037-49c5-bd6b-23316b9fc060-1763858447&quot;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;_y;desc=&lt;/span&gt;&lt;span&gt;&quot;1fb99192-c832-461e-9fb1-a65ef63a3bb4&quot;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;_s;desc=&lt;/span&gt;&lt;span&gt;&quot;931f14bd-2507-4174-9e36-76965059cf8f&quot;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;_cmp;desc=&lt;/span&gt;&lt;span&gt;&quot;3.AMPS_AUVIC_f_f_Mmy0NNj2SP6hgsc2JxNRjw&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;120&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;server-timing:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;processing;dur=&lt;/span&gt;&lt;span&gt;65&lt;/span&gt;&lt;span&gt;;desc=&lt;/span&gt;&lt;span&gt;&quot;gc:3&quot;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;db;dur=&lt;/span&gt;&lt;span&gt;5&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;asn;desc=&lt;/span&gt;&lt;span&gt;&quot;38195&quot;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;edge;desc=&lt;/span&gt;&lt;span&gt;&quot;MEL&quot;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;country;desc=&lt;/span&gt;&lt;span&gt;&quot;AU&quot;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;theme;desc=&lt;/span&gt;&lt;span&gt;&quot;124174237897&quot;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;pageType;desc=&lt;/span&gt;&lt;span&gt;&quot;index&quot;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;servedBy;desc=&lt;/span&gt;&lt;span&gt;&quot;qtf2&quot;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;requestID;desc=&lt;/span&gt;&lt;span&gt;&quot;0426ca1a-3037-49c5-bd6b-23316b9fc060-1763858447&quot;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;_y;desc=&lt;/span&gt;&lt;span&gt;&quot;1fb99192-c832-461e-9fb1-a65ef63a3bb4&quot;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;_s;desc=&lt;/span&gt;&lt;span&gt;&quot;931f14bd-2507-4174-9e36-76965059cf8f&quot;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;_cmp;desc=&lt;/span&gt;&lt;span&gt;&quot;3.AMPS_AUVIC_f_f_Mmy0NNj2SP6hgsc2JxNRjw&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;121&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;server-timing:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;cfRequestDuration;dur=&lt;/span&gt;&lt;span&gt;101.000071&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;122&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;server-timing:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;cfRequestDuration;dur=&lt;/span&gt;&lt;span&gt;101.000071&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;123&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;x-dc:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;gcp-australia-southeast&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;gcp-australia-southeast&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;gcp-australia-southeast&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;124&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;x-dc:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;gcp-australia-southeast&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;gcp-australia-southeast&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;gcp-australia-southeast&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;125&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;x-request-id:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;0426&lt;/span&gt;&lt;span&gt;ca&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;-3037-49&lt;/span&gt;&lt;span&gt;c&lt;/span&gt;&lt;span&gt;5&lt;/span&gt;&lt;span&gt;-bd&lt;/span&gt;&lt;span&gt;6&lt;/span&gt;&lt;span&gt;b&lt;/span&gt;&lt;span&gt;-23316&lt;/span&gt;&lt;span&gt;b&lt;/span&gt;&lt;span&gt;9&lt;/span&gt;&lt;span&gt;fc&lt;/span&gt;&lt;span&gt;060-1763858447&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;126&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;x-request-id:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;0426&lt;/span&gt;&lt;span&gt;ca&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;-3037-49&lt;/span&gt;&lt;span&gt;c&lt;/span&gt;&lt;span&gt;5&lt;/span&gt;&lt;span&gt;-bd&lt;/span&gt;&lt;span&gt;6&lt;/span&gt;&lt;span&gt;b&lt;/span&gt;&lt;span&gt;-23316&lt;/span&gt;&lt;span&gt;b&lt;/span&gt;&lt;span&gt;9&lt;/span&gt;&lt;span&gt;fc&lt;/span&gt;&lt;span&gt;060-1763858447&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;127&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;cf-cache-status:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;DYNAMIC&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;128&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;cf-cache-status:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;DYNAMIC&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;129&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Cloudflare&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;ç¼“å­˜çŠ¶æ€ä¸ºåŠ¨æ€ï¼Œè¡¨ç¤ºè¯¥è¯·æ±‚çš„ç»“æœæ˜¯åŠ¨æ€ç”Ÿæˆçš„ï¼Œæœªä»ç¼“å­˜ä¸­æä¾›&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;130&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;report-to:&lt;/span&gt;&lt;span&gt; {&lt;/span&gt;&lt;span&gt;&quot;endpoints&quot;&lt;/span&gt;&lt;span&gt;:[{&lt;/span&gt;&lt;span&gt;&quot;url&quot;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;&quot;https:&lt;/span&gt;&lt;span&gt;\/\/&lt;/span&gt;&lt;span&gt;a.nel.cloudflare.com&lt;/span&gt;&lt;span&gt;\/&lt;/span&gt;&lt;span&gt;report&lt;/span&gt;&lt;span&gt;\/&lt;/span&gt;&lt;span&gt;v4?s=RuvC51YPALi2HsPfxUleVK35sf1HdlPV8Z8ZOEQ%2Fjcg%2FBGqX2zI5OMci1%2FZH8QXT0eaAhoH4Fn7AmVdG4LcI7trQFW3qlz70oPREXfNmOa8T8bszd08EHsVlwBdzYRrHQ%2FWB&quot;&lt;/span&gt;&lt;span&gt;}],&lt;/span&gt;&lt;span&gt;&quot;group&quot;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;&quot;cf-nel&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;&quot;max_age&quot;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;604800&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;131&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;report-to:&lt;/span&gt;&lt;span&gt; {&lt;/span&gt;&lt;span&gt;&quot;endpoints&quot;&lt;/span&gt;&lt;span&gt;:[{&lt;/span&gt;&lt;span&gt;&quot;url&quot;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;&quot;https:&lt;/span&gt;&lt;span&gt;\/\/&lt;/span&gt;&lt;span&gt;a.nel.cloudflare.com&lt;/span&gt;&lt;span&gt;\/&lt;/span&gt;&lt;span&gt;report&lt;/span&gt;&lt;span&gt;\/&lt;/span&gt;&lt;span&gt;v4?s=RuvC51YPALi2HsPfxUleVK35sf1HdlPV8Z8ZOEQ%2Fjcg%2FBGqX2zI5OMci1%2FZH8QXT0eaAhoH4Fn7AmVdG4LcI7trQFW3qlz70oPREXfNmOa8T8bszd08EHsVlwBdzYRrHQ%2FWB&quot;&lt;/span&gt;&lt;span&gt;}],&lt;/span&gt;&lt;span&gt;&quot;group&quot;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;&quot;cf-nel&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;&quot;max_age&quot;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;604800&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;132&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;set-cookie:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;localization=AU;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Path=/;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Expires=Mon&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;23&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Nov&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;2026&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;00&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;40&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;47&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;GMT&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;133&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;set-cookie:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;localization=AU;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Path=/;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Expires=Mon&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;23&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Nov&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;2026&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;00&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;40&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;47&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;GMT&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;134&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;set-cookie:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;cart_currency=AUD;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Path=/;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Expires=Sun&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;07&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Dec&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;2025&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;00&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;40&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;47&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;GMT&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;135&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;set-cookie:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;cart_currency=AUD;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Path=/;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Expires=Sun&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;07&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Dec&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;2025&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;00&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;40&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;47&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;GMT&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;136&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;set-cookie:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;_shopify_y=&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;fb&lt;/span&gt;&lt;span&gt;99192&lt;/span&gt;&lt;span&gt;-c&lt;/span&gt;&lt;span&gt;832-461e-9&lt;/span&gt;&lt;span&gt;fb&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;-a&lt;/span&gt;&lt;span&gt;65&lt;/span&gt;&lt;span&gt;ef&lt;/span&gt;&lt;span&gt;63&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;3&lt;/span&gt;&lt;span&gt;bb&lt;/span&gt;&lt;span&gt;4&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;SameSite=Lax;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Path=/;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Domain=jbhifi.com.au;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Expires=Mon&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;23&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Nov&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;2026&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;06&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;40&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;47&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;GMT&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;137&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;set-cookie:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;_shopify_y=&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;fb&lt;/span&gt;&lt;span&gt;99192&lt;/span&gt;&lt;span&gt;-c&lt;/span&gt;&lt;span&gt;832-461e-9&lt;/span&gt;&lt;span&gt;fb&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;-a&lt;/span&gt;&lt;span&gt;65&lt;/span&gt;&lt;span&gt;ef&lt;/span&gt;&lt;span&gt;63&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;3&lt;/span&gt;&lt;span&gt;bb&lt;/span&gt;&lt;span&gt;4&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;SameSite=Lax;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Path=/;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Domain=jbhifi.com.au;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Expires=Mon&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;23&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Nov&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;2026&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;06&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;40&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;47&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;GMT&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;138&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;set-cookie:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;_shopify_s=&lt;/span&gt;&lt;span&gt;931&lt;/span&gt;&lt;span&gt;f&lt;/span&gt;&lt;span&gt;14&lt;/span&gt;&lt;span&gt;bd&lt;/span&gt;&lt;span&gt;-2507-4174-9e36-76965059&lt;/span&gt;&lt;span&gt;cf&lt;/span&gt;&lt;span&gt;8&lt;/span&gt;&lt;span&gt;f;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;SameSite=Lax;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Path=/;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Domain=jbhifi.com.au;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Expires=Sun&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;23&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Nov&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;2025&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;01&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;10&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;47&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;GMT&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;139&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;set-cookie:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;_shopify_s=&lt;/span&gt;&lt;span&gt;931&lt;/span&gt;&lt;span&gt;f&lt;/span&gt;&lt;span&gt;14&lt;/span&gt;&lt;span&gt;bd&lt;/span&gt;&lt;span&gt;-2507-4174-9e36-76965059&lt;/span&gt;&lt;span&gt;cf&lt;/span&gt;&lt;span&gt;8&lt;/span&gt;&lt;span&gt;f;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;SameSite=Lax;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Path=/;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Domain=jbhifi.com.au;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Expires=Sun&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;23&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Nov&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;2025&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;01&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;10&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;47&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;GMT&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;140&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;set-cookie:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;_shopify_essential=:AZquJ_&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;WAAEASOX&lt;/span&gt;&lt;span&gt;7&lt;/span&gt;&lt;span&gt;TWlJmhIlWC&lt;/span&gt;&lt;span&gt;5&lt;/span&gt;&lt;span&gt;WHepgd&lt;/span&gt;&lt;span&gt;8&lt;/span&gt;&lt;span&gt;oe&lt;/span&gt;&lt;span&gt;9&lt;/span&gt;&lt;span&gt;O&lt;/span&gt;&lt;span&gt;9&lt;/span&gt;&lt;span&gt;cEZHJDsW&lt;/span&gt;&lt;span&gt;8&lt;/span&gt;&lt;span&gt;A&lt;/span&gt;&lt;span&gt;8&lt;/span&gt;&lt;span&gt;FlFz&lt;/span&gt;&lt;span&gt;76&lt;/span&gt;&lt;span&gt;zLBcZsOjHPJIdRPpu&lt;/span&gt;&lt;span&gt;5&lt;/span&gt;&lt;span&gt;yLJSy_pk&lt;/span&gt;&lt;span&gt;7&lt;/span&gt;&lt;span&gt;TfkwIyHza&lt;/span&gt;&lt;span&gt;4&lt;/span&gt;&lt;span&gt;C&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;qVkpZhyNvAA&lt;/span&gt;&lt;span&gt;7&lt;/span&gt;&lt;span&gt;TPSeZ&lt;/span&gt;&lt;span&gt;5&lt;/span&gt;&lt;span&gt;ZivS&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;mHrOUfvrkGhJ&lt;/span&gt;&lt;span&gt;8&lt;/span&gt;&lt;span&gt;ncIn&lt;/span&gt;&lt;span&gt;27&lt;/span&gt;&lt;span&gt;iWgJ&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;ei&lt;/span&gt;&lt;span&gt;8&lt;/span&gt;&lt;span&gt;hxpS&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;btPNrM-TpPZzAOmX_wb&lt;/span&gt;&lt;span&gt;6&lt;/span&gt;&lt;span&gt;FqLNg&lt;/span&gt;&lt;span&gt;5&lt;/span&gt;&lt;span&gt;h&lt;/span&gt;&lt;span&gt;7&lt;/span&gt;&lt;span&gt;zfJ&lt;/span&gt;&lt;span&gt;5&lt;/span&gt;&lt;span&gt;yjSoRI&lt;/span&gt;&lt;span&gt;9&lt;/span&gt;&lt;span&gt;BYkCezAlEyISjrMQlOK&lt;/span&gt;&lt;span&gt;7&lt;/span&gt;&lt;span&gt;wizLn&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;V&lt;/span&gt;&lt;span&gt;3&lt;/span&gt;&lt;span&gt;f&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;_&lt;/span&gt;&lt;span&gt;30&lt;/span&gt;&lt;span&gt;QjshEJyCwNdLxgrF&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;Eus&lt;/span&gt;&lt;span&gt;35&lt;/span&gt;&lt;span&gt;l&lt;/span&gt;&lt;span&gt;3&lt;/span&gt;&lt;span&gt;HV&lt;/span&gt;&lt;span&gt;7&lt;/span&gt;&lt;span&gt;HG&lt;/span&gt;&lt;span&gt;8&lt;/span&gt;&lt;span&gt;XETTKRMDyWTBsE&lt;/span&gt;&lt;span&gt;3&lt;/span&gt;&lt;span&gt;l&lt;/span&gt;&lt;span&gt;4&lt;/span&gt;&lt;span&gt;He&lt;/span&gt;&lt;span&gt;59&lt;/span&gt;&lt;span&gt;zkPTuMQsYpvrMX&lt;/span&gt;&lt;span&gt;6&lt;/span&gt;&lt;span&gt;EBfYf&lt;/span&gt;&lt;span&gt;4&lt;/span&gt;&lt;span&gt;fJKFh&lt;/span&gt;&lt;span&gt;6&lt;/span&gt;&lt;span&gt;le&lt;/span&gt;&lt;span&gt;5&lt;/span&gt;&lt;span&gt;Tz&lt;/span&gt;&lt;span&gt;8&lt;/span&gt;&lt;span&gt;Y:;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;HttpOnly;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;SameSite=Lax;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Secure;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Path=/;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Max-Age=&lt;/span&gt;&lt;span&gt;31536000&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;141&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;set-cookie:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;_shopify_essential=:AZquJ_&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;WAAEASOX&lt;/span&gt;&lt;span&gt;7&lt;/span&gt;&lt;span&gt;TWlJmhIlWC&lt;/span&gt;&lt;span&gt;5&lt;/span&gt;&lt;span&gt;WHepgd&lt;/span&gt;&lt;span&gt;8&lt;/span&gt;&lt;span&gt;oe&lt;/span&gt;&lt;span&gt;9&lt;/span&gt;&lt;span&gt;O&lt;/span&gt;&lt;span&gt;9&lt;/span&gt;&lt;span&gt;cEZHJDsW&lt;/span&gt;&lt;span&gt;8&lt;/span&gt;&lt;span&gt;A&lt;/span&gt;&lt;span&gt;8&lt;/span&gt;&lt;span&gt;FlFz&lt;/span&gt;&lt;span&gt;76&lt;/span&gt;&lt;span&gt;zLBcZsOjHPJIdRPpu&lt;/span&gt;&lt;span&gt;5&lt;/span&gt;&lt;span&gt;yLJSy_pk&lt;/span&gt;&lt;span&gt;7&lt;/span&gt;&lt;span&gt;TfkwIyHza&lt;/span&gt;&lt;span&gt;4&lt;/span&gt;&lt;span&gt;C&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;qVkpZhyNvAA&lt;/span&gt;&lt;span&gt;7&lt;/span&gt;&lt;span&gt;TPSeZ&lt;/span&gt;&lt;span&gt;5&lt;/span&gt;&lt;span&gt;ZivS&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;mHrOUfvrkGhJ&lt;/span&gt;&lt;span&gt;8&lt;/span&gt;&lt;span&gt;ncIn&lt;/span&gt;&lt;span&gt;27&lt;/span&gt;&lt;span&gt;iWgJ&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;ei&lt;/span&gt;&lt;span&gt;8&lt;/span&gt;&lt;span&gt;hxpS&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;btPNrM-TpPZzAOmX_wb&lt;/span&gt;&lt;span&gt;6&lt;/span&gt;&lt;span&gt;FqLNg&lt;/span&gt;&lt;span&gt;5&lt;/span&gt;&lt;span&gt;h&lt;/span&gt;&lt;span&gt;7&lt;/span&gt;&lt;span&gt;zfJ&lt;/span&gt;&lt;span&gt;5&lt;/span&gt;&lt;span&gt;yjSoRI&lt;/span&gt;&lt;span&gt;9&lt;/span&gt;&lt;span&gt;BYkCezAlEyISjrMQlOK&lt;/span&gt;&lt;span&gt;7&lt;/span&gt;&lt;span&gt;wizLn&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;V&lt;/span&gt;&lt;span&gt;3&lt;/span&gt;&lt;span&gt;f&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;_&lt;/span&gt;&lt;span&gt;30&lt;/span&gt;&lt;span&gt;QjshEJyCwNdLxgrF&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;Eus&lt;/span&gt;&lt;span&gt;35&lt;/span&gt;&lt;span&gt;l&lt;/span&gt;&lt;span&gt;3&lt;/span&gt;&lt;span&gt;HV&lt;/span&gt;&lt;span&gt;7&lt;/span&gt;&lt;span&gt;HG&lt;/span&gt;&lt;span&gt;8&lt;/span&gt;&lt;span&gt;XETTKRMDyWTBsE&lt;/span&gt;&lt;span&gt;3&lt;/span&gt;&lt;span&gt;l&lt;/span&gt;&lt;span&gt;4&lt;/span&gt;&lt;span&gt;He&lt;/span&gt;&lt;span&gt;59&lt;/span&gt;&lt;span&gt;zkPTuMQsYpvrMX&lt;/span&gt;&lt;span&gt;6&lt;/span&gt;&lt;span&gt;EBfYf&lt;/span&gt;&lt;span&gt;4&lt;/span&gt;&lt;span&gt;fJKFh&lt;/span&gt;&lt;span&gt;6&lt;/span&gt;&lt;span&gt;le&lt;/span&gt;&lt;span&gt;5&lt;/span&gt;&lt;span&gt;Tz&lt;/span&gt;&lt;span&gt;8&lt;/span&gt;&lt;span&gt;Y:;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;HttpOnly;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;SameSite=Lax;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Secure;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Path=/;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Max-Age=&lt;/span&gt;&lt;span&gt;31536000&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;142&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;set-cookie:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;_shopify_analytics=:AZquJ_&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;oAAEAM&lt;/span&gt;&lt;span&gt;9&lt;/span&gt;&lt;span&gt;UbkBnz&lt;/span&gt;&lt;span&gt;7&lt;/span&gt;&lt;span&gt;Nr_acH-aKE&lt;/span&gt;&lt;span&gt;9&lt;/span&gt;&lt;span&gt;s&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;vD_DsFDSBVd&lt;/span&gt;&lt;span&gt;3&lt;/span&gt;&lt;span&gt;An_Bod&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;m&lt;/span&gt;&lt;span&gt;3&lt;/span&gt;&lt;span&gt;sITODbuwcfqy&lt;/span&gt;&lt;span&gt;7&lt;/span&gt;&lt;span&gt;WQ:;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;HttpOnly;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;SameSite=Lax;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Secure;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Path=/;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Max-Age=&lt;/span&gt;&lt;span&gt;31536000&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;143&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;set-cookie:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;_shopify_analytics=:AZquJ_&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;oAAEAM&lt;/span&gt;&lt;span&gt;9&lt;/span&gt;&lt;span&gt;UbkBnz&lt;/span&gt;&lt;span&gt;7&lt;/span&gt;&lt;span&gt;Nr_acH-aKE&lt;/span&gt;&lt;span&gt;9&lt;/span&gt;&lt;span&gt;s&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;vD_DsFDSBVd&lt;/span&gt;&lt;span&gt;3&lt;/span&gt;&lt;span&gt;An_Bod&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;m&lt;/span&gt;&lt;span&gt;3&lt;/span&gt;&lt;span&gt;sITODbuwcfqy&lt;/span&gt;&lt;span&gt;7&lt;/span&gt;&lt;span&gt;WQ:;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;HttpOnly;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;SameSite=Lax;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Secure;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Path=/;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Max-Age=&lt;/span&gt;&lt;span&gt;31536000&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;144&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;æœåŠ¡å™¨è®¾ç½®äº†å¤šä¸ª&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Cookieï¼Œç”¨äºè·Ÿè¸ªç”¨æˆ·ä¼šè¯ã€æœ¬åœ°åŒ–è®¾ç½®ç­‰ç­‰&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;145&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;cf-ray:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;9&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;c&lt;/span&gt;&lt;span&gt;9e021852189&lt;/span&gt;&lt;span&gt;f-MEL&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;146&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;cf-ray:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;9&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;c&lt;/span&gt;&lt;span&gt;9e021852189&lt;/span&gt;&lt;span&gt;f-MEL&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;147&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;ä½¿ç”¨äº†CloudFlareåœ¨å¢¨å°”æœ¬åœ°åŒºçš„è¾¹ç¼˜è®¡ç®—èŠ‚ç‚¹&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;148&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;149&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;å“åº”çš„ç¬¬äºŒéƒ¨åˆ†ï¼šä»ç›®æ ‡ç«™ç‚¹è¯·æ±‚çš„å†…å®¹&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;150&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;*&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Connection&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;to&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;host&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;www.jbhifi.com.au&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;left&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;intact&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;æ¡ˆä¾‹äºŒã€ æœåŠ¡æ•…éšœå“åº”å¤´&lt;a href=&quot;#æ¡ˆä¾‹äºŒ-æœåŠ¡æ•…éšœå“åº”å¤´&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;* Host www.jbhifi.com.au:443 was resolved.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;* IPv6: (none)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;* IPv4: 104.21.4.235, 172.67.154.62&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;*   Trying 104.21.4.235:443...&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;* ALPN: curl offers h2,http/1.1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;* TLSv1.3 (OUT), TLS handshake, Client hello (1):&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;*  CAfile: /etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;*  CApath: none&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;* TLSv1.3 (IN), TLS handshake, Server hello (2):&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;* TLSv1.3 (IN), TLS handshake, Encrypted Extensions (8):&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;* TLSv1.3 (IN), TLS handshake, Certificate (11):&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;* TLSv1.3 (IN), TLS handshake, CERT verify (15):&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;* TLSv1.3 (IN), TLS handshake, Finished (20):&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;* TLSv1.3 (OUT), TLS change cipher, Change cipher spec (1):&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;* TLSv1.3 (OUT), TLS handshake, Finished (20):&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;* SSL connection using TLSv1.3 / TLS_AES_256_GCM_SHA384 / x25519 / id-ecPublicKey&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;* ALPN: server accepted h2&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;* Server certificate:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;*  subject: CN=www.jbhifi.com.au&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;*  start date: Sep 23 01:33:52 2025 GMT&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;*  expire date: Dec 22 02:33:51 2025 GMT&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;*  subjectAltName: host &quot;www.jbhifi.com.au&quot; matched cert&apos;s &quot;www.jbhifi.com.au&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;*  issuer: C=US; O=Google Trust Services; CN=WE1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;*  SSL certificate verify ok.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;*   Certificate level 0: Public key type EC/prime256v1 (256/128 Bits/secBits), signed using ecdsa-with-SHA256&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;*   Certificate level 1: Public key type EC/prime256v1 (256/128 Bits/secBits), signed using ecdsa-with-SHA384&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;27&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;*   Certificate level 2: Public key type EC/secp384r1 (384/192 Bits/secBits), signed using ecdsa-with-SHA384&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;28&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;* Connected to www.jbhifi.com.au (104.21.4.235) port 443&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;29&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;* using HTTP/2&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;30&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;* [&lt;/span&gt;&lt;span&gt;HTTP/&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;] [&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;] OPENED stream for https:&lt;/span&gt;&lt;span&gt;//www.jbhifi.com.au/&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;31&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;* [&lt;/span&gt;&lt;span&gt;HTTP/&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;] [&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;] [&lt;/span&gt;&lt;span&gt;:method:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;HEAD&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;32&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;* [&lt;/span&gt;&lt;span&gt;HTTP/&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;] [&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;] [&lt;/span&gt;&lt;span&gt;:scheme:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;https&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;33&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;* [&lt;/span&gt;&lt;span&gt;HTTP/&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;] [&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;] [&lt;/span&gt;&lt;span&gt;:authority:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;www.jbhifi.com.au&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;34&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;* [&lt;/span&gt;&lt;span&gt;HTTP/&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;] [&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;] [&lt;/span&gt;&lt;span&gt;:path:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;35&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;* [&lt;/span&gt;&lt;span&gt;HTTP/&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;] [&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;] [&lt;/span&gt;&lt;span&gt;user-agent:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;curl/&lt;/span&gt;&lt;span&gt;8.11&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;36&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;* [&lt;/span&gt;&lt;span&gt;HTTP/&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;] [&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;] [&lt;/span&gt;&lt;span&gt;accept:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;*&lt;/span&gt;&lt;span&gt;/*]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;37&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;gt; HEAD / HTTP/2&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;38&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;gt; Host: www.jbhifi.com.au&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;39&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;gt; User-Agent: curl/8.11.1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;40&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;gt; Accept: */&lt;/span&gt;&lt;span&gt;*&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;41&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;42&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;*&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Request&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;completely&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;sent&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;off&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;43&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;*&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;TLSv&lt;/span&gt;&lt;span&gt;1.3&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;(IN)&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;TLS&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;handshake&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;Newsession&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Ticket&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;4&lt;/span&gt;&lt;span&gt;):&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;44&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;*&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;TLSv&lt;/span&gt;&lt;span&gt;1.3&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;(IN)&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;TLS&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;handshake&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;Newsession&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Ticket&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;4&lt;/span&gt;&lt;span&gt;):&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;45&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;HTTP/&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;103&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;46&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;HTTP/&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;103&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;47&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;link:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&amp;lt;https:&lt;/span&gt;&lt;span&gt;//cdn.shopify.com&amp;gt;; rel=preconnect, &amp;lt;https://cdn.shopify.com&amp;gt;; crossorigin; rel=preconnect&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;48&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;link:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&amp;lt;https:&lt;/span&gt;&lt;span&gt;//cdn.shopify.com&amp;gt;; rel=preconnect, &amp;lt;https://cdn.shopify.com&amp;gt;; crossorigin; rel=preconnect&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;49&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;50&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;HTTP/&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;500&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;51&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;HTTP/&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;500&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;52&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;date:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Tue&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;18&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Nov&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;2025&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;12&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;40&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;50&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;GMT&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;53&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;date:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Tue&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;18&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Nov&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;2025&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;12&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;40&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;50&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;GMT&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;54&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;content-type:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;text/plain;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;charset=UTF&lt;/span&gt;&lt;span&gt;-8&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;55&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;content-type:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;text/plain;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;charset=UTF&lt;/span&gt;&lt;span&gt;-8&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;56&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;content-length:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;15&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;57&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;content-length:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;15&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;58&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;cache-control:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;private&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;max-age=&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;no-store&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;no-cache&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;must-revalidate&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;post-check=&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;pre-check=&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;59&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;cache-control:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;private&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;max-age=&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;no-store&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;no-cache&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;must-revalidate&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;post-check=&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;pre-check=&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;60&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;expires:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Thu&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;01&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Jan&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1970&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;00&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;00&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;01&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;GMT&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;61&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;expires:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Thu&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;01&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Jan&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1970&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;00&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;00&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;01&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;GMT&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;62&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;referrer-policy:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;same-origin&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;63&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;referrer-policy:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;same-origin&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;64&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;x-frame-options:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;SAMEORIGIN&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;65&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;x-frame-options:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;SAMEORIGIN&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;66&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;server:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;cloudflare&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;67&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;server:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;cloudflare&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;68&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;cf-ray:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;9&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;0789e2&lt;/span&gt;&lt;span&gt;bf&lt;/span&gt;&lt;span&gt;519878&lt;/span&gt;&lt;span&gt;-MEL&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;69&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;cf-ray:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;9&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;0789e2&lt;/span&gt;&lt;span&gt;bf&lt;/span&gt;&lt;span&gt;519878&lt;/span&gt;&lt;span&gt;-MEL&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;70&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;71&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;72&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;*&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Connection&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;to&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;host&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;www.jbhifi.com.au&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;left&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;intact&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;æ•…éšœç‚¹åˆ†æï¼š&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;å·²çŸ¥ &lt;a href=&quot;http://www.jbhifi.com.au&quot;&gt;www.jbhifi.com.au&lt;/a&gt; ä½¿ç”¨äº† CloudFlare çš„è¾¹ç¼˜èŠ‚ç‚¹ï¼ŒåŒæ—¶ä½¿ç”¨äº† 103 é¢„è¿æ¥æŠ€æœ¯&lt;/li&gt;
&lt;li&gt;è¾¹ç¼˜èŠ‚ç‚¹ä»æ—§çš„ç¼“å­˜å±‚ä¸­è§£æåˆ°äº† preconnect/early hints&lt;/li&gt;
&lt;li&gt;åœ¨ç­‰å¾…æºç«™å†…å®¹è¿”å›æ—¶ï¼Œè¾¹ç¼˜èŠ‚ç‚¹å‘&lt;code&gt;https://cdn.shopify.com&lt;/code&gt;å‘èµ·è¯·æ±‚ï¼Œè¯·æ±‚é™æ€èµ„æºæ–‡ä»¶&lt;/li&gt;
&lt;li&gt;ä½†æœ€åï¼Œå¯¹www.jbhifi.com.au çš„å†…å®¹è¯·æ±‚å¤±è´¥ï¼Œå› æ­¤è¿”å›äº† 500 çŠ¶æ€ç &lt;/li&gt;
&lt;li&gt;103 ä¸è¿”å›ä»»ä½•æºç«™çŠ¶æ€ä¿¡æ¯ï¼Œå› æ­¤æ— æ³•çŸ¥é“è¯·æ±‚æ˜¯å¦æˆåŠŸ&lt;/li&gt;
&lt;li&gt;çŠ¶æ€ç  500ï¼Œä½†æœåŠ¡å™¨ç­¾åæ˜¯cloudflareï¼Œè¿™æ„å‘³ç€é”™è¯¯æ¥æºæ˜¯ CloudFlare ä¸­é—´ä»£ç†å±‚ï¼›å¦‚æœæ˜¯ JBHIFI æºç«™æ•…éšœï¼ŒçŠ¶æ€ç åº”è¯¥æ˜¯ä»¥ä¸‹å‡ ç§
&lt;ul&gt;
&lt;li&gt;500 - ä½†æ˜¯æœåŠ¡å™¨ç­¾åä¸æ˜¯CloudFlareï¼Œè€Œæ˜¯&lt;code&gt;server: nginx&lt;/code&gt; / &lt;code&gt;apache&lt;/code&gt; / &lt;code&gt;shopify&lt;/code&gt; ç­‰&lt;/li&gt;
&lt;li&gt;522  - æœåŠ¡å®Œå…¨æŒ‚æ‰ï¼Œé”™è¯¯å“åº”éƒ½æ— æ³•è¿”å›ï¼Œæœ€ç»ˆç”± CloudFlare æŠ¥å‘Šè¿æ¥è¶…æ—¶ï¼š&lt;code&gt;server: cloudflare&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;521 - æºç«™æ‹’ç»è¿æ¥ï¼š&lt;code&gt;server: cloudflare&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;404/403 - æºç«™èµ„æºä¸å­˜åœ¨/æ— æƒé™è®¿é—®ï¼š&lt;code&gt;server: nginx&lt;/code&gt; / &lt;code&gt;apache&lt;/code&gt; / &lt;code&gt;shopify&lt;/code&gt; ç­‰&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;æ€»ç»“ï¼š&lt;/p&gt;&lt;p&gt;å› ä¸º JBHIFI æ¥å…¥äº† Cloudflareï¼Œè¯·æ±‚ä¼šå…ˆåˆ°è¾¹ç¼˜èŠ‚ç‚¹ï¼Œè¾¹ç¼˜èŠ‚ç‚¹ä»ç¼“å­˜æˆ–éƒ¨åˆ†è§£æå‡ºçš„å†…å®¹é‡Œæå‰å‘å‡º preconnect/early hintsï¼Œä½†æœ€ç»ˆç»“æœä»å–å†³äºå®ƒå‘ JBHIFI æºç«™å–å†…å®¹æ˜¯å¦æˆåŠŸï¼Œæ‰€ä»¥å³ä½¿é™æ€èµ„æºèƒ½ä» CDN è·å–æˆåŠŸï¼Œåªè¦æºç«™å–æºå¤±è´¥ï¼Œæ•´æ¬¡è¯·æ±‚å°±å¿…ç„¶å¤±è´¥ã€‚&lt;/p&gt;&lt;/section&gt;</content:encoded></item><item><title>æœ€æ–°å®è·µï¼šä½¿ç”¨systemdé™åˆ¶è¿›ç¨‹èµ„æºä½¿ç”¨</title><link>https://white-festa.net/posts/systemd_resource_limitation/%E4%BD%BF%E7%94%A8systemd%E9%99%90%E5%88%B6%E8%BF%9B%E7%A8%8B%E8%B5%84%E6%BA%90%E4%BD%BF%E7%94%A8/</link><guid isPermaLink="true">https://white-festa.net/posts/systemd_resource_limitation/%E4%BD%BF%E7%94%A8systemd%E9%99%90%E5%88%B6%E8%BF%9B%E7%A8%8B%E8%B5%84%E6%BA%90%E4%BD%BF%E7%94%A8/</guid><description>ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨systemdè¿›è¡Œè¿›ç¨‹çº§çš„èµ„æºé™åˆ¶(åŸºäºCgroups)ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨systemd-runé™åˆ¶ä¸´æ—¶è¿›ç¨‹çš„èµ„æºä½¿ç”¨</description><pubDate>Sun, 09 Nov 2025 00:00:00 GMT</pubDate><content:encoded>&lt;section&gt;&lt;h1&gt;å‚æ•°ç±»å‹&lt;a href=&quot;#å‚æ•°ç±»å‹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;section&gt;&lt;h2&gt;CPU èµ„æºé™åˆ¶&lt;a href=&quot;#cpu-èµ„æºé™åˆ¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;







































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å‚æ•°&lt;/th&gt;&lt;th&gt;è¯´æ˜&lt;/th&gt;&lt;th&gt;ç¤ºä¾‹&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;CPUQuota=&lt;/code&gt;&lt;/td&gt;&lt;td&gt;é™åˆ¶ CPU æ€»å ç”¨ç™¾åˆ†æ¯”ï¼ˆç›¸å¯¹æ•´ä¸ªç³»ç»Ÿï¼‰&lt;/td&gt;&lt;td&gt;&lt;code&gt;CPUQuota=20%&lt;/code&gt;ï¼ˆæœ€å¤š 20% CPU æ—¶é—´ï¼‰&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;CPUQuotaPeriodSec=&lt;/code&gt;&lt;/td&gt;&lt;td&gt;é™åˆ¶å‘¨æœŸï¼Œé»˜è®¤ 100msï¼Œå¯é…åˆä¸Šé¢å¾®è°ƒè°ƒåº¦å¹³æ»‘åº¦&lt;/td&gt;&lt;td&gt;&lt;code&gt;CPUQuotaPeriodSec=1s&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;CPUShares=&lt;/code&gt;&lt;/td&gt;&lt;td&gt;è®¾ç½® CPU æƒé‡ï¼ˆé»˜è®¤ 1024ï¼‰ï¼Œç›¸å¯¹ä¼˜å…ˆçº§&lt;/td&gt;&lt;td&gt;&lt;code&gt;CPUShares=512&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;CPUWeight=&lt;/code&gt;&lt;/td&gt;&lt;td&gt;cgroup v2 æ–°å‚æ•°ï¼ˆæ›¿ä»£ CPUSharesï¼‰ï¼ŒèŒƒå›´ 1â€“10000&lt;/td&gt;&lt;td&gt;&lt;code&gt;CPUWeight=200&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;AllowedCPUs=&lt;/code&gt;&lt;/td&gt;&lt;td&gt;é™å®šå¯ä½¿ç”¨çš„ CPU æ ¸å¿ƒï¼ˆcgroup v2ï¼‰&lt;/td&gt;&lt;td&gt;&lt;code&gt;AllowedCPUs=0,2,4&lt;/code&gt; æˆ– &lt;code&gt;AllowedCPUs=0-3&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;Nice=&lt;/code&gt;&lt;/td&gt;&lt;td&gt;è®¾ç½®è¿›ç¨‹çš„ nice ä¼˜å…ˆçº§ï¼ˆ-20~19ï¼‰&lt;/td&gt;&lt;td&gt;&lt;code&gt;Nice=10&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;å†…å­˜é™åˆ¶&lt;a href=&quot;#å†…å­˜é™åˆ¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;


































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å‚æ•°&lt;/th&gt;&lt;th&gt;è¯´æ˜&lt;/th&gt;&lt;th&gt;ç¤ºä¾‹&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;MemoryMax=&lt;/code&gt;&lt;/td&gt;&lt;td&gt;æœ€å¤§å¯ç”¨å†…å­˜ä¸Šé™&lt;/td&gt;&lt;td&gt;&lt;code&gt;MemoryMax=500M&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;MemorySwapMax=&lt;/code&gt;&lt;/td&gt;&lt;td&gt;é™åˆ¶ swap å¯ç”¨å¤§å°&lt;/td&gt;&lt;td&gt;&lt;code&gt;MemorySwapMax=0&lt;/code&gt;ï¼ˆç¦æ­¢ swapï¼‰&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;MemoryHigh=&lt;/code&gt;&lt;/td&gt;&lt;td&gt;è¾¾åˆ°æ­¤å€¼åè§¦å‘å†…æ ¸å‹åŠ›æ§åˆ¶ï¼Œä½†ä¸ç«‹åˆ»æ€æ­»è¿›ç¨‹&lt;/td&gt;&lt;td&gt;&lt;code&gt;MemoryHigh=400M&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;MemoryLow=&lt;/code&gt;&lt;/td&gt;&lt;td&gt;ä¼˜å…ˆä¿è¯è¯¥æœåŠ¡çš„æœ€ä½å†…å­˜&lt;/td&gt;&lt;td&gt;&lt;code&gt;MemoryLow=200M&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;MemoryAccounting=&lt;/code&gt;&lt;/td&gt;&lt;td&gt;å¯ç”¨å†…å­˜ä½¿ç”¨ç»Ÿè®¡ï¼ˆå»ºè®®æ€»æ˜¯å¼€ï¼‰&lt;/td&gt;&lt;td&gt;&lt;code&gt;MemoryAccounting=true&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;ç£ç›˜ I/O ç›¸å…³&lt;a href=&quot;#ç£ç›˜-io-ç›¸å…³&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;


































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å‚æ•°&lt;/th&gt;&lt;th&gt;è¯´æ˜&lt;/th&gt;&lt;th&gt;ç¤ºä¾‹&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;IOWeight=&lt;/code&gt;&lt;/td&gt;&lt;td&gt;è®¾ç½® I/O ä¼˜å…ˆçº§ï¼ˆèŒƒå›´ 1â€“10000ï¼‰&lt;/td&gt;&lt;td&gt;&lt;code&gt;IOWeight=500&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;IODeviceWeight=&lt;/code&gt;&lt;/td&gt;&lt;td&gt;é’ˆå¯¹å…·ä½“å—è®¾å¤‡è®¾ç½®æƒé‡&lt;/td&gt;&lt;td&gt;&lt;code&gt;IODeviceWeight=/dev/sda 200&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;IOReadBandwidthMax=&lt;/code&gt;&lt;/td&gt;&lt;td&gt;é™åˆ¶è¯»å¸¦å®½&lt;/td&gt;&lt;td&gt;&lt;code&gt;IOReadBandwidthMax=/dev/sda 10M&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;IOWriteBandwidthMax=&lt;/code&gt;&lt;/td&gt;&lt;td&gt;é™åˆ¶å†™å¸¦å®½&lt;/td&gt;&lt;td&gt;&lt;code&gt;IOWriteBandwidthMax=/dev/sda 5M&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;IOReadIOPSMax=&lt;/code&gt; / &lt;code&gt;IOWriteIOPSMax=&lt;/code&gt;&lt;/td&gt;&lt;td&gt;é™åˆ¶ IOPS æ•°é‡&lt;/td&gt;&lt;td&gt;&lt;code&gt;IOWriteIOPSMax=/dev/nvme0n1 200&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;ç½‘ç»œï¼ˆéœ€ cgroup v2 + systemd &amp;gt;= 250ï¼‰&lt;a href=&quot;#ç½‘ç»œéœ€-cgroup-v2--systemd--250&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;
























&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å‚æ•°&lt;/th&gt;&lt;th&gt;è¯´æ˜&lt;/th&gt;&lt;th&gt;ç¤ºä¾‹&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;IPIngressMaxBytes=&lt;/code&gt;&lt;/td&gt;&lt;td&gt;é™åˆ¶è¿›å…¥æµé‡&lt;/td&gt;&lt;td&gt;&lt;code&gt;IPIngressMaxBytes=10M&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;IPEgressMaxBytes=&lt;/code&gt;&lt;/td&gt;&lt;td&gt;é™åˆ¶å‘å‡ºæµé‡&lt;/td&gt;&lt;td&gt;&lt;code&gt;IPEgressMaxBytes=5M&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;IPAccounting=&lt;/code&gt;&lt;/td&gt;&lt;td&gt;å¯ç”¨ç½‘ç»œæµé‡ç»Ÿè®¡&lt;/td&gt;&lt;td&gt;&lt;code&gt;IPAccounting=true&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;è¿›ç¨‹ä¸æ–‡ä»¶å¥æŸ„æ•°&lt;a href=&quot;#è¿›ç¨‹ä¸æ–‡ä»¶å¥æŸ„æ•°&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;





























&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å‚æ•°&lt;/th&gt;&lt;th&gt;è¯´æ˜&lt;/th&gt;&lt;th&gt;ç¤ºä¾‹&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;TasksMax=&lt;/code&gt;&lt;/td&gt;&lt;td&gt;é™åˆ¶è¯¥æœåŠ¡ä¸‹æœ€å¤šå¯åˆ›å»ºå¤šå°‘ä¸ªçº¿ç¨‹/è¿›ç¨‹&lt;/td&gt;&lt;td&gt;&lt;code&gt;TasksMax=100&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;LimitNOFILE=&lt;/code&gt;&lt;/td&gt;&lt;td&gt;é™åˆ¶æœ€å¤§æ–‡ä»¶æè¿°ç¬¦æ•°&lt;/td&gt;&lt;td&gt;&lt;code&gt;LimitNOFILE=4096&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;LimitNPROC=&lt;/code&gt;&lt;/td&gt;&lt;td&gt;é™åˆ¶ç”¨æˆ·æœ€å¤§è¿›ç¨‹æ•°&lt;/td&gt;&lt;td&gt;&lt;code&gt;LimitNPROC=128&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;LimitCORE=&lt;/code&gt;&lt;/td&gt;&lt;td&gt;é™åˆ¶ core dump å¤§å°&lt;/td&gt;&lt;td&gt;&lt;code&gt;LimitCORE=0&lt;/code&gt;ï¼ˆç¦ç”¨ï¼‰&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;è‡ªåŠ¨é‡å¯ä¸æ•…éšœç­–ç•¥ï¼ˆè¾…åŠ©æ§åˆ¶ï¼‰&lt;a href=&quot;#è‡ªåŠ¨é‡å¯ä¸æ•…éšœç­–ç•¥è¾…åŠ©æ§åˆ¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;
























&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å‚æ•°&lt;/th&gt;&lt;th&gt;è¯´æ˜&lt;/th&gt;&lt;th&gt;ç¤ºä¾‹&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;Restart=&lt;/code&gt;&lt;/td&gt;&lt;td&gt;æœåŠ¡å´©æºƒåæ˜¯å¦è‡ªåŠ¨é‡å¯&lt;/td&gt;&lt;td&gt;&lt;code&gt;Restart=on-failure&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;RestartSec=&lt;/code&gt;&lt;/td&gt;&lt;td&gt;é‡å¯å‰ç­‰å¾…æ—¶é—´&lt;/td&gt;&lt;td&gt;&lt;code&gt;RestartSec=5s&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;StartLimitBurst=&lt;/code&gt; / &lt;code&gt;StartLimitIntervalSec=&lt;/code&gt;&lt;/td&gt;&lt;td&gt;æ§åˆ¶è¿‡å¤šé‡å¯æ—¶çš„ç†”æ–­æœºåˆ¶&lt;/td&gt;&lt;td&gt;&lt;code&gt;StartLimitBurst=3&lt;/code&gt;ï¼Œ&lt;code&gt;StartLimitIntervalSec=60s&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;ä½¿ç”¨&lt;a href=&quot;#ä½¿ç”¨&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;section&gt;&lt;h2&gt;æ‰“å¼€ service æ–‡ä»¶ä¸´æ—¶è¦†ç›–æ–‡ä»¶&lt;a href=&quot;#æ‰“å¼€-service-æ–‡ä»¶ä¸´æ—¶è¦†ç›–æ–‡ä»¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;systemctl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;edit&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;ghost&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;æ·»åŠ è§„åˆ™&lt;a href=&quot;#æ·»åŠ è§„åˆ™&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;### Editing /etc/systemd/system/ghost.service.d/override.conf&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;### Anything between here and the comment below will become the contents of the drop-in file&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[Service]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;CPUQuota&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;20%&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;### Edits below this comment will be discarded&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;åœ¨ç©ºè¡Œä¸­å¢åŠ çš„è§„åˆ™å°†è¢«æ³¨å…¥åˆ° service æ–‡ä»¶ä¸­&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;ä½¿è§„åˆ™ç”Ÿæ•ˆ&lt;a href=&quot;#ä½¿è§„åˆ™ç”Ÿæ•ˆ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;é‡è½½é…ç½®&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;systemctl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;daemon-reload&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;é‡æ–°å¯åŠ¨åº”ç”¨&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;systemctl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;restart&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;application&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;å¯ç”¨ç»Ÿè®¡ä¿¡æ¯&lt;a href=&quot;#å¯ç”¨ç»Ÿè®¡ä¿¡æ¯&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;section&gt;&lt;h2&gt;é…ç½®å˜é‡&lt;a href=&quot;#é…ç½®å˜é‡&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[Service]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;CPUAccounting&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;MemoryAccounting&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;IOAccounting&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;IPAccounting&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;æŸ¥çœ‹&lt;a href=&quot;#æŸ¥çœ‹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;systemctl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;status&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;ghost&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;systemd-cgtop&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;systemd-cgls&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;ä½¿ç”¨ &lt;code&gt;systemd-run&lt;/code&gt;&lt;a href=&quot;#ä½¿ç”¨-systemd-run&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;systemd-run æ˜¯æœ€æ–°å®è·µï¼Œå¯ä»¥å°†è¿›ç¨‹ä»¥ systemd ä¸´æ—¶æœåŠ¡å•å…ƒçš„å½¢å¼å¯åŠ¨ï¼Œcgroups ä¸­çš„æ‰€æœ‰èµ„æºé™åˆ¶å‚æ•°éƒ½å¯ä»¥é€šè¿‡è¿™æ¡å‘½ä»¤è¿›è¡Œåº”ç”¨&lt;/p&gt;&lt;p&gt;ä¾‹å¦‚ï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;systemd-run&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--user&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-p&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;CPUQuota=20%&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--scope&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;./hard_script.sh&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;å…¶ä¸­ï¼š&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;--user&lt;/code&gt;: åå°è¿è¡Œè¿›ç¨‹&lt;/li&gt;
&lt;li&gt;&lt;code&gt;--scope&lt;/code&gt;: è®©è¯¥è¿›ç¨‹åœ¨è¿è¡Œæ—¶ä¸ç”Ÿæˆ systemd ä¸´æ—¶æœåŠ¡æ–‡ä»¶&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-p&lt;/code&gt;: æŒ‡å®šè¦æ§åˆ¶çš„èµ„æºå‚æ•°ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;</content:encoded></item><item><title>ç£ç›˜IOã€IOæŒ‡æ ‡åˆ†æåŠIOè°ƒåº¦å™¨</title><link>https://white-festa.net/posts/linux-disk-io/%E7%A3%81%E7%9B%98io/</link><guid isPermaLink="true">https://white-festa.net/posts/linux-disk-io/%E7%A3%81%E7%9B%98io/</guid><description>é€šè¿‡iostatã€sarå‘½ä»¤è¿›è¡Œç£ç›˜IOæ€§èƒ½åˆ†æã€è°ƒæ•´IOè°ƒåº¦å™¨è¿›è¡ŒIOä¼˜åŒ–çš„æ–¹æ³•</description><pubDate>Mon, 03 Nov 2025 00:00:00 GMT</pubDate><content:encoded>&lt;section&gt;&lt;h1&gt;ä¸€ã€ç£ç›˜ IO æ€§èƒ½åˆ†æ&lt;a href=&quot;#ä¸€ç£ç›˜-io-æ€§èƒ½åˆ†æ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;section&gt;&lt;h2&gt;1. iostat - ç›‘æ§ç£ç›˜è®¾å¤‡ IO æŒ‡æ ‡&lt;a href=&quot;#1-iostat---ç›‘æ§ç£ç›˜è®¾å¤‡-io-æŒ‡æ ‡&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;ä½¿ç”¨&lt;a href=&quot;#ä½¿ç”¨&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;iostat&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-x&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;è¾“å‡º&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Device&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;r/s&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;rkB/s&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;rrqm/s&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;%rrqm&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;r_await&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;rareq-sz&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;w/s&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;wkB/s&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;wrqm/s&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;%wrqm&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;w_await&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;wareq-sz&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;d/s&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;dkB/s&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;drqm/s&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;%drqm&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;d_await&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;dareq-sz&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;f/s&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;f_await&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;aqu-sz&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;%util&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;sda&lt;/span&gt;&lt;span&gt;     &lt;/span&gt;&lt;span&gt;3.47&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;83.85&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;0.00&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;0.00&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;0.29&lt;/span&gt;&lt;span&gt;     &lt;/span&gt;&lt;span&gt;24.18&lt;/span&gt;&lt;span&gt;     &lt;/span&gt;&lt;span&gt;0.26&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;12.47&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;0.00&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;0.00&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;0.82&lt;/span&gt;&lt;span&gt;     &lt;/span&gt;&lt;span&gt;47.64&lt;/span&gt;&lt;span&gt;     &lt;/span&gt;&lt;span&gt;0.00&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;0.00&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;0.00&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;0.00&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;0.00&lt;/span&gt;&lt;span&gt;     &lt;/span&gt;&lt;span&gt;0.00&lt;/span&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;0.08&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;0.63&lt;/span&gt;&lt;span&gt;     &lt;/span&gt;&lt;span&gt;0.00&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;0.06&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;æŒ‡æ ‡å«ä¹‰&lt;a href=&quot;#æŒ‡æ ‡å«ä¹‰&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;section&gt;&lt;h4&gt;è¯»è¯·æ±‚ç›¸å…³&lt;a href=&quot;#è¯»è¯·æ±‚ç›¸å…³&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;














































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å­—æ®µ&lt;/th&gt;&lt;th&gt;å«ä¹‰&lt;/th&gt;&lt;th&gt;å•ä½&lt;/th&gt;&lt;th&gt;è¯´æ˜&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;r/s&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;æ¯ç§’è¯»è¯·æ±‚æ¬¡æ•°ï¼ˆè¯» IOPSï¼‰&lt;/td&gt;&lt;td&gt;æ¬¡/ç§’&lt;/td&gt;&lt;td&gt;è¡¨ç¤ºå¹³å‡æ¯ç§’å‘å‡ºçš„è¯»æ“ä½œæ•°é‡ã€‚å€¼è¶Šå¤§è¯´æ˜ç£ç›˜è¯»è¯·æ±‚è¶Šé¢‘ç¹ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;rkB/s&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;æ¯ç§’è¯»æ•°æ®é‡&lt;/td&gt;&lt;td&gt;KB/ç§’&lt;/td&gt;&lt;td&gt;æ¯ç§’ä»è®¾å¤‡è¯»å–çš„æ•°æ®é‡ã€‚åæ˜ è¯»ååç‡ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;rrqm/s&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;æ¯ç§’åˆå¹¶çš„è¯»è¯·æ±‚æ•°&lt;/td&gt;&lt;td&gt;æ¬¡/ç§’&lt;/td&gt;&lt;td&gt;å†…æ ¸ I/O è°ƒåº¦å™¨å°†å¤šä¸ªç›¸é‚»è¯»è¯·æ±‚åˆå¹¶åç»Ÿè®¡çš„æ¬¡æ•°ã€‚é«˜è¯´æ˜ç³»ç»Ÿåœ¨åˆå¹¶å°å—è¯·æ±‚ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;%rrqm&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;åˆå¹¶è¯»è¯·æ±‚æ¯”ä¾‹&lt;/td&gt;&lt;td&gt;%&lt;/td&gt;&lt;td&gt;= &lt;code&gt;rrqm/s Ã· (r/s + rrqm/s) Ã— 100&lt;/code&gt;ï¼Œè¡¨ç¤ºæœ‰å¤šå°‘è¯»è¯·æ±‚è¢«åˆå¹¶ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;r_await&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;å¹³å‡æ¯ä¸ªè¯»è¯·æ±‚çš„ç­‰å¾…æ—¶é—´&lt;/td&gt;&lt;td&gt;æ¯«ç§’&lt;/td&gt;&lt;td&gt;åŒ…æ‹¬æ’é˜Ÿ + æœåŠ¡æ—¶é—´ã€‚æ•°å€¼è¿‡é«˜è¯´æ˜è¯»å»¶è¿Ÿä¸¥é‡ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;rareq-sz&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;å¹³å‡æ¯æ¬¡è¯»è¯·æ±‚å¤§å°&lt;/td&gt;&lt;td&gt;KB&lt;/td&gt;&lt;td&gt;è¡¨ç¤ºæ¯ä¸ªè¯»è¯·æ±‚å¹³å‡ä¼ è¾“çš„æ•°æ®é‡ã€‚è¾ƒå¤§é€šå¸¸è¯´æ˜é¡ºåºè¯»è¾ƒå¤šã€‚&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;å†™è¯·æ±‚ç›¸å…³&lt;a href=&quot;#å†™è¯·æ±‚ç›¸å…³&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;














































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å­—æ®µ&lt;/th&gt;&lt;th&gt;å«ä¹‰&lt;/th&gt;&lt;th&gt;å•ä½&lt;/th&gt;&lt;th&gt;è¯´æ˜&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;w/s&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;æ¯ç§’å†™è¯·æ±‚æ¬¡æ•°ï¼ˆå†™ IOPSï¼‰&lt;/td&gt;&lt;td&gt;æ¬¡/ç§’&lt;/td&gt;&lt;td&gt;å¹³å‡æ¯ç§’å‘å‡ºçš„å†™æ“ä½œæ•°é‡ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;wkB/s&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;æ¯ç§’å†™æ•°æ®é‡&lt;/td&gt;&lt;td&gt;KB/ç§’&lt;/td&gt;&lt;td&gt;æ¯ç§’å†™å…¥çš„æ•°æ®é‡ã€‚åæ˜ å†™ååç‡ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;wrqm/s&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;æ¯ç§’åˆå¹¶çš„å†™è¯·æ±‚æ•°&lt;/td&gt;&lt;td&gt;æ¬¡/ç§’&lt;/td&gt;&lt;td&gt;åˆå¹¶çš„å°å—å†™è¯·æ±‚æ¬¡æ•°ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;%wrqm&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;åˆå¹¶å†™è¯·æ±‚æ¯”ä¾‹&lt;/td&gt;&lt;td&gt;%&lt;/td&gt;&lt;td&gt;= &lt;code&gt;wrqm/s Ã· (w/s + wrqm/s) Ã— 100&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;w_await&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;å¹³å‡æ¯ä¸ªå†™è¯·æ±‚ç­‰å¾…æ—¶é—´&lt;/td&gt;&lt;td&gt;æ¯«ç§’&lt;/td&gt;&lt;td&gt;åŒ…æ‹¬æ’é˜Ÿ + æœåŠ¡æ—¶é—´ã€‚é«˜è¯´æ˜å†™å»¶è¿Ÿå¤§ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;wareq-sz&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;å¹³å‡æ¯æ¬¡å†™è¯·æ±‚å¤§å°&lt;/td&gt;&lt;td&gt;KB&lt;/td&gt;&lt;td&gt;è¾ƒå¤§è¯´æ˜å†™æ“ä½œåé¡ºåºã€‚&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;é€»è¾‘åˆ é™¤ï¼ˆdiscardï¼‰ç›¸å…³&lt;a href=&quot;#é€»è¾‘åˆ é™¤discardç›¸å…³&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;discard æ˜¯ç³»ç»Ÿæˆ–æ–‡ä»¶ç³»ç»Ÿä¸»åŠ¨å‘å‡ºçš„ã€åˆæ³•çš„&lt;code&gt;å—é‡Šæ”¾&lt;/code&gt;è¯·æ±‚ï¼Œè¢«æ ‡è®°åˆ é™¤çš„å—å°†ä¸ä¼šå†è¢«ä½¿ç”¨ï¼ŒBackground GC å¯ä»¥åœ¨éå…³é”®æ—¶æ®µæ“¦é™¤è¿™äº›å—æ•°æ®ã€‚&lt;/p&gt;














































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å­—æ®µ&lt;/th&gt;&lt;th&gt;å«ä¹‰&lt;/th&gt;&lt;th&gt;å•ä½&lt;/th&gt;&lt;th&gt;è¯´æ˜&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;d/s&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;æ¯ç§’ discard è¯·æ±‚æ¬¡æ•°&lt;/td&gt;&lt;td&gt;æ¬¡/ç§’&lt;/td&gt;&lt;td&gt;ä¸¢å¼ƒï¼ˆå¦‚ TRIMã€discardï¼‰æ“ä½œæ•°ï¼Œç”¨äº SSD ç©ºé—´å›æ”¶ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;dkB/s&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;æ¯ç§’ discard æ•°æ®é‡&lt;/td&gt;&lt;td&gt;KB/ç§’&lt;/td&gt;&lt;td&gt;è¡¨ç¤º TRIM çš„æ•°æ®ååé‡ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;drqm/s&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;æ¯ç§’åˆå¹¶çš„ discard è¯·æ±‚æ•°&lt;/td&gt;&lt;td&gt;æ¬¡/ç§’&lt;/td&gt;&lt;td&gt;åŒ rrqm/sã€wrqm/sï¼Œå¯¹ discard æ“ä½œçš„åˆå¹¶ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;%drqm&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;åˆå¹¶ discard æ¯”ä¾‹&lt;/td&gt;&lt;td&gt;%&lt;/td&gt;&lt;td&gt;= &lt;code&gt;drqm/s Ã· (d/s + drqm/s) Ã— 100&lt;/code&gt;ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;d_await&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;å¹³å‡ discard è¯·æ±‚ç­‰å¾…æ—¶é—´&lt;/td&gt;&lt;td&gt;æ¯«ç§’&lt;/td&gt;&lt;td&gt;discard æ“ä½œçš„å»¶è¿Ÿã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;dareq-sz&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;å¹³å‡æ¯æ¬¡ discard è¯·æ±‚å¤§å°&lt;/td&gt;&lt;td&gt;KB&lt;/td&gt;&lt;td&gt;å¹³å‡ discard çš„æ•°æ®å—å¤§å°ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;flush ç›¸å…³&lt;a href=&quot;#flush-ç›¸å…³&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;flushï¼šå°†å†…å­˜è„é¡µæ•°æ®æŒä¹…åŒ–åˆ°ç£ç›˜ä¸Š&lt;/p&gt;


































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å­—æ®µ&lt;/th&gt;&lt;th&gt;å«ä¹‰&lt;/th&gt;&lt;th&gt;å•ä½&lt;/th&gt;&lt;th&gt;è¯´æ˜&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;f/s&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;æ¯ç§’ flush è¯·æ±‚æ¬¡æ•°&lt;/td&gt;&lt;td&gt;æ¬¡/ç§’&lt;/td&gt;&lt;td&gt;æ¯ç§’ fsync()/barrier ç­‰ flush è¯·æ±‚æ¬¡æ•°ï¼Œå¸¸è§äºæ•°æ®åº“æˆ–æ–‡ä»¶ç³»ç»Ÿ syncã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;f_await&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;å¹³å‡ flush è¯·æ±‚ç­‰å¾…æ—¶é—´&lt;/td&gt;&lt;td&gt;æ¯«ç§’&lt;/td&gt;&lt;td&gt;flush æ“ä½œçš„å¹³å‡å»¶è¿Ÿã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;aqu-sz&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;å¹³å‡è¯·æ±‚é˜Ÿåˆ—é•¿åº¦&lt;/td&gt;&lt;td&gt;è¯·æ±‚æ•°&lt;/td&gt;&lt;td&gt;è¡¨ç¤ºå¹³å‡åœ¨é˜Ÿåˆ—ä¸­çš„ I/O æ•°é‡ã€‚&amp;gt;1 æ—¶è¯´æ˜è®¾å¤‡å­˜åœ¨æ’é˜Ÿã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;%util&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;è®¾å¤‡åˆ©ç”¨ç‡&lt;/td&gt;&lt;td&gt;%&lt;/td&gt;&lt;td&gt;è¡¨ç¤ºè®¾å¤‡åœ¨é‡‡æ ·å‘¨æœŸå†…æœ‰å¤šå°‘æ—¶é—´åœ¨å¤„ç† I/Oã€‚æ¥è¿‘ 100% è¯´æ˜è®¾å¤‡å·²é¥±å’Œã€‚&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;æ‰©å±•æŒ‡æ ‡é€ŸæŸ¥ä¸è¯Šæ–­å»ºè®®&lt;a href=&quot;#æ‰©å±•æŒ‡æ ‡é€ŸæŸ¥ä¸è¯Šæ–­å»ºè®®&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;






















































































































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;æŒ‡æ ‡å&lt;/th&gt;&lt;th&gt;å«ä¹‰&lt;/th&gt;&lt;th&gt;å¼‚å¸¸å‚è€ƒå€¼&lt;/th&gt;&lt;th&gt;è¯Šæ–­å»ºè®®&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;r/s&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;æ¯ç§’è¯»è¯·æ±‚æ•° (IOPS - read)&lt;/td&gt;&lt;td&gt;å–å†³äºä¸šåŠ¡&lt;/td&gt;&lt;td&gt;è¯»è¯·æ±‚æ•°é‡å¤šä½†å»¶è¿Ÿé«˜æ—¶ï¼Œå¯èƒ½å­˜åœ¨éšæœºè¯»ç“¶é¢ˆï¼›ç»“åˆ &lt;code&gt;r_await&lt;/code&gt; åˆ¤æ–­å»¶è¿Ÿæ¥æºã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;w/s&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;æ¯ç§’å†™è¯·æ±‚æ•° (IOPS - write)&lt;/td&gt;&lt;td&gt;å–å†³äºä¸šåŠ¡&lt;/td&gt;&lt;td&gt;å†™è¯·æ±‚è¿‡å¤šä¸”å»¶è¿Ÿä¸Šå‡æ—¶ï¼Œå¯èƒ½æ˜¯ç£ç›˜ç¼“å­˜è€—å°½æˆ–æ—¥å¿—å†™å¯†é›†å‹åº”ç”¨å¼•èµ·ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;rkB/s&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;æ¯ç§’è¯»æ•°æ®é‡ (KB/s)&lt;/td&gt;&lt;td&gt;â€”&lt;/td&gt;&lt;td&gt;è¯»å¸¦å®½é«˜ä½† &lt;code&gt;r/s&lt;/code&gt; ä¸é«˜æ—¶ï¼Œå¤šä¸ºé¡ºåºè¯»ï¼ˆå¤§å— I/Oï¼‰ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;wkB/s&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;æ¯ç§’å†™æ•°æ®é‡ (KB/s)&lt;/td&gt;&lt;td&gt;â€”&lt;/td&gt;&lt;td&gt;ä¸ &lt;code&gt;w/s&lt;/code&gt; ç»“åˆåˆ¤æ–­æ˜¯å°å—é«˜é¢‘å†™è¿˜æ˜¯å¤§å—é¡ºåºå†™ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;rrqm/s&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;æ¯ç§’åˆå¹¶çš„è¯»è¯·æ±‚æ•°&lt;/td&gt;&lt;td&gt;é«˜å€¼ä¸€èˆ¬æ­£å¸¸&lt;/td&gt;&lt;td&gt;è¡¨ç¤º I/O è°ƒåº¦å™¨åˆå¹¶äº†å¤šä¸ªå°è¯»è¯·æ±‚ï¼›æ•°å€¼é«˜ä»£è¡¨è°ƒåº¦å™¨åœ¨èµ·ä½œç”¨ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;wrqm/s&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;æ¯ç§’åˆå¹¶çš„å†™è¯·æ±‚æ•°&lt;/td&gt;&lt;td&gt;é«˜å€¼ä¸€èˆ¬æ­£å¸¸&lt;/td&gt;&lt;td&gt;ä¸ &lt;code&gt;rrqm/s&lt;/code&gt; ç±»ä¼¼ï¼Œå†™è¯·æ±‚åˆå¹¶ï¼›ä½å»¶è¿Ÿè®¾å¤‡ï¼ˆå¦‚ SSDï¼‰ä¸Šè¯¥å€¼è¾ƒä½ä¹Ÿå±æ­£å¸¸ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;%rrqm&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;è¢«åˆå¹¶çš„è¯»è¯·æ±‚å æ¯”&lt;/td&gt;&lt;td&gt;&amp;lt;20% ä¸€èˆ¬æ­£å¸¸&lt;/td&gt;&lt;td&gt;è‹¥è¿‡é«˜ä¸”å»¶è¿Ÿä¸Šå‡ï¼Œå¯èƒ½ I/O é˜Ÿåˆ—è¿‡é•¿æˆ–è°ƒåº¦å™¨è¿‡åº¦åˆå¹¶ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;%wrqm&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;è¢«åˆå¹¶çš„å†™è¯·æ±‚å æ¯”&lt;/td&gt;&lt;td&gt;&amp;lt;20% ä¸€èˆ¬æ­£å¸¸&lt;/td&gt;&lt;td&gt;è¿‡é«˜æ—¶éœ€å…³æ³¨è°ƒåº¦å™¨å’Œæ–‡ä»¶ç³»ç»Ÿå†™å…¥æ¨¡å¼ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;r_await&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;å¹³å‡è¯»è¯·æ±‚ç­‰å¾…æ—¶é—´ (ms)&lt;/td&gt;&lt;td&gt;SSDï¼š&amp;lt;1 msï¼›HDDï¼š&amp;lt;10 ms&lt;/td&gt;&lt;td&gt;è‹¥æŒç»­å‡é«˜ï¼Œè¯´æ˜å­˜å‚¨å±‚è¯»å»¶è¿Ÿå¤§ï¼ˆI/O ç­‰å¾…ã€é˜Ÿåˆ—æ‹¥å¡æˆ–åç›˜ï¼‰ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;w_await&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;å¹³å‡å†™è¯·æ±‚ç­‰å¾…æ—¶é—´ (ms)&lt;/td&gt;&lt;td&gt;SSDï¼š&amp;lt;2 msï¼›HDDï¼š&amp;lt;20 ms&lt;/td&gt;&lt;td&gt;é«˜å»¶è¿Ÿå¯èƒ½ç”±å†™æ”¾å¤§ã€ç¼“å­˜å†™æ»¡æˆ– sync å†™æ“ä½œé€ æˆã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;rareq-sz&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;å¹³å‡æ¯æ¬¡è¯»è¯·æ±‚å¤§å° (KB)&lt;/td&gt;&lt;td&gt;â€”&lt;/td&gt;&lt;td&gt;æ•°å€¼å¤§ â†’ é¡ºåºè¯»ï¼›æ•°å€¼å° â†’ éšæœºè¯»ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;wareq-sz&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;å¹³å‡æ¯æ¬¡å†™è¯·æ±‚å¤§å° (KB)&lt;/td&gt;&lt;td&gt;â€”&lt;/td&gt;&lt;td&gt;æ•°å€¼å¤§ â†’ é¡ºåºå†™ï¼›æ•°å€¼å° â†’ éšæœºå†™ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;aqu-sz&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;å¹³å‡è¯·æ±‚é˜Ÿåˆ—é•¿åº¦&lt;/td&gt;&lt;td&gt;0.5 ä»¥ä¸‹æœ€ä½³&lt;/td&gt;&lt;td&gt;è‹¥å¤§äº 1 ä¸” &lt;code&gt;%util&lt;/code&gt; é«˜ï¼Œè¡¨ç¤ºç£ç›˜é˜Ÿåˆ—ç§¯å‹ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;await&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;å¹³å‡ I/O ç­‰å¾…æ—¶é—´ï¼ˆå«æ’é˜Ÿï¼‰&lt;/td&gt;&lt;td&gt;SSDï¼š&amp;lt;1 msï¼›HDDï¼š&amp;lt;10 ms&lt;/td&gt;&lt;td&gt;ç­‰ä»·äº &lt;code&gt;(r_await + w_await)&lt;/code&gt; åŠ æƒå¹³å‡ï¼›æŒç»­ä¸Šå‡ä»£è¡¨è®¾å¤‡å“åº”æ…¢ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;svctm&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;å•æ¬¡è¯·æ±‚æœåŠ¡æ—¶é—´ï¼ˆä¸å«æ’é˜Ÿï¼‰&lt;/td&gt;&lt;td&gt;è¶Šä½è¶Šå¥½&lt;/td&gt;&lt;td&gt;&lt;code&gt;await&lt;/code&gt; è¿œå¤§äº &lt;code&gt;svctm&lt;/code&gt; â†’ æ’é˜Ÿå»¶è¿Ÿä¸¥é‡ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;%util&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;è®¾å¤‡åˆ©ç”¨ç‡ï¼ˆå¿™ç¢Œæ—¶é—´æ¯”ä¾‹ï¼‰&lt;/td&gt;&lt;td&gt;&amp;gt;80% éœ€å…³æ³¨ï¼Œ&amp;gt;95% è¡¨ç¤ºç“¶é¢ˆ&lt;/td&gt;&lt;td&gt;è¡¨ç¤ºç£ç›˜å¿™ç¢Œç¨‹åº¦ã€‚é«˜äº 90% æ—¶ç£ç›˜æ¥è¿‘é¥±å’Œã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;kB_read/s&lt;/strong&gt; / &lt;strong&gt;kB_wrtn/s&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;è¯»å†™å¸¦å®½&lt;/td&gt;&lt;td&gt;ä¸ä¸šåŠ¡ç›¸å…³&lt;/td&gt;&lt;td&gt;å¸¦å®½é«˜ä½† IOPS ä½ï¼Œè¯´æ˜é¡ºåº I/O å ä¸»å¯¼ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;kB_dscd/s&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;æ¯ç§’ discard æ•°æ®é‡&lt;/td&gt;&lt;td&gt;SSD å¸¸è§&lt;/td&gt;&lt;td&gt;å¤§é‡ discard è¯´æ˜é¢‘ç¹æ–‡ä»¶åˆ é™¤æˆ– trim æ“ä½œã€‚&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;æ¨¡æ‹Ÿåœºæ™¯&lt;a href=&quot;#æ¨¡æ‹Ÿåœºæ™¯&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;ç¼“å­˜é›ªå´©&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;IO æŒ‡æ ‡å¦‚ä¸‹ï¼š&lt;br /&gt;
&lt;code&gt;r/s 335k, rawait 1.1ms, rrqm/s 180191.75, %rrqm 35%, rareq_sz 25.85 %util 81%&lt;/code&gt;&lt;/p&gt;&lt;p&gt;å·²çŸ¥è¯¥æœåŠ¡å™¨éƒ¨ç½²åœ¨ kvm è™šæ‹Ÿæœºä¸­ï¼ŒåŒä¸€ç‰©ç†æœºï¼ˆä½¿ç”¨çš„æ˜¯å›ºæ€ç¡¬ç›˜ï¼‰ä¸Šçš„å¦å¤–ä¸€å° kvm è™šæ‹Ÿå±€ä¸Šéƒ¨ç½²äº† MySQL æœåŠ¡ï¼Œé‚£ä¹ˆå¯¼è‡´ IO æŒ‡æ ‡å¼‚å¸¸çš„åŸå› çš„åˆ†æå¦‚ä¸‹ï¼š&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;r/s 335k - è¯´æ˜ IO å‹åŠ›ä¸»è¦æ˜¯åœ¨è¯»ä¸Š&lt;/li&gt;
&lt;li&gt;rawait 1.1ms - å¯¹äº SSD æ¥è¯´æ˜¯ä¸€ä¸ªåé«˜çš„å€¼&lt;/li&gt;
&lt;li&gt;%rrqm 35% - è¯´æ˜ 35%çš„è¯»è¯·æ±‚è¢«åˆå¹¶äº†&lt;/li&gt;
&lt;li&gt;rareq_sz 25.85 - è¯´æ˜è¯»è¯·æ±‚å±äºä¸­ç­‰å¤§å°ï¼Œä¸€èˆ¬å‡ºç°åœ¨æ··åˆå‹è®¿é—®ä¸­ï¼Œå³æ—¢æœ‰å¤§æ–‡ä»¶é¡ºåºè¯»ï¼Œä¹Ÿæœ‰å°æ–‡ä»¶éšæœºè¯»&lt;/li&gt;
&lt;li&gt;%util 81% - æ²¡æœ‰è¾¾åˆ°ç“¶é¢ˆï¼Œä½†æ¥è¿‘&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;æ•´æ”¹ï¼š&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;å¯¹äº å›ºæ€ç¡¬ç›˜æ¥è¯´ï¼Œéšæœºè¯»çš„æ€§èƒ½æœ¬æ¥å°±æ¯”è¾ƒé«˜ã€‚35%çš„è¯»è¯·æ±‚åˆå¹¶æ˜¯ä¸å¿…è¦çš„ï¼Œå› æ­¤å¯ä»¥å…ˆå°† io è°ƒåº¦å™¨æ”¹ä¸º Noneï¼Œæé«˜è¯»æ•ˆç‡&lt;/li&gt;
&lt;li&gt;å¤§é‡ç¼“å­˜é”®åŒæ—¶åˆ°æœŸï¼Œå¯¼è‡´è¯»è¯·æ±‚è¢«å‘åˆ° MySQL æœåŠ¡ä¸Šï¼Œç”±äº MySQL å’Œ Redis éƒ¨ç½²åœ¨åŒä¸€ç‰©ç†æœºä¸Šï¼Œå› æ­¤ MySQL è™šæ‹Ÿæœºä¸­é£™å‡çš„ IO è´Ÿè½½ä¹Ÿä¼šå½±å“åˆ° Redis æœåŠ¡ï¼Œå³åŒä¸€ç‰©ç†æœºä¸Šè™šæ‹ŸåŒ–å±‚çš„èµ„æºç«äº‰&lt;/li&gt;
&lt;li&gt;é•¿æœŸæ•´æ”¹æªæ–½ï¼š
&lt;ul&gt;
&lt;li&gt;ä¸º key å¼•å…¥éšæœº TTLï¼Œé˜²æ­¢ key é›†ä½“è¿‡æœŸ&lt;/li&gt;
&lt;li&gt;å¯ç”¨äº’æ–¥æœºåˆ¶ï¼šç¼“å­˜ miss æ—¶ï¼Œè®©åªæœ‰ä¸€ä¸ªè¯·æ±‚å»åç«¯åŠ è½½å¹¶å›å¡«æ•°æ®ï¼Œå…¶ä»–è¯·æ±‚ç­‰å¾…è¯¥è¯·æ±‚å®Œæˆ&lt;/li&gt;
&lt;li&gt;é¢„çƒ­å’Œå®šæœŸåˆ·æ–°çƒ­ç‚¹&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨åˆé€‚çš„ &lt;code&gt;maxmemory-policy&lt;/code&gt;ï¼ˆå¦‚ &lt;code&gt;allkeys-lru&lt;/code&gt; æˆ– &lt;code&gt;volatile-lru&lt;/code&gt;ï¼‰ï¼Œé¿å…å¤§é‡çªç„¶åˆ°æœŸå¯¼è‡´å†…å­˜çŸ­ç¼ºä¸ swapã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœ Redis ä½œä¸ºçº¯ç¼“å­˜ï¼Œå¯ä»¥è€ƒè™‘å…³é—­ RDB/AOFï¼Œæˆ–æŠŠæŒä¹…åŒ–ç­–ç•¥è°ƒæ•´ä¸ºå¯¹ I/O å½±å“æœ€å°çš„é…ç½®ï¼ˆ&lt;code&gt;appendfsync everysec&lt;/code&gt;ã€é¿å…é¢‘ç¹ rewriteï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;ol&gt;
&lt;li&gt;é¡ºåºå†™å‹åŠ›åœºæ™¯&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;IO æŒ‡æ ‡å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;p&gt;&lt;code&gt;r/s 50, w/s 120k, wareq_sz 1024kb, wawait 0.8ms, %wrqm 80%, %util 68%&lt;/code&gt;&lt;/p&gt;&lt;p&gt;åˆ†æï¼š&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;w/s 120k - ä¸»è¦å‹åŠ›æ˜¯å†™æ“ä½œ&lt;/li&gt;
&lt;li&gt;wareq_sz 1024kb - è¯´æ˜æ˜¯å¤§æ–‡ä»¶é¡ºåºå†™&lt;/li&gt;
&lt;li&gt;wawait 0.8ms - ç¨é«˜ä½†ä»ç„¶ç†æƒ³çš„å†™å»¶è¿Ÿ&lt;/li&gt;
&lt;li&gt;%wrqm 80% - 80%çš„å†™è¯·æ±‚åˆå¹¶ï¼Œè™½ç„¶å¾ˆé«˜ï¼Œä½†å†™åˆå¹¶å¯¹é¡ºåºå†™æ˜¯æœ‰æ­£é¢æ•ˆæœçš„&lt;/li&gt;
&lt;li&gt;%util 68% - è®¾å¤‡åˆ©ç”¨ç‡ 68%ï¼Œå±äºåé«˜å½“ä»å¯æ¥å—çš„èŒƒå›´å†…&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;æ€»ç»“ï¼š&lt;/p&gt;&lt;p&gt;ä¸éœ€è¦åšé¢å¤–è°ƒæ•´ï¼Œæ•´ä½“æ¥çœ‹ IO æŒ‡æ ‡å±äºè´Ÿè½½ç•¥é«˜ä½†ä»å¯æ§ï¼Œåªè¦èƒ½ç¡®ä¿å†™å»¶è¿Ÿå’Œåˆ©ç”¨ç‡ä¿æŒç¨³å®šï¼Œå°±ä¸éœ€è¦é¢å¤–æ“ä½œ&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;2. sar - ç›‘æ§ç³»ç»Ÿå±‚ IO æŒ‡æ ‡&lt;a href=&quot;#2-sar---ç›‘æ§ç³»ç»Ÿå±‚-io-æŒ‡æ ‡&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;ä½¿ç”¨&lt;a href=&quot;#ä½¿ç”¨-1&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;sar&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-b&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;è¾“å‡º&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Linux&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;6.1.0&lt;/span&gt;&lt;span&gt; (example-host)    11/09/2025&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;12:30:00&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;AM&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;tps&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;rtps&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;wtps&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;dtps&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;bread/s&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;bwrtn/s&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;bdscd/s&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;12:30:01&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;AM&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;85.00&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;10.00&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;75.00&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;0.00&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;800.00&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;1500.00&lt;/span&gt;&lt;span&gt;     &lt;/span&gt;&lt;span&gt;0.00&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;12:30:02&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;AM&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;90.00&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;12.00&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;78.00&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;0.00&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;900.00&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;1600.00&lt;/span&gt;&lt;span&gt;     &lt;/span&gt;&lt;span&gt;0.00&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Average:&lt;/span&gt;&lt;span&gt;     &lt;/span&gt;&lt;span&gt;87.50&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;11.00&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;76.50&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;0.00&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;850.00&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;1550.00&lt;/span&gt;&lt;span&gt;     &lt;/span&gt;&lt;span&gt;0.00&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;è§£è¯»ï¼š&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;ç³»ç»Ÿå¹³å‡æ¯ç§’å‘å‡ºçº¦ 87 æ¬¡ I/O è¯·æ±‚ï¼›&lt;/li&gt;
&lt;li&gt;å…¶ä¸­è¯»æ“ä½œçº¦å  11 æ¬¡/sï¼Œå†™æ“ä½œçº¦å  76 æ¬¡/sï¼›&lt;/li&gt;
&lt;li&gt;æ¯ç§’è¯»å–çº¦ 850 å—æ•°æ®ï¼ˆå‡è®¾å—ä¸º 4KBï¼Œå°±æ˜¯ ~3.4MB/sï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;æ¯ç§’å†™å…¥çº¦ 1550 å—æ•°æ®ï¼ˆçº¦ 6.2MB/sï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;æ²¡æœ‰æ‰§è¡Œ discard æ“ä½œã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;æŒ‡æ ‡å«ä¹‰&lt;a href=&quot;#æŒ‡æ ‡å«ä¹‰-1&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;




























































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å­—æ®µå&lt;/th&gt;&lt;th&gt;å…¨ç§°&lt;/th&gt;&lt;th&gt;å«ä¹‰&lt;/th&gt;&lt;th&gt;å•ä½&lt;/th&gt;&lt;th&gt;è¯´æ˜&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;tps&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;Transactions Per Second&lt;/td&gt;&lt;td&gt;æ¯ç§’å‘å—è®¾å¤‡å‘å‡ºçš„ I/O è¯·æ±‚æ¬¡æ•°ï¼ˆè¯»+å†™+ä¸¢å¼ƒçš„æ€»æ•°ï¼‰&lt;/td&gt;&lt;td&gt;æ¬¡/ç§’&lt;/td&gt;&lt;td&gt;ç²—ç•¥ä»£è¡¨ I/O è¯·æ±‚çš„é¢‘ç‡ï¼Œ&lt;strong&gt;ä¸æ˜¯ç£ç›˜ IOPS&lt;/strong&gt;ï¼ˆå› ä¸ºæ¯ä¸ªè¯·æ±‚å¤§å°ä¸åŒï¼‰&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;rtps&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;Read Transactions Per Second&lt;/td&gt;&lt;td&gt;æ¯ç§’æ‰§è¡Œçš„&lt;strong&gt;è¯»è¯·æ±‚&lt;/strong&gt;æ•°&lt;/td&gt;&lt;td&gt;æ¬¡/ç§’&lt;/td&gt;&lt;td&gt;åªç»Ÿè®¡è¯»æ“ä½œæ¬¡æ•°&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;wtps&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;Write Transactions Per Second&lt;/td&gt;&lt;td&gt;æ¯ç§’æ‰§è¡Œçš„&lt;strong&gt;å†™è¯·æ±‚&lt;/strong&gt;æ•°&lt;/td&gt;&lt;td&gt;æ¬¡/ç§’&lt;/td&gt;&lt;td&gt;åªç»Ÿè®¡å†™æ“ä½œæ¬¡æ•°&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;dtps&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;Discard Transactions Per Second&lt;/td&gt;&lt;td&gt;æ¯ç§’æ‰§è¡Œçš„&lt;strong&gt;discardï¼ˆä¸¢å¼ƒ/TRIMï¼‰è¯·æ±‚&lt;/strong&gt;æ•°&lt;/td&gt;&lt;td&gt;æ¬¡/ç§’&lt;/td&gt;&lt;td&gt;è¡¨ç¤º SSD ä¸Šè¢«é€»è¾‘åˆ é™¤æˆ–é‡Šæ”¾çš„å—æ•°ç›®&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;bread/s&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;Blocks Read per Second&lt;/td&gt;&lt;td&gt;æ¯ç§’ä»å—è®¾å¤‡&lt;strong&gt;è¯»å–çš„å—æ•°&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;å—/ç§’&lt;/td&gt;&lt;td&gt;å—å¤§å°é€šå¸¸ä¸º 512B æˆ– 4KBï¼Œå–å†³äºè®¾å¤‡ä¸å†…æ ¸é…ç½®&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;bwrtn/s&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;Blocks Written per Second&lt;/td&gt;&lt;td&gt;æ¯ç§’&lt;strong&gt;å†™å…¥çš„å—æ•°&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;å—/ç§’&lt;/td&gt;&lt;td&gt;è¡¡é‡å†™å…¥æ•°æ®æµé‡&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;bdscd/s&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;Blocks Discarded per Second&lt;/td&gt;&lt;td&gt;æ¯ç§’&lt;strong&gt;è¢« discard çš„å—æ•°&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;å—/ç§’&lt;/td&gt;&lt;td&gt;è¡¨ç¤ºé€»è¾‘ä¸Šé‡Šæ”¾ï¼ˆéçœŸå®åˆ é™¤ï¼‰çš„å—æ•°&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;äºŒã€ç£ç›˜IOè°ƒåº¦å™¨å’Œå‚æ•°&lt;a href=&quot;#äºŒç£ç›˜ioè°ƒåº¦å™¨å’Œå‚æ•°&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;Linux I/Oè°ƒåº¦å™¨æ˜¯å†…æ ¸ä¸­çš„ä¸€ä¸ªç»„ä»¶ï¼Œè´Ÿè´£ç®¡ç†å—è®¾å¤‡çš„I/Oè¯·æ±‚é˜Ÿåˆ—ã€‚å®ƒå†³å®šäº†å†…æ ¸å¦‚ä½•å°†å¤šä¸ªè¿›ç¨‹å‘å‡ºçš„è¯»å†™è¯·æ±‚åˆ†é…ç»™å—è®¾å¤‡ï¼Œä¸»è¦ç›®æ ‡æ˜¯ï¼š&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;å‡å°‘ç£ç›˜å¯»é“æ—¶é—´ï¼šé€šè¿‡é‡æ–°æ’åºè¯·æ±‚&lt;/li&gt;
&lt;li&gt;å…¬å¹³æ€§ï¼šé˜²æ­¢æŸä¸ªè¿›ç¨‹é¥¿æ­»å…¶ä»–è¿›ç¨‹&lt;/li&gt;
&lt;li&gt;ä¼˜å…ˆçº§å¤„ç†ï¼šç¡®ä¿é‡è¦è¯·æ±‚ä¼˜å…ˆå¤„ç†&lt;/li&gt;
&lt;li&gt;åˆå¹¶è¯·æ±‚ï¼šå°†ç›¸é‚»çš„å°è¯·æ±‚åˆå¹¶æˆå¤§è¯·æ±‚&lt;/li&gt;
&lt;/ul&gt;&lt;section&gt;&lt;h2&gt;1. ä¸»è¦çš„I/Oè°ƒåº¦å™¨ç±»å‹&lt;a href=&quot;#1-ä¸»è¦çš„ioè°ƒåº¦å™¨ç±»å‹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;None&lt;a href=&quot;#none&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;ï¼šå‡ ä¹ä¸åšè°ƒåº¦ï¼ŒI/O è¯·æ±‚ç›´æ¥å‘é€åˆ°é©±åŠ¨å±‚ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼šå»¶è¿Ÿæä½ï¼Œå¼€é”€æœ€å°ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼šä¸å…·å¤‡å…¬å¹³æ€§æˆ–é¡ºåºä¼˜åŒ–ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¨èä½¿ç”¨&lt;/strong&gt;ï¼š
&lt;ol&gt;
&lt;li&gt;NVMe SSDï¼ˆè‡ªå¸¦å†…éƒ¨é˜Ÿåˆ—ä¸è°ƒåº¦ï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;è™šæ‹Ÿæœºç£ç›˜ï¼ˆç”±å®¿ä¸»æœºæˆ–å­˜å‚¨åç«¯è°ƒåº¦ï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;RAID æ§åˆ¶å¡ã€è‡ªå¸¦ç¼“å­˜çš„ä¼ä¸šçº§ç£ç›˜ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;mq-deadline&lt;a href=&quot;#mq-deadline&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;ï¼šä¸ºæ¯ä¸ªå¤šé˜Ÿåˆ—ï¼ˆmulti-queueï¼‰å—è®¾å¤‡ç‹¬ç«‹ç»´æŠ¤è¯»å†™é˜Ÿåˆ—ï¼›
&lt;ol&gt;
&lt;li&gt;è¯»è¯·æ±‚ä¼˜å…ˆï¼›&lt;/li&gt;
&lt;li&gt;è¯·æ±‚æŒ‰â€œæˆªæ­¢æ—¶é—´ï¼ˆdeadlineï¼‰â€æ’åºï¼›&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼šåœ¨ SSD å’Œæœºæ¢°ç›˜ä¸Šéƒ½æœ‰è‰¯å¥½æ€§èƒ½ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼šæç«¯é«˜å¹¶å‘ä¸‹ç•¥æœ‰è°ƒåº¦å¼€é”€ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¨èä½¿ç”¨&lt;/strong&gt;ï¼š
&lt;ol&gt;
&lt;li&gt;é€šç”¨æœåŠ¡å™¨ï¼›&lt;/li&gt;
&lt;li&gt;é«˜å¹¶å‘è¯»å†™åœºæ™¯ï¼ˆå¦‚ Webã€æ•°æ®åº“ï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;ç³»ç»Ÿç›˜ã€ç¼“å­˜ç›˜ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;bfqï¼ˆBudget Fair Queueingï¼‰&lt;a href=&quot;#bfqbudget-fair-queueing&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;ï¼šåŸºäºâ€œå¸¦å®½é¢„ç®—â€çš„å…¬å¹³é˜Ÿåˆ—è°ƒåº¦ï¼›
&lt;ol&gt;
&lt;li&gt;æ¯ä¸ªè¿›ç¨‹åˆ†é…ä¸€ä¸ªå¸¦å®½é¢„ç®—ï¼›&lt;/li&gt;
&lt;li&gt;é€‚åˆå°æ–‡ä»¶éšæœºè¯»å†™ï¼›&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼šäº¤äº’æ€§å¼ºã€å»¶è¿Ÿç¨³å®šï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼šæ•´ä½“ååé‡ç•¥ä½ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¨èä½¿ç”¨&lt;/strong&gt;ï¼š
&lt;ol&gt;
&lt;li&gt;æ¡Œé¢ç³»ç»Ÿï¼›&lt;/li&gt;
&lt;li&gt;å·¥ä½œç«™ï¼›&lt;/li&gt;
&lt;li&gt;åª’ä½“å¤„ç†æˆ–å¤šä»»åŠ¡åœºæ™¯ï¼ˆå¦‚ IDE + ç¼–è¯‘ + è§†é¢‘æ’­æ”¾ï¼‰&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;kyber&lt;a href=&quot;#kyber&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;ï¼šä¸ºå¤šé˜Ÿåˆ—å—è®¾å¤‡è®¾è®¡ï¼ˆå¦‚ NVMeï¼‰ï¼›
&lt;ol&gt;
&lt;li&gt;ä½¿ç”¨â€œå»¶è¿Ÿç›®æ ‡â€æ§åˆ¶è¯»å†™ï¼›&lt;/li&gt;
&lt;li&gt;å°† I/O åˆ†ç±»ä¸º latency-sensitive ä¸ backgroundï¼›&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼šåœ¨æ•°æ®ä¸­å¿ƒå’Œé«˜ IOPS åœºæ™¯ä¸­å»¶è¿Ÿæ§åˆ¶ä¼˜ç§€ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼šå¯¹é¡ºåºè®¿é—®ä¼˜åŒ–è¾ƒå¼±ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¨èä½¿ç”¨&lt;/strong&gt;ï¼š
&lt;ol&gt;
&lt;li&gt;NVMe SSDï¼›&lt;/li&gt;
&lt;li&gt;é«˜å¹¶å‘æ•°æ®åº“ï¼ˆMySQLã€PostgreSQLï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;å­˜å‚¨èŠ‚ç‚¹ã€Kubernetes worker èŠ‚ç‚¹ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;2. ä½¿ç”¨åœºæ™¯&lt;a href=&quot;#2-ä½¿ç”¨åœºæ™¯&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;












































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;åœºæ™¯&lt;/th&gt;&lt;th&gt;æ¨èè°ƒåº¦å™¨&lt;/th&gt;&lt;th&gt;ç†ç”±&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;NVMe SSDï¼ˆé«˜æ€§èƒ½ï¼‰&lt;/td&gt;&lt;td&gt;&lt;code&gt;none&lt;/code&gt; æˆ– &lt;code&gt;kyber&lt;/code&gt;&lt;/td&gt;&lt;td&gt;ç¡¬ä»¶è‡ªå¸¦è°ƒåº¦ï¼Œnone å»¶è¿Ÿæœ€ä½ï¼›kyber é€‚åˆæ§åˆ¶å»¶è¿Ÿç›®æ ‡&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;SATA SSD&lt;/td&gt;&lt;td&gt;&lt;code&gt;mq-deadline&lt;/code&gt;&lt;/td&gt;&lt;td&gt;å»¶è¿Ÿä¸ååå¹³è¡¡è‰¯å¥½&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;æœºæ¢°ç¡¬ç›˜&lt;/td&gt;&lt;td&gt;&lt;code&gt;bfq&lt;/code&gt; æˆ– &lt;code&gt;mq-deadline&lt;/code&gt;&lt;/td&gt;&lt;td&gt;æå‡äº¤äº’æ€§æˆ–ä¿è¯å»¶è¿Ÿ&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;æ¡Œé¢ç³»ç»Ÿ&lt;/td&gt;&lt;td&gt;&lt;code&gt;bfq&lt;/code&gt;&lt;/td&gt;&lt;td&gt;å…¬å¹³æ€§ä¸å“åº”æ—¶é—´æ›´å¥½&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;æ•°æ®åº“æœåŠ¡å™¨&lt;/td&gt;&lt;td&gt;&lt;code&gt;kyber&lt;/code&gt; æˆ– &lt;code&gt;mq-deadline&lt;/code&gt;&lt;/td&gt;&lt;td&gt;ä½å»¶è¿Ÿå’Œç¨³å®šæ€§ä¼˜å…ˆ&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;è™šæ‹Ÿæœº / å®¿ä¸»æœº&lt;/td&gt;&lt;td&gt;&lt;code&gt;none&lt;/code&gt;&lt;/td&gt;&lt;td&gt;è°ƒåº¦ç”±ä¸Šå±‚è™šæ‹ŸåŒ–å±‚å®Œæˆ&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;å®¹å™¨èŠ‚ç‚¹ï¼ˆKubernetes Workerï¼‰&lt;/td&gt;&lt;td&gt;&lt;code&gt;mq-deadline&lt;/code&gt; æˆ– &lt;code&gt;none&lt;/code&gt;&lt;/td&gt;&lt;td&gt;åœ¨å…±äº«å—è®¾å¤‡ä¸Šæä¾›å¯é¢„æœŸæ€§èƒ½&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;ä¸‰ã€IO å‚æ•°&lt;a href=&quot;#ä¸‰io-å‚æ•°&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;section&gt;&lt;h2&gt;1. è°ƒåº¦ä¸è¯·æ±‚æ§åˆ¶&lt;a href=&quot;#1-è°ƒåº¦ä¸è¯·æ±‚æ§åˆ¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;








































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å‚æ•°å&lt;/th&gt;&lt;th&gt;ç¤ºä¾‹å€¼&lt;/th&gt;&lt;th&gt;è¯´æ˜&lt;/th&gt;&lt;th&gt;å…¸å‹è°ƒä¼˜ç­–ç•¥&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;scheduler&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;[mq-deadline] kyber bfq none&lt;/code&gt;&lt;/td&gt;&lt;td&gt;å½“å‰ä½¿ç”¨çš„ I/O è°ƒåº¦å™¨ï¼ˆæ–¹æ‹¬å·ä¸­ä¸ºå½“å‰å¯ç”¨é¡¹ï¼‰&lt;/td&gt;&lt;td&gt;SSDï¼š&lt;code&gt;none&lt;/code&gt;ï¼›HDDï¼š&lt;code&gt;mq-deadline&lt;/code&gt; æˆ– &lt;code&gt;bfq&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;nr_requests&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;128&lt;/code&gt;&lt;/td&gt;&lt;td&gt;é˜Ÿåˆ—ä¸­å…è®¸çš„æœ€å¤§æŒ‚èµ·è¯·æ±‚æ•°&lt;/td&gt;&lt;td&gt;æé«˜å¯æå‡å¹¶å‘ååï¼ˆå¸¸è°ƒä¸º 256 æˆ– 512ï¼‰&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;nomerges&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;0/1/2&lt;/code&gt;&lt;/td&gt;&lt;td&gt;æ˜¯å¦åˆå¹¶ç›¸é‚» I/O è¯·æ±‚ï¼š0=å¯ç”¨ï¼›1=åªåˆå¹¶å‰åï¼›2=ç¦ç”¨&lt;/td&gt;&lt;td&gt;é«˜å¹¶å‘æµ‹è¯•/SSD å¯è®¾ä¸º &lt;code&gt;2&lt;/code&gt; é™ä½å»¶è¿Ÿ&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;add_random&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;1/0&lt;/code&gt;&lt;/td&gt;&lt;td&gt;æ˜¯å¦å°†è®¾å¤‡å‚ä¸éšæœºæ€§ç†µæ± ç”Ÿæˆï¼ˆå¯¹ &lt;code&gt;/dev/random&lt;/code&gt;ï¼‰&lt;/td&gt;&lt;td&gt;å»ºè®® SSD/è™šæ‹Ÿæœºå…³é—­ï¼š&lt;code&gt;echo 0 &amp;gt; add_random&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;iostats&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;1/0&lt;/code&gt;&lt;/td&gt;&lt;td&gt;æ˜¯å¦å¯ç”¨ I/O ç»Ÿè®¡æ”¶é›†ï¼ˆç”¨äº &lt;code&gt;iostat&lt;/code&gt; ç­‰ï¼‰&lt;/td&gt;&lt;td&gt;è‹¥æç«¯è¿½æ±‚æ€§èƒ½ï¼Œå¯å…³é—­ï¼š&lt;code&gt;echo 0 &amp;gt; iostats&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;2. æ€§èƒ½ç›¸å…³&lt;a href=&quot;#2-æ€§èƒ½ç›¸å…³&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;
































































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å‚æ•°å&lt;/th&gt;&lt;th&gt;ç¤ºä¾‹å€¼&lt;/th&gt;&lt;th&gt;è¯´æ˜&lt;/th&gt;&lt;th&gt;è°ƒä¼˜å»ºè®®&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;read_ahead_kb&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;128&lt;/code&gt;&lt;/td&gt;&lt;td&gt;é¢„è¯»ç¼“å­˜å¤§å°ï¼ˆé¡ºåºè¯»å–æ—¶ä¼šé¢„å…ˆè¯»å–çš„æ•°æ®é‡ï¼‰&lt;/td&gt;&lt;td&gt;SSD é€šå¸¸ &lt;code&gt;16~64&lt;/code&gt;ï¼›HDD å¯ &lt;code&gt;128~512&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;max_sectors_kb&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;512&lt;/code&gt;&lt;/td&gt;&lt;td&gt;å•æ¬¡ I/O æœ€å¤§ä¼ è¾“æ‰‡åŒºï¼ˆ1 æ‰‡åŒº=512Bï¼‰&lt;/td&gt;&lt;td&gt;ä¸€èˆ¬ä¸æ”¹ï¼›NVMe é€šå¸¸ 1024 æˆ–æ›´é«˜&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;logical_block_size&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;512&lt;/code&gt;&lt;/td&gt;&lt;td&gt;é€»è¾‘æ‰‡åŒºå¤§å°ï¼ˆæ“ä½œç³»ç»Ÿè§†è§’ï¼‰&lt;/td&gt;&lt;td&gt;å›ºå®šå€¼ï¼Œä¸å»ºè®®ä¿®æ”¹&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;physical_block_size&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;4096&lt;/code&gt;&lt;/td&gt;&lt;td&gt;ç‰©ç†æ‰‡åŒºå¤§å°ï¼ˆè®¾å¤‡å®é™…ï¼‰&lt;/td&gt;&lt;td&gt;å›ºå®šå€¼ï¼Œä»…ä¾›å¯¹é½è®¡ç®—&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;minimum_io_size&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;4096&lt;/code&gt;&lt;/td&gt;&lt;td&gt;è®¾å¤‡å»ºè®®çš„æœ€å° I/O å•ä½&lt;/td&gt;&lt;td&gt;æ–‡ä»¶ç³»ç»Ÿæ ¼å¼åŒ–æ—¶å‚è€ƒ&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;optimal_io_size&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;0&lt;/code&gt; æˆ– &lt;code&gt;1048576&lt;/code&gt;&lt;/td&gt;&lt;td&gt;è®¾å¤‡æœ€ä½³ I/O å¤§å°ï¼ˆé¡ºåºè¯»å†™ä¼˜åŒ–ï¼‰&lt;/td&gt;&lt;td&gt;SSD/RAID è®¾å¤‡ä¸­è¾ƒæœ‰æ„ä¹‰&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;**max_segments  **&lt;/td&gt;&lt;td&gt;&lt;code&gt;128&lt;/code&gt;&lt;/td&gt;&lt;td&gt;ä¸€æ¬¡ I/O æ“ä½œæœ€å¤šå¯ä»¥æ‰“åŒ…çš„ç‰©ç†å†…å­˜é¡µæ•°é‡&lt;/td&gt;&lt;td&gt;é€šå¸¸æ— éœ€æ‰‹åŠ¨ä¿®æ”¹ï¼ˆç”±é©±åŠ¨å®šä¹‰ï¼‰&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;**max_segment_size  **&lt;/td&gt;&lt;td&gt;&lt;code&gt;65536&lt;/code&gt;&lt;/td&gt;&lt;td&gt;å•ä¸ª segment çš„æœ€å¤§å­—èŠ‚æ•°ã€‚&lt;/td&gt;&lt;td&gt;ä¸€èˆ¬ç”±é©±åŠ¨è‡ªåŠ¨è®¾å®š&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;minimum_io_size&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;4096&lt;/code&gt;&lt;/td&gt;&lt;td&gt;è¡¨ç¤º&lt;strong&gt;è®¾å¤‡å»ºè®®çš„æœ€å° I/O æ“ä½œå¤§å°&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;ä¸è¦éšæ„ä¿®æ”¹&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;3. &lt;strong&gt;å»¶è¿Ÿä¸å¹¶è¡Œæ§åˆ¶&lt;/strong&gt;&lt;a href=&quot;#3-å»¶è¿Ÿä¸å¹¶è¡Œæ§åˆ¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;


































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å‚æ•°å&lt;/th&gt;&lt;th&gt;ç¤ºä¾‹å€¼&lt;/th&gt;&lt;th&gt;è¯´æ˜&lt;/th&gt;&lt;th&gt;è°ƒä¼˜æ€è·¯&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;rq_affinity&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;1&lt;/code&gt;&lt;/td&gt;&lt;td&gt;I/O å®Œæˆä¸­æ–­æ˜¯å¦åœ¨åŒ CPU å¤„ç†ï¼š0=ä»»æ„CPUï¼›1=åŒCPU&lt;/td&gt;&lt;td&gt;å¤šæ ¸ç³»ç»Ÿä¸€èˆ¬ä¿ç•™ &lt;code&gt;1&lt;/code&gt; æé«˜ç¼“å­˜å‘½ä¸­&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;nr_zones&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;0&lt;/code&gt;&lt;/td&gt;&lt;td&gt;ZNS/Zonedè®¾å¤‡çš„zoneæ•°&lt;/td&gt;&lt;td&gt;ä»…å¯¹SMRç£ç›˜/Zoneè®¾å¤‡æœ‰æ•ˆ&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;write_cache&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;write back&lt;/code&gt; / &lt;code&gt;write through&lt;/code&gt;&lt;/td&gt;&lt;td&gt;å†™ç¼“å­˜ç­–ç•¥ï¼ˆç”±ç¡¬ä»¶æ§åˆ¶ï¼‰&lt;/td&gt;&lt;td&gt;SSDä¿æŒ&lt;code&gt;write back&lt;/code&gt;ä»¥æå‡é€Ÿåº¦&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;rotational&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;0&lt;/code&gt; / &lt;code&gt;1&lt;/code&gt;&lt;/td&gt;&lt;td&gt;æ˜¯å¦ä¸ºæ—‹è½¬ä»‹è´¨ï¼ˆ0=SSD,1=HDDï¼‰&lt;/td&gt;&lt;td&gt;åªè¯»é¡¹ï¼›å½±å“è°ƒåº¦å™¨é»˜è®¤è¡Œä¸º&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;4. &lt;strong&gt;å¤šé˜Ÿåˆ—(MQ) æœºåˆ¶ç›¸å…³å‚æ•°&lt;/strong&gt;&lt;a href=&quot;#4-å¤šé˜Ÿåˆ—mq-æœºåˆ¶ç›¸å…³å‚æ•°&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;blockquote&gt;&lt;p&gt;ç°ä»£ Linux å†…æ ¸ï¼ˆâ‰¥3.13ï¼‰ä½¿ç”¨ &lt;code&gt;blk-mq&lt;/code&gt;ï¼ˆBlock MultiQueueï¼‰æ¶æ„ç®¡ç† I/Oã€‚&lt;/p&gt;&lt;/blockquote&gt;








































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å‚æ•°å&lt;/th&gt;&lt;th&gt;ç¤ºä¾‹å€¼&lt;/th&gt;&lt;th&gt;è¯´æ˜&lt;/th&gt;&lt;th&gt;è°ƒä¼˜åœºæ™¯&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;nr_hw_queues&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;1&lt;/code&gt; / &lt;code&gt;4&lt;/code&gt; / &lt;code&gt;8&lt;/code&gt;&lt;/td&gt;&lt;td&gt;è®¾å¤‡æ”¯æŒçš„ç¡¬ä»¶é˜Ÿåˆ—æ•°&lt;/td&gt;&lt;td&gt;NVMe é€šå¸¸ä¸º CPU æ•°é‡çº§&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;queue_depth&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;256&lt;/code&gt;&lt;/td&gt;&lt;td&gt;æ¯ä¸ªé˜Ÿåˆ—å¯æŒ‚èµ·çš„è¯·æ±‚æ•°&lt;/td&gt;&lt;td&gt;é«˜æ€§èƒ½SSDé€šå¸¸å¯åˆ°&lt;code&gt;1024&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;poll_delay&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;-1&lt;/code&gt;&lt;/td&gt;&lt;td&gt;I/O è½®è¯¢å»¶è¿Ÿ&lt;/td&gt;&lt;td&gt;ä»…åœ¨ &lt;code&gt;iopoll&lt;/code&gt; å¯ç”¨æ—¶æœ‰æ•ˆ&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;io_poll&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;0/1&lt;/code&gt;&lt;/td&gt;&lt;td&gt;å¯ç”¨ I/O è½®è¯¢æ¨¡å¼ï¼ˆå‡å°‘ä¸­æ–­ï¼‰&lt;/td&gt;&lt;td&gt;é«˜IOPS SSDå¯å¼€å¯&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;io_poll_delay&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;-1&lt;/code&gt;&lt;/td&gt;&lt;td&gt;æ§åˆ¶è½®è¯¢ç­‰å¾…æ—¶é—´&lt;/td&gt;&lt;td&gt;ä¸“ä¸šè°ƒä¼˜åœºæ™¯ä½¿ç”¨&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;5. æ•°æ®å®Œæ•´æ€§ä¸å®‰å…¨ç›¸å…³&lt;a href=&quot;#5-æ•°æ®å®Œæ•´æ€§ä¸å®‰å…¨ç›¸å…³&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;


































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å‚æ•°å&lt;/th&gt;&lt;th&gt;ç¤ºä¾‹å€¼&lt;/th&gt;&lt;th&gt;è¯´æ˜&lt;/th&gt;&lt;th&gt;è°ƒä¼˜å»ºè®®&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;discard_granularity&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;512&lt;/code&gt; æˆ– &lt;code&gt;4096&lt;/code&gt;&lt;/td&gt;&lt;td&gt;æ”¯æŒçš„ TRIMï¼ˆdiscardï¼‰æœ€å°ç²’åº¦&lt;/td&gt;&lt;td&gt;ä¸ SSD å¯¹é½ä¼˜åŒ–æœ‰å…³&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;discard_max_bytes&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;2147483648&lt;/code&gt;&lt;/td&gt;&lt;td&gt;å•æ¬¡æœ€å¤§ discard æ“ä½œå¤§å°&lt;/td&gt;&lt;td&gt;è‡ªåŠ¨è¯†åˆ«ï¼Œé€šå¸¸ä¸ä¿®æ”¹&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;write_same_max_bytes&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;0&lt;/code&gt;&lt;/td&gt;&lt;td&gt;ä¸€æ¬¡æ€§å†™ç›¸åŒæ•°æ®æœ€å¤§å­—èŠ‚æ•°&lt;/td&gt;&lt;td&gt;æ”¯æŒ &lt;code&gt;WRITE SAME&lt;/code&gt; æŒ‡ä»¤æ—¶æœ‰æ•ˆ&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;security_erase_unit&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;0&lt;/code&gt;&lt;/td&gt;&lt;td&gt;æ”¯æŒå®‰å…¨æ“¦é™¤çš„å•ä½å¤§å°&lt;/td&gt;&lt;td&gt;ä¸€èˆ¬ä¸ºåªè¯»ä¿¡æ¯&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;6. æ•°æ®å®Œæ•´æ€§ä¸å®‰å…¨ç›¸å…³&lt;a href=&quot;#6-æ•°æ®å®Œæ•´æ€§ä¸å®‰å…¨ç›¸å…³&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;


































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å‚æ•°å&lt;/th&gt;&lt;th&gt;ç¤ºä¾‹å€¼&lt;/th&gt;&lt;th&gt;è¯´æ˜&lt;/th&gt;&lt;th&gt;è°ƒä¼˜å»ºè®®&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;discard_granularity&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;512&lt;/code&gt; æˆ– &lt;code&gt;4096&lt;/code&gt;&lt;/td&gt;&lt;td&gt;æ”¯æŒçš„ TRIMï¼ˆdiscardï¼‰æœ€å°ç²’åº¦&lt;/td&gt;&lt;td&gt;ä¸ SSD å¯¹é½ä¼˜åŒ–æœ‰å…³&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;discard_max_bytes&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;2147483648&lt;/code&gt;&lt;/td&gt;&lt;td&gt;å•æ¬¡æœ€å¤§ discard æ“ä½œå¤§å°&lt;/td&gt;&lt;td&gt;è‡ªåŠ¨è¯†åˆ«ï¼Œé€šå¸¸ä¸ä¿®æ”¹&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;write_same_max_bytes&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;0&lt;/code&gt;&lt;/td&gt;&lt;td&gt;ä¸€æ¬¡æ€§å†™ç›¸åŒæ•°æ®æœ€å¤§å­—èŠ‚æ•°&lt;/td&gt;&lt;td&gt;æ”¯æŒ &lt;code&gt;WRITE SAME&lt;/code&gt; æŒ‡ä»¤æ—¶æœ‰æ•ˆ&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;security_erase_unit&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;0&lt;/code&gt;&lt;/td&gt;&lt;td&gt;æ”¯æŒå®‰å…¨æ“¦é™¤çš„å•ä½å¤§å°&lt;/td&gt;&lt;td&gt;ä¸€èˆ¬ä¸ºåªè¯»ä¿¡æ¯&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;7. ä½¿ç”¨&lt;a href=&quot;#7-ä½¿ç”¨&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;æŸ¥çœ‹è®¾å¤‡æ”¯æŒçš„è°ƒåº¦å™¨&lt;a href=&quot;#æŸ¥çœ‹è®¾å¤‡æ”¯æŒçš„è°ƒåº¦å™¨&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;cat&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/sys/block/sda/queue/scheduler&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;è¾“å‡ºï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[mq-deadline] kyber bfq none&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;å…¶ä¸­æ–¹æ‹¬å·ä¸­çš„æ˜¯å½“å‰æ­£åœ¨ä½¿ç”¨çš„è°ƒåº¦å™¨ç±»å‹&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;ä¸´æ—¶åˆ‡æ¢è°ƒåº¦å™¨&lt;a href=&quot;#ä¸´æ—¶åˆ‡æ¢è°ƒåº¦å™¨&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;echo&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;none&lt;/span&gt;&lt;span&gt; &amp;gt; &lt;/span&gt;&lt;span&gt;/sys/block/sda/queue/scheduler&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;ä½¿ç”¨udev æ°¸ä¹…æ€§ä¿®æ”¹è°ƒåº¦å™¨ç±»å‹å’Œå‚æ•°&lt;a href=&quot;#ä½¿ç”¨udev-æ°¸ä¹…æ€§ä¿®æ”¹è°ƒåº¦å™¨ç±»å‹å’Œå‚æ•°&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;section&gt;&lt;h4&gt;é…ç½®æ–‡ä»¶è·¯å¾„&lt;a href=&quot;#é…ç½®æ–‡ä»¶è·¯å¾„&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;æµ‹è¯•ç”¨è§„åˆ™æ”¾ &lt;code&gt;/etc/udev/rules.d/&lt;/code&gt;ï¼Œç”Ÿäº§ç³»ç»Ÿæ”¾ &lt;code&gt;/lib/udev/rules.d/&lt;/code&gt;&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;åŸç†&lt;a href=&quot;#åŸç†&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;Linux å¯åŠ¨æˆ–æ£€æµ‹åˆ°æ–°ç£ç›˜æ—¶ï¼Œ&lt;code&gt;udev&lt;/code&gt; ä¼šè§¦å‘â€œè®¾å¤‡äº‹ä»¶â€ï¼ˆ&lt;code&gt;add&lt;/code&gt;, &lt;code&gt;change&lt;/code&gt;, &lt;code&gt;remove&lt;/code&gt; ç­‰ï¼‰ã€‚&lt;br /&gt;
å¯ä»¥ç¼–å†™ä¸€æ¡ &lt;code&gt;**udev**&lt;/code&gt;** è§„åˆ™ï¼ˆ*.rules æ–‡ä»¶ï¼‰**ï¼Œåœ¨ç£ç›˜æ·»åŠ æ—¶è‡ªåŠ¨å†™å…¥å‚æ•°å€¼ã€‚&lt;/p&gt;&lt;p&gt;è¿™äº›å‚æ•°ï¼ˆä¾‹å¦‚ &lt;code&gt;scheduler&lt;/code&gt;ã€&lt;code&gt;nr_requests&lt;/code&gt;ã€&lt;code&gt;read_ahead_kb&lt;/code&gt; ç­‰ï¼‰éƒ½æ˜¯é€šè¿‡ sysfs æ–‡ä»¶æš´éœ²çš„ï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;/sys/block/sda/queue/scheduler&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;/sys/block/sda/queue/nr_requests&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;/sys/block/sda/queue/read_ahead_kb&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;æ‰€ä»¥è§„åˆ™çš„æ ¸å¿ƒé€»è¾‘å…¶å®å°±æ˜¯ï¼š&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;å½“æ£€æµ‹åˆ°æ–° block è®¾å¤‡ï¼ˆ/dev/sd*ï¼‰æ—¶ï¼Œç”¨ &lt;code&gt;ATTR{}&lt;/code&gt; å†™å…¥ç›®æ ‡å‚æ•°ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;ç¤ºä¾‹&lt;a href=&quot;#ç¤ºä¾‹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;åˆ›å»ºè§„åˆ™æ–‡ä»¶ï¼ˆä¿æŒæ–‡ä»¶åæ•°å­—è¾ƒå¤§ï¼Œå¦‚ &lt;code&gt;60+&lt;/code&gt;ï¼Œç¡®ä¿åœ¨ç³»ç»Ÿé»˜è®¤è§„åˆ™ä¹‹åæ‰§è¡Œï¼‰&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;/etc/udev/rules.d/60-ssd-io-optimize.rules&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;æ’å…¥è§„åˆ™&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ACTION&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;=&quot;add|change&quot;,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;KERNEL&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;=&quot;sd[a-z]&quot;,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;SUBSYSTEM&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;=&quot;block&quot;,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;\&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;ATTR{queue/scheduler}=&quot;none&quot;,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;\&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;ATTR{queue/nomerges}=&quot;2&quot;,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;\&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;ATTR{queue/nr_requests}=&quot;256&quot;,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;\&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;ATTR{queue/add_random}=&quot;0&quot;,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;\&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;ATTR{queue/read_ahead_kb}=&quot;16&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;è°ƒè¯•è§„åˆ™&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;udevadm&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;test&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/sys/block/sda&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;é‡æ–°åŠ è½½è§„åˆ™&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;udevadm&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;control&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--reload&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;æ‰‹åŠ¨è§¦å‘è§„åˆ™&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;udevadm&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;trigger&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# æˆ–è€…é™å®šç±»å‹ä¸åŒ¹é…è®¾å¤‡&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;udevadm&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;trigger&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--type=devices&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--subsystem-match=block&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;å†™å…¥å¤±è´¥&lt;a href=&quot;#å†™å…¥å¤±è´¥&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;å¦‚æœ udev æŠ¥é”™ â€œcannot write attributeâ€ï¼ŒåŸå› é€šå¸¸æ˜¯ï¼š&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;è®¾å¤‡è¿˜æ²¡å®Œå…¨åˆå§‹åŒ– â†’ å¯ä»¥åŠ ä¸€ç‚¹å»¶æ—¶æˆ–ç”¨ &lt;code&gt;change&lt;/code&gt; äº‹ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;æŸäº›å‚æ•°ï¼ˆå¦‚ &lt;code&gt;scheduler&lt;/code&gt;ï¼‰è¢«é©±åŠ¨é”å®šä¸ºåªè¯»ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;è§£å†³æ–¹æ³•ï¼šåœ¨è§„åˆ™ä¸­æ·»åŠ ä¸€æ¡æ¡ä»¶è§¦å‘ &lt;code&gt;RUN+=&lt;/code&gt; å‘½ä»¤ï¼Œä¾‹å¦‚ï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ACTION&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;=&quot;add|change&quot;,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;KERNEL&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;=&quot;sd[a-z]&quot;,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;SUBSYSTEM&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;=&quot;block&quot;,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;\&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;RUN+=&quot;/bin/bash -c &apos;echo none &amp;gt; /sys/block/%k/queue/scheduler&apos;&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;è¿™ç§å†™æ³•ç­‰ä»·äºæ‰‹åŠ¨ &lt;code&gt;echo&lt;/code&gt;ï¼Œé€‚ç”¨äºä¸èƒ½ç›´æ¥ç”¨ &lt;code&gt;ATTR{}&lt;/code&gt; ä¿®æ”¹çš„å‚æ•°ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;å››ã€fio IO æµ‹è¯•å·¥å…·&lt;a href=&quot;#å››fio-io-æµ‹è¯•å·¥å…·&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;fio&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--name=test&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--rw=randread&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--bs=4k&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--size=1G&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--runtime=10&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--ioengine=libaio&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--iodepth=16&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# æˆ–è€…è¾“å‡ºä¸ºjsonæ¨¡å¼ï¼Œæ›´æ˜“è¯»&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;fio&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--name=test&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--rw=randread&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--bs=4k&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--size=1G&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--runtime=10&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--ioengine=libaio&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--iodepth=16&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--output-format=json&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--output=fio_res.json&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;è¾“å‡ºç»“æœ&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;test&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; (g=0): &lt;/span&gt;&lt;span&gt;rw&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;randread,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;bs&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;/span&gt;&lt;span&gt;R&lt;/span&gt;&lt;span&gt;) &lt;/span&gt;&lt;span&gt;4096B-4096B,&lt;/span&gt;&lt;span&gt; (W) 4096B-4096B, (&lt;/span&gt;&lt;span&gt;T&lt;/span&gt;&lt;span&gt;) 4096B-4096B, &lt;/span&gt;&lt;span&gt;ioengine&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;libaio,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;iodepth&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;16&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;fio-3.41&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Starting&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;process&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Jobs:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt; (f=1): [r(&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;&lt;span&gt;)][100.0%][r&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;19.9MiB/s][r&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;/span&gt;&lt;span&gt;5100&lt;/span&gt;&lt;span&gt; IOPS][eta 00m:00s]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;test&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; (groupid=0, &lt;/span&gt;&lt;span&gt;jobs=&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;): &lt;/span&gt;&lt;span&gt;err&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;0:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;pid=12757:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Sun&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Nov&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;9&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;17:41:07&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;2025&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;read&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;IOPS=4959,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;BW=19.4MiB/s&lt;/span&gt;&lt;span&gt; (20.3MB/s)(&lt;/span&gt;&lt;span&gt;194MiB/10001msec&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;slat&lt;/span&gt;&lt;span&gt; (usec): &lt;/span&gt;&lt;span&gt;min&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;104,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;max&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;10568,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;avg&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;198.60,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;stdev&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;68.82&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;clat&lt;/span&gt;&lt;span&gt; (usec): &lt;/span&gt;&lt;span&gt;min&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;3,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;max&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;15012,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;avg&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;3021.31,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;stdev&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;372.17&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;     &lt;/span&gt;&lt;span&gt;lat&lt;/span&gt;&lt;span&gt; (usec): &lt;/span&gt;&lt;span&gt;min&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;205,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;max&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;15221,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;avg&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;3219.91,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;stdev&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;387.61&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;clat&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;percentiles&lt;/span&gt;&lt;span&gt; (usec):&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;     &lt;/span&gt;&lt;/span&gt;&lt;span&gt;|  &lt;/span&gt;&lt;span&gt;1.00th&lt;/span&gt;&lt;span&gt;=[&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;2507],&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;5.00th=[&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;2671],&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;10.00th=[&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;2769],&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;20.00th=[&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;2868],&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;     &lt;/span&gt;&lt;/span&gt;&lt;span&gt;| &lt;/span&gt;&lt;span&gt;30.00th&lt;/span&gt;&lt;span&gt;=[&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;2900],&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;40.00th=[&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;2933],&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;50.00th=[&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;2999],&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;60.00th=[&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;3032],&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;     &lt;/span&gt;&lt;/span&gt;&lt;span&gt;| &lt;/span&gt;&lt;span&gt;70.00th&lt;/span&gt;&lt;span&gt;=[&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;3064],&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;80.00th=[&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;3163],&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;90.00th=[&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;3261],&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;95.00th=[&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;3392],&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;     &lt;/span&gt;&lt;/span&gt;&lt;span&gt;| &lt;/span&gt;&lt;span&gt;99.00th&lt;/span&gt;&lt;span&gt;=[&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;4178],&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;99.50th=[&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;4817],&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;99.90th=[&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;6521],&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;99.95th=[&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;9110],&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;     &lt;/span&gt;&lt;/span&gt;&lt;span&gt;| &lt;/span&gt;&lt;span&gt;99.99th&lt;/span&gt;&lt;span&gt;=[15008]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;bw&lt;/span&gt;&lt;span&gt; (  &lt;/span&gt;&lt;span&gt;KiB/s&lt;/span&gt;&lt;span&gt;): &lt;/span&gt;&lt;span&gt;min&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;18424,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;max&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;20600,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;per&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;100.00%,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;avg&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;19841.60,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;stdev&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;498.42,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;samples&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;20&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;iops&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;min=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;4606,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;max=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;5150,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;avg=4960.40,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;stdev=124.61,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;samples=&lt;/span&gt;&lt;span&gt;20&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;lat&lt;/span&gt;&lt;span&gt; (usec)   &lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;4&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;0.01%,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;250&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;0.01%,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;500&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;0.01%,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;750&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;0.01%,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1000&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;0.01%&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;lat&lt;/span&gt;&lt;span&gt; (msec)   &lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;0.01%,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;4&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;98.88%,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;10&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;1.07%,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;20&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;0.03%&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;cpu&lt;/span&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;usr=1.22%,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;sys=8.41%,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;ctx=49604,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;majf=0,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;minf=&lt;/span&gt;&lt;span&gt;22&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;IO&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;depths&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1=0.1%,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;2=0.1%,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;4=0.1%,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;8=0.1%,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;16=100.0%,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;32=0.0%,&lt;/span&gt;&lt;span&gt; &amp;gt;&lt;/span&gt;&lt;span&gt;=64=0.0%&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;     &lt;/span&gt;&lt;span&gt;submit&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;0=0.0%,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;4=100.0%,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;8=0.0%,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;16=0.0%,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;32=0.0%,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;64=0.0%,&lt;/span&gt;&lt;span&gt; &amp;gt;&lt;/span&gt;&lt;span&gt;=64=0.0%&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;     &lt;/span&gt;&lt;span&gt;complete&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;0=0.0%,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;4=100.0%,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;8=0.0%,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;16=0.1%,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;32=0.0%,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;64=0.0%,&lt;/span&gt;&lt;span&gt; &amp;gt;&lt;/span&gt;&lt;span&gt;=64=0.0%&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;     &lt;/span&gt;&lt;span&gt;issued&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;rwts:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;total=49604,0,0,0&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;short=0,0,0,0&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;dropped=0,0,0,0&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;     &lt;/span&gt;&lt;span&gt;latency&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;target=0,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;window=0,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;percentile=100.00%,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;depth=&lt;/span&gt;&lt;span&gt;16&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;27&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Run&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;status&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;group&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt; (all &lt;/span&gt;&lt;span&gt;jobs&lt;/span&gt;&lt;span&gt;):&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;28&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;READ:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;bw=19.4MiB/s&lt;/span&gt;&lt;span&gt; (20.3MB/s), 19.4MiB/s-19.4MiB/s (&lt;/span&gt;&lt;span&gt;20.3MB/s-20.3MB/s&lt;/span&gt;&lt;span&gt;), &lt;/span&gt;&lt;span&gt;io&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;194MiB&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;(203MB&lt;/span&gt;&lt;span&gt;), &lt;/span&gt;&lt;span&gt;run&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;10001-10001msec&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;29&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;30&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Disk&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;stats&lt;/span&gt;&lt;span&gt; (read/write):&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;31&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;dm-0:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;ios=49133/7,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;sectors=393064/96,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;merge=0/0,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;ticks=8327/3,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;in_queue=8330,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;util=83.35%,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;aggrios=49604/7,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;aggsectors=396832/96,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;aggrmerge=0/0,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;aggrticks=8967/6,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;aggrin_queue=8976,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;aggrutil=86.32%&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;32&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;sda:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;ios=49604/7,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;sectors=396832/96,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;merge=0/0,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;ticks=8967/6,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;in_queue=8976,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;util=86.32%&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;</content:encoded></item><item><title>Kubernetes Labelä¸åˆ†å±‚æ¨¡å‹</title><link>https://white-festa.net/posts/kubernetes-tutorial/kubernetes-labels-model/</link><guid isPermaLink="true">https://white-festa.net/posts/kubernetes-tutorial/kubernetes-labels-model/</guid><description>å¦‚ä½•æ›´å¥½çš„ä½¿ç”¨kubernetes labelç®¡ç†å·¥ä½œèµ„æºï¼Œä½¿ç”¨åŸºäºæœåŠ¡èº«ä»½ã€ç»„ç»‡/ç®¡ç†ç»´åº¦ä¸å‘å¸ƒç»´åº¦çš„åˆ†å±‚æ¨¡å‹</description><pubDate>Mon, 09 Jun 2025 00:00:00 GMT</pubDate><content:encoded>&lt;section&gt;&lt;h1&gt;ä¸‰ä¸ª Labels ç›¸å…³å­—æ®µ&lt;a href=&quot;#ä¸‰ä¸ª-labels-ç›¸å…³å­—æ®µ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;åˆ†åˆ«æ˜¯ &lt;code&gt;metadata.labels&lt;/code&gt;ï¼Œ&lt;code&gt;spec.template.metadata.labels&lt;/code&gt; å’Œ &lt;code&gt;spec.selector.matchlabels&lt;/code&gt;&lt;/p&gt;&lt;section&gt;&lt;h2&gt;åŒºåˆ«&lt;a href=&quot;#åŒºåˆ«&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;
























&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;ä½ç½®&lt;/th&gt;&lt;th&gt;å±äºè°&lt;/th&gt;&lt;th&gt;ä½œç”¨&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;metadata.labels&lt;/code&gt;&lt;/td&gt;&lt;td&gt;Deployment / Service æœ¬èº«&lt;/td&gt;&lt;td&gt;æ ‡è¯†â€œè¿™ä¸ªå¯¹è±¡æ˜¯ä»€ä¹ˆâ€&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.template.metadata.labels&lt;/code&gt;&lt;/td&gt;&lt;td&gt;&lt;strong&gt;Pod&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;&lt;strong&gt;çœŸæ­£æ‰“åœ¨ Pod ä¸Šçš„æ ‡ç­¾&lt;/strong&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.selector.matchLabels&lt;/code&gt;&lt;/td&gt;&lt;td&gt;Deployment&lt;/td&gt;&lt;td&gt;å£°æ˜å…·æœ‰å“ªäº›æ ‡ç­¾çš„Podè¢«æ­¤Deploymentæ‰€ç®¡ç†&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;ä¹Ÿå°±æ˜¯è¯´&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kubectl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;get&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;pods&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--show-labels&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;spec.template.metadata.labels&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kubectl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;get&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;deployments&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--show-labels&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;metadata.labels&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;å¦å¤–ï¼Œåœ¨åˆ›å»ºDeployment Manifestæ—¶ï¼Œspec.template.metadata.labelsä¸spec.selector.matchLabelså¿…é¡»ç›¸ç­‰ï¼Œå¦åˆ™applyä¼šå¤±è´¥ï¼Œå› ä¸ºPodä¸Deploymentæ²¡æœ‰å»ºç«‹èµ·è€¦åˆå…³ç³»ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;Service çš„ Selector é€‰æ‹©çš„æ˜¯å“ªä¸ª Labelï¼Ÿ&lt;a href=&quot;#service-çš„-selector-é€‰æ‹©çš„æ˜¯å“ªä¸ª-label&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Service&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;selector&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;myapp&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;version&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;blue&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;å…¶è¡Œä¸ºæ˜¯ç­‰ä»·äºæŸ¥æ‰¾æ‰€æœ‰ Pod ä¸­ï¼Œ &lt;code&gt;spec.template.metadata.labels&lt;/code&gt;å­˜åœ¨ &lt;code&gt;app=myapp&lt;/code&gt;,&lt;code&gt;version=blue&lt;/code&gt; çš„ Podã€‚&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;æ ‡ç­¾åˆ†å±‚æ¨¡å‹&lt;a href=&quot;#æ ‡ç­¾åˆ†å±‚æ¨¡å‹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;section&gt;&lt;h2&gt;æœåŠ¡èº«ä»½ - ç¨³å®š&lt;a href=&quot;#æœåŠ¡èº«ä»½---ç¨³å®š&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;myapp&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;å‘å¸ƒç»´åº¦ - ä¼šå˜&lt;a href=&quot;#å‘å¸ƒç»´åº¦---ä¼šå˜&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;version&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;v1 / v2 / canary&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;ç®¡ç† / ç»„ç»‡ç»´åº¦&lt;a href=&quot;#ç®¡ç†--ç»„ç»‡ç»´åº¦&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;owner&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;team-a&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;env&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;prod&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;ä½¿ç”¨&lt;a href=&quot;#ä½¿ç”¨&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;Pod: 1+2&lt;/li&gt;
&lt;li&gt;Deployment selector: 1+2&lt;/li&gt;
&lt;li&gt;Deployment metadata: 1+3&lt;/li&gt;
&lt;li&gt;Service selector: 1 æˆ–  1+2ï¼Œå–å†³äºæ˜¯å¦è¦åšè“ç»¿éƒ¨ç½²&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;/section&gt;</content:encoded></item><item><title>ä½¿ç”¨GitHub Actionså®ç°CI/CDæµæ°´çº¿</title><link>https://white-festa.net/posts/github-actions/github-actions/</link><guid isPermaLink="true">https://white-festa.net/posts/github-actions/github-actions/</guid><description>ä½¿ç”¨GitHub Actionsä¸€é”®å°†åº”ç”¨ç¨‹åºéƒ¨ç½²è‡³Azure Kubernetes</description><pubDate>Sat, 29 Mar 2025 00:00:00 GMT</pubDate><content:encoded>&lt;section&gt;&lt;h1&gt;ä½¿ç”¨GitHub Actionså®ç°CI/CDæµæ°´çº¿&lt;a href=&quot;#ä½¿ç”¨github-actionså®ç°cicdæµæ°´çº¿&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;GitHub Actions æ˜¯ GitHub æä¾›çš„ä¸€ä¸ªå¼ºå¤§è€Œçµæ´»çš„è‡ªåŠ¨åŒ–å·¥å…·ï¼Œèƒ½å¤Ÿå¸®åŠ©å¼€å‘è€…å®ç°æŒç»­é›†æˆï¼ˆCIï¼‰å’ŒæŒç»­äº¤ä»˜/éƒ¨ç½²ï¼ˆCDï¼‰æµæ°´çº¿ã€‚å®ƒèƒ½å¤Ÿè®©å¼€å‘è€…åœ¨ä»£ç åº“çš„ä¸åŒé˜¶æ®µï¼ˆå¦‚ä»£ç æäº¤ã€æ‹‰å–è¯·æ±‚ã€å‘å¸ƒç­‰ï¼‰è‡ªåŠ¨è§¦å‘æ„å»ºã€æµ‹è¯•ã€éƒ¨ç½²ç­‰ä»»åŠ¡ã€‚å€ŸåŠ© GitHub Actionsï¼Œå¼€å‘è€…å¯ä»¥é€šè¿‡è‡ªå®šä¹‰çš„ YAML æ–‡ä»¶å®šä¹‰å·¥ä½œæµï¼Œå®ç°ä»ä»£ç æäº¤åˆ°åº”ç”¨å‘å¸ƒçš„å…¨è‡ªåŠ¨åŒ–è¿‡ç¨‹ã€‚&lt;/p&gt;&lt;section&gt;&lt;h2&gt;GitHub Actionsçš„ä¼˜åŠ¿&lt;a href=&quot;#github-actionsçš„ä¼˜åŠ¿&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;æ·±åº¦é›†æˆï¼šGitHub Actions ä¸ GitHub ä»“åº“æ— ç¼é›†æˆï¼Œå¯ä»¥æ ¹æ®äº‹ä»¶è‡ªåŠ¨è§¦å‘å·¥ä½œæµï¼Œé€‚ç”¨äºå„ç±»å¼€å‘é¡¹ç›®ã€‚&lt;/li&gt;
&lt;li&gt;çµæ´»æ€§é«˜ï¼šæ”¯æŒé«˜åº¦è‡ªå®šä¹‰çš„å·¥ä½œæµï¼Œå¼€å‘è€…å¯ä»¥æ ¹æ®ä¸åŒçš„é¡¹ç›®éœ€æ±‚ï¼Œçµæ´»åœ°é…ç½®ä¸åŒçš„ä»»åŠ¡ã€æ¡ä»¶å’Œä¾èµ–&lt;/li&gt;
&lt;li&gt;ç”Ÿæ€ç³»ç»Ÿä¸°å¯Œï¼šGitHub Marketplace æä¾›äº†æ•°åƒä¸ªç°æˆçš„ Actionsï¼ˆå¦‚å®¹å™¨éƒ¨ç½²ã€æµ‹è¯•å·¥å…·ã€CI/CD ä»»åŠ¡ç­‰ï¼‰ï¼Œå¼€å‘è€…å¯ä»¥æ–¹ä¾¿åœ°å¤ç”¨å·²æœ‰ç»„ä»¶ï¼Œå‡å°‘é‡å¤å·¥ä½œã€‚&lt;/li&gt;
&lt;li&gt;å¹¶è¡ŒåŒ–ä»»åŠ¡æ‰§è¡Œï¼šGitHub Actions å¯ä»¥è®©å¤šä¸ªä»»åŠ¡å¹¶è¡Œè¿è¡Œï¼Œæå‡ CI/CD çš„æ•ˆç‡ï¼Œé€‚åº”å¤§å‹é¡¹ç›®çš„å¤æ‚éœ€æ±‚ã€‚&lt;/li&gt;
&lt;li&gt;å¯æ‰©å±•æ€§å¼º: GitHub actionså¯ä»¥ä¸ä¸»æµäº‘è®¡ç®—å¹³å°ç›¸ç»“åˆï¼Œå®ç°æ— ç¼çš„äº‘éƒ¨ç½²ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;å®è·µï¼šé€šè¿‡GitHub Actionså®ç°è‡ªåŠ¨åŒ–æ„å»ºdockeré•œåƒå¹¶éƒ¨ç½²åˆ°Azure Kubernetesä¸Š&lt;a href=&quot;#å®è·µé€šè¿‡github-actionså®ç°è‡ªåŠ¨åŒ–æ„å»ºdockeré•œåƒå¹¶éƒ¨ç½²åˆ°azure-kubernetesä¸Š&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;é¡¹ç›®é“¾æ¥ï¼š&lt;a href=&quot;https://github.com/chunyiw8080/sit722-part5&quot;&gt;https://github.com/chunyiw8080/sit722-part5&lt;/a&gt;&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;ä½¿ç”¨Terraformåˆ›å»ºAzure Kubernetesé›†ç¾¤å’ŒContainer Registryé•œåƒå­˜å‚¨åº“&lt;a href=&quot;#ä½¿ç”¨terraformåˆ›å»ºazure-kubernetesé›†ç¾¤å’Œcontainer-registryé•œåƒå­˜å‚¨åº“&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;ç¼–å†™Shellè„šæœ¬&lt;a href=&quot;#ç¼–å†™shellè„šæœ¬&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;GitHub Actionsä¼šä½¿ç”¨Linuxç¯å¢ƒæ‰§è¡ŒWorkflowä¸­çš„æ“ä½œï¼Œå› æ­¤å°†æ‰€æœ‰æ¶‰åŠåˆ°çš„å‘½ä»¤æ‹†åˆ†ä¸ºå¤šä¸ªShellè„šæœ¬æ•ˆç‡æ›´é«˜ï¼Œä¹Ÿæ›´ä¾¿äºä¿®æ”¹ã€‚&lt;/p&gt;&lt;section&gt;&lt;h3&gt;æ„å»ºé•œåƒè„šæœ¬&lt;a href=&quot;#æ„å»ºé•œåƒè„šæœ¬&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;set&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-u&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;$CONTAINER_REGISTRY&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;$VERSION&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;docker&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;build&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-t&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;$CONTAINER_REGISTRY&lt;/span&gt;&lt;span&gt;/book-catalog:&lt;/span&gt;&lt;span&gt;$VERSION&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--file&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;./book_catalog/Dockerfile&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;docker&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;build&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-t&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;$CONTAINER_REGISTRY&lt;/span&gt;&lt;span&gt;/inventory:&lt;/span&gt;&lt;span&gt;$VERSION&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--file&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;./inventory_management/Dockerfile&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;æ¨é€é•œåƒè„šæœ¬&lt;a href=&quot;#æ¨é€é•œåƒè„šæœ¬&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;set&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-u&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$CONTAINER_REGISTRY&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$VERSION&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$REGISTRY_UN&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$REGISTRY_PW&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;echo&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;$REGISTRY_PW&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;docker&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;login&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;$CONTAINER_REGISTRY&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--username&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;$REGISTRY_UN&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--password-stdin&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;docker&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;push&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;$CONTAINER_REGISTRY&lt;/span&gt;&lt;span&gt;/book-catalog:&lt;/span&gt;&lt;span&gt;$VERSION&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;docker&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;push&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;$CONTAINER_REGISTRY&lt;/span&gt;&lt;span&gt;/inventory:&lt;/span&gt;&lt;span&gt;$VERSION&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;éƒ¨ç½²è„šæœ¬&lt;a href=&quot;#éƒ¨ç½²è„šæœ¬&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;set&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-u&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$CONTAINER_REGISTRY&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$VERSION&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$DB_URL&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;envsubst&lt;/span&gt;&lt;span&gt; &amp;lt; &lt;/span&gt;&lt;span&gt;./scripts/kubernetes/configmap.yaml&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;kubectl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;apply&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-f&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;envsubst&lt;/span&gt;&lt;span&gt; &amp;lt; &lt;/span&gt;&lt;span&gt;./scripts/kubernetes/service.yaml&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;kubectl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;apply&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-f&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;envsubst&lt;/span&gt;&lt;span&gt; &amp;lt; &lt;/span&gt;&lt;span&gt;./scripts/kubernetes/deployment.yaml&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;kubectl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;apply&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-f&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;å…¶ä¸­&lt;code&gt;envsubst&lt;/code&gt;å‘½ä»¤èƒ½å°†åé¢æ–‡ä»¶ä¸­çš„ç¯å¢ƒå˜é‡å ä½ç¬¦æ›¿æ¢ä¸ºå½“å‰ç¯å¢ƒä¸­çš„å®é™…å€¼ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;åˆ é™¤è„šæœ¬&lt;a href=&quot;#åˆ é™¤è„šæœ¬&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;set&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-u&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$CONTAINER_REGISTRY&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$VERSION&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$DB_URL&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;envsubst&lt;/span&gt;&lt;span&gt; &amp;lt; &lt;/span&gt;&lt;span&gt;./scripts/kubernetes/deployment.yaml&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;kubectl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;delete&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-f&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;envsubst&lt;/span&gt;&lt;span&gt; &amp;lt; &lt;/span&gt;&lt;span&gt;./scripts/kubernetes/service.yaml&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;kubectl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;delete&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-f&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;envsubst&lt;/span&gt;&lt;span&gt; &amp;lt; &lt;/span&gt;&lt;span&gt;./scripts/kubernetes/configmap.yaml&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;kubectl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;delete&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-f&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;ç¼–å†™GitHub workflowé…ç½®&lt;a href=&quot;#ç¼–å†™github-workflowé…ç½®&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;Deploy Microservice yaml&lt;a href=&quot;#deploy-microservice-yaml&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Deploy microservice&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# ä»…é™æ‰‹åŠ¨æ„å»ºï¼Œå¦‚æœä½¿ç”¨brancheså…³é”®å­—ï¼Œå¯ä»¥æŒ‡å®šå½“ä»£ç è¢«æ¨é€åˆ°å¯¹åº”åˆ†æ”¯æ˜¯è§¦å‘è‡ªåŠ¨æ„å»º&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;on&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;workflow_dispatch&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# å°†è¦è¿è¡Œçš„ä»»åŠ¡&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;jobs&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;deploy&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;# ä»»åŠ¡è¿è¡Œç¯å¢ƒ&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;runs-on&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;ubuntu-latest&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;# ç¯å¢ƒå˜é‡ï¼Œè¿™äº›å˜é‡åœ¨ä»“åº“çš„secretsä¸­å£°æ˜å’Œé…ç½®&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;env&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;VERSION&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;${{ github.sha }}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;CONTAINER_REGISTRY&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;${{ secrets.CONTAINER_REGISTRY }}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;REGISTRY_UN&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;${{ secrets.REGISTRY_UN }}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;REGISTRY_PW&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;${{ secrets.REGISTRY_PW  }}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;DB_URL&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;${{ secrets.DB_URL }}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;# å…·ä½“çš„ä»»åŠ¡æ­¥éª¤&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;steps&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;# actions/checkoutï¼šGitHub å®˜æ–¹æä¾›çš„ä¸€ä¸ªæ ‡å‡† Actionï¼Œç”¨æ¥å°†ä»£ç åº“çš„å½“å‰ç‰ˆæœ¬æ‹‰å–åˆ°è™šæ‹Ÿæœºæˆ–å®¹å™¨ä¸­ã€‚&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;uses&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;actions/checkout@v3&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Build images&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;run&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;bash ./scripts/build-image.sh&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Push image&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;run&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;bash ./scripts/push-image.sh&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;27&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;# tale/kubectl-actionï¼šä¸€ä¸ªç¬¬ä¸‰æ–¹ Actionï¼Œç”¨äºåœ¨ GitHub Actions å·¥ä½œæµä¸­æ‰§è¡Œ kubectl å‘½ä»¤ï¼Œç®¡ç† Kubernetes é›†ç¾¤&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;28&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;uses&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;tale/kubectl-action@v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;29&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;with&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;30&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;# ç»è¿‡ base64 ç¼–ç çš„ Kubernetes é…ç½®æ–‡ä»¶&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;31&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;base64-kube-config&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;${{ secrets.KUBE_CONFIG }}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;32&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;# æŒ‡å®š kubectl çš„ç‰ˆæœ¬å·&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;33&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;kubectl-version&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;v1.30.3&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;34&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Deploy&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;35&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;run&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;bash ./scripts/deploy.sh&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;Delete Microservice yaml&lt;a href=&quot;#delete-microservice-yaml&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;å’ŒDeployå·®ä¸å¤šï¼Œåªä¸è¿‡åœ¨å…³é”®çš„åœ°æ–¹ä½¿ç”¨&lt;code&gt;delete.sh&lt;/code&gt;è„šæœ¬è§¦å‘kubectl deleteæ“ä½œã€‚&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Delete microservice&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;on&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;workflow_dispatch&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;jobs&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;deploy&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;runs-on&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;ubuntu-latest&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;env&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;VERSION&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;${{ github.sha }}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;CONTAINER_REGISTRY&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;${{ secrets.CONTAINER_REGISTRY }}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;REGISTRY_UN&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;${{ secrets.REGISTRY_UN }}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;REGISTRY_PW&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;${{ secrets.REGISTRY_PW  }}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;DB_URL&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;${{ secrets.DB_URL }}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;steps&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;uses&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;actions/checkout@v3&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;uses&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;tale/kubectl-action@v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;with&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;base64-kube-config&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;${{ secrets.KUBE_CONFIG }}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;kubectl-version&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;v1.30.3&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;delete&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;run&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;./scripts/delete.sh&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;åœ¨ä»“åº“çš„secretsä¸­å£°æ˜å’Œé…ç½®å˜é‡&lt;a href=&quot;#åœ¨ä»“åº“çš„secretsä¸­å£°æ˜å’Œé…ç½®å˜é‡&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;CONTAINER_REGISTRYï¼ŒREGISTRY_UNå’ŒREGISTRY_PW&lt;a href=&quot;#container_registryregistry_unå’Œregistry_pw&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;è¿™ä¸‰ä¸ªå˜é‡æ˜¯é•œåƒå­˜å‚¨åº“Server nameä»¥åŠå…¶ç”¨æˆ·åå’Œå¯†ç ï¼Œåœ¨ä¹‹å‰æˆ‘å·²ç»é€šè¿‡Terraformåˆ›å»ºå¥½äº†å­˜å‚¨åº“ï¼Œå› æ­¤å¯ä»¥åœ¨Azure Container Registryä¸­çš„Access Keyä¸­æŸ¥çœ‹&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;KUBE_CONFIG&lt;a href=&quot;#kube_config&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;è¯¥å˜é‡æ˜¯ç»è¿‡&lt;code&gt;base64&lt;/code&gt;ç¼–ç çš„Kubernetesé…ç½®æ–‡ä»¶ï¼Œé€šè¿‡è¿™ä¸ªç¼–ç ï¼Œgithubå¯ä»¥å°†æœ¬åœ°ä»“åº“ä¸­çš„kubernetesé…ç½®æ–‡ä»¶éƒ¨ç½²åˆ°kubernetesé›†ç¾¤ä¸­ï¼Œè¿™ä¸ªç¼–ç å…¶å®å°±ç›¸å½“äºKubernetesé›†ç¾¤çš„é€šè¡Œè¯ã€‚
è¦æƒ³è·å¾—é€šè¡Œè¯ï¼Œé¦–å…ˆéœ€è¦åœ¨æœ¬åœ°å°†è¦ä½¿ç”¨çš„é›†ç¾¤è®¾å®šä¸ºå½“å‰ä¸Šä¸‹æ–‡ã€‚&lt;/p&gt;&lt;ol&gt;
&lt;li&gt;ä½¿ç”¨Azure-cliç™»å½•&lt;/li&gt;
&lt;li&gt;å°†Kubernetesé›†ç¾¤è®¾ç½®ä¸ºå½“å‰kubectlä¸Šä¸‹æ–‡&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;az&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;aks&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;get-credentials&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--resource-group&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&amp;lt;RESOURCE_GROUP_NAME&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--name&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&amp;lt;CLUSTER_NAME&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;ç”ŸæˆBase64ç¼–ç &lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;cat&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;~/.kube/config&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;base64&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;å°†ç”Ÿæˆçš„ç¼–ç å¤åˆ¶ç²˜è´´åˆ°GitHub secretsä¸­ã€‚&lt;/li&gt;
&lt;/ol&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;DB_URL&lt;a href=&quot;#db_url&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;è¯¥å˜é‡æ˜¯è¦ä½¿ç”¨çš„æ•°æ®åº“é“¾æ¥ï¼Œæœ¬é¡¹ç›®ä½¿ç”¨å…è´¹çš„Render PostgreSQLæ•°æ®åº“ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;VERSION&lt;a href=&quot;#version&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;è¯¥å˜é‡æ˜¯é•œåƒç‰ˆæœ¬ï¼Œç”±äºä¸€ä¸ªé¡¹ç›®å¯èƒ½ä¼šç»å†å¤šæ¬¡æ„å»ºå’Œæäº¤ï¼Œå› æ­¤ä½¿ç”¨ç¡¬ç¼–ç æ˜¯ä¸å¯è¡Œçš„ã€‚&lt;code&gt;github.sha&lt;/code&gt;ä¼šè·å–å½“å‰è¿è¡Œçš„Gitæäº¤çš„å®Œæ•´SHAå€¼ï¼Œè¿™é€šå¸¸ç”¨äºç”Ÿæˆå”¯ä¸€çš„ç‰ˆæœ¬å·æˆ–æ ‡è®°ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæ„å»ºçš„é•œåƒå¯ä»¥åŸºäºæ¯æ¬¡æäº¤è‡ªåŠ¨ç”Ÿæˆå”¯ä¸€çš„æ ‡è®°ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;è§¦å‘æ„å»º&lt;a href=&quot;#è§¦å‘æ„å»º&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;åœ¨GitHubä»“åº“ä¸­ç‚¹å‡»&lt;code&gt;Actions&lt;/code&gt;,åœ¨workflowä¸­æ‰¾åˆ°&lt;code&gt;Deploy microservice&lt;/code&gt;ï¼Œç„¶åç‚¹å‡»&lt;code&gt;Run workflow&lt;/code&gt;å°±å¯ä»¥è§¦å‘æ„å»ºã€‚&lt;br /&gt;
å¦‚æœä¸€åˆ‡æ— è¯¯ï¼Œç»“æœåº”è¯¥æ˜¯è¿™æ ·çš„ï¼š&lt;/p&gt;&lt;p&gt;å½“å³ä¸Šè§’å‡ºç°å¯¹å·å›¾æ ‡ï¼Œæ„å‘³ç€æ„å»ºæˆåŠŸã€‚&lt;br /&gt;
å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒGitHub Actionsæ„å»ºæˆåŠŸä¸ä¸€å®šä»£è¡¨éƒ¨ç½²æˆåŠŸï¼Œæ¯”å¦‚å¦‚æœKubernetesé…ç½®æ–‡ä»¶ä¸­å­˜åœ¨é”™è¯¯ï¼Œé™¤éæ˜¯ä¼šå¯¼è‡´&lt;code&gt;exit code 1&lt;/code&gt;çš„è¯­æ³•é”™è¯¯ï¼Œå¦åˆ™æ˜¯ä¸ä¼šæç¤ºé”™è¯¯çš„ã€‚&lt;/p&gt;&lt;p&gt;åŒç†ï¼Œè¦æƒ³åˆ é™¤éƒ¨ç½²ï¼Œåªéœ€è¦ç‚¹å‡»&lt;code&gt;Delete microservice&lt;/code&gt;å¹¶è¿è¡Œæ„å»ºã€‚&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;</content:encoded></item><item><title>sysctlè¿è¡Œæ—¶å‚æ•°åŠé¢å‘åœºæ™¯çš„è°ƒä¼˜ç­–ç•¥</title><link>https://white-festa.net/posts/sysctl_arguments/sysctl-%E8%BF%90%E8%A1%8C%E6%97%B6%E5%8F%82%E6%95%B0/</link><guid isPermaLink="true">https://white-festa.net/posts/sysctl_arguments/sysctl-%E8%BF%90%E8%A1%8C%E6%97%B6%E5%8F%82%E6%95%B0/</guid><description>ä»‹ç»äº†Linuxä¸­å¸¸ç”¨çš„sysctlè¿è¡Œæ—¶å‚æ•°ï¼Œæ¶µç›–äº†å†…å­˜ã€ç½‘ç»œã€IOä¸æ–‡ä»¶ç³»ç»ŸåŠè¿›ç¨‹ä¸å®‰å…¨ç›¸å…³ï¼›é¢å‘ç‰¹å®šåœºæ™¯ä»‹ç»äº†å…·ä½“çš„ä¼˜åŒ–æªæ–½</description><pubDate>Sat, 11 Jan 2025 00:00:00 GMT</pubDate><content:encoded>&lt;section&gt;&lt;h1&gt;ä¸»è¦å‚æ•°ç±»åˆ«&lt;a href=&quot;#ä¸»è¦å‚æ•°ç±»åˆ«&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;













































































































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å‰ç¼€&lt;/th&gt;&lt;th&gt;å…¨ç§°&lt;/th&gt;&lt;th&gt;ä¸»è¦æ§åˆ¶å†…å®¹&lt;/th&gt;&lt;th&gt;ç¤ºä¾‹å‚æ•°&lt;/th&gt;&lt;th&gt;å½±å“æ€§èƒ½çš„æ–¹é¢&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;vm&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;Virtual Memory&lt;/td&gt;&lt;td&gt;å†…å­˜ä¸äº¤æ¢åŒºç®¡ç†&lt;/td&gt;&lt;td&gt;&lt;code&gt;vm.swappiness&lt;/code&gt;, &lt;code&gt;vm.dirty_ratio&lt;/code&gt;&lt;/td&gt;&lt;td&gt;å†…å­˜è°ƒåº¦ã€ç¼“å­˜å›å†™ã€swap è¡Œä¸º&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;net&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;Networking&lt;/td&gt;&lt;td&gt;ç½‘ç»œåè®®æ ˆ&lt;/td&gt;&lt;td&gt;&lt;code&gt;net.ipv4.tcp_fin_timeout&lt;/code&gt;, &lt;code&gt;net.core.somaxconn&lt;/code&gt;&lt;/td&gt;&lt;td&gt;TCP/IP æ€§èƒ½ã€è¿æ¥é˜Ÿåˆ—ã€ç¼“å†²åŒº&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;fs&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;Filesystem&lt;/td&gt;&lt;td&gt;æ–‡ä»¶ç³»ç»Ÿä¸ VFS å±‚&lt;/td&gt;&lt;td&gt;&lt;code&gt;fs.file-max&lt;/code&gt;, &lt;code&gt;fs.nr_open&lt;/code&gt;&lt;/td&gt;&lt;td&gt;æ–‡ä»¶å¥æŸ„é™åˆ¶ã€IO æ€§èƒ½&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;kernel&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;Kernel Core&lt;/td&gt;&lt;td&gt;æ ¸å¿ƒå‚æ•°ã€è¿›ç¨‹ä¸è°ƒåº¦&lt;/td&gt;&lt;td&gt;&lt;code&gt;kernel.pid_max&lt;/code&gt;, &lt;code&gt;kernel.threads-max&lt;/code&gt;&lt;/td&gt;&lt;td&gt;è¿›ç¨‹æ•°ã€è°ƒåº¦ã€å†…æ ¸è¡Œä¸º&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;user&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;User Limits&lt;/td&gt;&lt;td&gt;ç”¨æˆ·çº§é™åˆ¶&lt;/td&gt;&lt;td&gt;&lt;code&gt;user.max_user_namespaces&lt;/code&gt;&lt;/td&gt;&lt;td&gt;å®¹å™¨åŒ–ä¸å‘½åç©ºé—´&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;dev&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;Devices&lt;/td&gt;&lt;td&gt;è®¾å¤‡æ¥å£ï¼ˆå—è®¾å¤‡ã€tty ç­‰ï¼‰&lt;/td&gt;&lt;td&gt;&lt;code&gt;dev.cdrom.autoclose&lt;/code&gt;&lt;/td&gt;&lt;td&gt;IO ä¸è®¾å¤‡è¡Œä¸º&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;debug&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;Debugging&lt;/td&gt;&lt;td&gt;å†…æ ¸è°ƒè¯•å‚æ•°&lt;/td&gt;&lt;td&gt;&lt;code&gt;debug.exception-trace&lt;/code&gt;&lt;/td&gt;&lt;td&gt;å†…æ ¸æ—¥å¿—ã€è°ƒè¯•ä¿¡æ¯è¾“å‡º&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;abi&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;Application Binary Interface&lt;/td&gt;&lt;td&gt;ç³»ç»Ÿè°ƒç”¨å…¼å®¹æ€§&lt;/td&gt;&lt;td&gt;&lt;code&gt;abi.vsyscall32&lt;/code&gt;&lt;/td&gt;&lt;td&gt;å…¼å®¹æ€§å’Œç³»ç»Ÿè°ƒç”¨è¡Œä¸º&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;crypto&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;Cryptography&lt;/td&gt;&lt;td&gt;å†…æ ¸åŠ å¯†æ¡†æ¶&lt;/td&gt;&lt;td&gt;&lt;code&gt;crypto.fips_enabled&lt;/code&gt;&lt;/td&gt;&lt;td&gt;åŠ å¯†ã€FIPS æ¨¡å¼&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;sunrpc&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;SunRPC/NFS&lt;/td&gt;&lt;td&gt;NFS å’Œ RPC ç½‘ç»œæ–‡ä»¶ç³»ç»Ÿ&lt;/td&gt;&lt;td&gt;&lt;code&gt;sunrpc.tcp_slot_table_entries&lt;/code&gt;&lt;/td&gt;&lt;td&gt;NFS æ€§èƒ½ä¸è¿æ¥&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;netfilter&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;Netfilter/iptables&lt;/td&gt;&lt;td&gt;é˜²ç«å¢™ä¸åŒ…è¿‡æ»¤&lt;/td&gt;&lt;td&gt;&lt;code&gt;net.netfilter.nf_conntrack_max&lt;/code&gt;&lt;/td&gt;&lt;td&gt;ç½‘ç»œè¿æ¥è·Ÿè¸ªæ€§èƒ½&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;bus&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;Bus subsystem&lt;/td&gt;&lt;td&gt;ç¡¬ä»¶æ€»çº¿å‚æ•°ï¼ˆPCIã€USB ç­‰ï¼‰&lt;/td&gt;&lt;td&gt;&lt;code&gt;bus.usb.autosuspend&lt;/code&gt;&lt;/td&gt;&lt;td&gt;å¤–è®¾åŠŸè€—ä¸æ€§èƒ½&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;vm.hugetlb&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;HugeTLB subsystem&lt;/td&gt;&lt;td&gt;å¤§é¡µå†…å­˜ç®¡ç†&lt;/td&gt;&lt;td&gt;&lt;code&gt;vm.hugetlb_shm_group&lt;/code&gt;&lt;/td&gt;&lt;td&gt;é«˜æ€§èƒ½å†…å­˜æ˜ å°„&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;fs.aio-max-nr&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;Async I/O&lt;/td&gt;&lt;td&gt;å¼‚æ­¥ I/O é™åˆ¶&lt;/td&gt;&lt;td&gt;&lt;code&gt;fs.aio-max-nr&lt;/code&gt;&lt;/td&gt;&lt;td&gt;é«˜å¹¶å‘ IO æ€§èƒ½&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;å¸¸ç”¨å‚æ•°&lt;a href=&quot;#å¸¸ç”¨å‚æ•°&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;section&gt;&lt;h2&gt;å†…å­˜ï¼ˆvm.*ï¼‰&lt;a href=&quot;#å†…å­˜vm&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;






































































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å‚æ•°&lt;/th&gt;&lt;th&gt;ä½œç”¨&lt;/th&gt;&lt;th&gt;å¸¸ç”¨å–å€¼&lt;/th&gt;&lt;th&gt;è¯´æ˜&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;vm.swappiness&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;æ§åˆ¶ç³»ç»Ÿä½¿ç”¨ swap çš„å€¾å‘&lt;/td&gt;&lt;td&gt;0~100ï¼ˆé»˜è®¤60ï¼‰&lt;/td&gt;&lt;td&gt;å€¼è¶Šå¤§è¶Šå€¾å‘ä½¿ç”¨ swapï¼›æœåŠ¡å™¨å¸¸è°ƒå°ï¼Œå¦‚ &lt;code&gt;10&lt;/code&gt; æˆ– &lt;code&gt;1&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;vm.dirty_ratio&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;ç³»ç»Ÿå…è®¸çš„æœ€å¤§è„é¡µæ¯”ä¾‹&lt;/td&gt;&lt;td&gt;é»˜è®¤20&lt;/td&gt;&lt;td&gt;è¾¾åˆ°æ¯”ä¾‹åå¼€å§‹å†™å›åˆ°ç£ç›˜ï¼Œæ­¤æ—¶å†™æ“ä½œä¼šè¢«é˜»å¡&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;vm.dirty_background_ratio&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;åˆ°è¾¾è¯¥æ¯”ä¾‹åå°çº¿ç¨‹å¼€å§‹å›å†™&lt;/td&gt;&lt;td&gt;é»˜è®¤10&lt;/td&gt;&lt;td&gt;è¾¾åˆ°æ¯”ä¾‹åå¼€å§‹å†™å›åˆ°ç£ç›˜ï¼Œä½†ä¸é˜»å¡å†™æ“ä½œï¼ˆå¦‚æœè„é¡µå¢åŠ é€Ÿåº¦è¿œå¤§äºè¯¥å€¼ï¼Œé‚£ä¹ˆå½“è¯¥å€¼ç­‰äº**dirty_ratioï¼Œ**ä¾ç„¶ä¼šè§¦å‘å†™é˜»å¡ï¼‰&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;vm.dirty_writeback_centisecs&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;å†…æ ¸åˆ·ç›˜çº¿ç¨‹çš„å”¤é†’é¢‘ç‡ï¼Œæ¯æ¬¡å”¤é†’æ—¶åˆ·ç›˜çº¿ç¨‹ä¼šæ£€æŸ¥æ˜¯å¦æœ‰è„é¡µå †ç§¯å¹¶éœ€è¦å†™å›åˆ°ç£ç›˜&lt;/td&gt;&lt;td&gt;é»˜è®¤ 500ï¼Œå³ 5 ç§’&lt;/td&gt;&lt;td&gt;å‡å°ï¼šæ•°æ®å®‰å…¨è¦æ±‚é«˜ã€å†™å¯†é›†å‹ã€å®¹å™¨å’Œè™šæ‹ŸåŒ–ç¯å¢ƒã€æ…¢é€Ÿå­˜å‚¨è®¾å¤‡ - é¢‘ç¹å†™å›å‡å°‘æ•°æ®ä¸¢å¤±æ¦‚ç‡ï¼Œæé«˜å¤šç§Ÿæˆ·ç¯å¢ƒçš„æ•°æ®ä¸€è‡´æ€§ã€‚&lt;br /&gt;å¢å¤§ï¼šé«˜æ€§èƒ½è®¡ç®—å’Œæ‰¹å¤„ç† - åˆå¹¶å†™æ“ä½œé™ä½ç£ç›˜ IOã€ä¸´æ—¶æ•°æ®å¤„ç†ã€UPS æ–­ç”µä¿æŠ¤ç¯å¢ƒã€SSD ä¼˜åŒ– - æœ¬èº«éšæœºå†™å…¥æ€§èƒ½å¥½ï¼Œé™ä½åˆ·ç›˜é¢‘ç‡æå‡ SSD å¯¿å‘½&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;vm.dirty_expire_centisecs&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;è„é¡µåœ¨å†…å­˜ä¸­å…è®¸åœç•™çš„æœ€å¤§æ—¶é—´ï¼Œè¶…è¿‡è¯¥å€¼ï¼Œåˆ·ç›˜çº¿ç¨‹ä¼šåœ¨ä¸‹ä¸€æ¬¡å”¤é†’æ—¶å°†å…¶å†™å›ç£ç›˜&lt;/td&gt;&lt;td&gt;é»˜è®¤ 3000ï¼Œå³ 30 ç§’&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;vm.overcommit_memory&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;æ§åˆ¶å†…å­˜åˆ†é…ç­–ç•¥&lt;/td&gt;&lt;td&gt;0=å¯å‘å¼, 1=å…è®¸è¶…åˆ†é…, 2=ä¸¥æ ¼æ£€æŸ¥&lt;/td&gt;&lt;td&gt;æ•°æ®åº“åœºæ™¯å¤šç”¨ &lt;code&gt;1&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;vm.overcommit_ratio&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;å½“ overcommit_memory=2 æ—¶çš„åˆ†é…é˜ˆå€¼&lt;/td&gt;&lt;td&gt;é»˜è®¤50&lt;/td&gt;&lt;td&gt;å æ€»å†…å­˜çš„ç™¾åˆ†æ¯”&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;vm.drop_caches&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;æ‰‹åŠ¨æ¸…ç†ç¼“å­˜&lt;/td&gt;&lt;td&gt;å†™å…¥1,2,3è§¦å‘&lt;/td&gt;&lt;td&gt;ä¸€èˆ¬ç”¨äºæµ‹è¯•ï¼Œä¸å»ºè®®å¸¸ç”¨&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;vm.min_free_kbytes&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;ç³»ç»Ÿé¢„ç•™çš„æœ€å°ç©ºé—²å†…å­˜&lt;/td&gt;&lt;td&gt;é»˜è®¤è‡ªåŠ¨è®¡ç®—&lt;/td&gt;&lt;td&gt;ä½å†…å­˜ç³»ç»Ÿå¯è°ƒé«˜é¿å…OOM&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;vm.nr_hugepages&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;é¢„åˆ†é…çš„å¤§é¡µ(2MB) æ•°é‡&lt;/td&gt;&lt;td&gt;æ•´æ•°ï¼Œå¦‚ 1024ï¼Œåˆ™é¢„ç•™å†…å­˜ä¸º 1024*2MB&lt;/td&gt;&lt;td&gt;å¯¹æ•°æ®åº“æˆ–å¤§å†…å­˜åº”ç”¨æœ‰å¸®åŠ©&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;section&gt;&lt;h3&gt;vm.overcommit_memory&lt;a href=&quot;#vmovercommit_memory&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;è¯¥å‚æ•°æ§åˆ¶çš„ä¸æ˜¯å®é™…å¯ç”¨çš„å†…å­˜ï¼Œè€Œæ˜¯åº”ç”¨åœ¨è¿è¡Œå‰ç”³è¯·çš„å†…å­˜å¤§å°ã€‚å¦‚æœè®¾ç½®ä¸º1ï¼Œåˆ™å¯ä»¥ç”³è¯·åˆ°æ¯”ç‰©ç†å†…å­˜åŠ äº¤æ¢å†…å­˜æ€»å’Œè¿˜å¤§çš„å†…å­˜ç©ºé—´ï¼Œä½†è¿è¡Œæ—¶æœ‰å¯èƒ½å› å®é™…å¯ä»¥å†…å­˜ä¸è¶³è€ŒOOMï¼›è€Œå¦‚æœè®¾ç½®ä¸º0ï¼Œåˆ™åœ¨å½“ç”³è¯·çš„å†…å­˜ç©ºé—´å¤§äºå½“å‰å¯ç”¨çš„å†…å­˜ç©ºé—´æ—¶ï¼Œä¼šç›´æ¥è¯·æ±‚å¤±è´¥ã€‚&lt;/p&gt;&lt;p&gt;ä¸‰ç§æ¨¡å¼&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;0 â€” Heuristic overcommitï¼ˆé»˜è®¤ï¼‰
&lt;ul&gt;
&lt;li&gt;å†…æ ¸ä½¿ç”¨å¯å‘å¼ç®—æ³•åˆ¤æ–­æ˜¯å¦å…è®¸åˆ†é…å†…å­˜ã€‚&lt;/li&gt;
&lt;li&gt;ä¸ä¸¥æ ¼ï¼Œä¹Ÿä¸å®Œå…¨è‡ªç”±ã€‚&lt;/li&gt;
&lt;li&gt;åŸºæœ¬åŸåˆ™ï¼šç”³è¯·é˜¶æ®µå°½é‡ä¸è¶…è¿‡ï¼ˆç‰©ç† + swapï¼‰çš„å¤§çº¦ä¸€å®šæ¯”ä¾‹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;1 â€” Always overcommit
&lt;ul&gt;
&lt;li&gt;åˆ†é…é˜¶æ®µæ°¸è¿œä¸ä¼šæ‹’ç» malloc è¯·æ±‚ã€‚&lt;/li&gt;
&lt;li&gt;å¯ä»¥ç”³è¯·åˆ°å·¨å¤§å†…å­˜ï¼ˆå¦‚ 100GBï¼‰ï¼Œå³ä½¿å®é™…åªæœ‰ 2GBã€‚&lt;/li&gt;
&lt;li&gt;è¿è¡Œæ—¶å†™å…¥æ—¶æ‰ä¼šçœŸæ­£åˆ†é…ç‰©ç†é¡µã€‚&lt;/li&gt;
&lt;li&gt;ä¸€æ—¦çœŸå®å†…å­˜ä¸è¶³ â†’ OOM Killer å‡ºæ‰‹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;2 â€” Strict overcommit
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨ä¸¥æ ¼å…¬å¼åˆ¤æ–­ç”³è¯·æ˜¯å¦å…è®¸ï¼š&lt;code&gt;CommitLimit = Swap + (RAM * overcommit_ratio / 100)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;ç”³è¯·é˜¶æ®µå¿…é¡»å°äº &lt;code&gt;CommitLimit&lt;/code&gt;ï¼Œå¦åˆ™ç›´æ¥å¤±è´¥ï¼ˆENOMEMï¼‰&lt;/li&gt;
&lt;li&gt;å¸¸ç”¨æƒ…æ™¯ï¼š&lt;strong&gt;æ•°æ®åº“æœåŠ¡å™¨&lt;/strong&gt;ã€&lt;strong&gt;é«˜æ€§èƒ½è®¡ç®—ï¼ˆHPCï¼‰é›†ç¾¤ / ç§‘ç ”è®¡ç®—èŠ‚ç‚¹&lt;/strong&gt;ã€&lt;strong&gt;é›¶å®¹å¿ OOM çš„å®æ—¶/å…³é”®ç³»ç»Ÿ&lt;/strong&gt;ï¼Œå…±åŒç‚¹æ˜¯éœ€è¦ç¡®ä¿å…³é”®æœåŠ¡ä¸ä¼šå› ä¸ºå†…å­˜è¶…è½½è€Œè¢« OOMï¼Œä¸å…¶åœ¨è¿è¡Œä¸­å› å†…å­˜è¶…è½½çˆ†æ‰ï¼Œä¸å¦‚ä¸€å¼€å§‹å°±åœ¨å†…å­˜ç”³è¯·é˜¶æ®µå¤±è´¥ï¼Œè¿™æ ·å¯¹ä¸»ç³»ç»Ÿ/åº”ç”¨æ›´å®‰å…¨&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;&lt;strong&gt;vm.overcommit_ratio&lt;/strong&gt;&lt;a href=&quot;#vmovercommit_ratio&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;è¯¥å‚æ•°åªåœ¨ &lt;strong&gt;vm.overcommit_memory=2ï¼ˆä¸¥æ ¼æ¨¡å¼ï¼‰&lt;/strong&gt; æ—¶ç”Ÿæ•ˆï¼Œç”¨æ¥æ§åˆ¶å…è®¸åº”ç”¨åœ¨â€œç”³è¯·é˜¶æ®µâ€èƒ½åˆ†é…çš„æœ€å¤§è™šæ‹Ÿå†…å­˜é¢åº¦ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;HugePagesï¼ˆvm.nr_hugepagesï¼‰ vs Transparent HugePagesï¼ˆTHPï¼‰&lt;a href=&quot;#hugepagesvmnr_hugepages-vs-transparent-hugepagesthp&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;

















































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;ç‰¹æ€§&lt;/th&gt;&lt;th&gt;HugePagesï¼ˆHugeTLBï¼Œå¤§é¡µï¼‰&lt;/th&gt;&lt;th&gt;THPï¼ˆé€æ˜å¤§é¡µï¼‰&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;æœ¬è´¨&lt;/td&gt;&lt;td&gt;**é™æ€é¢„ç•™å¤§é¡µï¼Œ ç³»ç»Ÿå¯åŠ¨åå°±ä»ç‰©ç†å†…å­˜ä¸­ç›´æ¥åˆ’åˆ†å‡ºå»  **&lt;/td&gt;&lt;td&gt;&lt;strong&gt;åŠ¨æ€è‡ªåŠ¨åˆå¹¶å¤§é¡µ&lt;/strong&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;å¯ç”¨æ–¹å¼&lt;/td&gt;&lt;td&gt;æ‰‹åŠ¨é…ç½® &lt;code&gt;vm.nr_hugepages&lt;/code&gt;&lt;/td&gt;&lt;td&gt;è‡ªåŠ¨ï¼Œåªè¦ THP æ‰“å¼€&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;ä½•æ—¶åˆ†é…&lt;/td&gt;&lt;td&gt;&lt;strong&gt;å¼€æœºåå³ä»ç‰©ç†å†…å­˜é¢„ç•™&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;è¿›ç¨‹è¿è¡Œä¸­å†…æ ¸æ ¹æ®éœ€è¦åˆå¹¶ 4KB é¡µ&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;æ˜¯å¦å¯ç”¨ä½œæ™®é€šå†…å­˜&lt;/td&gt;&lt;td&gt;ä¸å¯ä»¥ï¼Œè¢«å›ºå®šä¿ç•™&lt;/td&gt;&lt;td&gt;å¯ä»¥&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;æ˜¯å¦å¯ swap&lt;/td&gt;&lt;td&gt;ä¸èƒ½ swap&lt;/td&gt;&lt;td&gt;å¯èƒ½ swapï¼ˆå–å†³äºå†…æ ¸ç‰ˆæœ¬ï¼‰&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;æ˜¯å¦å¯å›æ”¶&lt;/td&gt;&lt;td&gt;ä¸å¯&lt;/td&gt;&lt;td&gt;å¯åœ¨å‹åŠ›ä¸‹æ‹†åˆ†å› 4KB&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;æ˜¯å¦éœ€è¦åº”ç”¨é…åˆ&lt;/td&gt;&lt;td&gt;éœ€è¦åº”ç”¨ç¨‹åºæ˜¾å¼ç”³è¯·å¤§é¡µ&lt;/td&gt;&lt;td&gt;å®Œå…¨é€æ˜ï¼ˆ è¿›ç¨‹åœ¨ä¸çŸ¥é“çš„æƒ…å†µä¸‹å°±å¾—åˆ°å¤§é¡µ  &lt;strong&gt;ï¼‰&lt;/strong&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;æ€§èƒ½&lt;/td&gt;&lt;td&gt;é«˜ï¼Œç¨³å®šï¼Œæ— ç¢ç‰‡å½±å“&lt;/td&gt;&lt;td&gt;ä¸­ï¼Œå—å†…å­˜ç¢ç‰‡åŒ–å½±å“ (å†…å­˜ç¢ç‰‡åŒ–ç¨‹åº¦é«˜æ—¶ä¼šæ‹†åˆ†ä¼šå°é¡µï¼‰&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;section&gt;&lt;h4&gt;Transparent HugePages é…ç½®&lt;a href=&quot;#transparent-hugepages-é…ç½®&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;transparent_hugepage.enabled -  å†³å®š æ˜¯å¦ä½¿ç”¨é€æ˜å¤§é¡µ ä»¥åŠ ä½¿ç”¨ç­–ç•¥ ï¼Œå¸¸è§å€¼æœ‰ï¼š**  **
&lt;ul&gt;
&lt;li&gt;always -  å°½å¯èƒ½ä½¿ç”¨ THPï¼Œåªè¦èƒ½åˆ†é…åˆ° 2MB å¤§é¡µå°±ä½¿ç”¨ã€‚å¦‚æœæ²¡æœ‰è¿ç»­å¤§å—å†…å­˜ï¼Œå†…æ ¸ &lt;em&gt;å¯èƒ½ä¼šè§¦å‘åŒæ­¥ defrag&lt;/em&gt; æ¥æ•´ç†å†…å­˜ã€‚æœ€æ¿€è¿›ã€æœ€å®¹æ˜“å¯¼è‡´æ€§èƒ½æŠ–åŠ¨ã€‚&lt;/li&gt;
&lt;li&gt;madvise -  é»˜è®¤ä¸ä½¿ç”¨ THPï¼Œåªæœ‰è¿›ç¨‹ä½¿ç”¨ &lt;code&gt;madvise(MADV_HUGEPAGE)&lt;/code&gt; æ˜ç¡®è¯·æ±‚æ—¶æ‰ç”¨ã€‚è¿™æ˜¯ æ€§èƒ½æœ€å¯æ§ çš„æ–¹å¼ã€‚&lt;/li&gt;
&lt;li&gt;never - å®Œå…¨ç¦ç”¨ THPï¼Œä¸é€æ˜åˆå¹¶ï¼Œä¸ä½¿ç”¨å¤§é¡µã€‚ä¼ ç»Ÿæ•°æ®åº“é€šå¸¸æ¨èæ­¤é¡¹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;transparent_hugepage.defrag -  å†³å®š ä¸ºäº†åˆ†é…é€æ˜å¤§é¡µï¼Œå†…æ ¸æ˜¯å¦æ„¿æ„æ•´ç†ï¼ˆcompactionï¼‰å†…å­˜ï¼› æ•´ç†å†…å­˜æ˜¯æ˜‚è´µçš„ï¼Œä¼šå¼•å‘æš‚åœï¼ˆlatency spikeï¼‰ï¼Œæ‰€ä»¥è¿™ä¸ªå‚æ•°éå¸¸é‡è¦ã€‚
&lt;ul&gt;
&lt;li&gt;always -  ä¸ºäº†åˆ†é… THPï¼Œå†…æ ¸ä¼šåšåŒæ­¥çš„ memory compaction â†’ å¯èƒ½å¡é¡¿&lt;/li&gt;
&lt;li&gt;madvise -  åªæœ‰è¿›ç¨‹æ˜¾å¼è¯·æ±‚ THPï¼ˆMADV_HUGEPAGEï¼‰æ—¶ï¼Œæ‰ä¼šè¿›è¡Œå†…å­˜æ•´ç†&lt;/li&gt;
&lt;li&gt;defer -  å°è¯•åˆ†é… THPï¼Œä½†å¦‚æœæ²¡æœ‰è¿ç»­å†…å­˜åˆ™ &lt;em&gt;ä¸é˜»å¡&lt;/em&gt;ï¼Œæ¨è¿Ÿåˆ°åå°å¼‚æ­¥æ•´ç†ã€‚&lt;/li&gt;
&lt;li&gt;defer+madvise -  ä¸ defer ç±»ä¼¼ï¼Œä½†åªå¯¹ madvise çš„è¿›ç¨‹åšæ•´ç†ï¼Œæœ€å¹³è¡¡ã€‚&lt;/li&gt;
&lt;li&gt;never -  ä¸ä¼šä¸ºäº†åˆ†é… THP æ•´ç†å†…å­˜ã€‚è‹¥å†…å­˜ä¸å¯è¿ç»­åˆ™ç›´æ¥ä½¿ç”¨ 4KB å°é¡µã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;ä¿®æ”¹Transparent HugePages é…ç½®&lt;a href=&quot;#ä¿®æ”¹transparent-hugepages-é…ç½®&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;é€šè¿‡ systemd æœåŠ¡æ–‡ä»¶é…ç½®
&lt;ol&gt;
&lt;li&gt;åˆ›å»ºæœåŠ¡&lt;code&gt;/etc/systemd/system/disable-thp.service&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;å†™å…¥å†…å®¹&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[Unit]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Description&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Disable&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Transparent&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Huge&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Pages&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;After&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;sysinit.target&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;local-fs.target&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[Service]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Type&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;oneshot&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ExecStart&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;/bin/sh&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-c&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;echo never &amp;gt; /sys/kernel/mm/transparent_hugepage/enabled&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ExecStart&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;/bin/sh&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-c&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;echo never &amp;gt; /sys/kernel/mm/transparent_hugepage/defrag&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[Install]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;WantedBy&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;multi-user.target&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;é€šè¿‡å†…æ ¸å¯åŠ¨å‚æ•°å…³é—­ THP
&lt;ol&gt;
&lt;li&gt;ä¿®æ”¹ &lt;code&gt;/etc/default/grub&lt;/code&gt;ï¼ŒåŠ å…¥ä¸€è¡Œ&lt;code&gt;GRUB_CMDLINE_LINUX=&quot;transparent_hugepage=never&quot;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;é‡æ–°ç”Ÿæˆ grub é…ç½®
&lt;ol&gt;
&lt;li&gt;Ubuntu/Debian:  &lt;code&gt;update-grub&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;CentOS/RHEL:  &lt;code&gt;grub2-mkconfig -o /boot/grub2/grub.cfg&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;ä¸´æ—¶ä¿®æ”¹&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;echo&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;never&lt;/span&gt;&lt;span&gt; &amp;gt; &lt;/span&gt;&lt;span&gt;/sys/kernel/mm/transparent_hugepage/enabled&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;echo&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;never&lt;/span&gt;&lt;span&gt; &amp;gt; &lt;/span&gt;&lt;span&gt;/sys/kernel/mm/transparent_hugepage/defrag&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;ç½‘ç»œï¼ˆnet.*ï¼‰&lt;a href=&quot;#ç½‘ç»œnet&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;é€šç”¨ç½‘ç»œå‚æ•°&lt;a href=&quot;#é€šç”¨ç½‘ç»œå‚æ•°&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;


































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å‚æ•°&lt;/th&gt;&lt;th&gt;ä½œç”¨&lt;/th&gt;&lt;th&gt;å¸¸ç”¨å–å€¼&lt;/th&gt;&lt;th&gt;è¯´æ˜&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;net.ipv4.ip_forward&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;æ˜¯å¦å…è®¸è·¯ç”±è½¬å‘&lt;/td&gt;&lt;td&gt;0/1&lt;/td&gt;&lt;td&gt;ç½‘å…³æˆ–å®¹å™¨ç½‘ç»œä¸­éœ€å¼€å¯&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;net.ipv4.conf.all.rp_filter&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;åå‘è·¯å¾„è¿‡æ»¤&lt;/td&gt;&lt;td&gt;0/1/2&lt;/td&gt;&lt;td&gt;æŸäº›å¤šç½‘å¡ä¸»æœºå»ºè®®å…³é—­&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;net.ipv4.icmp_echo_ignore_all&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;å¿½ç•¥æ‰€æœ‰ ping è¯·æ±‚&lt;/td&gt;&lt;td&gt;0/1&lt;/td&gt;&lt;td&gt;å®‰å…¨è¦æ±‚é«˜æ—¶å¯è®¾ä¸º1&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;net.ipv4.tcp_syncookies&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;SYN æ´ªæ°´é˜²å¾¡&lt;/td&gt;&lt;td&gt;0/1&lt;/td&gt;&lt;td&gt;å»ºè®®å¼€å¯ï¼ˆé»˜è®¤å¼€å¯ï¼‰&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;TCP ä¼˜åŒ–&lt;a href=&quot;#tcp-ä¼˜åŒ–&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;














































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å‚æ•°&lt;/th&gt;&lt;th&gt;ä½œç”¨&lt;/th&gt;&lt;th&gt;å¸¸ç”¨å–å€¼&lt;/th&gt;&lt;th&gt;è¯´æ˜&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;net.ipv4.tcp_fin_timeout&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;FIN_WAIT2 è¶…æ—¶æ—¶é—´&lt;/td&gt;&lt;td&gt;é»˜è®¤60&lt;/td&gt;&lt;td&gt;å¯é€‚å½“è°ƒå°å¦‚ &lt;code&gt;15&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;net.ipv4.tcp_keepalive_time&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;Keepalive å‘åŒ…é—´éš”&lt;/td&gt;&lt;td&gt;é»˜è®¤7200ç§’&lt;/td&gt;&lt;td&gt;é•¿è¿æ¥å¯é€‚å½“è°ƒå°&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;net.ipv4.tcp_tw_reuse&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;å…è®¸ TIME_WAIT socket å¤ç”¨&lt;/td&gt;&lt;td&gt;0/1&lt;/td&gt;&lt;td&gt;WebæœåŠ¡å™¨å¸¸å¼€å¯&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;net.ipv4.tcp_max_syn_backlog&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;åŠè¿æ¥é˜Ÿåˆ—é•¿åº¦&lt;/td&gt;&lt;td&gt;é»˜è®¤128&lt;/td&gt;&lt;td&gt;é«˜é¢‘å¹¶å‘ç³»ç»Ÿè°ƒå¤§ï¼Œå¦‚ &lt;code&gt;4096&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;net.core.somaxconn&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;listen é˜Ÿåˆ—æœ€å¤§å€¼&lt;/td&gt;&lt;td&gt;é»˜è®¤128&lt;/td&gt;&lt;td&gt;WebæœåŠ¡å™¨å»ºè®® &lt;code&gt;1024+&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;net.core.netdev_max_backlog&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;æ¥æ”¶é˜Ÿåˆ—æœ€å¤§å€¼&lt;/td&gt;&lt;td&gt;é»˜è®¤1000&lt;/td&gt;&lt;td&gt;ç½‘ç»œå¯†é›†å‹ç³»ç»Ÿå¯è°ƒè‡³ &lt;code&gt;5000~10000&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;I/O ä¸æ–‡ä»¶ç³»ç»Ÿï¼ˆfs.*ï¼‰&lt;a href=&quot;#io-ä¸æ–‡ä»¶ç³»ç»Ÿfs&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;


































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å‚æ•°&lt;/th&gt;&lt;th&gt;ä½œç”¨&lt;/th&gt;&lt;th&gt;å¸¸ç”¨å–å€¼&lt;/th&gt;&lt;th&gt;è¯´æ˜&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;fs.file-max&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;ç³»ç»Ÿæœ€å¤§æ‰“å¼€æ–‡ä»¶æ•°&lt;/td&gt;&lt;td&gt;æ•´æ•°&lt;/td&gt;&lt;td&gt;é»˜è®¤è¾ƒå°ï¼Œç”Ÿäº§ç¯å¢ƒå¯è°ƒå¤§&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;fs.nr_open&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;æ¯è¿›ç¨‹æœ€å¤§æ–‡ä»¶æè¿°ç¬¦&lt;/td&gt;&lt;td&gt;æ•´æ•°&lt;/td&gt;&lt;td&gt;é€šå¸¸é…åˆ ulimit è°ƒæ•´&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;fs.aio-max-nr&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;æœ€å¤§ AIO è¯·æ±‚æ•°&lt;/td&gt;&lt;td&gt;é»˜è®¤65536&lt;/td&gt;&lt;td&gt;I/O å¯†é›†å‹ç¨‹åºå¯è°ƒå¤§&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;fs.inotify.max_user_watches&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;å•ç”¨æˆ·æœ€å¤§ inotify ç›‘å¬æ•°&lt;/td&gt;&lt;td&gt;é»˜è®¤8192&lt;/td&gt;&lt;td&gt;å¸¸ç”¨äºç›‘æ§ã€åŒæ­¥ç¨‹åºï¼ˆå¦‚ inotifywaitï¼‰&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;è¿›ç¨‹ä¸å®‰å…¨ï¼ˆkernel.*ï¼‰&lt;a href=&quot;#è¿›ç¨‹ä¸å®‰å…¨kernel&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;








































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å‚æ•°&lt;/th&gt;&lt;th&gt;ä½œç”¨&lt;/th&gt;&lt;th&gt;å¸¸ç”¨å–å€¼&lt;/th&gt;&lt;th&gt;è¯´æ˜&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;kernel.pid_max&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;æœ€å¤§è¿›ç¨‹å·&lt;/td&gt;&lt;td&gt;é»˜è®¤32768&lt;/td&gt;&lt;td&gt;é«˜å¹¶å‘ç³»ç»Ÿå¯è°ƒè‡³ 4194304&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;kernel.threads-max&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;æœ€å¤§çº¿ç¨‹æ•°&lt;/td&gt;&lt;td&gt;æ•´æ•°&lt;/td&gt;&lt;td&gt;æ§åˆ¶ç³»ç»Ÿå¹¶å‘ä¸Šé™&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;kernel.msgmnb / msgmax / msgmni&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;æ¶ˆæ¯é˜Ÿåˆ—ç›¸å…³&lt;/td&gt;&lt;td&gt;å„ç§æ•´æ•°å€¼&lt;/td&gt;&lt;td&gt;IPC è°ƒæ•´æ—¶å¸¸ç”¨&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;kernel.shmall / shmmax&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;å…±äº«å†…å­˜æ®µæ€»é‡ä¸å•æ®µå¤§å°&lt;/td&gt;&lt;td&gt;å­—èŠ‚æ•°&lt;/td&gt;&lt;td&gt;æ•°æ®åº“å¸¸è°ƒå¤§&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;kernel.sched_migration_cost_ns&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;è°ƒåº¦è¿ç§»å»¶è¿Ÿ&lt;/td&gt;&lt;td&gt;çº³ç§’å€¼&lt;/td&gt;&lt;td&gt;è°ƒåº¦ä¼˜åŒ–æ—¶å¯å¾®è°ƒ&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;ä½¿ç”¨&lt;a href=&quot;#ä½¿ç”¨&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;section&gt;&lt;h2&gt;æŸ¥çœ‹å‚æ•°&lt;a href=&quot;#æŸ¥çœ‹å‚æ•°&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;sysctl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;vm.swappiness&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;ä¿®æ”¹å‚æ•°&lt;a href=&quot;#ä¿®æ”¹å‚æ•°&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# ä¸´æ—¶ä¿®æ”¹ï¼ˆç«‹å³ç”Ÿæ•ˆï¼Œé‡å¯å¤±æ•ˆï¼‰&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;sysctl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-w&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;vm.swappiness=&lt;/span&gt;&lt;span&gt;10&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# æ°¸ä¹…ä¿®æ”¹ï¼ˆå†™å…¥é…ç½®æ–‡ä»¶ï¼‰&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;echo&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;vm.swappiness=10&quot;&lt;/span&gt;&lt;span&gt; &amp;gt;&amp;gt; &lt;/span&gt;&lt;span&gt;/etc/sysctl.conf&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;sysctl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-p&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;# é‡æ–°åŠ è½½&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;å¸¸è§ç»„åˆå‚æ•°&lt;a href=&quot;#å¸¸è§ç»„åˆå‚æ•°&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;section&gt;&lt;h2&gt;æ•°æ®åº“æœåŠ¡å™¨ï¼ˆMySQLã€PostgreSQLã€Oracleï¼‰&lt;a href=&quot;#æ•°æ®åº“æœåŠ¡å™¨mysqlpostgresqloracle&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;è°ƒä¼˜ç›®æ ‡ï¼š&lt;a href=&quot;#è°ƒä¼˜ç›®æ ‡&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;ç¨³å®šæ€§ä¼˜å…ˆ&lt;/li&gt;
&lt;li&gt;å‡å°‘ Swapã€ä¿è¯ I/O è¿ç»­æ€§&lt;/li&gt;
&lt;li&gt;æ”¯æŒå¤§é¡µå†…å­˜ä¸å…±äº«å†…å­˜æ®µ&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;å¸¸ç”¨å‚æ•°ç»„åˆ&lt;a href=&quot;#å¸¸ç”¨å‚æ•°ç»„åˆ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;
































































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å‚æ•°&lt;/th&gt;&lt;th&gt;æ¨èå€¼&lt;/th&gt;&lt;th&gt;è¯´æ˜&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;vm.swappiness&lt;/code&gt;&lt;/td&gt;&lt;td&gt;1~10&lt;/td&gt;&lt;td&gt;å°½é‡ä¸ä½¿ç”¨ swap&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;vm.overcommit_memory&lt;/code&gt;&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;å…è®¸ä¸€å®šå†…å­˜è¶…åˆ†é…&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;vm.dirty_ratio&lt;/code&gt;&lt;/td&gt;&lt;td&gt;10&lt;/td&gt;&lt;td&gt;å‡å°‘è„é¡µå †ç§¯&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;vm.dirty_background_ratio&lt;/code&gt;&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;æ›´æ—©è§¦å‘åå°å†™å›&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;vm.nr_hugepages&lt;/code&gt;&lt;/td&gt;&lt;td&gt;è‹¥å¹²ï¼ˆæ ¹æ®DBå†…å­˜ï¼‰&lt;/td&gt;&lt;td&gt;å¯ç”¨å¤§é¡µï¼ˆHugePageï¼‰å‡å°‘TLB miss&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;kernel.shmmax&lt;/code&gt;&lt;/td&gt;&lt;td&gt;æ€»å†…å­˜çš„ 50%~80%&lt;/td&gt;&lt;td&gt;å…è®¸æ•°æ®åº“å¤§å…±äº«å†…å­˜æ®µ&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;kernel.shmall&lt;/code&gt;&lt;/td&gt;&lt;td&gt;ä¸ä¸ŠåŒ¹é…&lt;/td&gt;&lt;td&gt;ç³»ç»Ÿå¯ç”¨å…±äº«å†…å­˜æ€»é‡&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;fs.file-max&lt;/code&gt;&lt;/td&gt;&lt;td&gt;â‰¥1000000&lt;/td&gt;&lt;td&gt;å¢åŠ æ–‡ä»¶å¥æŸ„æ•°&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;fs.aio-max-nr&lt;/code&gt;&lt;/td&gt;&lt;td&gt;1048576&lt;/td&gt;&lt;td&gt;æ”¯æŒæ›´å¤šå¼‚æ­¥I/Oè¯·æ±‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;net.core.somaxconn&lt;/code&gt;&lt;/td&gt;&lt;td&gt;1024+&lt;/td&gt;&lt;td&gt;å¢åŠ è¿æ¥æ’é˜Ÿé˜Ÿåˆ—&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;net.ipv4.tcp_fin_timeout&lt;/code&gt;&lt;/td&gt;&lt;td&gt;15&lt;/td&gt;&lt;td&gt;å‡å°‘TIME_WAITç§¯å‹&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;å¦å¤–ï¼ŒMySQL æ•°æ®åº“éƒ¨ç½²çš„ç³»ç»Ÿä¸Šå»ºè®®å…³é—­ é€æ˜å¤§é¡µï¼ˆTHPï¼‰ï¼Œæœ‰åŠ©äºå°æ–‡ä»¶éšæœºè¯»å†™æ€§èƒ½&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;echo&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;never&lt;/span&gt;&lt;span&gt; &amp;gt; &lt;/span&gt;&lt;span&gt;/sys/kernel/mm/transparent_hugepage/enabled&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;é«˜å¹¶å‘ Web / API æœåŠ¡å™¨ï¼ˆNginxã€Node.jsã€Gunicorn ç­‰ï¼‰&lt;a href=&quot;#é«˜å¹¶å‘-web--api-æœåŠ¡å™¨nginxnodejsgunicorn-ç­‰&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;è°ƒä¼˜ç›®æ ‡ï¼š&lt;a href=&quot;#è°ƒä¼˜ç›®æ ‡-1&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;æå‡è¿æ¥æ‰¿è½½é‡&lt;/li&gt;
&lt;li&gt;é™ä½ &lt;code&gt;TIME_WAIT&lt;/code&gt; å½±å“&lt;/li&gt;
&lt;li&gt;å¢å¤§é˜Ÿåˆ—å’Œç¼“å†²åŒº&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;å¸¸ç”¨å‚æ•°ç»„åˆ&lt;a href=&quot;#å¸¸ç”¨å‚æ•°ç»„åˆ-1&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;

















































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å‚æ•°&lt;/th&gt;&lt;th&gt;æ¨èå€¼&lt;/th&gt;&lt;th&gt;è¯´æ˜&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;net.core.somaxconn&lt;/code&gt;&lt;/td&gt;&lt;td&gt;1024~65535&lt;/td&gt;&lt;td&gt;listen() é˜Ÿåˆ—ä¸Šé™&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;net.ipv4.tcp_max_syn_backlog&lt;/code&gt;&lt;/td&gt;&lt;td&gt;4096+&lt;/td&gt;&lt;td&gt;åŠè¿æ¥é˜Ÿåˆ—ä¸Šé™&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;net.ipv4.tcp_tw_reuse&lt;/code&gt;&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;å¤ç”¨ TIME_WAIT è¿æ¥&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;net.ipv4.tcp_fin_timeout&lt;/code&gt;&lt;/td&gt;&lt;td&gt;15&lt;/td&gt;&lt;td&gt;æé«˜è¿æ¥å›æ”¶é€Ÿåº¦&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;net.ipv4.ip_local_port_range&lt;/code&gt;&lt;/td&gt;&lt;td&gt;1024 65535&lt;/td&gt;&lt;td&gt;æ‰©å¤§æœ¬åœ°ç«¯å£èŒƒå›´&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;net.core.netdev_max_backlog&lt;/code&gt;&lt;/td&gt;&lt;td&gt;10000&lt;/td&gt;&lt;td&gt;NIC æ¥æ”¶é˜Ÿåˆ—ä¸Šé™&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;fs.file-max&lt;/code&gt;&lt;/td&gt;&lt;td&gt;1048576&lt;/td&gt;&lt;td&gt;æé«˜ç³»ç»Ÿæ–‡ä»¶å¥æŸ„&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;net.ipv4.tcp_sack&lt;/code&gt;&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;å¯ç”¨ SACK æé«˜ä¼ è¾“æ•ˆç‡&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;ul&gt;
&lt;li&gt;Web æœåŠ¡é«˜å³°æœŸå¸¸å‡ºç° &lt;code&gt;TIME_WAIT&lt;/code&gt; æ¿€å¢ï¼Œå¯é€šè¿‡ &lt;code&gt;tcp_tw_reuse=1&lt;/code&gt; ç¼“è§£ã€‚&lt;/li&gt;
&lt;li&gt;é…åˆ &lt;strong&gt;ulimit -n&lt;/strong&gt; è°ƒæ•´è¿›ç¨‹çº§æ–‡ä»¶æè¿°ç¬¦é™åˆ¶ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;æ–‡ä»¶å­˜å‚¨ / NFS / å¯¹è±¡å­˜å‚¨æœåŠ¡å™¨&lt;a href=&quot;#æ–‡ä»¶å­˜å‚¨--nfs--å¯¹è±¡å­˜å‚¨æœåŠ¡å™¨&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;è°ƒä¼˜ç›®æ ‡ï¼š&lt;a href=&quot;#è°ƒä¼˜ç›®æ ‡-2&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;æé«˜ç£ç›˜ç¼“å­˜å†™å…¥æ•ˆç‡&lt;/li&gt;
&lt;li&gt;å‡å°‘è„é¡µæ»ç•™&lt;/li&gt;
&lt;li&gt;å¢åŠ  I/O å¹¶è¡Œåº¦&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;å¸¸ç”¨å‚æ•°ç»„åˆ&lt;a href=&quot;#å¸¸ç”¨å‚æ•°ç»„åˆ-2&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;












































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å‚æ•°&lt;/th&gt;&lt;th&gt;æ¨èå€¼&lt;/th&gt;&lt;th&gt;è¯´æ˜&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;vm.dirty_ratio&lt;/code&gt;&lt;/td&gt;&lt;td&gt;15&lt;/td&gt;&lt;td&gt;ç³»ç»Ÿå…è®¸çš„æœ€å¤§è„é¡µæ¯”ä¾‹&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;vm.dirty_background_ratio&lt;/code&gt;&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;åå°å†™å›æ¯”ä¾‹&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;vm.vfs_cache_pressure&lt;/code&gt;&lt;/td&gt;&lt;td&gt;50&lt;/td&gt;&lt;td&gt;ä¿ç•™æ›´å¤š inode/dentry ç¼“å­˜&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;fs.aio-max-nr&lt;/code&gt;&lt;/td&gt;&lt;td&gt;1048576&lt;/td&gt;&lt;td&gt;å¼‚æ­¥I/Oä¸Šé™&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;vm.laptop_mode&lt;/code&gt;&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;æœåŠ¡å™¨ä¸Šåº”ç¦ç”¨èŠ‚èƒ½å»¶è¿Ÿå†™å…¥&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;vm.swappiness&lt;/code&gt;&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;é™ä½ Swap ä½¿ç”¨&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;fs.file-max&lt;/code&gt;&lt;/td&gt;&lt;td&gt;500000+&lt;/td&gt;&lt;td&gt;æé«˜æ–‡ä»¶å¥æŸ„æ•°&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;ul&gt;
&lt;li&gt;å¦‚æœæ˜¯å¤§é‡å°æ–‡ä»¶è¯»å†™ï¼Œå¯ä»¥è€ƒè™‘å…³é—­ THPã€‚&lt;/li&gt;
&lt;li&gt;å¯¹ SSD æˆ– NVMe å­˜å‚¨ï¼ŒI/O è°ƒåº¦å™¨æ¨èä½¿ç”¨ &lt;code&gt;none&lt;/code&gt; æˆ– &lt;code&gt;mq-deadline&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;å®¹å™¨å®¿ä¸»æœºï¼ˆKubernetes / Docker / Podmanï¼‰&lt;a href=&quot;#å®¹å™¨å®¿ä¸»æœºkubernetes--docker--podman&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;è°ƒä¼˜ç›®æ ‡ï¼š&lt;a href=&quot;#è°ƒä¼˜ç›®æ ‡-3&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;æé«˜ cgroup è°ƒåº¦æ•ˆç‡&lt;/li&gt;
&lt;li&gt;é™åˆ¶èµ„æºæ»¥ç”¨&lt;/li&gt;
&lt;li&gt;æå‡ç½‘ç»œä¸è¿›ç¨‹æ•°é‡ä¸Šé™&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;å¸¸ç”¨å‚æ•°ç»„åˆ&lt;a href=&quot;#å¸¸ç”¨å‚æ•°ç»„åˆ-3&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;

























































































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å‚æ•°&lt;/th&gt;&lt;th&gt;æ¨èå€¼&lt;/th&gt;&lt;th&gt;è¯´æ˜&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;vm.overcommit_memory&lt;/code&gt;&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;å®¹å™¨å†…è¿›ç¨‹çµæ´»åˆ†é…å†…å­˜&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;kernel.pid_max&lt;/code&gt;&lt;/td&gt;&lt;td&gt;4194304&lt;/td&gt;&lt;td&gt;æé«˜ PID ä¸Šé™&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;kernel.threads-max&lt;/code&gt;&lt;/td&gt;&lt;td&gt;2097152&lt;/td&gt;&lt;td&gt;æé«˜çº¿ç¨‹æ•°&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;net.ipv4.ip_forward&lt;/code&gt;&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;å¯ç”¨å®¹å™¨ç½‘ç»œè½¬å‘&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;net.bridge.bridge-nf-call-iptables&lt;/code&gt;&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;å¯ç”¨å®¹å™¨ç½‘ç»œè§„åˆ™&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;fs.inotify.max_user_instances&lt;/code&gt;&lt;/td&gt;&lt;td&gt;512&lt;/td&gt;&lt;td&gt;æé«˜å®¹å™¨å†…ç›‘æ§ä¸Šé™&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;fs.inotify.max_user_watches&lt;/code&gt;&lt;/td&gt;&lt;td&gt;1048576&lt;/td&gt;&lt;td&gt;å¸¸ç”¨äº k8s + inotify åœºæ™¯&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;net.netfilter.nf_conntrack_max&lt;/code&gt;&lt;/td&gt;&lt;td&gt;1048576&lt;/td&gt;&lt;td&gt;è®¾ç½®è¿æ¥è·Ÿè¸ªè¡¨çš„æœ€å¤§æ¡ç›®æ•°&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;net.ipv4.netfilter.ip_conntrack_max&lt;/code&gt;&lt;/td&gt;&lt;td&gt;1048576&lt;/td&gt;&lt;td&gt;æ—§ç‰ˆå†…æ ¸çš„è¿æ¥è·Ÿè¸ªå‚æ•°ï¼Œä¸ä¸Šé¢åŠŸèƒ½ç›¸åŒ&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;net.core.somaxconn&lt;/code&gt;&lt;/td&gt;&lt;td&gt;65535&lt;/td&gt;&lt;td&gt;è®¾ç½®æ¯ä¸ªç«¯å£ç›‘å¬é˜Ÿåˆ—çš„æœ€å¤§é•¿åº¦&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;net.ipv4.tcp_max_syn_backlog&lt;/code&gt;&lt;/td&gt;&lt;td&gt;65535&lt;/td&gt;&lt;td&gt;TCPåŠè¿æ¥é˜Ÿåˆ—ï¼ˆSYNé˜Ÿåˆ—ï¼‰çš„æœ€å¤§é•¿åº¦&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;net.core.netdev_max_backlog&lt;/code&gt;&lt;/td&gt;&lt;td&gt;65535&lt;/td&gt;&lt;td&gt;ç½‘ç»œè®¾å¤‡æ¥æ”¶é˜Ÿåˆ—çš„æœ€å¤§æ•°æ®åŒ…æ•°é‡&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;vm.dirty_ratio&lt;/code&gt;&lt;/td&gt;&lt;td&gt;15&lt;/td&gt;&lt;td&gt;ç³»ç»Ÿå†…å­˜ä¸­â€è„é¡µâ€ï¼ˆå¾…å†™å…¥ç£ç›˜çš„æ•°æ®ï¼‰çš„æœ€å¤§æ¯”ä¾‹&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;vm.swappiness&lt;/code&gt;&lt;/td&gt;&lt;td&gt;10&lt;/td&gt;&lt;td&gt;å‡å°‘swapä½¿ç”¨&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;vm.dirty_background_ratio &lt;/code&gt;&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;åå°å›å†™è¿›ç¨‹å¼€å§‹å·¥ä½œçš„è„é¡µæ¯”ä¾‹é˜ˆå€¼&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;fs.file-max &lt;/code&gt;&lt;/td&gt;&lt;td&gt;2097152&lt;/td&gt;&lt;td&gt;ç³»ç»Ÿçº§åˆ«æœ€å¤§å¯æ‰“å¼€æ–‡ä»¶å¥æŸ„æ•°&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;ul&gt;
&lt;li&gt;å®¹å™¨ä¸»æœºç»å¸¸ hit â€œToo many open filesâ€ æˆ– â€œtoo many processesâ€ï¼Œè¦åŒæ—¶è°ƒæ•´ &lt;strong&gt;ulimit + sysctl&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å¯ä»¥ä½¿ç”¨ &lt;code&gt;systemd-cgls&lt;/code&gt; æŸ¥çœ‹å®¹å™¨å¯¹åº”çš„ cgroup å±‚çº§ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;å®‰å…¨ / ç½‘å…³ç±»ä¸»æœº&lt;a href=&quot;#å®‰å…¨--ç½‘å…³ç±»ä¸»æœº&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;è°ƒä¼˜ç›®æ ‡&lt;a href=&quot;#è°ƒä¼˜ç›®æ ‡-4&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;å¢å¼ºç½‘ç»œå®‰å…¨æ€§&lt;/li&gt;
&lt;li&gt;é™ä½æ”»å‡»é¢&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;å¸¸ç”¨å‚æ•°ç»„åˆ&lt;a href=&quot;#å¸¸ç”¨å‚æ•°ç»„åˆ-4&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;


































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å‚æ•°&lt;/th&gt;&lt;th&gt;æ¨èå€¼&lt;/th&gt;&lt;th&gt;è¯´æ˜&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;net.ipv4.conf.all.rp_filter&lt;/code&gt;&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;å¯ç”¨åå‘è·¯å¾„è¿‡æ»¤&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;net.ipv4.conf.all.accept_redirects&lt;/code&gt;&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;ç¦æ­¢ ICMP é‡å®šå‘&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;net.ipv4.conf.all.accept_source_route&lt;/code&gt;&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;ç¦æ­¢æºè·¯ç”±åŒ…&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;net.ipv4.icmp_echo_ignore_broadcasts&lt;/code&gt;&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;å¿½ç•¥å¹¿æ’­ ICMP&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;net.ipv4.tcp_syncookies&lt;/code&gt;&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;SYN æ”»å‡»é˜²å¾¡&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;</content:encoded></item><item><title>Kuberneteså­¦ä¹ ç¬”è®°åä¸‰ï¼šKubernetes Ingress</title><link>https://white-festa.net/posts/kubernetes-tutorial/ingress/</link><guid isPermaLink="true">https://white-festa.net/posts/kubernetes-tutorial/ingress/</guid><description>åœ¨Kubernetesä¸­é€šè¿‡Ingresså®ç°Webä»£ç†ã€HTTPSç«™ç‚¹å’Œç°åº¦å‘å¸ƒ</description><pubDate>Wed, 13 Nov 2024 00:00:00 GMT</pubDate><content:encoded>&lt;section&gt;&lt;h1&gt;æ¦‚è¿°&lt;a href=&quot;#æ¦‚è¿°&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;section&gt;&lt;h2&gt;å››å±‚ä¸ä¸ƒå±‚è´Ÿè½½å‡è¡¡&lt;a href=&quot;#å››å±‚ä¸ä¸ƒå±‚è´Ÿè½½å‡è¡¡&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;å››å±‚çš„è´Ÿè½½å‡è¡¡å°±æ˜¯åŸºäºï¼ˆIP+ç«¯å£ï¼‰çš„è´Ÿè½½å‡è¡¡ï¼šåœ¨ä¸‰å±‚è´Ÿè½½å‡è¡¡çš„åŸºç¡€ä¸Šï¼Œé€šè¿‡å‘å¸ƒä¸‰å±‚çš„IP åœ°å€ï¼ˆVIPï¼‰ï¼Œç„¶ååŠ å››å±‚çš„ç«¯å£å·ï¼Œæ¥å†³å®šå“ªäº›æµé‡éœ€è¦åšè´Ÿè½½å‡è¡¡ï¼Œå¯¹éœ€è¦å¤„ç†çš„æµé‡è¿›è¡ŒNAT å¤„ç†ï¼Œè½¬å‘è‡³åå°æœåŠ¡å™¨ï¼Œå¹¶è®°å½•ä¸‹è¿™ä¸ªTCP æˆ–è€…UDP çš„æµé‡æ˜¯ç”±å“ªå°æœåŠ¡å™¨å¤„ç†çš„ï¼Œåç»­è¿™ä¸ªè¿æ¥çš„æ‰€æœ‰æµé‡éƒ½åŒæ ·è½¬å‘åˆ°åŒä¸€å°æœåŠ¡å™¨å¤„ç†ã€‚&lt;/p&gt;&lt;p&gt;ä¸ƒå±‚çš„è´Ÿè½½å‡è¡¡å°±æ˜¯åŸºäºè™šæ‹Ÿçš„URL æˆ–ä¸»æœºIP çš„è´Ÿè½½å‡è¡¡ï¼šåœ¨å››å±‚è´Ÿè½½å‡è¡¡çš„åŸºç¡€ä¸Šï¼ˆæ²¡æœ‰å››å±‚æ˜¯ç»å¯¹ä¸å¯èƒ½æœ‰ä¸ƒå±‚çš„ï¼‰ï¼Œå†è€ƒè™‘åº”ç”¨å±‚çš„ç‰¹å¾ï¼Œæ¯”å¦‚åŒä¸€ä¸ªWeb æœåŠ¡å™¨çš„è´Ÿè½½å‡è¡¡ï¼Œé™¤äº†æ ¹æ®VIP åŠ 80 ç«¯å£è¾¨åˆ«æ˜¯å¦éœ€è¦å¤„ç†çš„æµé‡ï¼Œè¿˜å¯æ ¹æ®ä¸ƒå±‚çš„URLã€æµè§ˆå™¨ç±»åˆ«ã€è¯­è¨€æ¥å†³å®šæ˜¯å¦è¦è¿›è¡Œè´Ÿè½½å‡è¡¡ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœä½ çš„Web æœåŠ¡å™¨åˆ†æˆä¸¤ç»„ï¼Œä¸€ç»„æ˜¯ä¸­æ–‡è¯­è¨€çš„ï¼Œä¸€ç»„æ˜¯è‹±æ–‡è¯­è¨€çš„ï¼Œé‚£ä¹ˆä¸ƒå±‚è´Ÿè½½å‡è¡¡å°±å¯ä»¥å½“ç”¨æˆ·æ¥è®¿é—®ä½ çš„åŸŸåæ—¶ï¼Œè‡ªåŠ¨è¾¨åˆ«ç”¨æˆ·è¯­è¨€ï¼Œç„¶åé€‰æ‹©å¯¹åº”çš„è¯­è¨€æœåŠ¡å™¨ç»„è¿›è¡Œè´Ÿè½½å‡è¡¡å¤„ç†ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;Ingress ç®€ä»‹&lt;a href=&quot;#ingress-ç®€ä»‹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;åœ¨Kubernetes ä¸­ï¼ŒIngress æ˜¯ä¸€ç§API å¯¹è±¡ï¼Œå®ƒå……å½“äº†å°†å¤–éƒ¨ç½‘ç»œæµé‡è·¯ç”±åˆ°Kubernetes é›†ç¾¤å†…éƒ¨æœåŠ¡çš„å…¥å£ã€‚å®ƒæ˜¯ä¸€ä¸ªè§„èŒƒåŒ–çš„æµé‡ç®¡ç†æ–¹å¼ï¼Œå¯ä»¥æ–¹ä¾¿åœ°è¿›è¡Œé…ç½®å’Œç®¡ç†ã€‚&lt;/p&gt;&lt;p&gt;Ingress æ”¯æŒæ‰©å±•çš„è·¯ç”±è§„åˆ™ï¼ŒåŒ…æ‹¬åŸºäºä¸»æœºã€è·¯å¾„ã€HTTP æ–¹æ³•å’Œå…¶ä»–Webè¯·æ±‚æµé‡çš„è·¯ç”±æ§åˆ¶ã€‚è¿™ä½¿å¾—Ingress æˆä¸ºå°†Kubernetes ä½œä¸ºWeb åº”ç”¨ç¨‹åºæ‰˜ç®¡è§£å†³æ–¹æ¡ˆæ—¶çš„ä¸€ä¸ªç†æƒ³é€‰æ‹©ã€‚&lt;/p&gt;&lt;p&gt;åœ¨Kubernetes ä¸­ï¼Œä½¿ç”¨ä¸åŒçš„Ingress Controller æ¥å®ç°Ingress è§„èŒƒã€‚å®é™…ä¸Šï¼ŒIngress Controller æ˜¯ä¸€ç§Kubernetes éƒ¨ç½²ï¼Œå®ƒé€šè¿‡Ingress API å¯¹è±¡æ¥æ”¶æµé‡ï¼Œå®ç°è¯·æ±‚è·¯ç”±å’Œè´Ÿè½½å¹³è¡¡ç­‰åŠŸèƒ½ã€‚&lt;code&gt;Nginx Ingress Controller&lt;/code&gt;ã€&lt;code&gt;Traefik Ingress Controller&lt;/code&gt; ã€&lt;code&gt;HAProxy Ingress Controller&lt;/code&gt; ç­‰éƒ½å¸¸ç”¨äºKubernetes ä¸­ã€‚&lt;/p&gt;&lt;p&gt;æ€»ä¹‹ï¼ŒKubernetes Ingress æ˜¯ä¸€ç§å®šä¹‰é…ç½®å’Œè·¯ç”±ç½‘ç»œæµé‡çš„è§„èŒƒï¼Œè€ŒIngress Controller æ˜¯ç”¨äºå®ç°Ingress è§„èŒƒçš„Kubernetes éƒ¨ç½²ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;Ingress å¦‚ä½•ä»£ç† kubernetes å†…éƒ¨åº”ç”¨&lt;a href=&quot;#ingress-å¦‚ä½•ä»£ç†-kubernetes-å†…éƒ¨åº”ç”¨&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;å®‰è£… Ingress Controllerï¼šä¸ºäº†å°†å¤–éƒ¨æµé‡è·¯ç”±åˆ°å†…éƒ¨Kubernetes åº”ç”¨ç¨‹åºï¼Œ éœ€è¦å®‰è£…å¹¶é…ç½®ä¸€ç§Ingress Controller ï¼Œ ä¾‹å¦‚Nginx Ingress Controllerã€Traefik Ingress Controller æˆ–HAProxy Ingress Controllerã€‚&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;é€šå¸¸æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨Helm Charts æˆ–è€…å®˜æ–¹æä¾›çš„YAML æ–‡ä»¶æ¥å®‰è£…Ingress Controllerã€‚&lt;/p&gt;&lt;ol&gt;
&lt;li&gt;åˆ›å»ºä¸€ä¸ªæ–°çš„Kubernetes Serviceï¼šIngress Controller éœ€è¦çŸ¥é“è¦å°†æµé‡è·¯ç”±åˆ°å“ªä¸ªService ä¸Šï¼Œå› æ­¤é¦–å…ˆéœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çš„Service å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨Deployment æˆ–Pod æ¥åˆ›å»ºåç«¯æœåŠ¡ï¼Œæˆ–ä½¿ç”¨ServiceType: &lt;code&gt;ClusterIP&lt;/code&gt; æ¥åˆ›å»ºä¸€ä¸ªå•ç‹¬çš„Service å¯¹è±¡ã€‚&lt;/li&gt;
&lt;li&gt;åˆ›å»ºIngress å¯¹è±¡å¹¶å®šä¹‰è·¯ç”±è§„åˆ™ï¼šåˆ›å»ºä¸€ä¸ªæ–°çš„Ingress å¯¹è±¡ï¼Œå¹¶å®šä¹‰æµé‡è·¯ç”±è§„åˆ™ã€‚è·¯ç”±è§„åˆ™å¯ä»¥åŸºäºä¸»æœºã€è·¯å¾„ã€HTTP æ–¹æ³•å’Œå…¶ä»–Web è¯·æ±‚æµé‡è¿›è¡Œæ§åˆ¶ï¼Œå¹¶ä¸”å¯ä»¥åœ¨ä¸åŒæœåŠ¡é—´è¿›è¡Œè´Ÿè½½å‡è¡¡ã€‚&lt;/li&gt;
&lt;li&gt;æ£€æŸ¥Ingress èµ„æºæ˜¯å¦æ­£å¸¸è¿è¡Œï¼šä½¿ç”¨kubectl å‘½ä»¤æ£€æŸ¥æ–°åˆ›å»ºçš„Ingress èµ„æºçš„çŠ¶æ€ï¼Œç¡®ä¿å®ƒè¢«æˆåŠŸåœ°åº”ç”¨åˆ°Kubernetes é›†ç¾¤ä¸­ï¼Œå¹¶ä¸”å¯ä»¥æ­£å¸¸å¤„ç†æµé‡ã€‚&lt;/li&gt;
&lt;/ol&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;Ingress ä¸ Service çš„å…³ç³»&lt;a href=&quot;#ingress-ä¸-service-çš„å…³ç³»&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Ingress&lt;/strong&gt; ä¸»è¦è´Ÿè´£åº”ç”¨å±‚ï¼ˆL7ï¼‰çš„æµé‡å…¥å£å’Œè·¯ç”±ï¼Œæ ¹æ®åŸŸåã€è·¯å¾„ç­‰è§„åˆ™ï¼ŒæŠŠè¯·æ±‚è½¬å‘åˆ°æŒ‡å®šçš„ &lt;strong&gt;Service&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Service&lt;/strong&gt; è´Ÿè´£å››å±‚ï¼ˆL4ï¼‰çš„è´Ÿè½½å‡è¡¡å’ŒæœåŠ¡å‘ç°ï¼ŒæŠŠè¯·æ±‚åˆ†å‘åˆ°å¯¹åº”çš„ Pod ä¸Šã€‚&lt;/li&gt;
&lt;li&gt;æ‰€ä»¥ï¼Œ&lt;strong&gt;å®é™…çš„æµé‡è´Ÿè½½å‡è¡¡åˆ†é…ç»™å„ä¸ª Podï¼Œä»ç„¶æ˜¯ç”± Service æ¥å®ç°çš„&lt;/strong&gt;ï¼ŒIngress æ˜¯å…¥å£çš„è·¯ç”±å’Œæµé‡ç®¡ç†å±‚ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;Ingress åº”ç”¨åœºæ™¯&lt;a href=&quot;#ingress-åº”ç”¨åœºæ™¯&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;Web åº”ç”¨ç¨‹åºï¼šå¯¹äºåŸºäºWeb çš„åº”ç”¨ç¨‹åºï¼Œå¯ä»¥ä½¿ç”¨Kubernetes Ingresså°†ä¸åŒçš„è·¯å¾„å’Œä¸»æœºåè·¯ç”±åˆ°ä¸åŒçš„æœåŠ¡ï¼Œå®ç°çµæ´»çš„è¯·æ±‚è·¯ç”±å’Œè´Ÿè½½å‡è¡¡ã€‚&lt;/li&gt;
&lt;li&gt;API Gatewayï¼šåœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼ŒAPI Gateway æ˜¯å°†å¤šä¸ªå¾®æœåŠ¡åç«¯èšåˆåˆ°ä¸€ä¸ªå…¥å£ç‚¹çš„ä¸€ç§å¸¸è§æ¨¡å¼ã€‚ä½¿ç”¨Kubernetes Ingress å¯ä»¥å¾ˆå®¹æ˜“åœ°å®ç°APIGateway æ¨¡å¼ï¼Œå¹¶æä¾›çµæ´»çš„è¯·æ±‚è·¯ç”±ã€è´Ÿè½½å‡è¡¡å’ŒAPI ç‰ˆæœ¬æ§åˆ¶ç­‰åŠŸèƒ½ã€‚&lt;/li&gt;
&lt;li&gt;SSL/TLS ç»ˆæ­¢ç‚¹ï¼šKubernetes Ingress å¯ä»¥åœ¨è¯·æ±‚è¿›å…¥é›†ç¾¤å†…éƒ¨ä¹‹å‰è¿›è¡ŒSSL/TLS åè®®çš„ç»ˆæ­¢ã€‚è¿™å¯ä»¥è®©åº”ç”¨ç¨‹åºä»…éœ€è¦å¤„ç†æ™®é€šHTTP è¯·æ±‚ï¼Œè€Œç”±Ingress Controller å¤„ç†åŠ å¯†å’Œè§£å¯†çš„è¿‡ç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;åº”ç”¨ç¨‹åºæµé‡æ§åˆ¶ï¼šå¯ä»¥é€šè¿‡Kubernetes Ingress è®¾ç½®æµé‡è§„åˆ™å’Œé™åˆ¶ï¼Œå¯¹å¤–éƒ¨è¯·æ±‚è¿›è¡Œé™åˆ¶ï¼Œå‡å°‘æ¶æ„æ”»å‡»å¹¶ä¿æŠ¤åº”ç”¨ç¨‹åºå…å—DDoS æ”»å‡»ã€‚&lt;/li&gt;
&lt;/ol&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;åœ¨ kubernetes é›†ç¾¤ä¸­éƒ¨ç½² nginx ingress controller&lt;a href=&quot;#åœ¨-kubernetes-é›†ç¾¤ä¸­éƒ¨ç½²-nginx-ingress-controller&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;section&gt;&lt;h2&gt;å®˜æ–¹ç½‘å€&lt;a href=&quot;#å®˜æ–¹ç½‘å€&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/kubernetes/ingress-nginx/&quot;&gt;GitHub - kubernetes/ingress-nginx: Ingress NGINX Controller for Kubernetes&lt;/a&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;Ingress è¯­æ³•&lt;a href=&quot;#ingress-è¯­æ³•&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;section&gt;&lt;h2&gt;å¯ç”¨&lt;a href=&quot;#å¯ç”¨&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;




























































































































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å­—æ®µ&lt;/th&gt;&lt;th&gt;ç±»å‹&lt;/th&gt;&lt;th&gt;è¯´æ˜&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.defaultBackend&lt;/code&gt;&lt;/td&gt;&lt;td&gt;Object&lt;/td&gt;&lt;td&gt;Ingress è§„èŒƒä¸­çš„ä¸€ä¸ªå‚æ•°ï¼Œç”¨äºæŒ‡å®šæ²¡æœ‰åŒ¹é…åˆ°ä»»ä½•è§„åˆ™çš„è¯·æ±‚è¯¥å‘é€åˆ°å“ªä¸ªåç«¯æœåŠ¡ã€‚å¯ä»¥æ˜¯å·²æœ‰çš„ Serviceã€Deploymentï¼Œä¹Ÿå¯ä»¥æ˜¯è‡ªå®šä¹‰çš„èµ„æºå¯¹è±¡ã€‚åªèƒ½æŒ‡å®šä¸€ä¸ªã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.defaultBackend.resource&lt;/code&gt;&lt;/td&gt;&lt;td&gt;Object&lt;/td&gt;&lt;td&gt;æŒ‡å®šåç«¯æœåŠ¡ä¸º Deployment ç­‰ï¼Œä¹Ÿå¯ä»¥æ˜¯è‡ªå®šä¹‰çš„èµ„æºå¯¹è±¡ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.defaultBackend.resource.apiGroup&lt;/code&gt;&lt;/td&gt;&lt;td&gt;string&lt;/td&gt;&lt;td&gt;æŒ‡å®šèµ„æºçš„ API ç»„ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.defaultBackend.resource.kind&lt;/code&gt;&lt;/td&gt;&lt;td&gt;string&lt;/td&gt;&lt;td&gt;æŒ‡å®šèµ„æºçš„ç±»å‹ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.defaultBackend.resource.name&lt;/code&gt;&lt;/td&gt;&lt;td&gt;string&lt;/td&gt;&lt;td&gt;æŒ‡å®šèµ„æºçš„åç§°ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.defaultBackend.service&lt;/code&gt;&lt;/td&gt;&lt;td&gt;Object&lt;/td&gt;&lt;td&gt;æŒ‡å®šåç«¯æœåŠ¡ä¸º Serviceã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.defaultBackend.service.name&lt;/code&gt;&lt;/td&gt;&lt;td&gt;string&lt;/td&gt;&lt;td&gt;æŒ‡å®š Service çš„åç§°ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.defaultBackend.service.port&lt;/code&gt;&lt;/td&gt;&lt;td&gt;Object&lt;/td&gt;&lt;td&gt;æŒ‡å®š Service çš„ç«¯å£ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.ingressClassName&lt;/code&gt;&lt;/td&gt;&lt;td&gt;string&lt;/td&gt;&lt;td&gt;å¯é€‰å‚æ•°ï¼Œç”¨äºæŒ‡å®šä½¿ç”¨å“ªä¸ª Ingress Controller å¤„ç†è¯¥è§„åˆ™ã€‚å¤šä¸ª Controller å¯ä»¥å…±å­˜ï¼Œæ­¤å­—æ®µç”¨äºåŒºåˆ†ã€‚ä¾‹å¦‚ Nginx Ingress Controller æ—¶è¯¥å­—æ®µè®¾ç½®ä¸º &lt;code&gt;nginx&lt;/code&gt;ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.rules&lt;/code&gt;&lt;/td&gt;&lt;td&gt;[]Object&lt;/td&gt;&lt;td&gt;è·¯ç”±è§„åˆ™æ•°ç»„ã€‚æ¯ä¸ªè§„åˆ™å®šä¹‰ä¸€ä¸ª host å¯¹åº”çš„ä¸€ç»„ URL è·¯å¾„è·¯ç”±ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.rules.host&lt;/code&gt;&lt;/td&gt;&lt;td&gt;string&lt;/td&gt;&lt;td&gt;è§„åˆ™çš„ä¸»æœºåï¼ˆåŸŸåï¼‰ï¼Œç”¨äºåŒ¹é…è¯·æ±‚ä¸­çš„ Host å­—æ®µã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.rules.http&lt;/code&gt;&lt;/td&gt;&lt;td&gt;Object&lt;/td&gt;&lt;td&gt;HTTP è·¯ç”±è§„åˆ™é›†åˆï¼Œå®šä¹‰å¤šä¸ªè·¯å¾„ä»¥åŠæ¯ä¸ªè·¯å¾„å¯¹åº”çš„åç«¯æœåŠ¡ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.rules.http.paths&lt;/code&gt;&lt;/td&gt;&lt;td&gt;[]Object&lt;/td&gt;&lt;td&gt;URL è·¯å¾„è·¯ç”±è§„åˆ™æ•°ç»„ã€‚å®šä¹‰è·¯å¾„ä»¥åŠå¯¹åº”çš„åç«¯è½¬å‘é€»è¾‘ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.rules.http.paths.backend&lt;/code&gt;&lt;/td&gt;&lt;td&gt;Object&lt;/td&gt;&lt;td&gt;æ¯æ¡è·¯å¾„æ‰€å¯¹åº”çš„åç«¯ç›®æ ‡å¯¹è±¡ï¼Œå¯ä»¥æ˜¯å·²æœ‰çš„ Serviceã€Deployment æˆ–è‡ªå®šä¹‰å¯¹è±¡ã€‚åªèƒ½æŒ‡å®šä¸€ä¸ªã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.rules.http.paths.backend.resource&lt;/code&gt;&lt;/td&gt;&lt;td&gt;Object&lt;/td&gt;&lt;td&gt;åç«¯ç›®æ ‡ä¸ºèµ„æºå¯¹è±¡ï¼ˆå¦‚ Deploymentã€è‡ªå®šä¹‰èµ„æºç­‰ï¼‰ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.rules.http.paths.backend.service&lt;/code&gt;&lt;/td&gt;&lt;td&gt;Object&lt;/td&gt;&lt;td&gt;åç«¯ç›®æ ‡ä¸º Serviceã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.rules.http.paths.backend.service.name&lt;/code&gt;&lt;/td&gt;&lt;td&gt;string&lt;/td&gt;&lt;td&gt;åç«¯ Service çš„åç§°ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.rules.http.paths.backend.service.port&lt;/code&gt;&lt;/td&gt;&lt;td&gt;Object&lt;/td&gt;&lt;td&gt;åç«¯ Service çš„ç«¯å£ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.rules.http.paths.path&lt;/code&gt;&lt;/td&gt;&lt;td&gt;string&lt;/td&gt;&lt;td&gt;è·¯å¾„å­—ç¬¦ä¸²ï¼Œç”¨äºåŒ¹é… URL è·¯å¾„ã€‚å¿…é¡»ä»¥ &lt;code&gt;/&lt;/code&gt; å¼€å¤´ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.rules.http.paths.pathType&lt;/code&gt;&lt;/td&gt;&lt;td&gt;string&lt;/td&gt;&lt;td&gt;è·¯å¾„çš„åŒ¹é…ç±»å‹ã€‚å¯é€‰å€¼ï¼š&lt;code&gt;Prefix&lt;/code&gt;ï¼ˆå‰ç¼€åŒ¹é…ï¼‰æˆ– &lt;code&gt;Exact&lt;/code&gt;ï¼ˆç²¾ç¡®åŒ¹é…ï¼‰ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.tls&lt;/code&gt;&lt;/td&gt;&lt;td&gt;[]Object&lt;/td&gt;&lt;td&gt;TLS é…ç½®åˆ—è¡¨ï¼ŒåŒ…å«è¯ä¹¦å’Œå¯†é’¥çš„ Secret åŠé€‚ç”¨çš„åŸŸåã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.tls.hosts&lt;/code&gt;&lt;/td&gt;&lt;td&gt;[]string&lt;/td&gt;&lt;td&gt;ä½¿ç”¨è¯¥è¯ä¹¦çš„ä¸»æœºåæ•°ç»„ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.tls.secretName&lt;/code&gt;&lt;/td&gt;&lt;td&gt;string&lt;/td&gt;&lt;td&gt;åŒ…å« TLS è¯ä¹¦å’Œç§é’¥çš„ Kubernetes Secret çš„åç§°ï¼Œå¿…é¡»åŒ…å« &lt;code&gt;tls.crt&lt;/code&gt; å’Œ &lt;code&gt;tls.key&lt;/code&gt; ä¸¤ä¸ªå­—æ®µã€‚&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;Ingress PathType åŒ¹é…ç±»å‹&lt;a href=&quot;#ingress-pathtype-åŒ¹é…ç±»å‹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Ingress ä¸­çš„æ¯ä¸ªè·¯å¾„éƒ½éœ€è¦æœ‰å¯¹åº”çš„è·¯å¾„ç±»å‹ï¼ˆPath Typeï¼‰ã€‚æœªæ˜ç¡®è®¾ç½®pathType çš„è·¯å¾„æ— æ³•é€šè¿‡åˆæ³•æ€§æ£€æŸ¥ã€‚å½“å‰æ”¯æŒçš„è·¯å¾„ç±»å‹æœ‰ä¸‰ç§ï¼š&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Prefix&lt;/code&gt;ï¼šå‰ç¼€åŒ¹é…ã€‚å½“è¯·æ±‚çš„è·¯å¾„&lt;u&gt;ä»¥Path çš„å€¼å¼€å¤´æ—¶&lt;/u&gt;ï¼Œå°†è¿›è¡ŒåŒ¹é…ã€‚ä¾‹å¦‚ï¼Œå¦‚æœå°†Path å®šä¹‰ä¸º/exampleï¼Œåˆ™è·¯å¾„/example/foo å’Œ/example/bar éƒ½å°†åŒ¹é…ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Exact&lt;/code&gt;ï¼šå®Œå…¨åŒ¹é…ã€‚å½“è¯·æ±‚çš„è·¯å¾„&lt;u&gt;å®Œå…¨ä¸Path çš„å€¼ç›¸åŒæ—¶&lt;/u&gt;ï¼Œæ‰ä¼šè¿›è¡ŒåŒ¹é…ã€‚ä¾‹å¦‚ï¼Œå¦‚æœå°†Path å®šä¹‰ä¸º &lt;code&gt;/example&lt;/code&gt;ï¼Œåˆ™è·¯å¾„ &lt;code&gt;/example&lt;/code&gt; æ‰ä¼šåŒ¹é…ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ImplementationSpecific&lt;/code&gt; ï¼š å¯¹äºè¿™ç§è·¯å¾„ç±»å‹ï¼Œ åŒ¹é…æ–¹æ³•å–å†³äºIngressClassã€‚å…·ä½“å®ç°å¯ä»¥å°†å…¶ä½œä¸ºå•ç‹¬çš„pathType å¤„ç†æˆ–è€…ä¸Prefix æˆ–Exact ç±»å‹ä½œç›¸åŒå¤„ç†ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;Ingress å®æˆ˜&lt;a href=&quot;#ingress-å®æˆ˜&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;section&gt;&lt;h2&gt;Ingress ä»£ç† Web æœåŠ¡&lt;a href=&quot;#ingress-ä»£ç†-web-æœåŠ¡&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;éƒ¨ç½² Web æœåŠ¡&lt;a href=&quot;#éƒ¨ç½²-web-æœåŠ¡&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;ConfigMap&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx-html&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;namespace&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;default&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;data&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;index.html&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;|&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&amp;lt;html&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&amp;lt;body&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&amp;lt;h1&amp;gt;Hello this is web-app&amp;lt;/h1&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&amp;lt;/body&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&amp;lt;/html&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;---&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;apps/v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Deployment&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;labels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web-app&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web-app&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;replicas&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;selector&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;matchLabels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web-app&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;template&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;27&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;labels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;28&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web-app&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;29&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;30&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;containers&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;31&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;image&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx:latest&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;32&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;33&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;ports&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;34&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;containerPort&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;80&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;35&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;volumeMounts&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;36&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;          &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx-html-mount&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;37&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;mountPath&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/usr/share/nginx/html/index.html&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;38&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;subPath&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;index.html&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;39&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;volumes&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;40&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx-html-mount&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;41&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;configMap&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;42&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx-html&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;43&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;---&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;44&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;45&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Service&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;46&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;47&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;labels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;48&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web-app-service&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;49&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web-app-service&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;50&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;51&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;ClusterIP&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;52&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;ports&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;53&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;80-80&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;54&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;port&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;80&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;55&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;protocol&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;TCP&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;56&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;targetPort&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;80&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;57&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;appProtocol&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;TCP&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;58&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;selector&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;59&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web-app&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;éƒ¨ç½² Ingress&lt;a href=&quot;#éƒ¨ç½²-ingress&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;networking.k8s.io/v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Ingress&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;ingress-myapp&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;namespace&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;default&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;ingressClassName&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;rules&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;host&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web-app.com&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;http&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;paths&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;path&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;pathType&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Prefix&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;backend&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;service&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web-app-service&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;port&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;number&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;80&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;æµ‹è¯•éªŒè¯&lt;a href=&quot;#æµ‹è¯•éªŒè¯&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;ä½¿ç”¨ curl å‘½ä»¤æ¨¡æ‹Ÿ DNS è§£æ&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;curl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--resolve&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;web-app.com:80:10.0.0.85&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;http://web-app.com&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;ç»“æœ&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[root@microk8s-85 ~]#curl --resolve web-app.com:80:10.0.0.85 http://web-app.com&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;html&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;&amp;lt;body&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;&amp;lt;h1&amp;gt;Hello&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;is&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;web-app&amp;lt;/h1&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;&amp;lt;/body&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;/html&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;Ingress ä»£ç† HTTPS ç«™ç‚¹&lt;a href=&quot;#ingress-ä»£ç†-https-ç«™ç‚¹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;ä¸º SSL è¯ä¹¦åˆ›å»º secret&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kubectl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;create&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;secret&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;tls&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;website-secret&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--cert=tls.crt&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--key=tls.key&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;åˆ›å»º Ingress&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;networking.k8s.io/v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Ingress&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;ingress-myapp&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;namespace&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;default&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;ingressClassName&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;tls&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;hosts&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;web-app.com&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;secretName&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;website-secret&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;rules&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;host&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web-app.com&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;http&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;paths&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;path&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;pathType&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Prefix&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;backend&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;service&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web-app-service&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;port&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;number&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;80&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;Ingress Nginx æ·»åŠ Basic Auth å®‰å…¨è®¤è¯&lt;a href=&quot;#ingress-nginx-æ·»åŠ basic-auth-å®‰å…¨è®¤è¯&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;ç”Ÿæˆå¯†é’¥&lt;a href=&quot;#ç”Ÿæˆå¯†é’¥&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;å®‰è£…httpd-tools æœåŠ¡&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;yum&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-y&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;install&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;httpd-tools&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;ç”Ÿæˆå¯†ç æ–‡ä»¶ï¼Œå‘½ä»¤æ ¼å¼ï¼šâ€œhtpasswd -c å¯†ç æ–‡ä»¶ ç”¨æˆ·åâ€&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;åœ¨åˆ›å»ºsecret ä¹‹å‰é€šè¿‡htpasswd å·¥å…·ç”Ÿæˆçš„è®°å½•ç”¨æˆ·åå¯†ç çš„æ–‡ä»¶çš„æ–‡ä»¶åï¼Œå¿…é¡»å«authï¼Œä¸ç„¶æœ€ç»ˆè®¿é—®çš„ç»“æœä¼šæ˜¯503 é”™è¯¯ã€‚&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;htpasswd&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-c&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;auth&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;admin&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;New&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;password:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Re-type&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;new&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;password:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Adding&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;password&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;for&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;user&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;admin&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;æŸ¥çœ‹ç”Ÿæˆå¥½çš„ç§˜é’¥&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;cat&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;auth&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;admin:$apr1$nUBvOqcj$qviQ/ryMxgfCqh4RyWOJY.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;åˆ›å»ºSecret èµ„æºå­˜å‚¨ç”¨æˆ·å¯†ç &lt;a href=&quot;#åˆ›å»ºsecret-èµ„æºå­˜å‚¨ç”¨æˆ·å¯†ç &quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kubectl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;create&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;secret&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;generic&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;auth&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--from-file=auth&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;é…ç½®ingress è®¤è¯&lt;a href=&quot;#é…ç½®ingress-è®¤è¯&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;networking.k8s.io/v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Ingress&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;ingress-myapp&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;annotations&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;nginx.ingress.kubernetes.io/auth-type&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;basic&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;nginx.ingress.kubernetes.io/auth-secret&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;auth&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;namespace&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;default&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;ingressClassName&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;tls&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;hosts&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;web-app.com&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;secretName&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;website-secret&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;rules&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;host&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web-app.com&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;http&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;paths&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;path&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;pathType&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Prefix&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;backend&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;service&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web-app-service&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;port&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;number&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;80&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;Ingress æ§åˆ¶å™¨å®ç°ç°åº¦ï¼ˆé‡‘ä¸é›€ï¼‰å‘å¸ƒ&lt;a href=&quot;#ingress-æ§åˆ¶å™¨å®ç°ç°åº¦é‡‘ä¸é›€å‘å¸ƒ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;ç°åº¦å‘å¸ƒï¼ˆåˆåé‡‘ä¸é›€å‘å¸ƒï¼‰æ˜¯æŒ‡åœ¨é»‘ä¸ç™½ä¹‹é—´ï¼Œèƒ½å¤Ÿå¹³æ»‘è¿‡æ¸¡çš„ä¸€ç§å‘å¸ƒæ–¹å¼ã€‚åœ¨å…¶ä¸Šå¯ä»¥è¿›è¡ŒA/B testingï¼Œå³è®©ä¸€éƒ¨åˆ†ç”¨æˆ·ç»§ç»­ç”¨äº§å“ç‰¹æ€§Aï¼Œä¸€éƒ¨åˆ†ç”¨æˆ·å¼€å§‹ç”¨äº§å“ç‰¹æ€§Bï¼Œå¦‚æœç”¨æˆ·å¯¹Bæ²¡æœ‰ä»€ä¹ˆåå¯¹æ„è§ï¼Œé‚£ä¹ˆé€æ­¥æ‰©å¤§èŒƒå›´ï¼ŒæŠŠæ‰€æœ‰ç”¨æˆ·éƒ½è¿ç§»åˆ°Bä¸Šé¢æ¥ã€‚&lt;/p&gt;&lt;section&gt;&lt;h3&gt;ä½¿ç”¨çš„å‡ ç§å…³é”® Canary è§„åˆ™&lt;a href=&quot;#ä½¿ç”¨çš„å‡ ç§å…³é”®-canary-è§„åˆ™&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;


































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;è§„åˆ™&lt;/th&gt;&lt;th&gt;æè¿°&lt;/th&gt;&lt;th&gt;å–å€¼&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;nginx.ingress.kubernetes.io/canary&lt;/code&gt;&lt;/td&gt;&lt;td&gt;å¿…é¡»è®¾ç½®è¯¥Annotation å€¼ä¸ºtrueï¼Œå¦åˆ™å…¶å®ƒè§„åˆ™å°†ä¸ä¼šç”Ÿæ•ˆã€‚&lt;/td&gt;&lt;td&gt;true/false&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;nginx.ingress.kubernetes.io/canary-by-header&lt;/code&gt;&lt;/td&gt;&lt;td&gt;è¡¨ç¤ºåŸºäºè¯·æ±‚å¤´çš„åç§°è¿›è¡Œç°åº¦å‘å¸ƒã€‚è¯·æ±‚å¤´åç§°çš„ç‰¹æ®Šå–å€¼ï¼š&lt;/td&gt;&lt;td&gt;alwaysï¼šæ— è®ºä»€ä¹ˆæƒ…å†µä¸‹ï¼Œæµé‡å‡ä¼šè¿›å…¥ç°åº¦æœåŠ¡ã€‚neverï¼šæ— è®ºä»€ä¹ˆæƒ…å†µä¸‹ï¼Œæµé‡å‡ä¸ä¼šè¿›å…¥ç°åº¦æœåŠ¡ã€‚&lt;br /&gt;è‹¥æ²¡æœ‰æŒ‡å®šè¯·æ±‚å¤´åç§°çš„å€¼ï¼Œåˆ™åªè¦è¯¥å¤´å­˜åœ¨ï¼Œéƒ½ä¼šè¿›è¡Œæµé‡è½¬å‘ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;nginx.ingress.kubernetes.io/canary-by-header-value&lt;/code&gt;&lt;/td&gt;&lt;td&gt;è¡¨ç¤ºåŸºäºè¯·æ±‚å¤´çš„å€¼è¿›è¡Œç°åº¦å‘å¸ƒï¼Œéœ€è¦ä¸canary-by-header å¤´é…åˆä½¿ç”¨&lt;/td&gt;&lt;td&gt;string&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;nginx.ingress.kubernetes.io/canary-weight&lt;/code&gt;&lt;/td&gt;&lt;td&gt;è¡¨ç¤ºåŸºäºæƒé‡è¿›è¡Œç°åº¦å‘å¸ƒã€‚&lt;/td&gt;&lt;td&gt;å–å€¼èŒƒå›´ï¼š0~æƒé‡æ€»å€¼ã€‚è‹¥æœªè®¾å®šæ€»å€¼ï¼Œé»˜è®¤æ€»å€¼ä¸º100ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;nginx.ingress.kubernetes.io/canary-weight-total&lt;/code&gt;&lt;/td&gt;&lt;td&gt;è¡¨ç¤ºè®¾å®šçš„æƒé‡æ€»å€¼&lt;/td&gt;&lt;td&gt;è‹¥æœªè®¾å®šæ€»å€¼ï¼Œé»˜è®¤æ€»å€¼ä¸º100ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;åŸºäºæœåŠ¡æƒé‡çš„æµé‡åˆ‡åˆ†&lt;a href=&quot;#åŸºäºæœåŠ¡æƒé‡çš„æµé‡åˆ‡åˆ†&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;section&gt;&lt;h4&gt;ä¸» Ingress é…ç½®&lt;a href=&quot;#ä¸»-ingress-é…ç½®&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;networking.k8s.io/v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Ingress&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;ingress-myapp&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;namespace&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;default&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;ingressClassName&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;rules&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;host&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web-app.com&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;http&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;paths&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;path&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;pathType&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Prefix&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;backend&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;service&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web-app-service-v1&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;# æ­¤æ—¶æµé‡å¯¼å‘çš„æ˜¯v1æœåŠ¡&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;port&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;number&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;80&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;æ—§ç‰ˆåº”ç”¨é…ç½®&lt;a href=&quot;#æ—§ç‰ˆåº”ç”¨é…ç½®&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;ConfigMap&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx-html-v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;namespace&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;default&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;data&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;index.html&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;|&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&amp;lt;html&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&amp;lt;body&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&amp;lt;h1&amp;gt;Hello this is web-app-v1&amp;lt;/h1&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&amp;lt;/body&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&amp;lt;/html&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;---&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;apps/v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Deployment&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;labels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web-app-v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web-app-v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;replicas&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;selector&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;matchLabels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web-app-v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;template&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;27&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;labels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;28&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web-app-v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;29&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;30&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;containers&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;31&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;image&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx:latest&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;32&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;33&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;ports&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;34&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;containerPort&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;80&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;35&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;volumeMounts&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;36&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;          &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx-html-mount&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;37&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;mountPath&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/usr/share/nginx/html/index.html&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;38&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;subPath&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;index.html&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;39&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;volumes&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;40&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx-html-mount&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;41&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;configMap&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;42&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx-html-v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;43&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;---&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;44&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;45&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Service&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;46&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;47&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;labels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;48&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web-app-service-v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;49&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web-app-service-v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;50&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;51&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;ClusterIP&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;52&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;ports&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;53&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;80-80&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;54&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;port&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;80&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;55&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;protocol&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;TCP&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;56&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;targetPort&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;80&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;57&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;appProtocol&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;TCP&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;58&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;selector&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;59&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web-app-v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;æ–°ç‰ˆåº”ç”¨é…ç½®&lt;a href=&quot;#æ–°ç‰ˆåº”ç”¨é…ç½®&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;ConfigMap&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx-html-v2&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;namespace&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;default&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;data&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;index.html&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;|&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&amp;lt;html&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&amp;lt;body&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&amp;lt;h1&amp;gt;Hello this is web-app-v2&amp;lt;/h1&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&amp;lt;/body&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&amp;lt;/html&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;---&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;apps/v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Deployment&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;labels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web-app-v2&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web-app-v2&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;replicas&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;selector&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;matchLabels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web-app-v2&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;template&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;27&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;labels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;28&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web-app-v2&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;29&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;30&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;containers&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;31&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;image&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx:latest&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;32&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;33&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;ports&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;34&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;containerPort&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;80&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;35&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;volumeMounts&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;36&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;          &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx-html-mount&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;37&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;mountPath&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/usr/share/nginx/html/index.html&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;38&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;subPath&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;index.html&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;39&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;volumes&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;40&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx-html-mount&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;41&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;configMap&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;42&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx-html-v2&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;43&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;---&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;44&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;45&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Service&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;46&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;47&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;labels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;48&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web-app-service-v2&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;49&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web-app-service-v2&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;50&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;51&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;ClusterIP&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;52&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;ports&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;53&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;80-80&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;54&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;port&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;80&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;55&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;protocol&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;TCP&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;56&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;targetPort&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;80&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;57&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;appProtocol&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;TCP&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;58&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;selector&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;59&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web-app-v2&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;60&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;---&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;61&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;networking.k8s.io/v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;62&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Ingress&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;63&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;64&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;ingress-web-app-canary&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;65&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;namespace&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;default&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;66&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;annotations&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;67&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;nginx.ingress.kubernetes.io/canary&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;true&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;68&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;nginx.ingress.kubernetes.io/canary-weight&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;10&quot;&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;# è¡¨ç¤º10%çš„æµé‡èµ° v2&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;69&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;70&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;ingressClassName&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;71&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;rules&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;72&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;host&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web-app.com&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;73&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;http&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;74&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;paths&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;75&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;path&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;76&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;pathType&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Prefix&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;77&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;backend&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;78&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;service&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;79&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web-app-service-v2&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;80&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;port&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;81&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;number&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;80&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;ç³»ç»Ÿä¸Šçº¿&lt;a href=&quot;#ç³»ç»Ÿä¸Šçº¿&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;ç³»ç»Ÿè¿è¡Œä¸€æ®µæ—¶é—´åï¼Œå½“æ–°ç‰ˆæœ¬æœåŠ¡å·²ç»ç¨³å®šå¹¶ä¸”ç¬¦åˆé¢„æœŸåï¼Œéœ€è¦ä¸‹çº¿è€ç‰ˆæœ¬çš„æœåŠ¡ï¼Œä»…ä¿ç•™æ–°ç‰ˆæœ¬æœåŠ¡åœ¨çº¿ä¸Šè¿è¡Œã€‚&lt;/p&gt;&lt;ol&gt;
&lt;li&gt;å°†ä¸» ingress é…ç½®ä¸­çš„ &lt;code&gt;.spec.rules[].http.paths[].backend.service.name&lt;/code&gt; æŒ‡å‘æ–°ç‰ˆæœ¬çš„ service name&lt;/li&gt;
&lt;li&gt;åˆ é™¤æ–°ç‰ˆæœ¬é…ç½®æ–‡ä»¶ä¸­çš„ä¸´æ—¶ ingress æ§åˆ¶å™¨&lt;/li&gt;
&lt;/ol&gt;&lt;blockquote&gt;&lt;p&gt;ä¸ºä»€ä¹ˆä¸è®¾ç½®æ–°ç‰ˆæœ¬ ingress Canary ä¸º 100% æ¥å®ç°æµé‡åˆ‡æ¢ï¼Ÿ&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;è¿™å°†å¯¼è‡´ï¼š&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;ä¸» Ingress ä»æŒ‡å‘ v1&lt;/li&gt;
&lt;li&gt;ä½† 100% æµé‡éƒ½è¢« Canary Ingress åŠ«æŒåˆ° v2&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;è¿™ä¸ªæ–¹æ³•ç¡®å®ä¼šä½¿æµé‡éƒ½æµå‘ v2ï¼Œä½†æ­¤æ—¶ v1 ä»ç„¶å­˜åœ¨ï¼Œåªæ˜¯æ²¡æœ‰å®é™…å¤„ç†æµé‡è€Œå·²ã€‚å› æ­¤è¿™ç§æ–¹å¼ä¸æ˜¯æœ€ç»ˆâ€œåˆ‡æ¢â€ï¼Œè€Œæ˜¯â€œæµé‡åŠ«æŒâ€é•¿è¿œæ¥çœ‹ï¼Œåº”è¯¥æ¸…ç†æ‰ canary ç»“æ„ï¼Œå¹¶å°†ä¸» Ingress æŒ‡å‘ v2ï¼Œä»¥é¿å…é…ç½®æ··ä¹±ã€æ½œåœ¨è¯¯è§£å’Œæœªæ¥ç»´æŠ¤éš¾åº¦ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;åŸºäºå®¢æˆ·ç«¯è¯·æ±‚å¤´çš„æµé‡åˆ‡åˆ†&lt;a href=&quot;#åŸºäºå®¢æˆ·ç«¯è¯·æ±‚å¤´çš„æµé‡åˆ‡åˆ†&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;section&gt;&lt;h4&gt;æ—§ç‰ˆé…ç½®ã€æ–°ç‰ˆé…ç½®ã€ä¸» ingress&lt;a href=&quot;#æ—§ç‰ˆé…ç½®æ–°ç‰ˆé…ç½®ä¸»-ingress&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;å’Œä¹‹å‰çš„ä¸€æ ·ï¼š&lt;a href=&quot;#Et4OE&quot;&gt;https://www.yuque.com/mangshangyue-qszkg/idkuk7/me38z0tcy7ydobu5?language=zh-CN#Et4OE&lt;/a&gt;&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;æ–°ç‰ˆ Ingress æ§åˆ¶å™¨&lt;a href=&quot;#æ–°ç‰ˆ-ingress-æ§åˆ¶å™¨&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;networking.k8s.io/v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Ingress&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;ingress-web-app-canary&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;namespace&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;default&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;annotations&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;nginx.ingress.kubernetes.io/canary&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;true&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;nginx.ingress.kubernetes.io/canary-by-header&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;X-Canary&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;nginx.ingress.kubernetes.io/canary-by-header-value&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;true&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;ingressClassName&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;rules&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;host&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web-app.com&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;http&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;paths&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;path&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;pathType&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Prefix&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;backend&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;service&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web-app-service-v2&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;port&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;number&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;80&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;å¦‚ä½•è®©ç”¨æˆ·å¯ä»¥æºå¸¦&lt;code&gt;X-Canary&lt;/code&gt;Headerï¼Ÿ&lt;a href=&quot;#å¦‚ä½•è®©ç”¨æˆ·å¯ä»¥æºå¸¦x-canaryheader&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;åœ¨å‰ç«¯ä»£ç ä¸­åˆ©ç”¨éšæœºæ•°ä¸ºç”¨æˆ·æ·»åŠ  Header&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;// åˆ¤æ–­ç”¨æˆ·æ˜¯å¦å·²ç»æ‰“è¿‡æ ‡è®°&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; (&lt;/span&gt;&lt;span&gt;!&lt;/span&gt;&lt;span&gt;&lt;span&gt;document&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;cookie&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;includes&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&quot;canary_user&quot;&lt;/span&gt;&lt;span&gt;)) {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;// éšæœºåˆ†é… 10% ç”¨æˆ·è¿›å…¥ canary&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;const&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;isCanary&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Math&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;random&lt;/span&gt;&lt;span&gt;() &lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;0.1&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;document&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;cookie&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;`canary_user=&lt;/span&gt;&lt;span&gt;${&lt;/span&gt;&lt;span&gt;isCanary&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;; path=/; max-age=31536000`&lt;/span&gt;&lt;span&gt;; &lt;/span&gt;&lt;span&gt;// ä¿ç•™ä¸€å¹´&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;// è¯»å– cookie åˆ¤æ–­æ˜¯å¦æ˜¯ canary ç”¨æˆ·&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;const&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;isCanaryUser&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;document&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;cookie&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;includes&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&quot;canary_user=true&quot;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;// æ·»åŠ  header&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;fetch&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&quot;/api/data&quot;&lt;/span&gt;&lt;span&gt;, {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;headers&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;isCanaryUser&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;?&lt;/span&gt;&lt;span&gt; { &lt;/span&gt;&lt;span&gt;&quot;X-Canary&quot;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;true&quot;&lt;/span&gt;&lt;span&gt; } &lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; {}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;});&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;Nginx å…¥å£æŒ‰ Cookie æ³¨å…¥ Header&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# å¦‚æœè¯·æ±‚ä¸­åŒ…å« canary_user=trueï¼Œå°±åŠ ä¸Š X-Canary å¤´&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;map&lt;/span&gt;&lt;span&gt;&lt;span&gt; $&lt;/span&gt;&lt;span&gt;http_cookie&lt;/span&gt;&lt;span&gt; $&lt;/span&gt;&lt;/span&gt;&lt;span&gt;canary_header&lt;/span&gt;&lt;span&gt; {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;default&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;&quot;~*canary_user=true&quot;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;true&quot;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;server&lt;/span&gt;&lt;span&gt; {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;location&lt;/span&gt;&lt;span&gt; / {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;   &lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;proxy_set_header &lt;/span&gt;&lt;span&gt;X-Canary $&lt;/span&gt;&lt;span&gt;canary_header&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;   &lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;proxy_pass &lt;/span&gt;&lt;span&gt;http://your-upstream;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;ç½‘å…³å±‚è‡ªåŠ¨æ‰“æ ‡
&lt;ol&gt;
&lt;li&gt;å¦‚æœæœ‰ API ç½‘å…³ã€Service Meshï¼ˆå¦‚ Istioã€Envoyï¼‰&lt;/li&gt;
&lt;li&gt;å¯ä»¥ç›´æ¥åŸºäº IP å“ˆå¸Œã€ç”¨æˆ· IDã€Cookie ç­‰åšåˆ†æµï¼Œä¸å†ä¾èµ–å‰ç«¯æ§åˆ¶ Headerï¼›&lt;/li&gt;
&lt;li&gt;é€šå¸¸è¿™ç±»ç³»ç»Ÿå·²ç»å…·å¤‡æµé‡æ‰“æ ‡èƒ½åŠ›ï¼ŒHeader æ˜¯è‡ªåŠ¨åŠ çš„ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;åŸºäºæƒé‡åˆ†æµå’ŒåŸºäº Header åˆ†æµçš„å¯¹æ¯”&lt;a href=&quot;#åŸºäºæƒé‡åˆ†æµå’ŒåŸºäº-header-åˆ†æµçš„å¯¹æ¯”&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;

















































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å¯¹æ¯”ç»´åº¦&lt;/th&gt;&lt;th&gt;åŸºäº Header&lt;/th&gt;&lt;th&gt;åŸºäºæƒé‡&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;æ§åˆ¶ç²¾åº¦&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;ç²¾ç¡®ï¼ˆåªå½±å“å¸¦ Header çš„è¯·æ±‚ï¼‰&lt;/td&gt;&lt;td&gt;éšæœºåˆ†æµï¼Œä¸å¯æ§&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;é€‚åˆæµ‹è¯•&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;éå¸¸é€‚åˆï¼šåªè®©å†…éƒ¨æµ‹è¯•æµé‡è¿›å…¥æ–°ç‰ˆ&lt;/td&gt;&lt;td&gt;ä¸é€‚åˆå®šå‘æµ‹è¯•ï¼Œåªèƒ½è§‚å¯Ÿå…¨é‡æŒ‡æ ‡&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;ä¸Šçº¿éªŒè¯é£é™©&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;é£é™©ä½ï¼Œç”¨æˆ·æ— æ„ŸçŸ¥&lt;/td&gt;&lt;td&gt;æœ‰ä¸€å®šé£é™©ï¼ŒçœŸå®ç”¨æˆ·å¯èƒ½å‘½ä¸­æ–°ç‰ˆ&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;éœ€è¦å®¢æˆ·ç«¯é…åˆ&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;éœ€è¦æµ‹è¯•å®¢æˆ·ç«¯/å·¥å…·å¸¦ Header&lt;/td&gt;&lt;td&gt;ä¸éœ€è¦å®¢æˆ·ç«¯é…åˆ&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;é€‚åˆ A/B æµ‹è¯•&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;ä¸é€‚åˆï¼ˆä¸æ˜¯è‡ªåŠ¨åˆ†ç»„ï¼‰&lt;/td&gt;&lt;td&gt;æ›´é€‚åˆ A/B æµ‹è¯•ç±»éœ€æ±‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;é…ç½®å¤æ‚åº¦&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;ç•¥é«˜&lt;/td&gt;&lt;td&gt;æ›´ç®€å•ç›´æ¥&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;è‡ªåŠ¨åŒ–æ”¯æŒ&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;é€‚åˆè‡ªåŠ¨ç°åº¦è„šæœ¬æ§åˆ¶&lt;/td&gt;&lt;td&gt;ä¹Ÿé€‚åˆä½†ç²’åº¦è¾ƒç²—&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;æ—¥å¿—æ’æŸ¥ä¸å›æº¯&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;æ˜ç¡®å“ªäº›æµé‡è¿›äº†æ–°ç‰ˆ&lt;/td&gt;&lt;td&gt;éš¾ä»¥å®šä½å…·ä½“æŸä¸ªè¯·æ±‚æ˜¯å¦è¿›äº†æ–°ç‰ˆ&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;</content:encoded></item><item><title>Pythonè¿›ç¨‹ä¸çº¿ç¨‹</title><link>https://white-festa.net/posts/python_processes_threads/python%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/</link><guid isPermaLink="true">https://white-festa.net/posts/python_processes_threads/python%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/</guid><description>æœ¬æ–‡ä»‹ç»äº†Pythonä¸­åˆ›å»ºè¿›ç¨‹å’Œçº¿ç¨‹çš„æ–¹æ³•ï¼ŒåŒ…æ‹¬ä½¿ç”¨multiprocessingæ¨¡å—å’Œthreadingæ¨¡å—ï¼Œå¹¶è®²è§£äº†è¿›ç¨‹é—´åŠçº¿ç¨‹é—´é€šä¿¡çš„å®ç°ã€‚</description><pubDate>Mon, 30 Sep 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;åœ¨Python ä¸­æœ‰å¤šä¸ªæ¨¡å—å¯ä»¥åˆ›å»ºè¿›ç¨‹ï¼Œæ¯”è¾ƒå¸¸ç”¨çš„æœ‰&lt;code&gt;os.fork()&lt;/code&gt;å‡½æ•°ã€&lt;code&gt;multiprocessing&lt;/code&gt; æ¨¡å—å’Œ&lt;code&gt;pool&lt;/code&gt; è¿›ç¨‹æ± ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;os.fork()&lt;/code&gt;å‡½æ•°åªé€‚ç”¨äºUnix/Linux/Mac ç³»ç»Ÿä¸Šè¿è¡Œï¼Œåœ¨Windows æ“ä½œç³»ç»Ÿä¸­ä¸å¯ç”¨ã€‚&lt;/p&gt;
&lt;section&gt;&lt;h1&gt;ä½¿ç”¨multiprocessing æ¨¡å—åˆ›å»ºè¿›ç¨‹&lt;a href=&quot;#ä½¿ç”¨multiprocessing-æ¨¡å—åˆ›å»ºè¿›ç¨‹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;from&lt;/span&gt;&lt;span&gt; multiprocessing &lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; Process&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; time&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;print_hello&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;txt&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;interval&lt;/span&gt;&lt;/span&gt;&lt;span&gt;):&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;&quot;&quot;&quot;æ–¹æ³•1ï¼šåœ¨60ç§’å†…æ¯éš”2ç§’æ‰“å°ä¸€æ¬¡hello&quot;&quot;&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;start_time &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; time.&lt;/span&gt;&lt;span&gt;time&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;while&lt;/span&gt;&lt;span&gt;&lt;span&gt; time.&lt;/span&gt;&lt;span&gt;time&lt;/span&gt;&lt;span&gt;() &lt;/span&gt;&lt;span&gt;-&lt;/span&gt;&lt;span&gt; start_time &lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;60&lt;/span&gt;&lt;span&gt;:  &lt;/span&gt;&lt;span&gt;# è¿è¡Œ60ç§’&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;print&lt;/span&gt;&lt;span&gt;(txt)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;time.&lt;/span&gt;&lt;span&gt;sleep&lt;/span&gt;&lt;span&gt;(interval)  &lt;/span&gt;&lt;span&gt;# é—´éš”2ç§’&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;main&lt;/span&gt;&lt;span&gt;():&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;&quot;&quot;&quot;ä¸»å‡½æ•°ï¼šå°†print_helloåŒ…è£…ä¸ºå•ç‹¬è¿›ç¨‹æ‰§è¡Œ&quot;&quot;&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;# åˆ›å»ºè¿›ç¨‹&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;p1 &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Process&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;target&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;print_hello, &lt;/span&gt;&lt;/span&gt;&lt;span&gt;args&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&quot;hello&quot;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;, ))&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;p2 &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Process&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;target&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;print_hello, &lt;/span&gt;&lt;/span&gt;&lt;span&gt;args&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&quot;world&quot;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;5&lt;/span&gt;&lt;span&gt;, ))&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;print&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&quot;å¯åŠ¨å­è¿›ç¨‹...&quot;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;p1.&lt;/span&gt;&lt;span&gt;start&lt;/span&gt;&lt;span&gt;()  &lt;/span&gt;&lt;span&gt;# å¯åŠ¨è¿›ç¨‹&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;p2.&lt;/span&gt;&lt;span&gt;start&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;print&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;f&lt;/span&gt;&lt;span&gt;&quot;å­è¿›ç¨‹å·²å¯åŠ¨, p1: &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;span&gt;p1.pid&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;, p2: &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;span&gt;p2.pid&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;# ä¸»è¿›ç¨‹å¯ä»¥ç»§ç»­åšå…¶ä»–äº‹æƒ…&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;print&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&quot;ä¸»è¿›ç¨‹ç»§ç»­è¿è¡Œ...&quot;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;# ç­‰å¾…å­è¿›ç¨‹ç»“æŸï¼ˆå¯é€‰ï¼‰&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;# p.join()&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;27&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;print&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&quot;å­è¿›ç¨‹å·²ç»“æŸ&quot;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;28&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;29&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;__name__&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;==&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&apos;__main__&apos;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;30&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;main&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;å…¶ä¸­ï¼Œp1 å’Œ p2 æ˜¯è¿›ç¨‹çš„å®ä¾‹åŒ–ï¼Œè¿™ä¸¤ä¸ªè¿›ç¨‹å°†ä½œä¸º Python çš„å­è¿›ç¨‹è¢«æ‰§è¡Œã€‚&lt;/p&gt;&lt;section&gt;&lt;h2&gt;å‚æ•°&lt;a href=&quot;#å‚æ•°&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;target&lt;/code&gt;: è¦æ‰§è¡Œçš„å‡½æ•°å&lt;/li&gt;
&lt;li&gt;&lt;code&gt;args&lt;/code&gt;: è¦æ‰§è¡Œçš„å‡½æ•°çš„æ‰€éœ€å‚æ•°ï¼Œä»¥å…ƒç¥–çš„å½¢å¼&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;Process çš„å¸¸ç”¨æ–¹æ³•&lt;a href=&quot;#process-çš„å¸¸ç”¨æ–¹æ³•&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;is_alive()&lt;/code&gt;ï¼šåˆ¤æ–­è¿›ç¨‹å®ä¾‹æ˜¯å¦è¿˜åœ¨æ‰§è¡Œã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;join([timeout])&lt;/code&gt;ï¼šæ˜¯å¦ç­‰å¾…è¿›ç¨‹å®ä¾‹æ‰§è¡Œç»“æŸï¼Œæˆ–ç­‰å¾…å¤šå°‘ç§’ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;start()&lt;/code&gt;ï¼šå¯åŠ¨è¿›ç¨‹å®ä¾‹ï¼ˆåˆ›å»ºå­è¿›ç¨‹ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;run()&lt;/code&gt;ï¼šå¦‚æœæ²¡æœ‰ç»™å®štarget å‚æ•°ï¼Œå¯¹è¿™ä¸ªå¯¹è±¡è°ƒç”¨start()æ–¹æ³•æ—¶ï¼Œå°±å°†æ‰§è¡Œå¯¹è±¡ä¸­çš„run()æ–¹æ³•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;terminate()&lt;/code&gt;ï¼šä¸ç®¡ä»»åŠ¡æ˜¯å¦å®Œæˆï¼Œç«‹å³ç»ˆæ­¢ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;å¸¸ç”¨å±æ€§&lt;a href=&quot;#å¸¸ç”¨å±æ€§&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;name&lt;/code&gt;ï¼šå½“å‰è¿›ç¨‹å®ä¾‹åˆ«åï¼Œé»˜è®¤æœªProcess-Nï¼ŒN ä¸ºä»1 å¼€å§‹é€’å¢çš„æ•´æ•°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pid&lt;/code&gt;ï¼šå½“å‰è¿›ç¨‹å®ä¾‹çš„PID å€¼ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;ä½¿ç”¨è¿›ç¨‹æ±  Pool åˆ›å»ºè¿›ç¨‹&lt;a href=&quot;#ä½¿ç”¨è¿›ç¨‹æ± -pool-åˆ›å»ºè¿›ç¨‹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;ä½¿ç”¨&lt;code&gt;multiprocessing&lt;/code&gt; æ¨¡å—æä¾›çš„&lt;code&gt;Pool&lt;/code&gt; ç±»ï¼Œå³Poolè¿›ç¨‹æ± åˆ›å»ºå¤§é‡è¿›ç¨‹ã€‚&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;from&lt;/span&gt;&lt;span&gt; multiprocessing &lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; Pool&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; time&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; os&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;task&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;):&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;print&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&apos;å­è¿›ç¨‹(&lt;/span&gt;&lt;span&gt;%s&lt;/span&gt;&lt;span&gt;)æ‰§è¡ŒTask &lt;/span&gt;&lt;span&gt;%s&lt;/span&gt;&lt;span&gt;&apos;&lt;/span&gt;&lt;span&gt;&lt;span&gt;, (os.&lt;/span&gt;&lt;span&gt;getpid&lt;/span&gt;&lt;span&gt;(), name))&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;time.&lt;/span&gt;&lt;span&gt;sleep&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;__name__&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;==&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&apos;__main__&apos;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;print&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&apos;çˆ¶è¿›ç¨‹(&lt;/span&gt;&lt;span&gt;%s&lt;/span&gt;&lt;span&gt;). &apos;&lt;/span&gt;&lt;span&gt;&lt;span&gt;, os.&lt;/span&gt;&lt;span&gt;getpid&lt;/span&gt;&lt;span&gt;())&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;# åˆå§‹åŒ–ä¸€ä¸ªåŒ…å« 4 ä¸ªå·¥ä½œè¿›ç¨‹çš„è¿›ç¨‹æ± ï¼ˆæœ€å¤šåŒæ—¶è¿è¡Œ 4 ä¸ªå­è¿›ç¨‹ï¼‰ã€‚&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;p &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Pool&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;4&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;# ä½¿ç”¨ apply_async å¼‚æ­¥æäº¤ 10 ä¸ªä»»åŠ¡åˆ°è¿›ç¨‹æ± ã€‚&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;# ç”±äºè¿›ç¨‹æ± å¤§å°ä¸º 4ï¼Œæ¯æ¬¡æœ€å¤šå¹¶è¡Œæ‰§è¡Œ 4 ä¸ªä»»åŠ¡ï¼Œå‰©ä½™ä»»åŠ¡ä¼šæ’é˜Ÿç­‰å¾…ã€‚&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;for&lt;/span&gt;&lt;span&gt; i &lt;/span&gt;&lt;span&gt;in&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;range&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;10&lt;/span&gt;&lt;span&gt;):&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;p.&lt;/span&gt;&lt;span&gt;apply_async&lt;/span&gt;&lt;span&gt;(task, &lt;/span&gt;&lt;span&gt;args&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;(i,))&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;print&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&apos;ç­‰å¾…æ‰€æœ‰å­è¿›ç¨‹è¿è¡Œç»“æŸ&apos;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;p.&lt;/span&gt;&lt;span&gt;close&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;p.&lt;/span&gt;&lt;span&gt;join&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;print&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&apos;æ‰€æœ‰å­è¿›ç¨‹è¿è¡Œç»“æŸ&apos;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;section&gt;&lt;h2&gt;å¸¸ç”¨æ–¹æ³•&lt;a href=&quot;#å¸¸ç”¨æ–¹æ³•&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;a&lt;code&gt;pply_async(func[, args[, kwds]])&lt;/code&gt;ï¼šä½¿ç”¨éé˜»å¡æ–¹å¼è°ƒç”¨func()å‡½æ•°ï¼ˆå¹¶è¡Œæ‰§è¡Œï¼Œå µå¡æ–¹å¼å¿…é¡»ç­‰å¾…ä¸Šä¸€ä¸ªè¿›ç¨‹é€€å‡ºæ‰èƒ½æ‰§è¡Œä¸‹ä¸€ä¸ªè¿›ç¨‹ï¼‰ï¼Œargeä¸ºä¼ é€’ç»™func()å‡½æ•°çš„å‚æ•°åˆ—è¡¨ï¼Œkwds ä¸ºä¼ é€’ç»™func()å‡½æ•°çš„å…³é”®å­—å‚æ•°åˆ—è¡¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;apply(func[, args[, kwds]])&lt;/code&gt;ï¼šä½¿ç”¨é˜»å¡æ–¹å¼è°ƒç”¨func()å‡½æ•°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;close()&lt;/code&gt;ï¼šå…³é—­Poolï¼Œä½¿å…¶ä¸å†æ¥å—æ–°çš„ä»»åŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;terminate()&lt;/code&gt;ï¼šä¸ç®¡ä»»åŠ¡æ˜¯å¦å®Œæˆï¼Œç«‹å³ç»ˆæ­¢ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;join()&lt;/code&gt;ï¼šä¸»è¿›ç¨‹é˜»å¡ï¼Œç­‰å¾…å­è¿›ç¨‹çš„é€€å‡ºï¼Œå¿…é¡»åœ¨close æˆ–terminateä¹‹åä½¿ç”¨ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;è¿›ç¨‹é—´é€šä¿¡&lt;a href=&quot;#è¿›ç¨‹é—´é€šä¿¡&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;section&gt;&lt;h2&gt;ä½¿ç”¨é˜Ÿåˆ— Queue å®ç°è¿›ç¨‹é—´é€šä¿¡&lt;a href=&quot;#ä½¿ç”¨é˜Ÿåˆ—-queue-å®ç°è¿›ç¨‹é—´é€šä¿¡&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;multiprocessing.Queue æ˜¯ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„ FIFOï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰é˜Ÿåˆ—ï¼Œé€‚ç”¨äºå¤šè¿›ç¨‹é€šä¿¡ã€‚&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;from&lt;/span&gt;&lt;span&gt; multiprocessing &lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; Process, Queue&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; time&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;write_in_queue&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;queue&lt;/span&gt;&lt;span&gt;):&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;for&lt;/span&gt;&lt;span&gt; i &lt;/span&gt;&lt;span&gt;in&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;range&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;10&lt;/span&gt;&lt;span&gt;):&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;not&lt;/span&gt;&lt;span&gt;&lt;span&gt; queue.&lt;/span&gt;&lt;span&gt;full&lt;/span&gt;&lt;span&gt;():&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;txt &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;Hello World&quot;&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;+&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;str&lt;/span&gt;&lt;span&gt;(i)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;# putæ”¾å…¥æ•°æ®&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;queue.&lt;/span&gt;&lt;span&gt;put&lt;/span&gt;&lt;span&gt;(txt)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;print&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;f&lt;/span&gt;&lt;span&gt;&quot;å·²å†™å…¥&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;span&gt;txt&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;read_from_queue&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;queue&lt;/span&gt;&lt;span&gt;):&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;while&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;not&lt;/span&gt;&lt;span&gt;&lt;span&gt; queue.&lt;/span&gt;&lt;span&gt;empty&lt;/span&gt;&lt;span&gt;():&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;time.&lt;/span&gt;&lt;span&gt;sleep&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;# getå–å‡ºæ•°æ®&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;print&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;f&lt;/span&gt;&lt;span&gt;&quot;è¯»å–ä¿¡æ¯ï¼š&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;span&gt;&lt;span&gt;queue.&lt;/span&gt;&lt;span&gt;get&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;__name__&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;==&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&apos;__main__&apos;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;queue &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Queue&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;pw &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Process&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;target&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;write_in_queue, &lt;/span&gt;&lt;/span&gt;&lt;span&gt;args&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;(queue,))&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;pr &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Process&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;target&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;read_from_queue, &lt;/span&gt;&lt;/span&gt;&lt;span&gt;args&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;(queue,))&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;pw.&lt;/span&gt;&lt;span&gt;start&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;pw.&lt;/span&gt;&lt;span&gt;join&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;pr.&lt;/span&gt;&lt;span&gt;start&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;pr.&lt;/span&gt;&lt;span&gt;join&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;section&gt;&lt;h3&gt;å¸¸ç”¨æ–¹æ³•&lt;a href=&quot;#å¸¸ç”¨æ–¹æ³•-1&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Queue.qsize()&lt;/code&gt;ï¼šè¿”å›å½“å‰é˜Ÿåˆ—åŒ…å«çš„æ¶ˆæ¯æ•°é‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Queue.empty()&lt;/code&gt;ï¼šå¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œè¿”å›Trueï¼Œåä¹‹è¿”å›Falseã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Queue.full()&lt;/code&gt;ï¼šå¦‚æœé˜Ÿåˆ—æ»¡äº†ï¼Œè¿”å›Trueï¼Œåä¹‹è¿”å›Falseã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Queue.get([block[, timeout]])&lt;/code&gt;ï¼šè·å–é˜Ÿåˆ—ä¸­çš„ä¸€æ¡æ¶ˆæ¯ï¼Œç„¶åå°†å…¶ä»é˜Ÿåˆ—ä¸­ç§»é™¤ï¼Œblock é»˜è®¤å€¼ä¸ºTrueã€‚
&lt;ul&gt;
&lt;li&gt;å¦‚æœblock ä½¿ç”¨é»˜è®¤å€¼ï¼Œä¸”æ²¡æœ‰è®¾ç½®timeoutï¼ˆå•ä½ç§’ï¼‰ï¼Œæ¶ˆæ¯é˜Ÿåˆ—ä¸ºç©ºï¼Œæ­¤æ—¶ç¨‹åºå°†è¢«é˜»å¡ï¼ˆåœç•™åœ¨è¯»å–çŠ¶æ€ï¼‰ï¼Œç›´åˆ°ä»æ¶ˆæ¯é˜Ÿåˆ—è¯»åˆ°æ¶ˆæ¯ä¸ºæ­¢ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœè®¾ç½®äº†timeoutï¼Œåˆ™ä¼šç­‰å¾…timeout ç§’ï¼Œè‹¥è¿˜æ²¡è¯»å–åˆ°ä»»ä½•æ¶ˆæ¯ï¼Œåˆ™æŠ›å‡ºâ€œ&lt;code&gt;Queue.Empty&lt;/code&gt;â€å¼‚å¸¸ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœblock å€¼ä¸ºFalseï¼Œæ¶ˆæ¯é˜Ÿåˆ—ä¸ºç©ºï¼Œåˆ™ä¼šç«‹å³æŠ›å‡ºâ€œ&lt;code&gt;Queue.Empty&lt;/code&gt;â€å¼‚å¸¸ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Queue.get_nowait()&lt;/code&gt;ï¼šç›¸å½“äº&lt;code&gt;Queue.get(False)&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Queue.put(item,[block[,timeout]])&lt;/code&gt;ï¼šå°†item æ¶ˆæ¯å†™å…¥é˜Ÿåˆ—ï¼Œblocké»˜è®¤å€¼ä¸ºTrueã€‚
&lt;ul&gt;
&lt;li&gt;å¦‚æœblock ä½¿ç”¨é»˜è®¤å€¼ï¼Œä¸”æ²¡æœ‰è®¾ç½®timeoutï¼ˆå•ä½ç§’ï¼‰ï¼Œæ¶ˆæ¯é˜Ÿåˆ—å¦‚æœå·²ç»æ²¡æœ‰ç©ºé—´å¯å†™å…¥ï¼Œæ­¤æ—¶ç¨‹åºå°†è¢«é˜»å¡ï¼ˆåœåœ¨å†™å…¥çŠ¶æ€ï¼‰ï¼Œç›´åˆ°ä»æ¶ˆæ¯é˜Ÿåˆ—è…¾å‡ºç©ºé—´ä¸ºæ­¢ï¼Œå¦‚æœè®¾ç½®äº†timeoutï¼Œåˆ™ä¼šç­‰å¾…timeout ç§’ï¼Œè‹¥è¿˜æ²¡ç©ºé—´ï¼Œåˆ™æŠ›å‡ºâ€œ&lt;code&gt;Queue.Full&lt;/code&gt;â€å¼‚å¸¸ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœblock å€¼ä¸ºFalseï¼Œæ¶ˆæ¯é˜Ÿåˆ—å¦‚æœå·²ç»æ²¡æœ‰ç©ºé—´å¯å†™å…¥ï¼Œåˆ™ä¼šæŠ›å‡ºâ€œ&lt;code&gt;Queue.Full&lt;/code&gt;â€å¼‚å¸¸ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Queue.put_nowait(item)&lt;/code&gt;ï¼šç›¸å½“äº&lt;code&gt;Queue.put(item, False)&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;ä½¿ç”¨åœºæ™¯&lt;a href=&quot;#ä½¿ç”¨åœºæ™¯&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;Queue é€šä¿¡é€‚ç”¨äºç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹ï¼ˆä¸€ä¸ªè¿›ç¨‹ç”Ÿäº§æ•°æ®ï¼Œå¦ä¸€ä¸ªæ¶ˆè´¹æ•°æ®ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;çº¿ç¨‹å®‰å…¨ï¼Œæ”¯æŒå¤šä¸ªè¿›ç¨‹åŒæ—¶è®¿é—®ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;Queue æœ¬è´¨ä¸Šæ˜¯å…±äº«å†…å­˜&lt;a href=&quot;#queue-æœ¬è´¨ä¸Šæ˜¯å…±äº«å†…å­˜&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;multiprocessing.Queue æœ¬è´¨ä¸Šæ˜¯åŸºäºå…±äº«å†…å­˜çš„ IPC æœºåˆ¶ï¼Œä½†å®ƒå¯¹å…±äº«å†…å­˜è¿›è¡Œäº†é«˜å±‚å°è£…ï¼Œä½¿å…¶æˆä¸ºä¸€ä¸ª çº¿ ç¨‹/è¿›ç¨‹å®‰å…¨çš„ ç‰¹æ®Šæ•°æ®ç»“æ„ï¼ˆFIFO é˜Ÿåˆ—ï¼‰ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;Queue çš„åº•å±‚å®ç°&lt;a href=&quot;#queue-çš„åº•å±‚å®ç°&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;å…±äº«å†…å­˜ + é”/ä¿¡å·é‡
&lt;ul&gt;
&lt;li&gt;æ•°æ®å­˜å‚¨åœ¨å…±äº«å†…å­˜ä¸­ï¼ˆé€šå¸¸æ˜¯åºåˆ—åŒ–åçš„å­—èŠ‚æµï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;é€šè¿‡ Lock æˆ– Semaphore ä¿è¯å¤šè¿›ç¨‹/çº¿ç¨‹å®‰å…¨è®¿é—®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ç®¡é“ï¼ˆPipeï¼‰æˆ–å¥—æ¥å­—ï¼ˆSocketï¼‰
&lt;ul&gt;
&lt;li&gt;åœ¨éƒ¨åˆ†å®ç°ä¸­ï¼ŒQueue å¯èƒ½ä¾èµ–ç®¡é“æˆ–æœ¬åœ°å¥—æ¥å­—ï¼ˆå³ä½¿æ˜¯éç½‘ç»œé€šä¿¡ï¼‰æ¥ä¼ é€’æ•°æ®ï¼Œä½†æ ¸å¿ƒä»ç„¶æ˜¯å…±äº«å†…å­˜çš„å˜ä½“ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;Queue ä¸ç›´æ¥å…±äº«å†…å­˜çš„åŒºåˆ«&lt;a href=&quot;#queue-ä¸ç›´æ¥å…±äº«å†…å­˜çš„åŒºåˆ«&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;


































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;ç‰¹æ€§&lt;/th&gt;&lt;th&gt;multiprocessing.Queue&lt;/th&gt;&lt;th&gt;ç›´æ¥å…±äº«å†…å­˜&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;æ•°æ®ç»“æ„&lt;/td&gt;&lt;td&gt;é«˜çº§ FIFO é˜Ÿåˆ—&lt;/td&gt;&lt;td&gt;åŸå§‹æ•°å€¼æˆ–æ•°ç»„&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;çº¿ç¨‹/è¿›ç¨‹å®‰å…¨&lt;/td&gt;&lt;td&gt;æ˜¯ï¼ˆå†…ç½®é”æœºåˆ¶ï¼‰&lt;/td&gt;&lt;td&gt;å¦ï¼ˆéœ€æ‰‹åŠ¨åŠ é”ï¼‰&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;é€‚ç”¨åœºæ™¯&lt;/td&gt;&lt;td&gt;ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹ã€ä»»åŠ¡åˆ†å‘&lt;/td&gt;&lt;td&gt;é«˜æ€§èƒ½æ•°å€¼è®¡ç®—&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;æ•°æ®å¤æ‚åº¦&lt;/td&gt;&lt;td&gt;æ”¯æŒä»»æ„ Python å¯¹è±¡ï¼ˆè‡ªåŠ¨åºåˆ—åŒ–ï¼‰&lt;/td&gt;&lt;td&gt;ä»…æ”¯æŒç®€å•ç±»å‹ï¼ˆint, float, arrayï¼‰&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;åº•å±‚æœºåˆ¶&lt;/td&gt;&lt;td&gt;å…±äº«å†…å­˜ + é” + å¯èƒ½çš„ç®¡é“/å¥—æ¥å­—&lt;/td&gt;&lt;td&gt;çº¯å…±äº«å†…å­˜&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;ä¸ºä»€ä¹ˆ Queue æ›´å®‰å…¨ï¼Ÿ&lt;a href=&quot;#ä¸ºä»€ä¹ˆ-queue-æ›´å®‰å…¨&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;è‡ªåŠ¨åºåˆ—åŒ–
&lt;ul&gt;
&lt;li&gt;å½“ä½ è°ƒç”¨&lt;code&gt; q.put(obj)&lt;/code&gt; æ—¶ï¼Œobj ä¼šè¢«è‡ªåŠ¨åºåˆ—åŒ–ï¼ˆPickleï¼‰ä¸ºå­—èŠ‚æµï¼Œå†å­˜å…¥å…±äº«å†…å­˜ã€‚&lt;/li&gt;
&lt;li&gt;è€Œ Value/Array éœ€è¦æ‰‹åŠ¨ç®¡ç†æ•°æ®æ ¼å¼ï¼ˆå¦‚ â€˜dâ€™ è¡¨ç¤ºåŒç²¾åº¦æµ®ç‚¹æ•°ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;éšå¼åŒæ­¥
&lt;ul&gt;
&lt;li&gt;Queue å†…éƒ¨ä½¿ç”¨é”å’Œä¿¡å·é‡ï¼Œç¡®ä¿ &lt;code&gt;put()&lt;/code&gt; å’Œ &lt;code&gt;get()&lt;/code&gt; ä¸ä¼šå†²çªã€‚&lt;/li&gt;
&lt;li&gt;ç›´æ¥å…±äº«å†…å­˜éœ€æ‰‹åŠ¨åŠ é”ï¼ˆå¦‚&lt;code&gt; with lock:&lt;/code&gt;ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æµé‡æ§åˆ¶
&lt;ul&gt;
&lt;li&gt;Queue å¯ä»¥è®¾ç½®æœ€å¤§é•¿åº¦ï¼ˆmaxsizeï¼‰ï¼Œå½“é˜Ÿåˆ—æ»¡æ—¶ &lt;code&gt;put()&lt;/code&gt; ä¼šé˜»å¡ï¼Œé¿å…å†…å­˜çˆ†ç‚¸ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;ä½¿ç”¨ &lt;code&gt;threading&lt;/code&gt; æ¨¡å—åˆ›å»ºçº¿ç¨‹&lt;a href=&quot;#ä½¿ç”¨-threading-æ¨¡å—åˆ›å»ºçº¿ç¨‹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;ç”±äºçº¿ç¨‹æ˜¯æ“ä½œç³»ç»Ÿç›´æ¥æ”¯æŒçš„æ‰§è¡Œå•å…ƒï¼Œå› æ­¤ï¼Œé«˜çº§è¯­è¨€ï¼ˆå¦‚Pythonã€Java ç­‰ï¼‰é€šå¸¸éƒ½å†…ç½®å¤šçº¿ç¨‹çš„æ”¯æŒã€‚&lt;/p&gt;&lt;p&gt;Python çš„æ ‡å‡†åº“æä¾›äº†ä¸¤ä¸ªæ¨¡å—ï¼š&lt;code&gt;_thread&lt;/code&gt;å’Œ&lt;code&gt;threading&lt;/code&gt;ï¼Œ&lt;code&gt;_thread&lt;/code&gt; æ˜¯ä½çº§æ¨¡å—ï¼Œ&lt;code&gt;threading&lt;/code&gt; æ˜¯é«˜çº§æ¨¡å—ï¼Œå¯¹ &lt;code&gt;_thread&lt;/code&gt; è¿›è¡Œäº†å°è£…ã€‚ç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åªéœ€è¦ä½¿ç”¨threading è¿™ä¸ªé«˜çº§æ¨¡å—ã€‚&lt;/p&gt;&lt;p&gt;&lt;code&gt;threading&lt;/code&gt; æ¨¡å—æä¾›äº†ä¸€ä¸ª&lt;code&gt;Thread&lt;/code&gt; ç±»æ¥ä»£è¡¨ä¸€ä¸ªçº¿ç¨‹å¯¹è±¡ã€‚&lt;/p&gt;&lt;section&gt;&lt;h2&gt;Thread ç±»è¯­æ³•&lt;a href=&quot;#thread-ç±»è¯­æ³•&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;&lt;code&gt;Tread([group [, target [, name [, args [, kwargs]]]])&lt;/code&gt;&lt;/p&gt;&lt;p&gt;å‚æ•°ï¼š&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;group&lt;/code&gt;ï¼šå€¼ä¸ºNoneï¼Œä¸ºä»¥åç‰ˆæœ¬è€Œä¿ç•™ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;target&lt;/code&gt;ï¼šè¡¨ç¤ºä¸€ä¸ªå¯è°ƒç”¨å¯¹è±¡ï¼Œçº¿ç¨‹å¯åŠ¨æ—¶ï¼Œ&lt;code&gt;run()&lt;/code&gt;æ–¹æ³•å°†è°ƒç”¨æ­¤å¯¹è±¡ï¼Œé»˜è®¤å€¼ä¸ºNoneï¼Œè¡¨ç¤ºä¸è°ƒç”¨ä»»ä½•å†…å®¹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;name&lt;/code&gt;ï¼šè¡¨ç¤ºå½“å‰çº¿ç¨‹åç§°ï¼Œé»˜è®¤åˆ›å»ºä¸€ä¸ªâ€œThread-Nâ€æ ¼å¼çš„å”¯ä¸€åç§°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;args&lt;/code&gt;ï¼šè¡¨ç¤ºä¼ é€’ç»™target()å‡½æ•°çš„å‚æ•°å…ƒç»„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;kwargs&lt;/code&gt;ï¼šè¡¨ç¤ºä¼ é€’ç»™target()å‡½æ•°çš„å‚æ•°å­—å…¸ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;ç¤ºä¾‹&lt;a href=&quot;#ç¤ºä¾‹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; threading&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; time&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;processes&lt;/span&gt;&lt;span&gt;():&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;for&lt;/span&gt;&lt;span&gt; i &lt;/span&gt;&lt;span&gt;in&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;range&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;3&lt;/span&gt;&lt;span&gt;):&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;time.&lt;/span&gt;&lt;span&gt;sleep&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;print&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;f&lt;/span&gt;&lt;span&gt;&quot;Thread Name: &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;span&gt;&lt;span&gt;threading.&lt;/span&gt;&lt;span&gt;current_thread&lt;/span&gt;&lt;span&gt;().name&lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;__name__&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;==&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&apos;__main__&apos;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;print&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&quot;ä¸»è¿›ç¨‹å¼€å§‹æ‰§è¡Œ&quot;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;threads &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; [threading.&lt;/span&gt;&lt;span&gt;Thread&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;target&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;processes) &lt;/span&gt;&lt;/span&gt;&lt;span&gt;for&lt;/span&gt;&lt;span&gt; i &lt;/span&gt;&lt;span&gt;in&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;range&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;4&lt;/span&gt;&lt;span&gt;)]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;for&lt;/span&gt;&lt;span&gt; thread &lt;/span&gt;&lt;span&gt;in&lt;/span&gt;&lt;span&gt; threads:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;thread.&lt;/span&gt;&lt;span&gt;start&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;for&lt;/span&gt;&lt;span&gt; thread &lt;/span&gt;&lt;span&gt;in&lt;/span&gt;&lt;span&gt; threads:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;thread.&lt;/span&gt;&lt;span&gt;join&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;print&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&quot;ä¸»è¿›ç¨‹ç»“æŸ&quot;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;é‡å†™ Thread ç±»å®ç°å¸¦è¿”å›å€¼çš„çº¿ç¨‹&lt;a href=&quot;#é‡å†™-thread-ç±»å®ç°å¸¦è¿”å›å€¼çš„çº¿ç¨‹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; threading&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;MyThread&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;threading&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;Thread&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;__init__&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;self&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;func&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;args&lt;/span&gt;&lt;/span&gt;&lt;span&gt;):&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;super&lt;/span&gt;&lt;span&gt;(MyThread, &lt;/span&gt;&lt;span&gt;self&lt;/span&gt;&lt;span&gt;).&lt;/span&gt;&lt;span&gt;__init__&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;self&lt;/span&gt;&lt;span&gt;&lt;span&gt;.func &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; func&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;self&lt;/span&gt;&lt;span&gt;&lt;span&gt;.args &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; args&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;run&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;self&lt;/span&gt;&lt;span&gt;):&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;self&lt;/span&gt;&lt;span&gt;&lt;span&gt;.result &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;self&lt;/span&gt;&lt;span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;func&lt;/span&gt;&lt;span&gt;(*&lt;/span&gt;&lt;/span&gt;&lt;span&gt;self&lt;/span&gt;&lt;span&gt;.args)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;get_result&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;self&lt;/span&gt;&lt;span&gt;):&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;self&lt;/span&gt;&lt;span&gt;.result&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;except&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Exception&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;as&lt;/span&gt;&lt;span&gt; e:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;None&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;è¯¥ç±»ç»§æ‰¿äº†åŸºç¡€çš„&lt;code&gt;threading.Thread&lt;/code&gt;ç±»ï¼Œå¢åŠ äº†ä¸€ä¸ª &lt;code&gt;result&lt;/code&gt; å±æ€§å¹¶é‡å†™äº† &lt;code&gt;run()&lt;/code&gt; æ–¹æ³•è·å–è¿”å›å€¼ã€‚&lt;/p&gt;&lt;p&gt;&lt;code&gt;get_result&lt;/code&gt; æ–¹æ³•è®©æ•°æ®ä»¥åªè¯»å½¢å¼è¿”å›&lt;/p&gt;&lt;p&gt;è°ƒç”¨&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; time&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;calculate&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;b&lt;/span&gt;&lt;/span&gt;&lt;span&gt;):&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;time.&lt;/span&gt;&lt;span&gt;sleep&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;10&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;n1 &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; a &lt;/span&gt;&lt;span&gt;+&lt;/span&gt;&lt;span&gt; B&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;n2 &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; a &lt;/span&gt;&lt;span&gt;*&lt;/span&gt;&lt;span&gt; b&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;n3 &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; a &lt;/span&gt;&lt;span&gt;/&lt;/span&gt;&lt;span&gt; b&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; n1, n2, n3&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;__name__&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;==&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&apos;__main__&apos;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;t &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;MyThread&lt;/span&gt;&lt;span&gt;(calculate, (&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;))&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;t.&lt;/span&gt;&lt;span&gt;start&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;t.&lt;/span&gt;&lt;span&gt;join&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;print&lt;/span&gt;&lt;span&gt;&lt;span&gt;(t.&lt;/span&gt;&lt;span&gt;get_result&lt;/span&gt;&lt;span&gt;())&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;çº¿ç¨‹é—´é€šä¿¡&lt;a href=&quot;#çº¿ç¨‹é—´é€šä¿¡&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;åœ¨ Python ä¸­ï¼Œçº¿ç¨‹ä¹‹é—´é€šä¿¡æ¯”è¿›ç¨‹é—´é€šä¿¡æ›´ç®€å•ï¼Œå› ä¸º çº¿ç¨‹å…±äº«åŒä¸€è¿›ç¨‹çš„å†…å­˜ç©ºé—´ï¼ˆå…¨å±€å˜é‡ã€å †å†…å­˜ç­‰ï¼‰ã€‚ä½†è¿™ä¹Ÿå¸¦æ¥äº† &lt;strong&gt;çº¿ç¨‹å®‰å…¨&lt;/strong&gt;ï¼ˆThread Safetyï¼‰ é—®é¢˜ï¼Œéœ€è¦é€šè¿‡&lt;strong&gt;åŒæ­¥æœºåˆ¶&lt;/strong&gt;ï¼ˆå¦‚é”ã€é˜Ÿåˆ—ï¼‰æ¥é¿å…&lt;strong&gt;ç«äº‰æ¡ä»¶&lt;/strong&gt;ï¼ˆRace Conditionï¼‰ã€‚&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; threading&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# å…±äº«å˜é‡&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;counter &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;lock &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; threading.&lt;/span&gt;&lt;span&gt;Lock&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;increment&lt;/span&gt;&lt;span&gt;():&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;global&lt;/span&gt;&lt;span&gt; counter&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;for&lt;/span&gt;&lt;span&gt; _ &lt;/span&gt;&lt;span&gt;in&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;range&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;100000&lt;/span&gt;&lt;span&gt;):&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;with&lt;/span&gt;&lt;span&gt; lock:  &lt;/span&gt;&lt;span&gt;# åŠ é”ä¿è¯åŸå­æ“ä½œ&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;counter &lt;/span&gt;&lt;span&gt;+=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# åˆ›å»ºä¸¤ä¸ªçº¿ç¨‹&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;t1 &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; threading.&lt;/span&gt;&lt;span&gt;Thread&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;/span&gt;&lt;span&gt;target&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;increment)&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;t2 &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; threading.&lt;/span&gt;&lt;span&gt;Thread&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;/span&gt;&lt;span&gt;target&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;increment)&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;t1.&lt;/span&gt;&lt;span&gt;start&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;t2.&lt;/span&gt;&lt;span&gt;start&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;t1.&lt;/span&gt;&lt;span&gt;join&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;t2.&lt;/span&gt;&lt;span&gt;join&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;print&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&quot;Final counter:&quot;&lt;/span&gt;&lt;span&gt;, counter)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;ä»ä¸Šé¢çš„ä¾‹å­å¯ä»¥å¾—å‡ºï¼Œåœ¨ä¸€ä¸ªè¿›ç¨‹å†…çš„æ‰€æœ‰çº¿ç¨‹å…±äº«å…¨å±€å˜é‡ï¼Œèƒ½å¤Ÿåœ¨ä¸ä½¿ç”¨å…¶ä»–æ–¹å¼çš„å‰æä¸‹å®Œæˆå¤šçº¿ç¨‹ä¹‹é—´çš„æ•°æ®å…±äº«ã€‚&lt;/p&gt;&lt;section&gt;&lt;h2&gt;äº’æ–¥é”&lt;a href=&quot;#äº’æ–¥é”&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;äº’æ–¥é”ï¼ˆMutual Exclusion Lockï¼Œç®€ç§° Mutexï¼‰æ˜¯ä¸€ç§ åŒæ­¥æœºåˆ¶ï¼Œç”¨äºç¡®ä¿åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªçº¿ç¨‹ï¼ˆæˆ–è¿›ç¨‹ï¼‰èƒ½è®¿é—®å…±äº«èµ„æºï¼ˆå¦‚å˜é‡ã€æ–‡ä»¶ã€å†…å­˜ç­‰ï¼‰ï¼Œä»è€Œé¿å… ç«äº‰æ¡ä»¶ï¼ˆRace Conditionï¼‰ å’Œæ•°æ®ä¸ä¸€è‡´é—®é¢˜ã€‚&lt;/p&gt;&lt;section&gt;&lt;h3&gt;äº’æ–¥é”çš„å·¥ä½œåŸç†&lt;a href=&quot;#äº’æ–¥é”çš„å·¥ä½œåŸç†&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;åŠ é”ï¼ˆLockï¼‰ï¼šçº¿ç¨‹åœ¨è®¿é—®å…±äº«èµ„æºå‰å…ˆè·å–é”ï¼Œå¦‚æœé”å·²è¢«å ç”¨ï¼Œåˆ™é˜»å¡ç­‰å¾…ã€‚&lt;/li&gt;
&lt;li&gt;é‡Šæ”¾é”ï¼ˆUnlockï¼‰ï¼šçº¿ç¨‹å®Œæˆæ“ä½œåé‡Šæ”¾é”ï¼Œå…¶ä»–çº¿ç¨‹å¯ä»¥ç«äº‰é”ã€‚&lt;/li&gt;
&lt;li&gt;å…³é”®ç‰¹æ€§ï¼š
&lt;ul&gt;
&lt;li&gt;åŸå­æ€§ï¼šé”çš„è·å–å’Œé‡Šæ”¾æ˜¯åŸå­çš„ï¼ˆä¸ä¼šè¢«ä¸­æ–­ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;ç‹¬å æ€§ï¼šåŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªçº¿ç¨‹æŒæœ‰é”ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;é”çš„ä½¿ç”¨&lt;a href=&quot;#é”çš„ä½¿ç”¨&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Lock ç±»æœ‰2 ä¸ªæ–¹æ³•ï¼š&lt;code&gt;acquire()&lt;/code&gt;é”å®šå’Œ&lt;code&gt;release()&lt;/code&gt;é‡Šæ”¾é”ã€‚&lt;/p&gt;&lt;section&gt;&lt;h4&gt;æ˜¾å¼ä½¿ç”¨é”&lt;a href=&quot;#æ˜¾å¼ä½¿ç”¨é”&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; threading&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; time&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;ticket &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;10&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;lock &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; threading.&lt;/span&gt;&lt;span&gt;Lock&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;task&lt;/span&gt;&lt;span&gt;():&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;global&lt;/span&gt;&lt;span&gt; ticket&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;lock.&lt;/span&gt;&lt;span&gt;acquire&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;temp &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; ticket&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;time.&lt;/span&gt;&lt;span&gt;sleep&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;ticket &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; temp &lt;/span&gt;&lt;span&gt;-&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt;&lt;span&gt; ticket &lt;/span&gt;&lt;span&gt;&amp;gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;print&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;f&lt;/span&gt;&lt;span&gt;&quot;è´­ä¹°æˆåŠŸï¼Œå‰©ä½™&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;span&gt;ticket&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;å¼ ç¥¨, &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;span&gt;&lt;span&gt;threading.&lt;/span&gt;&lt;span&gt;current_thread&lt;/span&gt;&lt;span&gt;().name&lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;print&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;f&lt;/span&gt;&lt;span&gt;&quot;è´­ä¹°å¤±è´¥ï¼Œä½™ç¥¨ä¸è¶³, &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;span&gt;&lt;span&gt;threading.&lt;/span&gt;&lt;span&gt;current_thread&lt;/span&gt;&lt;span&gt;().name&lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;lock.&lt;/span&gt;&lt;span&gt;release&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;__name__&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;==&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&apos;__main__&apos;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;t_list &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; []&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;for&lt;/span&gt;&lt;span&gt; i &lt;/span&gt;&lt;span&gt;in&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;range&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;11&lt;/span&gt;&lt;span&gt;):&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;t &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; threading.&lt;/span&gt;&lt;span&gt;Thread&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;target&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;task)&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;t_list.&lt;/span&gt;&lt;span&gt;append&lt;/span&gt;&lt;span&gt;(t)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;t.&lt;/span&gt;&lt;span&gt;start&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;ä½¿ç”¨&lt;code&gt;with lock:&lt;/code&gt; ä¸Šä¸‹æ–‡ç®¡ç†å™¨è¯­æ³•&lt;a href=&quot;#ä½¿ç”¨with-lock-ä¸Šä¸‹æ–‡ç®¡ç†å™¨è¯­æ³•&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;ä½¿ç”¨&lt;code&gt;with lock:&lt;/code&gt; ä¸Šä¸‹æ–‡ç®¡ç†å™¨è¯­æ³•å¯ä»¥ç¡®ä¿é”ä¸€å®šä¼šè¢«é‡Šæ”¾&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; threading&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; time&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;ticket &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;10&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;lock &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; threading.&lt;/span&gt;&lt;span&gt;Lock&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;task&lt;/span&gt;&lt;span&gt;():&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;global&lt;/span&gt;&lt;span&gt; ticket&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;with&lt;/span&gt;&lt;span&gt; lock:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;temp &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; ticket&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;time.&lt;/span&gt;&lt;span&gt;sleep&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;ticket &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; temp &lt;/span&gt;&lt;span&gt;-&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt;&lt;span&gt; ticket &lt;/span&gt;&lt;span&gt;&amp;gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;print&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;f&lt;/span&gt;&lt;span&gt;&quot;è´­ä¹°æˆåŠŸï¼Œå‰©ä½™&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;span&gt;ticket&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;å¼ ç¥¨, &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;span&gt;&lt;span&gt;threading.&lt;/span&gt;&lt;span&gt;current_thread&lt;/span&gt;&lt;span&gt;().name&lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;print&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;f&lt;/span&gt;&lt;span&gt;&quot;è´­ä¹°å¤±è´¥ï¼Œä½™ç¥¨ä¸è¶³, &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;span&gt;&lt;span&gt;threading.&lt;/span&gt;&lt;span&gt;current_thread&lt;/span&gt;&lt;span&gt;().name&lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;__name__&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;==&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&apos;__main__&apos;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;t_list &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; []&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;for&lt;/span&gt;&lt;span&gt; i &lt;/span&gt;&lt;span&gt;in&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;range&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;11&lt;/span&gt;&lt;span&gt;):&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;t &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; threading.&lt;/span&gt;&lt;span&gt;Thread&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;target&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;task)&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;t_list.&lt;/span&gt;&lt;span&gt;append&lt;/span&gt;&lt;span&gt;(t)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;t.&lt;/span&gt;&lt;span&gt;start&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;å¤šçº¿ç¨‹æ­»é”&lt;a href=&quot;#å¤šçº¿ç¨‹æ­»é”&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;æ­»é”æ˜¯æŒ‡å¤šä¸ªçº¿ç¨‹äº’ç›¸ç­‰å¾…å¯¹æ–¹é‡Šæ”¾é”ï¼Œå¯¼è‡´ç¨‹åºå¡æ­»ã€‚&lt;/p&gt;&lt;section&gt;&lt;h4&gt;å¸¸è§åœºæ™¯&lt;a href=&quot;#å¸¸è§åœºæ™¯&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;çº¿ç¨‹ A æŒæœ‰é” L1ï¼Œç­‰å¾…é” L2ï¼›&lt;/li&gt;
&lt;li&gt;çº¿ç¨‹ B æŒæœ‰é” L2ï¼Œç­‰å¾…é” L1ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;è§£å†³æ–¹æ³•&lt;a href=&quot;#è§£å†³æ–¹æ³•&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;æŒ‰å›ºå®šé¡ºåºè·å–é”ï¼ˆå¦‚æ€»æ˜¯å…ˆæ‹¿ L1 å†æ‹¿ L2ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ &lt;code&gt;lock.acquire(timeout=2)&lt;/code&gt; è®¾ç½®è¶…æ—¶ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;</content:encoded></item><item><title>Kuberneteså­¦ä¹ ç¬”è®°åäºŒï¼šKubernetes RBACé‰´æƒæœºåˆ¶</title><link>https://white-festa.net/posts/kubernetes-tutorial/rbac%E9%89%B4%E6%9D%83%E6%9C%BA%E5%88%B6/</link><guid isPermaLink="true">https://white-festa.net/posts/kubernetes-tutorial/rbac%E9%89%B4%E6%9D%83%E6%9C%BA%E5%88%B6/</guid><description>åœ¨Kubernetesä¸­é€šè¿‡RBACé‰´æƒæœºåˆ¶å®ç°å¯¹å·¥ä½œèµ„æºçš„æƒé™æ§åˆ¶</description><pubDate>Mon, 02 Sep 2024 00:00:00 GMT</pubDate><content:encoded>&lt;section&gt;&lt;h1&gt;RBAC æ¦‚è¿°&lt;a href=&quot;#rbac-æ¦‚è¿°&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;section&gt;&lt;h2&gt;ä»€ä¹ˆæ˜¯RBACï¼Ÿ&lt;a href=&quot;#ä»€ä¹ˆæ˜¯rbac&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;RBAC æ˜¯ä¸€ç§æœ€å¸¸ç”¨çš„è®¿é—®æ§åˆ¶è§£å†³æ–¹æ¡ˆï¼Œå®ƒé€šè¿‡å°†ç”¨æˆ·åˆ†é…åˆ°è§’è‰²ï¼Œå°†è§’è‰²åˆ†é…ç»™æƒé™å®ä½“ï¼Œä»è€Œå®šä¹‰äº†å“ªäº›ç”¨æˆ·å¯ä»¥è®¿é—®å“ªäº›èµ„æºï¼Œä»¥åŠåœ¨èµ„æºä¸Šæ‰§è¡Œå“ªäº›æ“ä½œã€‚ç®€å•æ¥è¯´ï¼ŒRBAC å…è®¸å¯¹ä¸åŒçš„ç”¨æˆ·æˆ–ç»„åˆ†é…ä¸åŒçš„æƒé™ï¼Œä»¥å®ç°èµ„æºçš„å®‰å…¨ç®¡ç†ã€‚&lt;/p&gt;&lt;p&gt;åœ¨Kubernetes ä¸­ï¼ŒRBAC ç”¨äºæ§åˆ¶å¯¹API å¯¹è±¡çš„è®¿é—®æƒé™ï¼Œå¯ä»¥é™åˆ¶å¯¹é›†ç¾¤èµ„æºçš„è®¿é—®ï¼Œä¾‹å¦‚å®¹å™¨ã€èŠ‚ç‚¹ã€æœåŠ¡ä»¥åŠéƒ¨ç½²ç­‰ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;RBAC çš„ä¸»è¦ç»„ä»¶&lt;a href=&quot;#rbac-çš„ä¸»è¦ç»„ä»¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Role&lt;/code&gt;ï¼šå®šä¹‰æƒé™çš„å…·ä½“å†…å®¹ï¼Œä¾‹å¦‚è·å–ã€åˆ›å»ºã€ä¿®æ”¹æˆ–åˆ é™¤æŸä¸ªå¯¹è±¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ClusterRole&lt;/code&gt;ï¼šåœ¨æ•´ä¸ªé›†ç¾¤ä¸­å®šä¹‰æƒé™ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;RoleBinding&lt;/code&gt;ï¼šå°†Role ç»‘å®šåˆ°ç”¨æˆ·æˆ–ç»„ï¼Œå³ä¸ºç”¨æˆ·æˆæƒã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ClusterRoleBinding&lt;/code&gt;ï¼šå°†&lt;code&gt;ClusterRole&lt;/code&gt; ç»‘å®šåˆ°ç”¨æˆ·æˆ–ç»„ï¼Œå³ä¸ºç”¨æˆ·æˆæƒã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;å…¶ä¸­ï¼Œ &lt;code&gt;Role&lt;/code&gt; å’Œ&lt;code&gt;RoleBinding&lt;/code&gt; æ§åˆ¶è®¿é—®ä¸€ä¸ª namespace ä¸­çš„èµ„æºï¼Œ&lt;code&gt;ClusterRole&lt;/code&gt; å’Œ&lt;code&gt;ClusterRoleBinding&lt;/code&gt; æ§åˆ¶è®¿é—®æ•´ä¸ªé›†ç¾¤ä¸­çš„èµ„æºã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;è®¤è¯ã€æˆæƒã€å‡†å…¥æ§åˆ¶&lt;a href=&quot;#è®¤è¯æˆæƒå‡†å…¥æ§åˆ¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Kubernetes ä¸­çš„RBACï¼ˆåŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼‰æœºåˆ¶æä¾›äº†ä¸‰ä¸ªæ–¹é¢çš„æ§åˆ¶ï¼š&lt;/p&gt;&lt;section&gt;&lt;h3&gt;è®¤è¯&lt;a href=&quot;#è®¤è¯&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;è®¤è¯å³æ§åˆ¶ç”¨æˆ·èº«ä»½çš„éªŒè¯å·¥ä½œï¼ŒKubernetes é€šè¿‡ä½¿ç”¨&lt;code&gt;OAuth2&lt;/code&gt;ã€&lt;code&gt;OpenIDConnect&lt;/code&gt;ã€&lt;code&gt;TLS&lt;/code&gt; ç­‰åè®®æ¥è¿›è¡Œå®¢æˆ·ç«¯èº«ä»½è®¤è¯ã€‚&lt;/p&gt;&lt;p&gt;kubernetes ä¸»è¦é€šè¿‡APIserver å¯¹å¤–æä¾›æœåŠ¡ï¼Œ é‚£ä¹ˆå°±éœ€è¦å¯¹è®¿é—®apiserver çš„ç”¨æˆ·åšè®¤è¯ï¼Œå¦‚æœä»»ä½•äººéƒ½èƒ½è®¿é—®apiserverï¼Œé‚£ä¹ˆå°±å¯ä»¥éšæ„åœ¨k8s é›†ç¾¤éƒ¨ç½²èµ„æºï¼Œè¿™æ˜¯éå¸¸å±é™©çš„ï¼Œä¹Ÿå®¹æ˜“è¢«é»‘å®¢æ”»å‡»æ¸—é€ï¼Œæ‰€ä»¥éœ€è¦æˆ‘ä»¬å¯¹è®¿é—®k8s ç³»ç»Ÿçš„apiserver çš„ç”¨æˆ·è¿›è¡Œè®¤è¯ï¼Œç¡®ä¿æ˜¯åˆæ³•çš„ç¬¦åˆè¦æ±‚çš„ç”¨æˆ·ã€‚&lt;/p&gt;&lt;section&gt;&lt;h4&gt;æä¾›äº†ä¸‰ç§è®¤è¯æ–¹å¼&lt;a href=&quot;#æä¾›äº†ä¸‰ç§è®¤è¯æ–¹å¼&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;å®¢æˆ·ç«¯è®¤è¯&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;å®¢æˆ·ç«¯è®¤è¯ä¹Ÿç§°ä¸ºåŒå‘TLS è®¤è¯ï¼Œkubectl åœ¨è®¿é—®apiserver çš„æ—¶å€™ï¼Œapiserver ä¹Ÿè¦è®¤è¯kubectl æ˜¯å¦æ˜¯åˆæ³•çš„ï¼Œä»–ä»¬éƒ½ä¼šé€šè¿‡ca æ ¹è¯ä¹¦æ¥è¿›è¡ŒéªŒè¯&lt;/p&gt;&lt;ol&gt;
&lt;li&gt;Bearertoken&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;Bearertoken çš„æ–¹å¼ï¼Œå¯ä»¥ç†è§£ä¸ºapiserver å°†ä¸€ä¸ªå¯†ç é€šè¿‡äº†éå¯¹ç§°åŠ å¯†çš„æ–¹å¼å‘Šè¯‰äº†kubectlï¼Œç„¶åé€šè¿‡è¯¥å¯†ç è¿›è¡Œç›¸äº’è®¿é—®ã€‚&lt;/p&gt;&lt;p&gt;kubectl è®¿é—®k8s é›†ç¾¤ï¼Œè¦æ‰¾ä¸€ä¸ªconfig æ–‡ä»¶ï¼ŒåŸºäºconfig æ–‡ä»¶é‡Œçš„ç”¨æˆ·è®¿é—®kube-apiserverã€‚&lt;/p&gt;&lt;ol&gt;
&lt;li&gt;ServiceAccount&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;å®¢æˆ·ç«¯ca è¯ä¹¦è®¤è¯å’ŒBearertoken çš„ä¸¤ç§è®¤è¯æ–¹å¼ï¼Œéƒ½æ˜¯å¤–éƒ¨è®¿é—®kube-apiserver çš„æ—¶å€™ä½¿ç”¨çš„æ–¹å¼ï¼ŒServiceaccount æ˜¯å†…éƒ¨è®¿é—®pod å’Œkube-apiserver äº¤äº’æ—¶å€™é‡‡ç”¨çš„ä¸€ç§æ–¹å¼ã€‚&lt;/p&gt;&lt;p&gt;Serviceaccount åŒ…æ‹¬ï¼šnamespaceã€tokenã€caï¼Œä¸”é€šè¿‡ç›®å½•æŒ‚è½½çš„æ–¹å¼ç»™äºˆpodï¼Œå½“pod è¿è¡Œèµ·æ¥çš„æ—¶å€™ï¼Œå°±ä¼šè¯»å–åˆ°è¿™äº›ä¿¡æ¯ï¼Œä»è€Œä½¿ç”¨è¯¥æ–¹å¼å’Œkube-apiserver è¿›è¡Œé€šä¿¡&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;æˆæƒ&lt;a href=&quot;#æˆæƒ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;æˆæƒå³æ§åˆ¶ç”¨æˆ·èƒ½å¤Ÿè®¿é—®çš„èµ„æºå’Œæ“ä½œï¼Œä½¿ç”¨RBAC ä»¥åŠå…¶ä»–æ–¹å¼æ¥å®ç°ã€‚&lt;/p&gt;&lt;p&gt;åœ¨æˆæƒæ–¹é¢ï¼ŒKubernetes ä½¿ç”¨RBAC æä¾›äº†ç»†ç²’åº¦çš„æˆæƒï¼Œå®ƒé€šè¿‡&lt;code&gt;Role&lt;/code&gt; å’Œ&lt;code&gt;Role Binding&lt;/code&gt;ï¼Œ&lt;code&gt;ClusterRole&lt;/code&gt; å’Œ&lt;code&gt;ClusterRoleBinding&lt;/code&gt; å››ä¸ªé‡è¦ç»„ä»¶æ¥å®šä¹‰è®¿é—®æ§åˆ¶ç­–ç•¥ï¼Œä½¿å¾—ç®¡ç†å‘˜å¯ä»¥å¾ˆå¥½åœ°æ§åˆ¶é›†ç¾¤ä¸­å„ä¸ªç”¨æˆ·æˆ–ç»„çš„ç›¸å¯¹æƒé™ã€‚&lt;/p&gt;&lt;section&gt;&lt;h4&gt;ç”¨æˆ·åŸºäºrolebinding ç»‘å®šåˆ°role&lt;a href=&quot;#ç”¨æˆ·åŸºäºrolebinding-ç»‘å®šåˆ°role&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;é™å®šåœ¨rolebinding æ‰€åœ¨çš„åç§°ç©ºé—´ï¼š&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;ç”¨æˆ·åŸºäºrolebinding ç»‘å®šåˆ°clusterrole&lt;a href=&quot;#ç”¨æˆ·åŸºäºrolebinding-ç»‘å®šåˆ°clusterrole&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;å‡å¦‚æœ‰6 ä¸ªåç§°ç©ºé—´ï¼Œæ¯ä¸ªåç§°ç©ºé—´çš„ç”¨æˆ·éƒ½éœ€è¦å¯¹è‡ªå·±çš„åç§°ç©ºé—´æœ‰ç®¡ç†å‘˜æƒé™ï¼Œé‚£ä¹ˆéœ€è¦å®šä¹‰6 ä¸ªrole å’Œrolebindingï¼Œç„¶åä¾æ¬¡ç»‘å®šï¼Œå¦‚æœåç§°ç©ºé—´æ›´å¤šï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰æ›´å¤šçš„roleï¼Œè¿™ä¸ªæ˜¯å¾ˆéº»çƒ¦çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¼•å…¥clusterroleï¼Œå®šä¹‰ä¸€ä¸ªclusterrole ï¼Œ å¯¹clusterrole æˆäºˆæ‰€æœ‰æƒé™ï¼Œ ç„¶åç”¨æˆ·é€šè¿‡rolebinding ç»‘å®šåˆ°clusterroleï¼Œå°±ä¼šæ‹¥æœ‰è‡ªå·±åç§°ç©ºé—´çš„ç®¡ç†å‘˜æƒé™äº†ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;Role ä¸ ClusterRole çš„åŒºåˆ«&lt;a href=&quot;#role-ä¸-clusterrole-çš„åŒºåˆ«&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;





























&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å¯¹æ¯”é¡¹&lt;/th&gt;&lt;th&gt;&lt;code&gt;Role&lt;/code&gt;&lt;/th&gt;&lt;th&gt;&lt;code&gt;ClusterRole&lt;/code&gt;&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;å¯ä½œç”¨èŒƒå›´&lt;/td&gt;&lt;td&gt;&lt;strong&gt;å•ä¸ªå‘½åç©ºé—´&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;æ‰€æœ‰å‘½åç©ºé—´ï¼Œç”šè‡³æ˜¯é›†ç¾¤èŒƒå›´&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;æ˜¯å¦å¯ç»‘å®šåˆ°å¤šä¸ªå‘½åç©ºé—´&lt;/td&gt;&lt;td&gt;âŒ å¦ï¼Œå¿…é¡»æ¯ä¸ªå‘½åç©ºé—´å•ç‹¬åˆ›å»º&lt;/td&gt;&lt;td&gt;âœ… å¯ä»¥é€šè¿‡å¤šä¸ª &lt;code&gt;RoleBinding&lt;/code&gt; ç»‘å®šåˆ°ä¸åŒå‘½åç©ºé—´&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;æ˜¯å¦èƒ½è®¿é—®éå‘½åç©ºé—´èµ„æºï¼ˆå¦‚ Nodeï¼‰&lt;/td&gt;&lt;td&gt;âŒ ä¸èƒ½&lt;/td&gt;&lt;td&gt;âœ… å¯ä»¥è®¿é—®æ‰€æœ‰èµ„æºï¼ŒåŒ…æ‹¬é namespaced èµ„æº&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;æ˜¯å¦æ¨èåœ¨å¤šä¸ª namespace ä½¿ç”¨&lt;/td&gt;&lt;td&gt;âŒ ä¸æ¨è&lt;/td&gt;&lt;td&gt;âœ… æ¨èï¼šå†™ä¸€æ¬¡ï¼Œç»‘å®šå¤šæ¬¡&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;ç”¨æˆ·åŸºäºclusterrolebinding ç»‘å®šåˆ°clusterrole&lt;a href=&quot;#ç”¨æˆ·åŸºäºclusterrolebinding-ç»‘å®šåˆ°clusterrole&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;ClusterRoleBinding ç»‘å®šåˆ° ClusterRole ä¸Šï¼Œè¯¥ç”¨æˆ·å¯¹ä»»ä½•å‘½åç©ºé—´éƒ½æ‹¥æœ‰ ClusterRole æ‰€å®šä¹‰çš„æƒé™&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;å‡†å…¥æ§åˆ¶&lt;a href=&quot;#å‡†å…¥æ§åˆ¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;section&gt;&lt;h4&gt;ä»€ä¹ˆæ˜¯å‡†å…¥æ§åˆ¶ï¼Ÿ&lt;a href=&quot;#ä»€ä¹ˆæ˜¯å‡†å…¥æ§åˆ¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;å‡†å…¥æ§åˆ¶å³å¯¹ç”¨æˆ·è¯·æ±‚è¿›è¡Œæ£€æŸ¥ï¼Œä»¥ç¡®ä¿å®ƒä»¬ç¬¦åˆKubernetes é›†ç¾¤çš„æ¡ä»¶å’Œç­–ç•¥ã€‚å‡†å…¥æ§åˆ¶åŒ…æ‹¬å„ç§ç­–ç•¥å’Œæœºåˆ¶ï¼Œå¦‚ç½‘ç»œç­–ç•¥ã€podã€æœåŠ¡ç«¯ç‚¹ç”Ÿæˆã€é™åˆ¶pod çš„èµ„æºä½¿ç”¨ã€å…¥ç«™å’Œå‡ºç«™æµé‡ç­‰ç­‰ã€‚&lt;/p&gt;&lt;p&gt;å‡†å…¥æ§åˆ¶å™¨ä¼šåœ¨è¯·æ±‚é€šè¿‡è®¤è¯å’Œé‰´æƒä¹‹åï¼Œå¯¹è±¡è¢«æŒä¹…åŒ–ä¹‹å‰æ‹¦æˆªåˆ°è¾¾kube-apiserver æœåŠ¡çš„è¯·æ±‚ã€‚&lt;/p&gt;&lt;p&gt;å‡†å…¥æ§åˆ¶å™¨å¯ä»¥é™åˆ¶åˆ›å»ºã€åˆ é™¤ã€ä¿®æ”¹å¯¹è±¡çš„è¯·æ±‚ã€‚å‡†å…¥æ§åˆ¶å™¨ä¸ä¼šé˜»æ­¢è¯»å–ï¼ˆgetã€watch æˆ–listï¼‰å¯¹è±¡çš„è¯·æ±‚&lt;/p&gt;&lt;p&gt;åœ¨å‡†å…¥æ§åˆ¶æ–¹é¢ï¼ŒKubernetes æä¾›äº†ä¸€ç³»åˆ—çš„ admission æ§åˆ¶å™¨ï¼Œå¦‚&lt;code&gt;NamespaceLifecycle&lt;/code&gt; ã€&lt;code&gt;LimitRanger&lt;/code&gt; ã€&lt;code&gt;ResourceQuota&lt;/code&gt; ã€&lt;code&gt;PodSecurityPolicy&lt;/code&gt; ã€&lt;code&gt;ServiceAccount&lt;/code&gt; ç­‰ç­‰ï¼Œé€šè¿‡å¯ç”¨æˆ–ç¦ç”¨è¿™äº›æ§åˆ¶å™¨æ¥é™åˆ¶Kubernetes å¯¹è±¡çš„åˆ›å»ºã€ä¿®æ”¹å’Œåˆ é™¤ï¼Œä»è€Œè¿›ä¸€æ­¥æé«˜äº†å®‰å…¨æ€§ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;å‡†å…¥æ§åˆ¶é˜¶æ®µ&lt;a href=&quot;#å‡†å…¥æ§åˆ¶é˜¶æ®µ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;å‡†å…¥æ§åˆ¶è¿‡ç¨‹åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µã€‚ç¬¬ä¸€é˜¶æ®µï¼Œè¿è¡Œå˜æ›´å‡†å…¥æ§åˆ¶å™¨ã€‚ç¬¬äºŒé˜¶æ®µï¼Œè¿è¡ŒéªŒè¯å‡†å…¥æ§åˆ¶å™¨ã€‚æŸäº›æ§åˆ¶å™¨æ—¢æ˜¯å˜æ›´å‡†å…¥æ§åˆ¶å™¨åˆæ˜¯éªŒè¯å‡†å…¥æ§åˆ¶å™¨ã€‚&lt;/p&gt;&lt;p&gt;å¦‚æœä¸¤ä¸ªé˜¶æ®µä¹‹ä¸€çš„ä»»ä½•ä¸€ä¸ªæ§åˆ¶å™¨æ‹’ç»äº†æŸè¯·æ±‚ï¼Œåˆ™æ•´ä¸ªè¯·æ±‚å°†ç«‹å³è¢«æ‹’ç»ï¼Œå¹¶å‘æœ€ç»ˆç”¨æˆ·è¿”å›é”™è¯¯ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;å¦‚ä½•å¯ç”¨ä¸€ä¸ªå‡†å…¥æ§åˆ¶å™¨ï¼Ÿ&lt;a href=&quot;#å¦‚ä½•å¯ç”¨ä¸€ä¸ªå‡†å…¥æ§åˆ¶å™¨&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;Kubernetes API æœåŠ¡å™¨çš„ &lt;code&gt;enable-admission-plugins&lt;/code&gt; å‚æ•°è¡¨ç¤ºå¼€å¯çš„ï¼ˆä»¥é€—å·åˆ†éš”çš„ï¼‰å‡†å…¥æ§åˆ¶æ’ä»¶åˆ—è¡¨ï¼Œè¿™äº›æ’ä»¶ä¼šåœ¨é›†ç¾¤ä¿®æ”¹å¯¹è±¡ä¹‹å‰è¢«è°ƒç”¨ã€‚&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[root@k8s-master01 ~]# cat /etc/kubernetes/manifests/kube-apiserver.yaml&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;...&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;containers:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;-&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;command:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;...&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;-&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--enable-admission-plugins=NodeRestriction&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;...&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;å¯ä»¥æŸ¥çœ‹å¦‚ä¸‹å®˜ç½‘ç½‘å€ï¼Œæ¥ç¡®è®¤ä½ éœ€è¦å¯ç”¨çš„å‡†å…¥æ§åˆ¶å™¨ï¼š&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;https://kubernetes.io/zh-cn/docs/reference/access-authn-authz/admission-controllers/&quot;&gt;Kubernetes ä¸­çš„å‡†å…¥æ§åˆ¶&lt;/a&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;UserAccount ä¸ ServiceAccount&lt;a href=&quot;#useraccount-ä¸-serviceaccount&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;section&gt;&lt;h2&gt;UserAccount&lt;a href=&quot;#useraccount&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;UserAccount æ˜¯ç»™kubernetes é›†ç¾¤å¤–éƒ¨ç”¨æˆ·ä½¿ç”¨çš„ï¼Œä¾‹å¦‚è¿ç»´äººå‘˜æˆ–è€…é›†ç¾¤ç®¡ç†äººå‘˜ï¼Œkubeadm å®‰è£…çš„k8sï¼Œé»˜è®¤ç”¨æˆ·è´¦å·æ˜¯kubernetes-adminã€‚&lt;/p&gt;&lt;p&gt;k8s å®¢æˆ·ç«¯ï¼ˆä¸€èˆ¬ç”¨kubectlï¼‰è®¿é—®kube-apiserver ç»„ä»¶ã€‚kube-apiserver éœ€è¦å¯¹å®¢æˆ·ç«¯åšè®¤è¯ï¼Œä½¿ç”¨kubeadm å®‰è£…çš„K8sï¼Œä¼šåœ¨ç”¨æˆ·å®¶ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªè®¤è¯é…ç½®æ–‡ä»¶.kube/config è¿™é‡Œé¢ä¿å­˜äº†å®¢æˆ·ç«¯è®¿é—®&lt;/p&gt;&lt;p&gt;kube-apiserver çš„å¯†é’¥ç›¸å…³ä¿¡æ¯ï¼Œè¿™æ ·å½“ç”¨kubectl è®¿é—®k8s æ—¶ï¼Œå®ƒå°±ä¼šè‡ªåŠ¨è¯»å–è¯¥é…ç½®æ–‡ä»¶ï¼Œå‘kube-apiserver å‘èµ·è®¤è¯ï¼Œç„¶åå®Œæˆæ“ä½œè¯·æ±‚ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;ServiceAccount&lt;a href=&quot;#serviceaccount&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;ServiceAccount æ˜¯Pod ä½¿ç”¨çš„è´¦å·ï¼Œ Pod å®¹å™¨çš„è¿›ç¨‹éœ€è¦è®¿é—®kube-apiserver æ—¶ç”¨çš„å°±æ˜¯ServiceAccount è´¦æˆ·ã€‚&lt;/p&gt;&lt;p&gt;ServiceAccount ä»…å±€é™å®ƒæ‰€åœ¨çš„namespace å‘½åç©ºé—´ï¼Œæ¯ä¸ªnamespace åˆ›å»ºæ—¶éƒ½ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ª&lt;code&gt;default service account&lt;/code&gt;ã€‚åˆ›å»ºPod æ—¶ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šService Accountï¼ŒPod åˆ™ä¼šä½¿ç”¨default Service Account&lt;/p&gt;&lt;section&gt;&lt;h3&gt;å¸¸è§åº”ç”¨åœºæ™¯&lt;a href=&quot;#å¸¸è§åº”ç”¨åœºæ™¯&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;å®‰å…¨è®¿é—®Kubernetes API&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ç®¡ç†å‘˜å¯ä»¥åˆ›å»ºä¸€ä¸ªæœ‰é™çš„ã€èƒ½å¤Ÿè®¿é—®Kubernetes API çš„ServiceAccount æ¥æˆæƒæ“ä½œï¼Œä»è€Œå‡å°‘äº†æ„å¤–ä¿®æ”¹æˆ–æ„å¤–åˆ é™¤Kubernetes èµ„æºçš„é£é™©ã€‚è¿™å¯ä»¥é€šè¿‡æŠŠServiceAccountçš„è®¿é—®æƒé™é™åˆ¶åˆ°ä»…é€‚ç”¨äºç‰¹å®šå‘½åç©ºé—´æˆ–èµ„æºä¸Šå®ç°ã€‚&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;å¾®æœåŠ¡æ¶æ„ä¸­çš„è®¿é—®æ§åˆ¶&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;åœ¨åº”ç”¨æœåŠ¡é‡‡ç”¨å¾®æœåŠ¡æ¶æ„æ—¶ï¼Œæ¯ä¸ªæœåŠ¡éƒ½éœ€è¦ç‹¬ç«‹çš„è®¿é—®æˆæƒï¼Œè¿™é€šå¸¸æ¶‰åŠåœ¨æœåŠ¡ä¹‹é—´ä¼ é€’è®¿é—®ä»¤ç‰Œã€‚å°†æ¯ä¸ªæœåŠ¡çš„è®¿é—®ä»¤ç‰Œå­˜å‚¨åœ¨ServiceAccount ä¸­ï¼Œèƒ½å¤Ÿæ›´å¥½çš„éš”ç¦»æ¯ä¸ªæœåŠ¡ï¼Œå¹¶ç²¾ç¡®æ§åˆ¶å¯¹API è®¿é—®çš„æƒé™ã€‚&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;å®¹å™¨ä¸­çš„è‡ªåŠ¨åŒ–API è®¿é—®&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;å¯ä»¥é€šè¿‡åˆ›å»ºä¸€ä¸ªå…·æœ‰è®¿é—®API æƒé™çš„ServiceAccountï¼Œè¿è¡Œåœ¨å®¹å™¨å†…çš„è¿›ç¨‹å°±å¯ä»¥ä½¿ç”¨è¯¥ServiceAccount ç›´æ¥è®¿é—®Kubernetes APIï¼Œä»è€Œå…è®¸å®¹å™¨è‡ªåŠ¨è°ƒæ•´è‡ªå·±çš„èµ„æºã€å­˜å‚¨ã€å®‰å…¨ä»¥åŠæœåŠ¡å‘ç°ç­‰æ–¹é¢ã€‚&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;åœ¨CI/CD ä¸­è‡ªåŠ¨è¿­ä»£èµ„æº&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;é€šè¿‡ä½¿ç”¨createã€apply å’Œdelete æ“ä½œç­‰Kubernetes API æœåŠ¡ï¼ŒServiceAccount å¯ä»¥åœ¨CI/CD æµæ°´çº¿ä¸­è‡ªåŠ¨æ›´æ–°Kubernetes èµ„æºï¼Œå¦‚éƒ¨ç½²ã€é…ç½®æ˜ å°„å’ŒæœåŠ¡ç­‰ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;ServiceAccount åº”ç”¨&lt;a href=&quot;#serviceaccount-åº”ç”¨&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;åˆ›å»º serviceaccount å¹¶ä½¿ç”¨å…¶è®¿é—®é›†ç¾¤ apiserver&lt;a href=&quot;#åˆ›å»º-serviceaccount-å¹¶ä½¿ç”¨å…¶è®¿é—®é›†ç¾¤-apiserver&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;åˆ›å»º ServiceAccount&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;ServiceAccount&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;sa-web&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;namespace&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;default&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;labels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;sa&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;sa-web&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;æˆ–è€…ä½¿ç”¨å‘½ä»¤è¡Œ&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kubectl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;create&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;sa&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;sa-web&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;åˆ›å»º Pod å¹¶è®¾ç½® sa-web ä¸ºå®ƒçš„ ServiceAccount&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Pod&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;sa-web-pod&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;namespace&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;default&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;labels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;sa-web-pod&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;serviceAccountName&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;sa-web&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;containers&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;ports&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;containerPort&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;80&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;image&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx:latest&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;imagePullPolicy&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;IfNotPresent&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;è¿›å…¥ Pod ä¸­å¹¶æ‰§è¡Œ&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;cd&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/var/run/secrets/kubernetes.io/serviceaccount&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;curl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--cacert&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;./ca.crt&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-H&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;Authorization: Bearer $(&lt;/span&gt;&lt;span&gt;cat&lt;/span&gt;&lt;span&gt; ./token)&quot;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;https://kubernetes/api&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;ç»“æœ&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;&quot;kind&quot;&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;APIVersions&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;&quot;versions&quot;&lt;/span&gt;&lt;span&gt;: [&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;&quot;v1&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;],&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;&quot;serverAddressByClientCIDRs&quot;&lt;/span&gt;&lt;span&gt;: [&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;&quot;clientCIDR&quot;&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;0.0.0.0/0&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;&quot;serverAddress&quot;&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;10.0.0.85:16443&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;å°è¯•è®¿é—®å¦ä¸€ä¸ªé“¾æ¥&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;curl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--cacert&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;./ca.crt&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-H&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;Authorization: Bearer $(&lt;/span&gt;&lt;span&gt;cat&lt;/span&gt;&lt;span&gt; ./token)&quot;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;https://kubernetes/api/v1/namespaces/kube-system&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;ç»“æœ&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;&quot;kind&quot;&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;Status&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;&quot;apiVersion&quot;&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;v1&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;&quot;metadata&quot;&lt;/span&gt;&lt;span&gt;: {},&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;&quot;status&quot;&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;Failure&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;&quot;message&quot;&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;namespaces &lt;/span&gt;&lt;span&gt;\&quot;&lt;/span&gt;&lt;span&gt;kube-system&lt;/span&gt;&lt;span&gt;\&quot;&lt;/span&gt;&lt;span&gt; is forbidden: User &lt;/span&gt;&lt;span&gt;\&quot;&lt;/span&gt;&lt;span&gt;system:serviceaccount:default:sa-web&lt;/span&gt;&lt;span&gt;\&quot;&lt;/span&gt;&lt;span&gt; cannot get resource &lt;/span&gt;&lt;span&gt;\&quot;&lt;/span&gt;&lt;span&gt;namespaces&lt;/span&gt;&lt;span&gt;\&quot;&lt;/span&gt;&lt;span&gt; in API group &lt;/span&gt;&lt;span&gt;\&quot;\&quot;&lt;/span&gt;&lt;span&gt; in the namespace &lt;/span&gt;&lt;span&gt;\&quot;&lt;/span&gt;&lt;span&gt;kube-system&lt;/span&gt;&lt;span&gt;\&quot;&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;&quot;reason&quot;&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;Forbidden&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;&quot;details&quot;&lt;/span&gt;&lt;span&gt;: {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;&quot;name&quot;&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;kube-system&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;&quot;kind&quot;&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;namespaces&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;},&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;&quot;code&quot;&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;403&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;403 - æ²¡æœ‰æƒé™&lt;/p&gt;&lt;ol&gt;
&lt;li&gt;ä¸º sa-web æˆæƒ&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;rbac.authorization.k8s.io/v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;ClusterRoleBinding&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;sa-web-admin&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;subjects&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;ServiceAccount&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;sa-web&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;namespace&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;default&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;roleRef&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;# roleRef - å°†å·²å­˜åœ¨çš„Roleæˆ–ClusterRoleè§’è‰²ä½œä¸ºæ¨¡æ¿ï¼Œè®©æ–°è§’è‰²ä½¿ç”¨è¿™ä¸ªæ¨¡æ¿è·å¾—æ¨¡æ¿çš„å…¨éƒ¨æƒé™&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;ClusterRole&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;cluster-admin&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;# cluster-admin æ‹¥æœ‰å¯¹æ‰€æœ‰èµ„æºçš„æƒé™ã€‚&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;apiGroup&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;rbac.authorization.k8s.io&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;æŸ¥çœ‹ ClusterRoleBinding&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[root@microk8s-85 /opt/tutorial/rbac/sa]#kubectl get ClusterRoleBinding sa-web-admin&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;NAME&lt;/span&gt;&lt;span&gt;           &lt;/span&gt;&lt;span&gt;ROLE&lt;/span&gt;&lt;span&gt;                        &lt;/span&gt;&lt;span&gt;AGE&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;sa-web-admin&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;ClusterRole/cluster-admin&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;26s&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;æŸ¥çœ‹sa-web-admin ClusterRoleBinding çš„è¯¦ç»†ä¿¡æ¯&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[root@microk8s-85 /opt/tutorial/rbac/sa]#kubectl describe ClusterRoleBinding sa-web-admin&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Name:&lt;/span&gt;&lt;span&gt;         &lt;/span&gt;&lt;span&gt;sa-web-admin&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Labels:&lt;/span&gt;&lt;span&gt;       &lt;/span&gt;&lt;span&gt;&amp;lt;none&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Annotations:&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;&amp;lt;none&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Role:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;Kind:&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;ClusterRole&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;Name:&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;cluster-admin&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Subjects:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;Kind&lt;/span&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;Name&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;Namespace&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;----&lt;/span&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;----&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;---------&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;ServiceAccount&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;sa-web&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;default&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;é‡æ–°è¿›å…¥ Pod è®¿é—®åˆšæ‰æ— æƒé™çš„ apiserver æ¥å£&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;curl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--cacert&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;./ca.crt&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-H&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;Authorization: Bearer $(&lt;/span&gt;&lt;span&gt;cat&lt;/span&gt;&lt;span&gt; ./token)&quot;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;https://kubernetes/api/v1/namespaces/kube-system&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;ç»“æœ&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;&quot;kind&quot;&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;Namespace&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;&quot;apiVersion&quot;&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;v1&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;&quot;metadata&quot;&lt;/span&gt;&lt;span&gt;: {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;&quot;name&quot;&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;kube-system&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;&quot;uid&quot;&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;660650c8-a91b-467e-bd45-4f981f61b325&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;&quot;resourceVersion&quot;&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;6&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;&quot;creationTimestamp&quot;&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;2025-05-26T05:52:15Z&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;&quot;labels&quot;&lt;/span&gt;&lt;span&gt;: {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;&quot;kubernetes.io/metadata.name&quot;&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;kube-system&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;},&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;&quot;managedFields&quot;&lt;/span&gt;&lt;span&gt;: [&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;&quot;manager&quot;&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;kubelite&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;&quot;operation&quot;&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;Update&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;&quot;apiVersion&quot;&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;v1&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;&quot;time&quot;&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;2025-05-26T05:52:15Z&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;&quot;fieldsType&quot;&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;FieldsV1&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;&quot;fieldsV1&quot;&lt;/span&gt;&lt;span&gt;: {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;&quot;f:metadata&quot;&lt;/span&gt;&lt;span&gt;: {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;&quot;f:labels&quot;&lt;/span&gt;&lt;span&gt;: {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;&quot;.&quot;&lt;/span&gt;&lt;span&gt;: {},&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;&quot;f:kubernetes.io/metadata.name&quot;&lt;/span&gt;&lt;span&gt;: {}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;          &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;27&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;28&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;29&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;},&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;30&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;&quot;spec&quot;&lt;/span&gt;&lt;span&gt;: {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;31&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;&quot;finalizers&quot;&lt;/span&gt;&lt;span&gt;: [&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;32&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;&quot;kubernetes&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;33&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;34&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;},&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;35&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;&quot;status&quot;&lt;/span&gt;&lt;span&gt;: {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;36&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;&quot;phase&quot;&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;Active&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;37&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;38&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;Role ä¸ ClusterRole&lt;a href=&quot;#role-ä¸-clusterrole&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;section&gt;&lt;h2&gt;å¯ç”¨å­—æ®µ&lt;a href=&quot;#å¯ç”¨å­—æ®µ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;






















































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å­—æ®µå&lt;/th&gt;&lt;th&gt;è¯´æ˜&lt;/th&gt;&lt;th&gt;å¯é€‰é¡¹&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;apiVersion&lt;/code&gt;&lt;/td&gt;&lt;td&gt;è§’è‰²å¯¹è±¡æ‰€ä½¿ç”¨çš„Kubernetes API ç‰ˆæœ¬ã€‚&lt;/td&gt;&lt;td&gt;rbac.authorization.k8s.io/v1&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;kind&lt;/code&gt;&lt;/td&gt;&lt;td&gt;è§’è‰²å¯¹è±¡çš„Kubernetes èµ„æºç±»å‹&lt;/td&gt;&lt;td&gt;Role/ClusterRole&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;metadata.name&lt;/code&gt;&lt;/td&gt;&lt;td&gt;å®šä¹‰è§’è‰²åç§°&lt;/td&gt;&lt;td&gt;-&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;metadata.namespace&lt;/code&gt;&lt;/td&gt;&lt;td&gt;å®šä¹‰è§’è‰²æ‰€å±çš„å‘½åç©ºé—´ã€‚&lt;/td&gt;&lt;td&gt;-&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;rules.apiGroups&lt;/code&gt;&lt;/td&gt;&lt;td&gt;æŒ‡å®šèµ„æºæ‰€å±çš„API ç»„ï¼Œ&quot;&quot;è¡¨ç¤ºæ ¸å¿ƒç»„ï¼Œæ ¸å¿ƒç»„å°±æ˜¯v1ã€‚&lt;/td&gt;&lt;td&gt;&lt;code&gt;&quot;&quot;&lt;/code&gt; ã€&lt;code&gt;apps&lt;/code&gt;ã€&lt;code&gt;rbac.authorization.k8s.io&lt;/code&gt;ã€&lt;code&gt;networking.k8s.io&lt;/code&gt;ã€&lt;code&gt;autoscaling&lt;/code&gt;ã€&lt;code&gt;metrics.k8s.io&lt;/code&gt;ã€&lt;code&gt;apiextensions.k8s.io&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;rules.resources&lt;/code&gt;&lt;/td&gt;&lt;td&gt;å®šä¹‰è¯¥è§’è‰²å¯ä»¥è®¿é—®çš„Kubernetes èµ„æºç±»å‹åˆ—è¡¨ã€‚&lt;/td&gt;&lt;td&gt;åŸºäºrules.apiGroups é€‰æ‹©èµ„æºç±»å‹&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;rules.nonResourceURLs&lt;/code&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;ClusterRole&lt;/code&gt; ç‰¹æœ‰çš„èµ„æºï¼Œ ç”¨äºæ§åˆ¶ç”¨æˆ·æ˜¯å¦å¯ä»¥è®¿é—® &lt;strong&gt;éèµ„æºç±»çš„ HTTP è·¯å¾„&lt;/strong&gt;ï¼ˆæ¯”å¦‚ &lt;code&gt;/healthz&lt;/code&gt;ã€&lt;code&gt;/metrics&lt;/code&gt;ã€&lt;code&gt;/version&lt;/code&gt; ç­‰ï¼‰&lt;/td&gt;&lt;td&gt;-&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;rules.resourceNames&lt;/code&gt;&lt;/td&gt;&lt;td&gt;æŒ‡å®šçš„æ˜¯èµ„æºçš„å…·ä½“åå­—&lt;/td&gt;&lt;td&gt;-&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;rules.verbs&lt;/code&gt;&lt;/td&gt;&lt;td&gt;è§’è‰²å…è®¸çš„æ“ä½œåˆ—è¡¨(æƒé™)&lt;/td&gt;&lt;td&gt;&lt;code&gt;get&lt;/code&gt;ã€&lt;code&gt;list&lt;/code&gt;ã€&lt;code&gt;watch&lt;/code&gt;ã€&lt;code&gt;create&lt;/code&gt;ã€&lt;code&gt;update&lt;/code&gt;ã€&lt;code&gt;patch&lt;/code&gt;ã€&lt;code&gt;delete&lt;/code&gt;ã€&lt;code&gt;deletecollection&lt;/code&gt;ã€&lt;code&gt;impersonate&lt;/code&gt;ã€&lt;code&gt;escalate&lt;/code&gt; ã€&lt;code&gt;bind&lt;/code&gt; ã€&lt;code&gt;use&lt;/code&gt;ã€&lt;code&gt;updateStatus&lt;/code&gt;ã€&lt;code&gt;updateScale &lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;Kubernetes verbs å…¨éƒ¨åˆ—è¡¨&lt;a href=&quot;#kubernetes-verbs-å…¨éƒ¨åˆ—è¡¨&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;
































































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Verb&lt;/th&gt;&lt;th&gt;å«ä¹‰&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;get&lt;/code&gt;&lt;/td&gt;&lt;td&gt;è·å–æŸä¸ªå…·ä½“èµ„æºï¼ˆå¦‚ï¼š&lt;code&gt;kubectl get pod nginx-123&lt;/code&gt;ï¼‰&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;list&lt;/code&gt;&lt;/td&gt;&lt;td&gt;è·å–èµ„æºåˆ—è¡¨ï¼ˆå¦‚ï¼š&lt;code&gt;kubectl get pods&lt;/code&gt;ï¼‰&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;watch&lt;/code&gt;&lt;/td&gt;&lt;td&gt;ç›‘å¬èµ„æºå˜æ›´ï¼ˆå¦‚ï¼šç›‘æ§å·¥å…· watch pod çŠ¶æ€å˜åŒ–ï¼‰&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;create&lt;/code&gt;&lt;/td&gt;&lt;td&gt;åˆ›å»ºèµ„æºï¼ˆå¦‚ï¼š&lt;code&gt;kubectl create deployment&lt;/code&gt;ï¼‰&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;update&lt;/code&gt;&lt;/td&gt;&lt;td&gt;æ›´æ–°èµ„æºï¼ˆå®Œæ•´æ›¿æ¢ï¼Œç­‰ä»·äº PUTï¼‰&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;patch&lt;/code&gt;&lt;/td&gt;&lt;td&gt;å±€éƒ¨æ›´æ–°èµ„æºï¼ˆå¦‚é€šè¿‡ JSON patch ä¿®æ”¹ï¼‰&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;delete&lt;/code&gt;&lt;/td&gt;&lt;td&gt;åˆ é™¤èµ„æº&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;deletecollection&lt;/code&gt;&lt;/td&gt;&lt;td&gt;åˆ é™¤èµ„æºé›†åˆï¼ˆå¦‚ï¼š&lt;code&gt;kubectl delete pods --all&lt;/code&gt;ï¼‰&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;impersonate&lt;/code&gt;&lt;/td&gt;&lt;td&gt;ä»¥å…¶ä»–ç”¨æˆ·èº«ä»½è¿›è¡Œæ“ä½œï¼ˆç”¨äºå®¡è®¡ã€ç½‘å…³ã€è®¤è¯ä»£ç†ï¼‰&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;escalate&lt;/code&gt;&lt;/td&gt;&lt;td&gt;è·å–è¢«æˆæƒçš„æƒé™ï¼ˆé€šå¸¸åªå¯¹ RBAC å¯¹è±¡èµ·ä½œç”¨ï¼‰&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;bind&lt;/code&gt;&lt;/td&gt;&lt;td&gt;æˆæƒæŸç”¨æˆ·æˆ–æœåŠ¡è´¦æˆ·ä½¿ç”¨æŸ Roleï¼ˆä¸»è¦ç”¨äºç»‘å®šæ“ä½œï¼‰&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;use&lt;/code&gt;&lt;/td&gt;&lt;td&gt;ä½¿ç”¨æŸä¸ªèµ„æºï¼ˆå¸¸ç”¨äº PodSecurityPolicyã€Volumeã€Secret ç­‰é—´æ¥ä½¿ç”¨èµ„æºï¼‰&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;updateStatus&lt;/code&gt;&lt;/td&gt;&lt;td&gt;æ›´æ–°èµ„æºçš„ &lt;code&gt;.status&lt;/code&gt; å­—æ®µï¼ˆä¾‹å¦‚ Operatorã€Controller ä½¿ç”¨ï¼‰&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;updateScale&lt;/code&gt;&lt;/td&gt;&lt;td&gt;ä¿®æ”¹å‰¯æœ¬æ•°ï¼ˆé€‚ç”¨äº Deployment/StatefulSet çš„ç¼©æ”¾ï¼‰&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;apiGroups åˆ—è¡¨&lt;a href=&quot;#apigroups-åˆ—è¡¨&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;








































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;API Group&lt;/th&gt;&lt;th&gt;åŒ…å«èµ„æºï¼ˆéƒ¨åˆ†ç¤ºä¾‹ï¼‰&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;&quot;&quot;&lt;/code&gt;ï¼ˆç©ºå­—ç¬¦ä¸²ï¼‰ç­‰äº &lt;code&gt;v1&lt;/code&gt;ï¼Œä½†æ˜¯åœ¨å£°æ˜ RBAC Role æ—¶å¿…é¡»ä½¿ç”¨&lt;code&gt;&quot;&quot;&lt;/code&gt;&lt;/td&gt;&lt;td&gt;æ ¸å¿ƒèµ„æºï¼š&lt;code&gt;pods&lt;/code&gt;, &lt;code&gt;services&lt;/code&gt;, &lt;code&gt;namespaces&lt;/code&gt;, &lt;code&gt;secrets&lt;/code&gt;, &lt;code&gt;configmaps&lt;/code&gt; ç­‰&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;apps&lt;/code&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;deployments&lt;/code&gt;, &lt;code&gt;statefulsets&lt;/code&gt;, &lt;code&gt;daemonsets&lt;/code&gt;, &lt;code&gt;replicasets&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;batch&lt;/code&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;jobs&lt;/code&gt;, &lt;code&gt;cronjobs&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;rbac.authorization.k8s.io&lt;/code&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;roles&lt;/code&gt;, &lt;code&gt;rolebindings&lt;/code&gt;, &lt;code&gt;clusterroles&lt;/code&gt; ç­‰&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;networking.k8s.io&lt;/code&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;networkpolicies&lt;/code&gt;, &lt;code&gt;ingresses&lt;/code&gt;, &lt;code&gt;ingressclasses&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;autoscaling&lt;/code&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;horizontalpodautoscalers&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;metrics.k8s.io&lt;/code&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;nodes&lt;/code&gt;, &lt;code&gt;pods&lt;/code&gt;ï¼ˆç›‘æ§æŒ‡æ ‡ï¼‰&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;apiextensions.k8s.io&lt;/code&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;customresourcedefinitions&lt;/code&gt;ï¼ˆCRDï¼‰&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;Roleï¼šè§’è‰²&lt;a href=&quot;#roleè§’è‰²&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;åœ¨Kubernetes ä¸­ï¼ŒRole å¯¹è±¡è¡¨ç¤ºä¸€ç»„æƒé™ï¼Œç”¨äºæˆäºˆåœ¨ç‰¹å®šå‘½åç©ºé—´ä¸­å¯¹Kubernetes èµ„æºçš„è®¿é—®æƒé™ã€‚Role å¯¹è±¡æˆäºˆçš„æƒé™åªèƒ½é™åˆ¶åœ¨ç‰¹å®šå‘½åç©ºé—´ä¸­ï¼Œä¸èƒ½æ¨ªè·¨å¤šä¸ªå‘½åç©ºé—´&lt;/p&gt;&lt;section&gt;&lt;h3&gt;ç¤ºä¾‹&lt;a href=&quot;#ç¤ºä¾‹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;åˆ›å»ºä¸€ä¸ªè§’è‰²ï¼Œåªæœ‰å¯¹Pod èµ„æºè¯»å–çš„æƒé™&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;rbac.authorization.k8s.io/v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Role&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;default-read-role&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;namespace&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;default&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;rules&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;apiGroups&lt;/span&gt;&lt;span&gt;: [&lt;/span&gt;&lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;resources&lt;/span&gt;&lt;span&gt;: [&lt;/span&gt;&lt;span&gt;&quot;pods&quot;&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;resourceNames&lt;/span&gt;&lt;span&gt;: []&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;verbs&lt;/span&gt;&lt;span&gt;: [&lt;/span&gt;&lt;span&gt;&quot;get&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;&quot;watch&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;&quot;list&quot;&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;resources: æŒ‡çš„æ˜¯èµ„æºçš„ç±»å‹ï¼Œå¦‚ &lt;code&gt;pod&lt;/code&gt;ï¼Œ&lt;code&gt;deployment&lt;/code&gt;ï¼Œ&lt;code&gt;service&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;resourceNames: æŒ‡å®šçš„æ˜¯&lt;strong&gt;èµ„æºçš„å…·ä½“åå­—&lt;/strong&gt;ï¼Œæ¯”å¦‚ &lt;code&gt;my-pod&lt;/code&gt;ã€&lt;code&gt;config-prod&lt;/code&gt; ç­‰ ï¼Œç•™ç©ºè¡¨ç¤ºé€‚ç”¨äºæ‰€æœ‰èµ„æº&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;ClusterRoleï¼šé›†ç¾¤è§’è‰²&lt;a href=&quot;#clusterroleé›†ç¾¤è§’è‰²&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;æ¦‚è¿°&lt;a href=&quot;#æ¦‚è¿°&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;åœ¨Kubernetes ä¸­ï¼ŒClusterRole å®šä¹‰äº†å¯ä»¥åœ¨æ•´ä¸ªé›†ç¾¤ä¸­æˆäºˆçš„è®¿é—®æ§åˆ¶è§„åˆ™ã€‚ä¸Role ä¸åŒï¼ŒClusterRole å¯ä»¥åœ¨å¤šä¸ªå‘½åç©ºé—´ä¸­å®šä¹‰ï¼Œä½¿ç”¨æ—¶éœ€è¦å°†å…¶ç»‘å®šåˆ°å¯¹åº”çš„Kubernetes ç”¨æˆ·æˆ–æœåŠ¡è´¦æˆ·ä¸Šã€‚ä¸‹é¢æ˜¯å‡ ä¸ªå…³äºClusterRoleçš„ç›¸å…³ä»‹ç»ï¼š&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;ClusterRole æ˜¯ä¸€ç§Kubernetes èµ„æºç±»å‹ï¼Œç”¨äºæ§åˆ¶é›†ç¾¤èŒƒå›´å†…çš„è®¿é—®æ§åˆ¶ã€‚ä¸€ä¸ªClusterRole å®šä¹‰å¯ä»¥æ§åˆ¶å¤šä¸ªèµ„æºçš„è®¿é—®æƒé™ï¼ŒåŒ…æ‹¬å…¨å±€èµ„æºå’Œè·¨å‘½åç©ºé—´çš„èµ„æºã€‚&lt;/li&gt;
&lt;li&gt;ä¸Role ç±»å‹ç›¸ä¼¼ï¼ŒClusterRole ä¹ŸåŒ…å«ä¸€ä¸ªè§„åˆ™é›†åˆ—è¡¨ï¼Œè§„å®šäº†èµ„æºå’Œæ“ä½œçš„æƒé™ã€‚&lt;/li&gt;
&lt;li&gt;é›†ç¾¤ç®¡ç†å‘˜å¯ä»¥åœ¨é›†ç¾¤ä¸­åˆ›å»ºå’Œç®¡ç†ClusterRole å¯¹è±¡ï¼Œå®ƒä»¬å¯ä»¥åœ¨ä¸åŒå‘½åç©ºé—´ä¸­å…±äº«ã€‚&lt;/li&gt;
&lt;li&gt;è¦å°†ClusterRole ç»‘å®šåˆ°ç”¨æˆ·æˆ–æœåŠ¡è´¦æˆ·ä¸Šï¼Œ å¯ä»¥ä½¿ç”¨&lt;code&gt;ClusterRoleBinding&lt;/code&gt; å¯¹è±¡ï¼Œå°†ClusterRole ä¸æŒ‡å®šçš„å®ä½“ç»‘å®šèµ·æ¥ã€‚&lt;/li&gt;
&lt;li&gt;ClusterRole é€šå¸¸ç”¨äº&lt;u&gt;æ§åˆ¶å…¨å±€æ“ä½œ&lt;/u&gt;ï¼Œå¦‚&lt;u&gt;ç®¡ç†èŠ‚ç‚¹&lt;/u&gt;ã€&lt;u&gt;è®¿é—®é›†ç¾¤çŠ¶æ€&lt;/u&gt;ã€è®¿é—®å„ä¸ªå‘½åç©ºé—´ä¸­çš„æ‰€æœ‰Podã€ç½‘ç»œç­–ç•¥ç­‰ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ClusterRole å¯ç”¨äºä»¥ä¸‹ç‰¹æ®Šå…ƒç´ çš„æˆæƒã€‚&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;é›†ç¾¤èŒƒå›´çš„èµ„æºï¼Œä¾‹å¦‚&lt;code&gt;Node&lt;/code&gt;ã€&lt;code&gt;PV&lt;/code&gt; ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;éèµ„æºå‹çš„è·¯å¾„ï¼Œä¾‹å¦‚ï¼š&lt;code&gt;/healthz&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;åŒ…å«å…¨éƒ¨å‘½åç©ºé—´çš„èµ„æºï¼Œä¾‹å¦‚Pods&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;Kubernetes é›†ç¾¤é»˜è®¤å­˜åœ¨çš„ClusterRole&lt;a href=&quot;#kubernetes-é›†ç¾¤é»˜è®¤å­˜åœ¨çš„clusterrole&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;ä»¥ä¸‹æ˜¯Kubernetes ä¸­é»˜è®¤æä¾›çš„ä¸€äº›ClusterRoleï¼š&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;cluster-admin&lt;/code&gt;ï¼šè¯¥ClusterRole æˆäºˆå¯¹é›†ç¾¤çš„å®Œå…¨è®¿é—®æƒé™ï¼Œå¯ä»¥æ§åˆ¶ä»»ä½•èµ„æºï¼ŒåŒ…æ‹¬é›†ç¾¤èŒƒå›´å†…çš„æ“ä½œã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;admin&lt;/code&gt;ï¼šè¯¥ClusterRole æˆäºˆå¯¹æ‰€æœ‰å‘½åç©ºé—´å†…èµ„æºçš„è¯»å†™æƒé™ï¼Œä½†ä¸èƒ½å¤Ÿæ“ä½œé›†ç¾¤èŒƒå›´å†…çš„èµ„æºã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;edit&lt;/code&gt;ï¼šè¯¥ClusterRole æˆäºˆå¯¹æ‰€æœ‰å‘½åç©ºé—´å†…çš„èµ„æºçš„è¯»å†™æƒé™ï¼Œä½†ä¸èƒ½å¤Ÿæ“ä½œä¸€äº›é›†ç¾¤èŒƒå›´å†…çš„ä¸€äº›èµ„æºï¼Œå¦‚èŠ‚ç‚¹ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;view&lt;/code&gt;ï¼šè¯¥ClusterRole æˆäºˆå¯¹æ‰€æœ‰å‘½åç©ºé—´å†…èµ„æºçš„åªè¯»æƒé™ï¼ŒåŒæ ·ä¸èƒ½å¤Ÿæ“ä½œé›†ç¾¤èŒƒå›´å†…çš„ä¸€äº›èµ„æºã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;ç¤ºä¾‹&lt;a href=&quot;#ç¤ºä¾‹-1&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;åˆ›å»ºä¸€ä¸ª ClusterRoleï¼Œå¯ä»¥è®¿é—®é›†ç¾¤ä¸­æ‰€æœ‰ secrets&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;rbac.authorization.k8s.io/v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;ClusterRole&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;secrets-read-clusterrole&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;rules&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;apiGroups&lt;/span&gt;&lt;span&gt;: [&lt;/span&gt;&lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;resources&lt;/span&gt;&lt;span&gt;: [&lt;/span&gt;&lt;span&gt;&quot;secrets&quot;&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;verbs&lt;/span&gt;&lt;span&gt;: [&lt;/span&gt;&lt;span&gt;&quot;get&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;&quot;watch&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;&quot;list&quot;&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;è¯»å–æ ¸å¿ƒç»„çš„Node èµ„æº&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;rbac.authorization.k8s.io/v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;ClusterRole&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;node-read-clusterrole&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;rules&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;apiGroups&lt;/span&gt;&lt;span&gt;: [&lt;/span&gt;&lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;resources&lt;/span&gt;&lt;span&gt;: [&lt;/span&gt;&lt;span&gt;&quot;nodes&quot;&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;verbs&lt;/span&gt;&lt;span&gt;: [&lt;/span&gt;&lt;span&gt;&quot;get&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;&quot;watch&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;&quot;list&quot;&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;apiGroups&lt;/span&gt;&lt;span&gt;: [&lt;/span&gt;&lt;span&gt;&quot;metrics.k8s.io&quot;&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;resources&lt;/span&gt;&lt;span&gt;: [&lt;/span&gt;&lt;span&gt;&quot;nodes&quot;&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;verbs&lt;/span&gt;&lt;span&gt;: [&lt;/span&gt;&lt;span&gt;&quot;get&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;&quot;watch&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;&quot;list&quot;&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;å…è®¸å¯¹éèµ„æºç«¯ç‚¹â€œ/healthzâ€åŠå…¶æ‰€æœ‰å­è·¯å¾„è¿›è¡ŒGET å’ŒPOST æ“ä½œ&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;rbac.authorization.k8s.io/v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;ClusterRole&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;health-url-clusterrole&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;rules&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;nonResourceURLs&lt;/span&gt;&lt;span&gt;: [&lt;/span&gt;&lt;span&gt;&quot;/healthz&quot;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;&quot;/healthz/*&quot;&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;verbs&lt;/span&gt;&lt;span&gt;: [&lt;/span&gt;&lt;span&gt;&quot;get&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;&quot;post&quot;&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;RoleBinding å’Œ ClusterRoleBinding&lt;a href=&quot;#rolebinding-å’Œ-clusterrolebinding&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;section&gt;&lt;h2&gt;å¯ç”¨å­—æ®µå’Œè¯­æ³•&lt;a href=&quot;#å¯ç”¨å­—æ®µå’Œè¯­æ³•&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;åŸºç¡€é…ç½®å­—æ®µ&lt;a href=&quot;#åŸºç¡€é…ç½®å­—æ®µ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;







































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å±æ€§è·¯å¾„&lt;/th&gt;&lt;th&gt;ç±»å‹&lt;/th&gt;&lt;th&gt;è¯´æ˜&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;apiVersion&lt;/code&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;string&lt;/code&gt;&lt;/td&gt;&lt;td&gt;API ç‰ˆæœ¬&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;kind&lt;/code&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;string&lt;/code&gt;&lt;/td&gt;&lt;td&gt;èµ„æºç±»å‹&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;metadata&lt;/code&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;object&lt;/code&gt;&lt;/td&gt;&lt;td&gt;å…ƒæ•°æ®å¯¹è±¡&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;metadata.name&lt;/code&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;string&lt;/code&gt;&lt;/td&gt;&lt;td&gt;æ§åˆ¶å™¨çš„åç§°&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;metadata.namespace&lt;/code&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;string&lt;/code&gt;&lt;/td&gt;&lt;td&gt;æ§åˆ¶å™¨æ‰€å±çš„å‘½åç©ºé—´ï¼Œé»˜è®¤å€¼ä¸º &lt;code&gt;default&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;metadata.labels[]&lt;/code&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;list&lt;/code&gt;&lt;/td&gt;&lt;td&gt;è‡ªå®šä¹‰æ ‡ç­¾åˆ—è¡¨&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;roleRef å­—æ®µ&lt;a href=&quot;#roleref-å­—æ®µ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;åœ¨Kubernetes ä¸­ï¼ŒClusterRoleBinding å¯¹è±¡å®šä¹‰äº†ä¸€ç»„Subjectå¯¹è±¡ä¸ä¸€ä¸ªRole æˆ–ClusterRole ä¹‹é—´çš„å…³ç³»ã€‚Subject å¯¹è±¡å¯ä»¥æ˜¯Userã€Group æˆ–ServiceAccountã€‚è€ŒroleRef æ˜¯æŒ‡å®šSubjectå¯¹è±¡ä½¿ç”¨çš„Role æˆ–ClusterRole çš„å¼•ç”¨ã€‚&lt;/p&gt;
























&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å±æ€§è·¯å¾„&lt;/th&gt;&lt;th&gt;ç±»å‹&lt;/th&gt;&lt;th&gt;è¯´æ˜&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;roleRef.apiGroup&lt;/code&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;string&lt;/code&gt;&lt;/td&gt;&lt;td&gt;Role æˆ– ClusterRole æ‰€å±çš„ API ç»„ï¼Œé€šå¸¸ä¸º &lt;code&gt;&quot;rbac.authorization.k8s.io&quot;&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;roleRef.kind&lt;/code&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;string&lt;/code&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;Role&lt;/code&gt; æˆ– &lt;code&gt;ClusterRole&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;roleRef.name&lt;/code&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;string&lt;/code&gt;&lt;/td&gt;&lt;td&gt;è¦ç»‘å®šçš„ Role æˆ– ClusterRole çš„åç§°ï¼ŒæŒ‡å®šäº†ä¸€ä¸ªè§’è‰²é›†åˆ&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;subjects å­—æ®µ&lt;a href=&quot;#subjects-å­—æ®µ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;


































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å±æ€§è·¯å¾„&lt;/th&gt;&lt;th&gt;ç±»å‹&lt;/th&gt;&lt;th&gt;è¯´æ˜&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;subjects[]&lt;/code&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;object&lt;/code&gt;&lt;/td&gt;&lt;td&gt;æ¯ä¸ª subject å¯¹è±¡&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;subjects.apiGroup&lt;/code&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;string&lt;/code&gt;&lt;/td&gt;&lt;td&gt;Subject å¯¹è±¡æ‰€å±çš„ API ç»„ï¼Œé»˜è®¤å€¼ä¸º &lt;code&gt;&quot;rbac.authorization.k8s.io&quot;&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;subjects.kind&lt;/code&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;string&lt;/code&gt;&lt;/td&gt;&lt;td&gt;Subject å¯¹è±¡çš„ç±»å‹ï¼š   â€¢ &lt;code&gt;User&lt;/code&gt;ï¼šè¡¨ç¤ºé›†ç¾¤ä¸­çš„ç”¨æˆ·ï¼ˆä½¿ç”¨ç”¨æˆ·åæˆ– UIDï¼‰   â€¢ &lt;code&gt;Group&lt;/code&gt;ï¼šè¡¨ç¤ºç”¨æˆ·ç»„ï¼ˆä½¿ç”¨ç»„åæˆ– GIDï¼‰   â€¢ &lt;code&gt;ServiceAccount&lt;/code&gt;ï¼šè¡¨ç¤ºæœåŠ¡è´¦æˆ·&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;subjects.name&lt;/code&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;string&lt;/code&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;name&lt;/code&gt; çš„å«ä¹‰å–å†³äº Subject ç±»å‹ï¼š   â€¢ &lt;code&gt;User&lt;/code&gt; â†’ ç”¨æˆ·åæˆ– UID   â€¢ &lt;code&gt;Group&lt;/code&gt; â†’ ç»„åæˆ– GID   â€¢ &lt;code&gt;ServiceAccount&lt;/code&gt; â†’ æœåŠ¡è´¦æˆ·åç§°&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;subjects.namespace&lt;/code&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;string&lt;/code&gt;&lt;/td&gt;&lt;td&gt;namespace ç”¨äºæŒ‡å®šè¯¥å¯¹è±¡çš„ç±»å‹æ‰€åœ¨çš„å‘½åç©ºé—´ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;RoleBing ç¤ºä¾‹&lt;a href=&quot;#rolebing-ç¤ºä¾‹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;å°†å…ˆå‰åˆ›å»ºçš„ &lt;code&gt;default-read-role&lt;/code&gt; Role ç»‘å®šç»™ Linux rbactest1 ç”¨æˆ·&lt;a href=&quot;#å°†å…ˆå‰åˆ›å»ºçš„-default-read-role-role-ç»‘å®šç»™-linux-rbactest1-ç”¨æˆ·&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;åˆ›å»º RoleBinding æ–‡ä»¶&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;rbac.authorization.k8s.io/v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;RoleBinding&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;default-pod-read-bind&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;subjects&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;User&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;rbactest1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;roleRef&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Role&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;default-read-role&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;apiGroup&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;rbac.authorization.k8s.io&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;æ£€æŸ¥&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[root@microk8s-85 ~]#kubectl get rolebinding&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;NAME&lt;/span&gt;&lt;span&gt;                                    &lt;/span&gt;&lt;span&gt;ROLE&lt;/span&gt;&lt;span&gt;                                         &lt;/span&gt;&lt;span&gt;AGE&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;default-pod-read-bind&lt;/span&gt;&lt;span&gt;                   &lt;/span&gt;&lt;span&gt;Role/default-read-role&lt;/span&gt;&lt;span&gt;                       &lt;/span&gt;&lt;span&gt;19m&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;leader-locking-nfs-client-provisioner&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;Role/leader-locking-nfs-client-provisioner&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;8d&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[root@microk8s-85 ~]#kubectl describe rolebinding default-pod-read-bind&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Name:&lt;/span&gt;&lt;span&gt;         &lt;/span&gt;&lt;span&gt;default-pod-read-bind&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Labels:&lt;/span&gt;&lt;span&gt;       &lt;/span&gt;&lt;span&gt;&amp;lt;none&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Annotations:&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;&amp;lt;none&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Role:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;Kind:&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;Role&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;Name:&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;default-read-role&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Subjects:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;Kind&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;Name&lt;/span&gt;&lt;span&gt;       &lt;/span&gt;&lt;span&gt;Namespace&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;----&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;----&lt;/span&gt;&lt;span&gt;       &lt;/span&gt;&lt;span&gt;---------&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;User&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;rbactest1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;å°†view é›†ç¾¤è§’è‰²ä¸dev Service Account è¿›è¡Œç»‘å®š&lt;a href=&quot;#å°†view-é›†ç¾¤è§’è‰²ä¸dev-service-account-è¿›è¡Œç»‘å®š&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;åˆ›å»º sa&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kubectl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;create&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;sa&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;dev&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;åˆ›å»º RoleBinding æ–‡ä»¶&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;rbac.authorization.k8s.io/v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;RoleBinding&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;view-sa-binding&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;subjects&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;ServiceAccount&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;dev&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;namespace&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;default&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;roleRef&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;ClusterRole&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;view&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;apiGroup&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;rbac.authorization.k8s.io&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;ClusterRoleBinding ç¤ºä¾‹&lt;a href=&quot;#clusterrolebinding-ç¤ºä¾‹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;å‚è§ &lt;a href=&quot;#VlDdz&quot;&gt;https://www.yuque.com/mangshangyue-qszkg/idkuk7/srwg5035ck5zz95v#VlDdz&lt;/a&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;é™åˆ¶ä¸åŒçš„ç”¨æˆ·ä½¿ç”¨ kubernetes é›†ç¾¤&lt;a href=&quot;#é™åˆ¶ä¸åŒçš„ç”¨æˆ·ä½¿ç”¨-kubernetes-é›†ç¾¤&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;éœ€æ±‚ï¼šé™åˆ¶ rbactest1 ç”¨æˆ·å¯¹ test å‘½åç©ºé—´ä¹‹å¤–çš„èµ„æºçš„è®¿é—®æƒé™&lt;/p&gt;&lt;section&gt;&lt;h2&gt;åˆ›å»ºè¯ä¹¦&lt;a href=&quot;#åˆ›å»ºè¯ä¹¦&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;åˆ›å»ºè¯ä¹¦å­˜æ”¾ä½ç½®&lt;a href=&quot;#åˆ›å»ºè¯ä¹¦å­˜æ”¾ä½ç½®&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;mkdir&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-p&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/certs/rbactest1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;cd&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/certs/rbactest1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;åˆ›å»ºç”¨æˆ·ç§é’¥&lt;a href=&quot;#åˆ›å»ºç”¨æˆ·ç§é’¥&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;openssl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;genrsa&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-out&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;rbactest1.key&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;2048&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;åˆ›å»ºè¯ä¹¦ç­¾åè¯·æ±‚æ–‡ä»¶&lt;a href=&quot;#åˆ›å»ºè¯ä¹¦ç­¾åè¯·æ±‚æ–‡ä»¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;openssl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;req&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-new&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-key&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;rbactest1.key&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-out&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;rbactest1.csr&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-subj&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;/CN=rbactest1/O=dev&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;æ‹·è´ kubernetes é›†ç¾¤çš„ ca æ ¹è¯ä¹¦&lt;a href=&quot;#æ‹·è´-kubernetes-é›†ç¾¤çš„-ca-æ ¹è¯ä¹¦&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# microk8sçš„æ ¹è¯ä¹¦ä½ç½®&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;cp&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/var/snap/microk8s/current/certs/ca.crt&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;cp&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/var/snap/microk8s/current/certs/ca.key&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# kubeadmå®‰è£…çš„é›†ç¾¤çš„æ ¹è¯ä¹¦ä½ç½®&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;cp&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/etc/kubernetes/pki/ca.crt&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;cp&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/etc/kubernetes/pki/ca.key&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;é¢å‘è¯ä¹¦&lt;a href=&quot;#é¢å‘è¯ä¹¦&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;openssl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;x509&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-req&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-in&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;rbactest1.csr&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-CA&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;ca.crt&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-CAkey&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;ca.key&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-CAcreateserial&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-out&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;rbactest1.crt&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-days&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;3650&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;åœ¨ kubeconfig ä¸­æ–°å¢ rbactest1 ç”¨æˆ·&lt;a href=&quot;#åœ¨-kubeconfig-ä¸­æ–°å¢-rbactest1-ç”¨æˆ·&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;æ·»åŠ ç”¨æˆ·&lt;a href=&quot;#æ·»åŠ ç”¨æˆ·&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kubectl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;config&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;set-credentials&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;rbactest1&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;\&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;--client-certificate=./rbactest1.crt &lt;/span&gt;&lt;span&gt;\&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;--client-key=./rbactest1.key &lt;/span&gt;&lt;span&gt;\&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;--embed-certs=true&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;éªŒè¯&lt;a href=&quot;#éªŒè¯&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# [root@microk8s-85 /certs/rbactest1]#kubectl config view&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;clusters&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;cluster&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;certificate-authority-data&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;DATA+OMITTED&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;server&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;https://127.0.0.1:16443&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;microk8s-cluster&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;contexts&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;context&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;cluster&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;microk8s-cluster&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;user&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;admin&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;microk8s&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;current-context&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;microk8s&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Config&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;preferences&lt;/span&gt;&lt;span&gt;: {}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;users&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;admin&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;user&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;client-certificate-data&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;DATA+OMITTED&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;client-key-data&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;DATA+OMITTED&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;rbactest1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;user&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;client-certificate-data&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;DATA+OMITTED&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;client-key-data&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;DATA+OMITTED&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;æ·»åŠ  rbactest1 ç”¨æˆ·çš„ä¸Šä¸‹æ–‡&lt;a href=&quot;#æ·»åŠ -rbactest1-ç”¨æˆ·çš„ä¸Šä¸‹æ–‡&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# åœ¨microk8sä¸­&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kubectl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;config&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;set-context&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;rbactest1@kubernetes&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--cluster=microk8s-cluster&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--user=rbactest1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# åœ¨kubeadmçš„é›†ç¾¤ä¸­&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kubectl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;config&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;set-context&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;rbactest1@kubernetes&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--cluster=kubernetes&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--user=rbactest1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;æˆæƒ&lt;a href=&quot;#æˆæƒ-1&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;åˆ›å»º Role è§’è‰²&lt;a href=&quot;#åˆ›å»º-role-è§’è‰²&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;rbac.authorization.k8s.io/v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Role&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;test-ns-full&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;namespace&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;test&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;rules&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;apiGroups&lt;/span&gt;&lt;span&gt;: [&lt;/span&gt;&lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;resources&lt;/span&gt;&lt;span&gt;: [&lt;/span&gt;&lt;span&gt;&quot;*&quot;&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;resourceNames&lt;/span&gt;&lt;span&gt;: []&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;verbs&lt;/span&gt;&lt;span&gt;: [&lt;/span&gt;&lt;span&gt;&quot;*&quot;&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;åˆ›å»º RoleBinding æ–‡ä»¶ï¼Œå°†æƒé™ç»‘å®šç»™ç”¨æˆ·&lt;a href=&quot;#åˆ›å»º-rolebinding-æ–‡ä»¶å°†æƒé™ç»‘å®šç»™ç”¨æˆ·&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;rbac.authorization.k8s.io/v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;RoleBinding&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;test-ns-full-binding&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;namespace&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;test&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;subjects&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;User&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;rbactest1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;apiGroup&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;rbac.authorization.k8s.io&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;roleRef&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Role&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;test-ns-full&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;apiGroup&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;rbac.authorization.k8s.io&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;</content:encoded></item><item><title>Kuberneteså­¦ä¹ ç¬”è®°åä¸€ï¼šConfigMapå’ŒSecret</title><link>https://white-festa.net/posts/kubernetes-tutorial/configmap%E5%92%8Csecret/</link><guid isPermaLink="true">https://white-festa.net/posts/kubernetes-tutorial/configmap%E5%92%8Csecret/</guid><description>åœ¨Kubernetesä¸­é€šè¿‡ConfigMapå’ŒSecretç®¡ç†å¸¸è§„é…ç½®å’Œæ•æ„Ÿæ•°æ®</description><pubDate>Mon, 19 Aug 2024 00:00:00 GMT</pubDate><content:encoded>&lt;section&gt;&lt;h1&gt;ConfigMap æ¦‚è¿°&lt;a href=&quot;#configmap-æ¦‚è¿°&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;section&gt;&lt;h2&gt;æ¦‚å¿µ&lt;a href=&quot;#æ¦‚å¿µ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;åœ¨Kubernetes ä¸­ï¼ŒConfigMap ç”¨æ¥å­˜å‚¨åº”ç”¨ç¨‹åºçš„é…ç½®ä¿¡æ¯ã€å‘½ä»¤è¡Œå‚æ•°ã€å±æ€§æ–‡ä»¶ç­‰æ•°æ®ï¼Œå¯ä»¥å°†è¿™äº›ä¿¡æ¯å’Œåº”ç”¨ç¨‹åºæœ¬èº«åˆ†ç¦»ï¼Œä»è€Œæ–¹ä¾¿ç®¡ç†å’Œç»´æŠ¤ã€‚&lt;/p&gt;&lt;p&gt;ConfigMap æ˜¯ä¸€ä¸ªKubernetes API å¯¹è±¡ï¼Œå®ƒç”±ä¸€äº›&lt;u&gt;é”®å€¼å¯¹&lt;/u&gt;ç»„æˆï¼Œå¹¶æä¾›äº†API æ¥åˆ›å»ºã€æ›´æ–°å’Œåˆ é™¤è¿™äº›é”®å€¼å¯¹ã€‚åœ¨å­˜å‚¨é”®å€¼å¯¹çš„æ—¶å€™ï¼ŒConfigMap æ”¯æŒä»å¤šç§æ¥æºè¯»å–æ•°æ®ï¼Œå¦‚&lt;code&gt;ç›®å½•&lt;/code&gt;ã€&lt;code&gt;æ–‡ä»¶&lt;/code&gt;ã€&lt;code&gt;å‘½ä»¤è¡Œå‚æ•°&lt;/code&gt;ç­‰ï¼Œä»è€Œæ–¹ä¾¿ç”¨æˆ·å°†æ•°æ®å¯¼å…¥åˆ° Kubernetes é›†ç¾¤ä¸­ã€‚&lt;/p&gt;&lt;p&gt;åœ¨ä½¿ç”¨ConfigMap æ—¶ï¼Œç”¨æˆ·å¯ä»¥å°†å…¶ä½œä¸ºä¸€ç§ç‹¬ç«‹çš„å¯¹è±¡åœ¨Kubernetes ä¸­è¿›è¡Œåˆ›å»ºå’Œç®¡ç†ã€‚ä¸€æ—¦åˆ›å»ºï¼ŒConfigMap å°±å¯ä»¥åœ¨Kubernetes ä¸­çš„ä»»ä½•å…¶ä»–èµ„æºä¸­ä½¿ç”¨ï¼Œå¦‚Pod å®šä¹‰ã€å®¹å™¨å®šä¹‰ã€ç¯å¢ƒå˜é‡ç­‰ã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡Kubernetes APIçš„Client åº“ã€kubectl å·¥å…·å’Œå…¶ä»–å®¢æˆ·ç«¯å·¥å…·è®¿é—®å’Œä¿®æ”¹ConfigMapã€‚&lt;/p&gt;&lt;p&gt;ä¸€ç§å¸¸è§çš„ConfigMap ä½¿ç”¨åœºæ™¯æ˜¯åœ¨Pod ä¸­ä½¿ç”¨ç¯å¢ƒå˜é‡æ¥è¿›è¡Œé…ç½®ã€‚ç”¨æˆ·å¯ä»¥åœ¨ConfigMap ä¸­å®šä¹‰æ‰€éœ€çš„å±æ€§ã€é…ç½®æ–‡ä»¶è·¯å¾„ç­‰ä¿¡æ¯ï¼Œéšååœ¨Pod å®šä¹‰æ–‡ä»¶ä¸­ä½¿ç”¨è¿™äº›ç¯å¢ƒå˜é‡å¼•ç”¨å®ƒä»¬ã€‚å½“Pod å¯åŠ¨æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨è¯»å–è¿™äº›ç¯å¢ƒå˜é‡å¹¶ä½¿ç”¨å®ƒä»¬æ¥é…ç½®åº”ç”¨ç¨‹åºã€‚&lt;/p&gt;&lt;p&gt;æ€»ç»“ï¼š&lt;/p&gt;&lt;p&gt;Configmap æ˜¯k8s ä¸­çš„èµ„æºå¯¹è±¡ï¼Œç”¨äºä¿å­˜éæœºå¯†æ€§çš„é…ç½®çš„ï¼Œæ•°æ®å¯ä»¥ç”¨key/value é”®å€¼å¯¹çš„å½¢å¼ä¿å­˜ï¼Œä¹Ÿå¯é€šè¿‡æ–‡ä»¶çš„å½¢å¼ä¿å­˜ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;åº”ç”¨åœºæ™¯&lt;a href=&quot;#åº”ç”¨åœºæ™¯&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;ConfigMap çš„åº”ç”¨åœºæ™¯åŒ…æ‹¬ä½†ä¸é™äºä»¥ä¸‹å‡ ç§ï¼š&lt;/p&gt;&lt;ol&gt;
&lt;li&gt;é…ç½®ç®¡ç†ï¼šé€šè¿‡ConfigMapï¼Œå¯ä»¥å°†åº”ç”¨ç¨‹åºæ‰€éœ€è¦çš„é…ç½®ä¿¡æ¯ç‹¬ç«‹å‡ºæ¥ï¼Œè®©ä¸åŒçš„åº”ç”¨ç¨‹åºå¯ä»¥å…±ç”¨åŒä¸€ä¸ªConfigMapï¼Œé¿å…äº†é‡å¤çš„é…ç½®ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;ç¯å¢ƒå˜é‡ç®¡ç†ï¼šå¯ä»¥å°†å®¹å™¨ä¸­çš„ç¯å¢ƒå˜é‡é›†ä¸­ç®¡ç†ï¼Œä¾¿äºç»´æŠ¤å’Œä¿®æ”¹ï¼ŒåŒæ—¶å¯ä»¥é¿å…æš´éœ²æ•æ„Ÿä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;å®¹å™¨é•œåƒç‰ˆæœ¬ç®¡ç†ï¼šå°†å®¹å™¨é•œåƒä½¿ç”¨çš„é…ç½®æ–‡ä»¶æ‰“åŒ…åˆ°ConfigMap ä¸­ï¼Œæ¯æ¬¡å‡çº§é•œåƒæ—¶éƒ½å¯ä»¥ä½¿ç”¨ç›¸åº”ç‰ˆæœ¬çš„ConfigMapã€‚&lt;/li&gt;
&lt;li&gt;å¤šèŠ‚ç‚¹éƒ¨ç½²ï¼šåœ¨å¤šä¸ªèŠ‚ç‚¹ä¸Šéƒ¨ç½²ç›¸åŒçš„åº”ç”¨ç¨‹åºæ—¶ï¼Œå¯ä»¥ä½¿ç”¨ConfigMapæ¥ä¼ é€’é…ç½®ä¿¡æ¯ï¼Œé¿å…é‡å¤é…ç½®ã€‚&lt;/li&gt;
&lt;li&gt;åŠ¨æ€é…ç½®ï¼šåº”ç”¨ç¨‹åºå¯ä»¥é€šè¿‡ç›‘æ§ConfigMap ä¸­çš„é…ç½®å˜åŒ–ï¼Œè‡ªåŠ¨æ›´æ–°é…ç½®ä¿¡æ¯ï¼Œå®ç°åŠ¨æ€é…ç½®ã€‚&lt;/li&gt;
&lt;/ol&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;ConfigMapçš„å±€é™æ€§&lt;a href=&quot;#configmapçš„å±€é™æ€§&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;ä¸æ”¯æŒæ•æ„Ÿæ•°æ®ï¼šConfigMap ä¸»è¦ç”¨äºå­˜å‚¨éæ•æ„Ÿçš„é…ç½®æ•°æ®ï¼Œä¾‹å¦‚ç¯å¢ƒå˜é‡ã€å‘½ä»¤è¡Œå‚æ•°ã€é…ç½®æ–‡ä»¶ç­‰ï¼Œå¦‚æœéœ€è¦å­˜å‚¨æ•æ„Ÿæ•°æ®ï¼Œåº”è¯¥ä½¿ç”¨Secretå¯¹è±¡ã€‚&lt;/li&gt;
&lt;li&gt;å®¹é‡é™åˆ¶ï¼šConfigMap åœ¨è®¾è®¡ä¸Šä¸æ˜¯ç”¨æ¥ä¿å­˜å¤§é‡æ•°æ®çš„ã€‚ConfigMapå¯¹è±¡çš„å¤§å°å­˜åœ¨ä¸€å®šçš„é™åˆ¶ï¼Œå•ä¸ªConfigMap æœ€å¤§å¯å®¹çº³æ•°æ®ä¸º1MBã€‚å½“éœ€è¦å­˜å‚¨çš„æ•°æ®é‡è¶…è¿‡1MB æ—¶ï¼Œéœ€è¦æ‹†åˆ†æˆå¤šä¸ªConfigMap æˆ–é€‰æ‹©å…¶ä»–å­˜å‚¨æ–¹å¼ï¼Œå¯ä»¥è€ƒè™‘æŒ‚è½½å­˜å‚¨å·æˆ–è€…ä½¿ç”¨ç‹¬ç«‹çš„æ•°æ®åº“æˆ–è€…æ–‡ä»¶æœåŠ¡ã€‚&lt;/li&gt;
&lt;/ol&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;åˆ›å»º configMap çš„å‡ ç§æ–¹æ³•&lt;a href=&quot;#åˆ›å»º-configmap-çš„å‡ ç§æ–¹æ³•&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;section&gt;&lt;h2&gt;ä½¿ç”¨èµ„æºæ¸…å•æ–‡ä»¶åˆ›å»º&lt;a href=&quot;#ä½¿ç”¨èµ„æºæ¸…å•æ–‡ä»¶åˆ›å»º&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;







































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å­—æ®µå&lt;/th&gt;&lt;th&gt;ç±»å‹&lt;/th&gt;&lt;th&gt;è¯´æ˜&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;apiVersion&lt;/code&gt;&lt;/td&gt;&lt;td&gt;string&lt;/td&gt;&lt;td&gt;å¿…å¡«ï¼Œé€šå¸¸ä¸º &lt;code&gt;v1&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;kind&lt;/code&gt;&lt;/td&gt;&lt;td&gt;string&lt;/td&gt;&lt;td&gt;å¿…å¡«ï¼Œ&lt;code&gt;ConfigMap&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;metadata&lt;/code&gt;&lt;/td&gt;&lt;td&gt;object&lt;/td&gt;&lt;td&gt;å¿…å¡«ï¼Œèµ„æºçš„å…ƒæ•°æ®&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;data&lt;/code&gt;&lt;/td&gt;&lt;td&gt;map&lt;/td&gt;&lt;td&gt;é…ç½®çš„é”®å€¼å¯¹ï¼Œå†…å®¹æ˜¯å­—ç¬¦ä¸²&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;binaryData&lt;/code&gt;&lt;/td&gt;&lt;td&gt;map&lt;/td&gt;&lt;td&gt;å¯é€‰ï¼Œbase64 ç¼–ç çš„äºŒè¿›åˆ¶æ•°æ®ï¼ˆå­—ç¬¦ä¸²ï¼‰&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;immutable&lt;/code&gt;&lt;/td&gt;&lt;td&gt;bool&lt;/td&gt;&lt;td&gt;å¯é€‰ï¼Œè®¾ç½®ä¸º &lt;code&gt;true&lt;/code&gt; è¡¨ç¤ºæ­¤ ConfigMap æ˜¯ä¸å¯å˜çš„ï¼ˆK8s v1.19+ï¼‰&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;ç¼–å†™èµ„æºæ–‡ä»¶æ¸…å•ï¼Œå¹¶æœ€ç»ˆä½¿ç”¨&lt;code&gt;kubectl apply -f&lt;/code&gt;åº”ç”¨é…ç½®&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;ä»æ–‡ä»¶åˆ›å»º&lt;a href=&quot;#ä»æ–‡ä»¶åˆ›å»º&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;ä»å•ä¸ªæ–‡ä»¶åˆ›å»º&lt;a href=&quot;#ä»å•ä¸ªæ–‡ä»¶åˆ›å»º&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kubectl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;create&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;configmap&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&amp;lt;configmap-name&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--from-file=&amp;lt;è·¯å¾„&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;ä¾‹å¦‚ï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kubectl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;create&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;configmap&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;nginx-config&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--from-file=nginx.conf&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;ä¼šåˆ›å»ºä¸€ä¸ªåä¸º &lt;code&gt;nginx-config&lt;/code&gt; çš„ ConfigMapï¼›&lt;/li&gt;
&lt;li&gt;&lt;code&gt;nginx.conf&lt;/code&gt; æ–‡ä»¶çš„å†…å®¹ä¼šå˜æˆ key ä¸º &lt;code&gt;nginx.conf&lt;/code&gt; çš„é”®å€¼å¯¹ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;ä» å•ä¸ªæ–‡ä»¶åˆ›å»ºå¹¶æŒ‡å®šé”®å&lt;a href=&quot;#ä»-å•ä¸ªæ–‡ä»¶åˆ›å»ºå¹¶æŒ‡å®šé”®å&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kubectl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;create&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;configmap&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;nginx-config&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--from-file=nginx.conf=/path/to/my-nginx.conf&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;æŒ‡å®š key åä¸º &lt;code&gt;nginx.conf&lt;/code&gt;ï¼Œå†…å®¹æ¥è‡ªè·¯å¾„æ–‡ä»¶ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;ä»æ•´ä¸ªç›®å½•åˆ›å»ºï¼ˆç›®å½•ä¸‹æ¯ä¸ªæ–‡ä»¶ä½œä¸ºä¸€ä¸ª keyï¼‰&lt;a href=&quot;#ä»æ•´ä¸ªç›®å½•åˆ›å»ºç›®å½•ä¸‹æ¯ä¸ªæ–‡ä»¶ä½œä¸ºä¸€ä¸ª-key&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kubectl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;create&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;configmap&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;nginx-config&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--from-file=./config-dir/&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;config-dir/&lt;/code&gt; ä¸‹æ‰€æœ‰æ–‡ä»¶éƒ½ä¼šä½œä¸º keyï¼›&lt;/li&gt;
&lt;li&gt;æ¯ä¸ªæ–‡ä»¶çš„å†…å®¹ä¼šæˆä¸ºè¯¥ key çš„å€¼ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;ä»å‘½ä»¤è¡Œç›´æ¥åˆ›å»ºï¼ˆé”®å€¼å¯¹å½¢å¼ï¼‰&lt;a href=&quot;#ä»å‘½ä»¤è¡Œç›´æ¥åˆ›å»ºé”®å€¼å¯¹å½¢å¼&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kubectl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;create&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;configmap&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&amp;lt;configmap-name&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--from-literal=&amp;lt;key&amp;gt;=&amp;lt;value&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;ä¾‹å¦‚ï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kubectl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;create&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;configmap&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;app-config&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;\&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;--from-literal=log_level=debug&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;\&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;--from-literal=port=8080&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;ä¼šåˆ›å»ºå¦‚ä¸‹ç»“æ„çš„ ConfigMapï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;data&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;log_level&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;debug&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;port&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;8080&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;å®è·µ&lt;a href=&quot;#å®è·µ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;section&gt;&lt;h2&gt;ä½¿ç”¨ ConfigMap ä¸º Nginx deployment æŒ‚è½½é…ç½®æ–‡ä»¶å’Œé¦–é¡µ&lt;a href=&quot;#ä½¿ç”¨-configmap-ä¸º-nginx-deployment-æŒ‚è½½é…ç½®æ–‡ä»¶å’Œé¦–é¡µ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;ConfigMap ä¸­å®šä¹‰ nginx é…ç½®&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;ConfigMap&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx-config&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;namespace&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;default&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;data&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;nginx.conf&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;|&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;server {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;listen 8080;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;server_name localhost;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;location / {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;root /usr/share/nginx/html;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;index index.html index.htm;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;index.html&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;|&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&amp;lt;html&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&amp;lt;body&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&amp;lt;h1&amp;gt;Hello World&amp;lt;/h1&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&amp;lt;/body&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&amp;lt;/html&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;Deployment ä¸­ä½¿ç”¨é…ç½®&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;apps/v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Deployment&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx-deployment&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;namespace&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;default&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;replicas&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;selector&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;matchLabels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;template&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;labels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;containers&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;image&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx:latest&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;ports&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;containerPort&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;8080&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;volumeMounts&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx-config-volume&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;mountPath&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/etc/nginx/conf.d/default.conf&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;subPath&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx.conf&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx-config-volume&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;mountPath&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/usr/share/nginx/html/index.html&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;27&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;subPath&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;index.html&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;28&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;volumes&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;29&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx-config-volume&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;# æŒ‚è½½å·åç§°&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;30&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;configMap&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;31&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx-config&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;# ä»åç§°ä¸ºnginx-configçš„configMapä¸­è¯»å–&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;subPath&lt;/code&gt;ä¸&lt;code&gt;mountPath&lt;/code&gt;ä¹‹é—´çš„å…³ç³»å¯ä»¥ç†è§£ä¸ºä½¿ç”¨ &lt;code&gt;subPath&lt;/code&gt; çš„æ–‡ä»¶å†…å®¹æ›¿æ¢äº†&lt;code&gt;mountPath&lt;/code&gt; çš„æ–‡ä»¶å†…å®¹ï¼Œå› æ­¤æŒ‚è½½çš„ä¸æ˜¯æ–‡ä»¶ï¼Œè€Œæ˜¯æ–‡ä»¶ä¸­çš„å†…å®¹ï¼ŒæŒ‚è½½åçš„ç»å¯¹è·¯å¾„ä»ç„¶å’Œå£°æ˜çš„&lt;code&gt;mountPath&lt;/code&gt; è·¯å¾„ç›¸åŒã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;ä½¿ç”¨ConfigMap ä¸º NodeJs åº”ç”¨ç¨‹åºæŒ‚è½½é¦–é¡µå¹¶æ³¨å…¥ç¯å¢ƒå˜é‡&lt;a href=&quot;#ä½¿ç”¨configmap-ä¸º-nodejs-åº”ç”¨ç¨‹åºæŒ‚è½½é¦–é¡µå¹¶æ³¨å…¥ç¯å¢ƒå˜é‡&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;NodeJs ç¨‹åº&lt;a href=&quot;#nodejs-ç¨‹åº&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;const&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;http&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;require&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&apos;http&apos;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;const&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;fs&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;require&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&apos;fs&apos;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;const&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;port&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;process&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;env&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;APP_PORT&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;||&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;3000&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;const&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;indexFilePath&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;/usr/share/app/index.html&apos;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;const&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;server&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;http&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;createServer&lt;/span&gt;&lt;span&gt;&lt;span&gt;((&lt;/span&gt;&lt;span&gt;req&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;res&lt;/span&gt;&lt;span&gt;) &lt;/span&gt;&lt;/span&gt;&lt;span&gt;=&amp;gt;&lt;/span&gt;&lt;span&gt; {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;fs&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;readFile&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;indexFilePath&lt;/span&gt;&lt;span&gt;, (&lt;/span&gt;&lt;span&gt;err&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;data&lt;/span&gt;&lt;span&gt;) &lt;/span&gt;&lt;/span&gt;&lt;span&gt;=&amp;gt;&lt;/span&gt;&lt;span&gt; {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt;&lt;span&gt; (&lt;/span&gt;&lt;span&gt;err&lt;/span&gt;&lt;span&gt;) {&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;res&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;writeHead&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;500&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;res&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;end&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&apos;Error loading index.html&apos;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;res&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;writeHead&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;200&lt;/span&gt;&lt;span&gt;, {&lt;/span&gt;&lt;span&gt;&apos;Content-Type&apos;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;text/html&apos;&lt;/span&gt;&lt;span&gt;});&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;res&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;end&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;data&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;});&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;});&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;server&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;listen&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;port&lt;/span&gt;&lt;span&gt;, () &lt;/span&gt;&lt;/span&gt;&lt;span&gt;=&amp;gt;&lt;/span&gt;&lt;span&gt; {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;console&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;log&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;`Server running on port &lt;/span&gt;&lt;span&gt;${&lt;/span&gt;&lt;span&gt;port&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;`&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;});&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;ConfigMapï¼ˆé…ç½®ç«¯å£å’Œä¸»é¡µå†…å®¹ï¼‰&lt;a href=&quot;#configmapé…ç½®ç«¯å£å’Œä¸»é¡µå†…å®¹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;ConfigMap&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nodejs-config&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;data&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;APP_PORT&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;8080&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;index.html&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;|&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&amp;lt;html&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&amp;lt;body&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&amp;lt;h1&amp;gt;Hello from ConfigMap!&amp;lt;/h1&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&amp;lt;/body&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&amp;lt;/html&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;Deploymentï¼ˆä½¿ç”¨ ConfigMap )&lt;a href=&quot;#deploymentä½¿ç”¨-configmap-&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;apps/v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Deployment&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nodejs-app&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;replicas&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;selector&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;matchLabels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nodejs&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;template&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;labels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nodejs&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;containers&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nodejs&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;image&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;chunyiwang/nodejs-app:latest&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;ports&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;containerPort&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;8080&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;env&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;APP_PORT&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;# è¯»å–ConfigMapä¸­çš„ç«¯å£é…ç½®&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;valueFrom&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;# ç¯å¢ƒå˜é‡æ³¨å…¥ï¼Œå¿…é¡»ä½¿ç”¨valueFromå­—æ®µ&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;                &lt;/span&gt;&lt;span&gt;configMapKeyRef&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;# ä»ConfigMapä¸­è¯»å–ç¯å¢ƒå˜é‡&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;                  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nodejs-config&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;# ConfigMapçš„åç§°&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;                  &lt;/span&gt;&lt;span&gt;key&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;APP_PORT&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;# é”®å€¼&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;volumeMounts&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;27&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;html-volume&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;28&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;mountPath&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/usr/share/app/index.html&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;29&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;subPath&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;index.html&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;30&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;volumes&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;# æŒ‚è½½å·&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;31&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;html-volume&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;# æŒ‚è½½å·åç§°&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;32&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;configMap&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;# æŒ‚è½½å·è¯»å–è‡ªConfigMapé…ç½®&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;33&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nodejs-config&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;Secret æ¦‚è¿°&lt;a href=&quot;#secret-æ¦‚è¿°&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;section&gt;&lt;h2&gt;ä»€ä¹ˆæ˜¯Secretï¼Ÿ&lt;a href=&quot;#ä»€ä¹ˆæ˜¯secret&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Kubernetes Secret æ˜¯ä¸€ç§ç”¨äºå­˜å‚¨æ•æ„Ÿæ•°æ®çš„Kubernetes APIå¯¹è±¡ã€‚Secret å¯ä»¥ç”¨äºå­˜å‚¨å¯†ç ã€å¯†é’¥ã€API ä»¤ç‰Œç­‰æ•æ„Ÿæ•°æ®ï¼Œå¹¶ç¡®ä¿è¿™äº›æ•°æ®ä¸è¢«æ˜æ–‡å­˜å‚¨æˆ–ä¼ è¾“ã€‚&lt;/p&gt;&lt;p&gt;Secret å¯ä»¥ä»¥å¤šç§æ–¹å¼åº”ç”¨äºKubernetes éƒ¨ç½²ä¸­ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥å°†Secretç”¨äºåˆ›å»ºPod å’Œå®¹å™¨ä¸­çš„ç¯å¢ƒå˜é‡ã€å‘½ä»¤è¡Œå‚æ•°å’Œå·ã€‚Secret å¯ä»¥é€šè¿‡Kubernetes API åˆ›å»ºï¼Œå®ƒå¯ä»¥å­˜å‚¨åŠ å¯†çš„æ•°æ®ï¼Œå¹¶åœ¨éœ€è¦ä½¿ç”¨æ•æ„Ÿæ•°æ®æ—¶å°†å…¶è§£å¯†ã€‚&lt;/p&gt;&lt;p&gt;Kubernetes Secret é€šè¿‡ä½¿ç”¨åŠ å¯†å’Œè§£å¯†æœºåˆ¶æ¥ç¡®ä¿æ•æ„Ÿæ•°æ®çš„å®‰å…¨ã€‚å¯ä»¥ä½¿ç”¨å¤šç§ç±»å‹çš„Secretï¼Œä¾‹å¦‚&lt;code&gt;Opaque Secret&lt;/code&gt;ã€&lt;code&gt;TLS Secret&lt;/code&gt;ã€&lt;code&gt;docker-registrySecret&lt;/code&gt; ç­‰ã€‚é€šå¸¸ï¼ŒSecret çš„ä½¿ç”¨æ˜¯åœ¨Kubernetes Pod æˆ–Deployment ä¸­è®¾ç½®ç¯å¢ƒå˜é‡æˆ–æŒ‚è½½åˆ°å®¹å™¨ä¸­ä½¿ç”¨ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;Secret åº”ç”¨åœºæ™¯&lt;a href=&quot;#secret-åº”ç”¨åœºæ™¯&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;éƒ¨ç½²Web åº”ç”¨ç¨‹åºï¼šä½ å¯ä»¥ä½¿ç”¨Secret æ¥å­˜å‚¨æ•°æ®åº“å¯†ç ã€API å¯†é’¥ã€è¯ä¹¦ç­‰ä¿¡æ¯ï¼Œå¹¶å°†å…¶ä½œä¸ºç¯å¢ƒå˜é‡æ³¨å…¥åˆ°ä½ çš„åº”ç”¨ç¨‹åºä¸­&lt;/li&gt;
&lt;li&gt;éƒ¨ç½²SSL è¯ä¹¦ï¼šå¦‚æœæ‚¨éœ€è¦ä½¿ç”¨HTTPS åŠ å¯†åè®®æ¥ä¿æŠ¤Web åº”ç”¨ç¨‹åºçš„é€šä¿¡ï¼Œæ‚¨å¯ä»¥å°†SSL è¯ä¹¦å­˜å‚¨åœ¨ä¸€ä¸ªTLS ç±»å‹çš„Secret ä¸­ï¼Œå¹¶å°†å…¶æŒ‚è½½åˆ°Podçš„å·ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;éƒ¨ç½²ç§æœ‰å®¹å™¨ä»“åº“ï¼šå¦‚æœæ‚¨éœ€è¦è®¿é—®æ‚¨è‡ªå·±çš„ç§æœ‰Docker å®¹å™¨ä»“åº“ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨docker-registry ç±»å‹çš„Secret æ¥å­˜å‚¨Docker ç™»å½•çš„ç”¨æˆ·åå’Œå¯†ç ï¼Œå¹¶å°†å…¶ä½œä¸ºç¯å¢ƒå˜é‡æ³¨å…¥åˆ°æ‚¨çš„éƒ¨ç½²ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;éƒ¨ç½²ç¬¬ä¸‰æ–¹æœåŠ¡é›†æˆï¼šå¦‚æœä½ éœ€è¦ä¸ç¬¬ä¸‰æ–¹API é›†æˆï¼Œæ‚¨å¯ä»¥ä½¿ç”¨Secretæ¥å­˜å‚¨API å¯†é’¥å’Œè¯ä¹¦ç­‰æ•æ„Ÿä¿¡æ¯ï¼Œå¹¶å°†å…¶ä½œä¸ºç¯å¢ƒå˜é‡æ³¨å…¥åˆ°ä½ çš„åº”ç”¨ç¨‹åºä¸­ã€‚è¿™æ ·å¯ä»¥ä¿æŠ¤ä½ çš„API å¯†é’¥å’Œè¯ä¹¦ä¸è¢«å…¬å¼€ã€‚&lt;/li&gt;
&lt;/ol&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;Secret å¸¸ç”¨ç±»å‹&lt;a href=&quot;#secret-å¸¸ç”¨ç±»å‹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;åœ¨Kubernetes ä¸­ï¼Œæœ‰ä»¥ä¸‹äº”ç§ä¸»è¦ç±»å‹çš„Secret å¯¹è±¡ï¼š&lt;/p&gt;&lt;ol&gt;
&lt;li&gt;&lt;code&gt;Opaque&lt;/code&gt;ï¼šOpaque ç±»å‹æ˜¯æœ€å¸¸ç”¨çš„Secret ç±»å‹ï¼Œç”¨äºå­˜å‚¨ä»»æ„ç±»å‹çš„æ•°æ®ã€‚å®ƒå¯ä»¥å­˜å‚¨ä»»ä½•æ ¼å¼çš„è¯ä¹¦ã€å¯†é’¥ã€å¯†ç ç­‰ï¼Œä½†æ˜¯ä¸æä¾›åŠ å¯†åŠŸèƒ½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;TLS&lt;/code&gt;ï¼šç”¨äºå­˜å‚¨å…¬é’¥ã€ç§é’¥å’ŒCA è¯ä¹¦ç­‰ç”¨äºTLS è¿æ¥çš„æ•°æ®ã€‚ä½¿ç”¨TLSç±»å‹çš„Secret å¯ä»¥è§£å†³éƒ¨ç½²SSL è¯ä¹¦çš„é—®é¢˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Docker Registry&lt;/code&gt;ï¼šDocker Registry ç±»å‹ç”¨äºåœ¨Kubernetes ä¸­è®¾ç½®ç§æœ‰Docker Registryï¼Œå­˜å‚¨ç”¨æˆ·åå’Œå¯†ç ç­‰è®¤è¯ä¿¡æ¯ä»¥ä¾¿Pod ä¸­çš„å®¹å™¨ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Service Account&lt;/code&gt;ï¼šService Account ç±»å‹Secret ç”¨äºä¿å­˜Kubernetesé›†ç¾¤ä¸­çš„Service Account Token å’ŒCA è¯ä¹¦ä¿¡æ¯ï¼Œå……å½“ç”¨äºä»£è¡¨Pod çš„æ ‡è¯†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Generic&lt;/code&gt;ï¼šç”¨äºä»¥key-value å½¢å¼å­˜å‚¨æ•°æ®çš„Secretï¼Œä¸Opaque ç±»å‹ç±»ä¼¼ã€‚è¿™ç§ç±»å‹çš„Secret å…è®¸æ‚¨ä½¿ç”¨ä¸åŒçš„ç¼–ç ï¼ˆ&lt;code&gt;base64&lt;/code&gt;ã€&lt;code&gt;ascii&lt;/code&gt;ï¼‰åŠ å¯†æ•°æ®ï¼Œä½†ä¹Ÿä¸æä¾›åŠ å¯†åŠŸèƒ½ã€‚&lt;/li&gt;
&lt;/ol&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;åˆ›å»ºä¸è°ƒç”¨ Secret&lt;a href=&quot;#åˆ›å»ºä¸è°ƒç”¨-secret&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;section&gt;&lt;h2&gt;Secret å¯ç”¨å­—æ®µ&lt;a href=&quot;#secret-å¯ç”¨å­—æ®µ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;


































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å­—æ®µå&lt;/th&gt;&lt;th&gt;å–å€¼ç±»å‹&lt;/th&gt;&lt;th&gt;è¯´æ˜&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;apiVersion&lt;/code&gt;&lt;/td&gt;&lt;td&gt;string&lt;/td&gt;&lt;td&gt;Api ç‰ˆæœ¬&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;data&lt;/code&gt;&lt;/td&gt;&lt;td&gt;map[string]string&lt;/td&gt;&lt;td&gt;ç”¨äºå­˜å‚¨Secret ä¸­çš„å®é™…æ•°æ®ï¼Œè¿™äº›æ•°æ®é€šå¸¸æ˜¯è¢«base64 ç¼–ç çš„äºŒè¿›åˆ¶æ•°æ®ã€‚&lt;br /&gt;åœ¨ä¸€ä¸ªSecret å¯¹è±¡ä¸­ï¼Œå¯ä»¥å®šä¹‰å¤šä¸ªé”®-å€¼å¯¹ï¼Œæ¯ä¸ªé”®å€¼å¯¹éƒ½ä¼šè¢«åŠ å¯†å¹¶ä¿å­˜åœ¨data å­—æ®µä¸­ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;immutable&lt;/code&gt;&lt;/td&gt;&lt;td&gt;boolean&lt;/td&gt;&lt;td&gt;immutable å­—æ®µæ¥æŒ‡ç¤ºè¯¥Secret åœ¨åˆ›å»ºåæ˜¯å¦å¯ä»¥è¢«ä¿®æ”¹ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;stringData&lt;/code&gt;&lt;/td&gt;&lt;td&gt;map[string]string&lt;/td&gt;&lt;td&gt;é™¤äº†ä½¿ç”¨data å­—æ®µå­˜å‚¨Secret ä¸­çš„æ•°æ®ä»¥å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨stringData å­—æ®µã€‚stringData å­—æ®µä¸data å­—æ®µç±»ä¼¼ï¼Œéƒ½æ˜¯ç”¨æ¥å­˜å‚¨Secret ä¸­çš„é”®å€¼å¯¹ã€‚ä¸åŒä¹‹å¤„åœ¨äºï¼ŒstringData å­—æ®µä¸­çš„æ•°æ®ä¸éœ€è¦åƒdata å­—æ®µä¸­çš„æ•°æ®ä¸€æ ·å…ˆè¿›è¡Œbase64 ç¼–ç ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;type&lt;/code&gt;&lt;/td&gt;&lt;td&gt;string&lt;/td&gt;&lt;td&gt;type å­—æ®µæŒ‡å®šäº†ç”¨äºæŒ‡å®šçš„Secret æ•°æ®çš„ç¼–ç å’Œåºåˆ—åŒ–æ ¼å¼ã€‚&lt;br /&gt;Kubernetes ä¸­å…·æœ‰ä»¥ä¸‹ä¸‰ç§ç±»å‹çš„Secret ç±»å‹ï¼š&lt;br /&gt;+ &lt;code&gt;Opaque&lt;/code&gt;ï¼šè¿™æ˜¯é»˜è®¤å€¼ï¼Œé€‚ç”¨äºä»»ä½•ç±»å‹çš„Secretï¼ŒåŒ…æ‹¬äºŒè¿›åˆ¶æ•°æ®ã€‚&lt;br /&gt;+ &lt;code&gt;kubernetes.io/service-account-token&lt;/code&gt;ï¼šæ­¤ç±»å‹ä½¿ç”¨JWTæ ¼å¼å­˜å‚¨æœåŠ¡è´¦æˆ·ä»¤ç‰Œå’ŒCA è¯ä¹¦ã€‚&lt;br /&gt;+ &lt;code&gt;kubernetes.io/dockerconfigjson&lt;/code&gt;ï¼šæ­¤ç±»å‹ç”¨äºå¸¦æœ‰Dockerè®¤è¯ä»¤ç‰Œçš„Secretã€‚&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;Secret èµ„æºæ¸…å•æ–‡ä»¶ç¤ºä¾‹&lt;a href=&quot;#secret-èµ„æºæ¸…å•æ–‡ä»¶ç¤ºä¾‹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;åˆ›å»ºä¸€ä¸ª &lt;code&gt;secret&lt;/code&gt; å­˜å‚¨ &lt;code&gt;mysql&lt;/code&gt; æ•°æ®åº“çš„ root ç”¨æˆ·å¯†ç &lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Secret&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;mysql-secret&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Opaque&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;stringData&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;MYSQL_ROOT_PASSWORD&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;123456&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;MYSQL_DATABASE&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;my_db&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;---&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# æˆ–è€…ä½¿ç”¨dataï¼Œæ‰‹åŠ¨å¯¹æ˜æ–‡è¿›è¡Œbase64ç¼–ç åå†™å…¥æ–‡ä»¶&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Secret&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;mysql-secret&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Opaque&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;data&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;MYSQL_ROOT_PASSWORD&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;MTIzNDU2Cg==&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;MYSQL_DATABASE&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;bXlfZGIK&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;åœ¨å·¥ä½œèµ„æºçš„æ¸…å•æ–‡ä»¶ä¸­è°ƒç”¨ Secret&lt;a href=&quot;#åœ¨å·¥ä½œèµ„æºçš„æ¸…å•æ–‡ä»¶ä¸­è°ƒç”¨-secret&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;é€šè¿‡ç¯å¢ƒå˜é‡ä½¿ç”¨ Secret&lt;a href=&quot;#é€šè¿‡ç¯å¢ƒå˜é‡ä½¿ç”¨-secret&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;section&gt;&lt;h4&gt;ä½¿ç”¨ envFrom&lt;a href=&quot;#ä½¿ç”¨-envfrom&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;apps/v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Deployment&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;mysql&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;replicas&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;selector&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;matchLabels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;mysql&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;template&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;labels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;mysql&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;containers&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;mysql&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;image&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;mysql:8.0&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;ports&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;containerPort&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;3306&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;envFrom&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;secretRef&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;                &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;mysql-secret&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;volumeMounts&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;mysql-data&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;mountPath&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/var/lib/mysql&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;volumes&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;27&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;mysql-data&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;28&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;emptyDir&lt;/span&gt;&lt;span&gt;: {}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;ä½¿ç”¨ valueFrom&lt;a href=&quot;#ä½¿ç”¨-valuefrom&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;apps/v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Deployment&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;mysql&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;replicas&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;selector&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;matchLabels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;mysql&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;template&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;labels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;mysql&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;containers&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;mysql&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;image&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;mysql:8.0&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;ports&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;containerPort&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;3306&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;env&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;MYSQL_ROOT_PASSWORD&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;#envçš„nameå°±æ˜¯å®¹å™¨ä¸­çš„ç¯å¢ƒå˜é‡å&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;valueFrom&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;                &lt;/span&gt;&lt;span&gt;secretKeyRef&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;                  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;mysql-secret&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;                  &lt;/span&gt;&lt;span&gt;key&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;MYSQL_ROOT_PASSWORD&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;# keyæ˜¯å¯¹secreté”®å€¼å¯¹çš„å¼•ç”¨ï¼Œæ²¡æœ‰å®é™…æ„ä¹‰ï¼Œä¹Ÿå¯ä»¥å«åˆ«çš„&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;MYSQL_DATABASE&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;27&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;valueFrom&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;28&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;                &lt;/span&gt;&lt;span&gt;secretKeyRef&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;29&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;                  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;mysql-secret&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;30&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;                  &lt;/span&gt;&lt;span&gt;key&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;MYSQL_DATABASE&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;31&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;volumeMounts&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;32&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;mysql-data&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;33&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;mountPath&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/var/lib/mysql&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;34&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;volumes&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;35&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;mysql-data&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;36&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;emptyDir&lt;/span&gt;&lt;span&gt;: {}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;ä¸¤è€…çš„åŒºåˆ«&lt;a href=&quot;#ä¸¤è€…çš„åŒºåˆ«&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;&lt;code&gt;envFrom&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;ul&gt;
&lt;li&gt;ä¸€æ¬¡æ€§å¯¼å…¥ Secret ä¸­çš„æ‰€æœ‰é”®å€¼å¯¹ï¼›&lt;/li&gt;
&lt;li&gt;å®¹å™¨ä¸­ç¯å¢ƒå˜é‡å &lt;strong&gt;å°±æ˜¯ Secret ä¸­çš„é”®å&lt;/strong&gt;ï¼›å¦‚æœ Secret ä¸­æœ‰å®¹å™¨é•œåƒä¸è¯†åˆ«çš„é”®åï¼Œå˜é‡è™½å¯¼å…¥ä½†æ²¡å®é™…æ•ˆæœï¼›&lt;/li&gt;
&lt;li&gt;ä¸èƒ½ä¿®æ”¹ç¯å¢ƒå˜é‡åï¼Œä¹Ÿä¸èƒ½é€‰æ‹©éƒ¨åˆ†é”®å€¼å¯¼å…¥ï¼›&lt;/li&gt;
&lt;li&gt;é€‚åˆ Secret å˜é‡æœ¬èº«åç§°å°±ç¬¦åˆé•œåƒè¦æ±‚ï¼Œä¸”å¸Œæœ›å¿«é€Ÿæ‰¹é‡å¯¼å…¥çš„åœºæ™¯ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;ol&gt;
&lt;li&gt;&lt;code&gt;valueFrom&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;ul&gt;
&lt;li&gt;é€æ¡å¯¼å…¥ Secret ä¸­çš„æŒ‡å®šé”®ï¼›&lt;/li&gt;
&lt;li&gt;&lt;code&gt;env.name&lt;/code&gt; å†³å®šå®¹å™¨ä¸­ç¯å¢ƒå˜é‡çš„åå­—ï¼Œå¯ä»¥è‡ªå®šä¹‰ä¸ºä»»ä½•æœ‰æ•ˆå˜é‡åï¼›&lt;/li&gt;
&lt;li&gt;Secret ä¸­çš„é”®åå¯ä»¥æ˜¯ä»»æ„å­—ç¬¦ä¸²ï¼Œæ— éœ€ç¬¦åˆå®¹å™¨é•œåƒé¢„å®šä¹‰çš„ç¯å¢ƒå˜é‡åï¼›&lt;/li&gt;
&lt;li&gt;é€‚åˆéœ€è¦é‡å‘½åå˜é‡æˆ–åªå¼•ç”¨éƒ¨åˆ† Secret æ•°æ®çš„åœºæ™¯ï¼›&lt;/li&gt;
&lt;li&gt;æ›´çµæ´»ã€ç»†ç²’åº¦çš„æ§åˆ¶ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;ä½¿ç”¨ volumeMounts æŒ‚è½½ Secret åˆ°å®¹å™¨&lt;a href=&quot;#ä½¿ç”¨-volumemounts-æŒ‚è½½-secret-åˆ°å®¹å™¨&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;å°†ä¸¤ä¸ª token æŒ‚è½½åˆ°å®¹å™¨&lt;code&gt;/etc/tokens&lt;/code&gt; ç›®å½•ä¸‹&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Secret&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;node-web-tokens&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Opaque&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;stringData&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;token1&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;Xgr00l4rVvWDc7TpATAdKFZclSUHuK8PlYiTYqIGzG6lLumMaSZkv06j3t9ksiAy&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;token2&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;dqhrqXHCCPhEJq91auj4qVY7oMubecuA97ACIwkwtEvp8MYt8e5m9EgOuYOFXq0r&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;ç¼–å†™ Deployment&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;apps/v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Deployment&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;node-web&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;replicas&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;selector&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;matchLabels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;node-web&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;template&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;labels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;node-web&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;containers&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;node-web&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;image&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;node-web:v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;ports&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;containerPort&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;8080&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;volumeMounts&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;token-volume&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;mountPath&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/etc/tokens&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;volumes&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;token-volume&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;secret&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;secretName&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;node-web-tokens&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;27&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;items&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;28&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;key&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;token1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;29&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;path&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;token1.txt&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;30&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;key&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;token2&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;31&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;path&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;token2.txt&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;æˆ–è€…&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;...&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;containers&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;node-web&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;image&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;node-web:v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;volumeMounts&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;token-volume&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;mountPath&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/etc/tokens/token1.txt&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;subPath&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;token1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;token-volume&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;mountPath&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/etc/tokens/token2.txt&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;subPath&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;token2&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;volumes&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;token-volume&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;secret&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;secretName&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;node-web-tokens&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;æ•ˆæœæ˜¯å®Œå…¨ç›¸åŒçš„&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;Reloader å®ç° ConfigMap/Secret çƒ­æ›´æ–°&lt;a href=&quot;#reloader-å®ç°-configmapsecret-çƒ­æ›´æ–°&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;section&gt;&lt;h2&gt;é¡¹ç›®åœ°å€&lt;a href=&quot;#é¡¹ç›®åœ°å€&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/stakater/Reloader&quot;&gt;stakater/Reloader&lt;/a&gt;&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;å·¥ä½œåŸç†&lt;a href=&quot;#å·¥ä½œåŸç†&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;å®‰è£…å’Œé…ç½®Reloader&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;é¦–å…ˆï¼Œéœ€è¦åœ¨Kubernetes é›†ç¾¤ä¸­å®‰è£…å’Œé…ç½®Reloaderã€‚&lt;/p&gt;&lt;ol&gt;
&lt;li&gt;ç›‘å¬ConfigMap æ›´æ”¹&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;ä¸€æ—¦Reloader éƒ¨ç½²å¹¶å¯åŠ¨ï¼Œå®ƒä¼šå¼€å§‹ç›‘å¬ConfigMap/Secret èµ„æºã€‚å½“èµ„æºå‘ç”Ÿå˜åŒ–æ—¶ï¼ŒReloader ä¼šæ•è·è¿™äº›æ›´æ”¹å¹¶è§¦å‘é‡æ–°åŠ è½½æ“ä½œã€‚&lt;/p&gt;&lt;ol&gt;
&lt;li&gt;é‡æ–°åŠ è½½åº”ç”¨ç¨‹åº&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;å½“ConfigMap/Secret å‘ç”Ÿæ›´æ”¹æ—¶ï¼ŒReloader ä¼šè‡ªåŠ¨é‡æ–°åŠ è½½åº”ç”¨ç¨‹åºï¼Œä»¥ä¾¿å®ƒèƒ½å¤Ÿä½¿ç”¨æœ€æ–°çš„é…ç½®æ•°æ®ã€‚è¿™å¯ä»¥é€šè¿‡é‡å¯å®¹å™¨ã€ä½¿ç”¨çƒ­é‡è½½æœºåˆ¶æˆ–ä½¿ç”¨å…¶ä»–é€‚å½“çš„æœºåˆ¶æ¥å®Œæˆã€‚&lt;/p&gt;&lt;ol&gt;
&lt;li&gt;éªŒè¯å’Œæµ‹è¯•&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;åœ¨åº”ç”¨ç¨‹åºé‡æ–°åŠ è½½åï¼Œå¼€å‘äººå‘˜å¯ä»¥éªŒè¯é…ç½®æ˜¯å¦å·²æˆåŠŸæ›´æ–°ï¼Œå¹¶è¿›è¡Œå¿…è¦çš„æµ‹è¯•ä»¥ç¡®ä¿ä¸€åˆ‡æ­£å¸¸å·¥ä½œã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;éƒ¨ç½² Reloader&lt;a href=&quot;#éƒ¨ç½²-reloader&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/stakater/Reloader/blob/master/deployments/kubernetes/reloader.yaml&quot;&gt;https://github.com/stakater/Reloader/blob/master/deployments/kubernetes/reloader.yaml&lt;/a&gt;&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kubectl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;apply&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-f&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;reloader.yaml&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;å®è·µ&lt;a href=&quot;#å®è·µ-1&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;éƒ¨ç½²ä¸€ä¸ª mysql æœåŠ¡&lt;a href=&quot;#éƒ¨ç½²ä¸€ä¸ª-mysql-æœåŠ¡&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;ConfigMap&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;mysql&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;labels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;mysql&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;data&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;my.cnf&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;|&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;[mysqld]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;server-id=1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;---&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;apps/v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Deployment&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;mysql&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;annotations&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;reloader.stakater.com/auto&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;true&quot;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;# åªè¦éƒ¨ç½²æŒ‚è½½çš„ConfigMap æˆ–è€…secret æœ‰æ›´æ–°ï¼Œåˆ™æ»šåŠ¨æ›´æ–°ã€‚&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;replicas&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;selector&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;matchLabels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;mysql&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;template&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;labels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;mysql&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;27&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;28&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;containers&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;29&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;mysql&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;30&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;image&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;mysql:8.0&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;31&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;volumeMounts&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;32&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;mysql-config&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;33&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;mountPath&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/tmp/config/my.cnf&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;34&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;subPath&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;my-test.cnf&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;35&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;volumes&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;36&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;mysql-config&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;37&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;configMap&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;38&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;mysql&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;39&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;items&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;40&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;          &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;key&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;my.cnf&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;41&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;path&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;my-test.cnf&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;åœ¨ Kubernetes ä¸­ï¼Œå½“ä½¿ç”¨ &lt;code&gt;ConfigMap&lt;/code&gt;ï¼ˆæˆ– &lt;code&gt;Secret&lt;/code&gt;ï¼‰ä½œä¸ºå·æŒ‚è½½åˆ° Pod ä¸­æ—¶ï¼Œå¯ä»¥é€šè¿‡ &lt;code&gt;items&lt;/code&gt; å­—æ®µä¸­çš„ &lt;code&gt;key&lt;/code&gt; å’Œ &lt;code&gt;path&lt;/code&gt; å®ç°ç²¾ç¡®æ§åˆ¶ã€‚&lt;/p&gt;&lt;p&gt;ä½œç”¨ï¼š&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;ä» ConfigMap ä¸­é€‰æ‹©æŒ‡å®šçš„ &lt;code&gt;key&lt;/code&gt;ï¼›&lt;/li&gt;
&lt;li&gt;å°†å…¶æŒ‚è½½ä¸ºå®¹å™¨æ–‡ä»¶ç³»ç»Ÿä¸­çš„ä¸€ä¸ªå…·ä½“æ–‡ä»¶ï¼Œå¹¶ä½¿ç”¨ &lt;code&gt;path&lt;/code&gt; æŒ‡å®šæ–‡ä»¶åã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ç”¨é€”ï¼š&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;ç²¾é€‰æŒ‚è½½éƒ¨åˆ†é…ç½®ï¼Œè€Œéæ•´ä¸ª ConfigMapï¼›&lt;/li&gt;
&lt;li&gt;æ§åˆ¶æŒ‚è½½è¿›å®¹å™¨å†…æ–‡ä»¶çš„å‘½åï¼ˆå¯ä¸åº”ç”¨æœŸæœ›è·¯å¾„åŒ¹é…ï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;æ”¯æŒå¤šä¸ª key æŒ‚è½½åˆ°ä¸åŒæ–‡ä»¶è·¯å¾„ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;æ‰©å±•annotations æ³¨è§£&lt;a href=&quot;#æ‰©å±•annotations-æ³¨è§£&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;å¦‚æœä¸€ä¸ªéƒ¨ç½²ä¸­æœ‰å¤šä¸ªConfigMap æˆ–è€…Secretï¼Œé‚£ä¹ˆåªæƒ³æŒ‡å®šçš„ConfigMapæˆ–è€…Secret æ›´æ–°çš„è¯æ‰æ›´æ–°è¿™ä¸ªéƒ¨ç½²ï¼Œå¯ä»¥æŒ‡å®šåç§°ï¼Œä¾‹å¦‚ï¼š&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# æ›´æ–°å•ä¸ªæˆ–å¤šä¸ªconfigmap èµ„æº&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Deployment&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;annotations&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;configmap.reloader.stakater.com/reload&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;a-configmap,b-configmap&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;template&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;...&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# æ›´æ–°å•ä¸ªæˆ–å¤šä¸ªsecret èµ„æº&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Deployment&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;annotations&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;secret.reloader.stakater.com/reload&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;a-secret,b-secret&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;template&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;...&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;</content:encoded></item><item><title>ä½¿ç”¨Terraforméƒ¨ç½²Azureèµ„æº</title><link>https://white-festa.net/posts/terraform-azure-k8s/</link><guid isPermaLink="true">https://white-festa.net/posts/terraform-azure-k8s/</guid><description>ä½¿ç”¨Terraforméƒ¨ç½²Azure Kuberneteså’ŒContainer Regsitry</description><pubDate>Mon, 15 Jul 2024 00:00:00 GMT</pubDate><content:encoded>&lt;section&gt;&lt;h1&gt;ä½¿ç”¨Terraforméƒ¨ç½²Azure Kuberneteså’ŒContainer Regsitry&lt;a href=&quot;#ä½¿ç”¨terraforméƒ¨ç½²azure-kuberneteså’Œcontainer-regsitry&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;åŸºç¡€è®¾æ–½å³ä»£ç ï¼ˆInfrastructure as Codeï¼Œç®€ç§° IaCï¼‰æ˜¯ä¸€ç§é€šè¿‡ä»£ç ç®¡ç†å’Œè‡ªåŠ¨åŒ–éƒ¨ç½²åŸºç¡€è®¾æ–½çš„æ–¹æ³•ã€‚éšç€äº‘è®¡ç®—çš„å‘å±•ï¼Œæ‰‹åŠ¨é…ç½®å’Œç®¡ç†èµ„æºçš„å¤æ‚æ€§ä¸æ—¥ä¿±å¢ï¼ŒIaC é€šè¿‡å°†åŸºç¡€è®¾æ–½çš„é…ç½®ä¸åº”ç”¨ä»£ç ä¸€æ ·è¿›è¡Œç‰ˆæœ¬æ§åˆ¶å’Œè‡ªåŠ¨åŒ–éƒ¨ç½²ï¼Œå¤§å¤§æé«˜äº†éƒ¨ç½²æ•ˆç‡ã€å¯é æ€§å’Œå¯é‡å¤æ€§ã€‚&lt;br /&gt;
Terraformæ˜¯ç›®å‰æœ€æµè¡Œçš„ IaC å·¥å…·ä¹‹ä¸€ï¼Œå®ƒèƒ½é€šè¿‡å®šä¹‰â€œè®¡åˆ’æ–‡ä»¶â€æ¥æè¿°äº‘èµ„æºï¼Œç”¨æˆ·å¯ä»¥ç”¨å®ƒæ¥ç®¡ç†å„ç§åŸºç¡€è®¾æ–½ï¼ŒåŒ…æ‹¬è™šæ‹Ÿæœºã€ç½‘ç»œã€å­˜å‚¨ã€å®¹å™¨æœåŠ¡ç­‰ã€‚å®ƒçš„ä¼˜åŠ¿åœ¨äºå¯¹å¤šç§äº‘å¹³å°çš„æ”¯æŒï¼Œæ— è®ºæ˜¯ AWSã€Azureã€Google Cloudï¼Œè¿˜æ˜¯æœ¬åœ°çš„ç§æœ‰äº‘ï¼ŒTerraform éƒ½èƒ½å¤Ÿå¸®åŠ©ç”¨æˆ·è‡ªåŠ¨åŒ–éƒ¨ç½²å¤æ‚çš„äº‘ç¯å¢ƒã€‚&lt;br /&gt;
æœ¬æ–‡å°†è®¨è®ºå¦‚ä½•ä½¿ç”¨ Terraform åœ¨ Azure å¹³å°ä¸Šè‡ªåŠ¨åŒ–éƒ¨ç½² Kubernetes é›†ç¾¤å’Œé•œåƒå­˜å‚¨åº“ï¼ˆå¦‚ Azure Container Registryï¼‰ã€‚é€šè¿‡å°† Terraform ä¸ Azure äº‘å¹³å°ç»“åˆï¼Œå¯ä»¥è½»æ¾å®ç° Kubernetes é›†ç¾¤çš„è‡ªåŠ¨åŒ–ç®¡ç†ã€é•œåƒçš„é›†ä¸­å­˜å‚¨ä¸ç®¡ç†ï¼Œä»¥åŠå…¶ä»– Azure èµ„æºçš„å¯é‡å¤åˆ›å»ºå’Œç®¡ç†ã€‚&lt;/p&gt;&lt;section&gt;&lt;h2&gt;ç¼–å†™Terraformè„šæœ¬&lt;a href=&quot;#ç¼–å†™terraformè„šæœ¬&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;å®šä¹‰Provider&lt;a href=&quot;#å®šä¹‰provider&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Provider æ˜¯ Terraform è¿æ¥å¹¶æ“ä½œå„ç§åŸºç¡€è®¾æ–½å¹³å°ï¼ˆå¦‚äº‘æœåŠ¡ã€SaaS åº”ç”¨ç¨‹åºæˆ–è‡ªå®šä¹‰ APIï¼‰çš„ç»„ä»¶ã€‚å®ƒæä¾›äº† Terraform è®¿é—®è¿™äº›å¹³å°çš„èµ„æºæ¥å£ï¼Œä»è€Œå…è®¸ç”¨æˆ·é€šè¿‡ Terraform é…ç½®å’Œç®¡ç†è¿™äº›èµ„æºã€‚æ¯ä¸ª provider éƒ½æ”¯æŒå¤šä¸ªå…·ä½“èµ„æºï¼ˆresourceï¼‰ï¼Œæ¯”å¦‚è™šæ‹Ÿæœºã€å­˜å‚¨æ¡¶ã€æ•°æ®åº“ç­‰ã€‚&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;terraform&lt;/span&gt;&lt;span&gt; { &lt;/span&gt;&lt;span&gt;# Terraformå…¨å±€é…ç½®&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;required_providers&lt;/span&gt;&lt;span&gt; {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;azurerm &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;source&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&quot;hashicorp/azurerm&quot;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;# Provideræ¥æºåœ°å€&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;version&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&quot;~&amp;gt; 3.71.0&quot;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;# Providerçš„ç‰ˆæœ¬è¦æ±‚ï¼Œ~&amp;gt; è¡¨ç¤ºå…¼å®¹æ€§ç¬¦å·ï¼Œå³å…è®¸ä½¿ç”¨ 3.71.x ç³»åˆ—çš„ä»»ä½•ç‰ˆæœ¬&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;required_version &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;&amp;gt;= 1.5.6&quot;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;# Terraform CLI çš„æœ€ä½ç‰ˆæœ¬è¦æ±‚&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;provider&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;azurerm&quot;&lt;/span&gt;&lt;span&gt; {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;# featuresï¼šå…è®¸å¼€å¯æˆ–å…³é—­æŸäº› Azure Provider çš„åŠŸèƒ½æˆ–ç‰¹æ€§ï¼Œæ­¤å­—æ®µæ˜¯å¿…éœ€çš„ï¼Œå³ä½¿ä¸è¿›è¡Œä»»ä½•é…ç½®&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;features&lt;/span&gt;&lt;span&gt; {}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;åˆ›å»ºèµ„æºç»„&lt;a href=&quot;#åˆ›å»ºèµ„æºç»„&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;resource&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;azurerm_resource_group&quot;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;deakinuni&quot;&lt;/span&gt;&lt;span&gt; {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;var.&lt;/span&gt;&lt;span&gt;resource_group_name&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;location &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;var.&lt;/span&gt;&lt;span&gt;location&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;nameæ˜¯èµ„æºç»„åç§°ï¼Œlocationæ˜¯èµ„æºç»„å®ä¾‹çš„ç‰©ç†èŠ‚ç‚¹ä½ç½®ï¼Œä»–ä»¬çš„å€¼ä¼šåœ¨åé¢çš„&lt;code&gt;variables.tf&lt;/code&gt;é…ç½®æ–‡ä»¶ä¸­è®¾ç½®&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;åˆ›å»ºContainer Registry&lt;a href=&quot;#åˆ›å»ºcontainer-registry&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;resource&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;azurerm_container_registry&quot;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;container_registry&quot;&lt;/span&gt;&lt;span&gt; {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;var.&lt;/span&gt;&lt;span&gt;app_name&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;resource_group_name &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;var.&lt;/span&gt;&lt;span&gt;resource_group_name&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;location &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;var.&lt;/span&gt;&lt;span&gt;location&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;admin_enabled &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;# å¯ç”¨ç®¡ç†å‘˜æƒé™&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;sku &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;Basic&quot;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;# æœåŠ¡å®šä»·å±‚çº§(Stock Keeping Unit)ï¼Œç›®å‰ä½¿ç”¨çš„æ˜¯æœ€ä¾¿å®œçš„Basicçº§&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;åˆ›å»ºKubernetes Cluster&lt;a href=&quot;#åˆ›å»ºkubernetes-cluster&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;resource&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;azurerm_kubernetes_cluster&quot;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;kubernetes_cluster&quot;&lt;/span&gt;&lt;span&gt; {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;var.&lt;/span&gt;&lt;span&gt;app_name&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;location &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;var.&lt;/span&gt;&lt;span&gt;location&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;resource_group_name &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;var.&lt;/span&gt;&lt;span&gt;resource_group_name&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;dns_prefix &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;var.&lt;/span&gt;&lt;span&gt;app_name&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;kubernetes_version &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;var.&lt;/span&gt;&lt;span&gt;kubernetes_version&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;default_node_pool&lt;/span&gt;&lt;span&gt; { &lt;/span&gt;&lt;span&gt;# è¯¥é…ç½®å£°æ˜èŠ‚ç‚¹æ± çš„èŠ‚ç‚¹æ•°é‡å’ŒèŠ‚ç‚¹é…ç½®&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;name &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;default&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;node_count &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;vm_size &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;standard_B2s&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;identity&lt;/span&gt;&lt;span&gt; { &lt;/span&gt;&lt;span&gt;# ä½¿ç”¨æ‰˜ç®¡èº«ä»½ï¼Œç”±ç³»ç»Ÿè‡ªåŠ¨åˆ†é…ï¼Œè¿™æ ·ä¸éœ€è¦æ˜¾å¼åœ°ç®¡ç†å‡­æ®ã€‚&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;type &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;SystemAssigned&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# å®šä¹‰Azureè§’è‰²åˆ†é…ï¼Œç”¨äºå°†Azure Container Registryçš„AcrPullæƒé™åˆ†é…ç»™Kubernetesé›†ç¾¤ä¸­çš„kubeletèº«ä»½ï¼Œä»¥ä¾¿KubernetesèŠ‚ç‚¹èƒ½å¤Ÿä»å®¹å™¨æ³¨å†Œè¡¨æ‹‰å–é•œåƒ&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;resource&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;azurerm_role_assignment&quot;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;role_assignment&quot;&lt;/span&gt;&lt;span&gt; {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;# ä¸»ä½“IDï¼Œåœ¨è¿™é‡Œæ˜¯Kubernetesé›†ç¾¤ä¸­çš„kubeletç»„ä»¶&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;principal_id &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;azurerm_kubernetes_cluster.&lt;/span&gt;&lt;span&gt;kubernetes_cluster&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;kubelet_identity&lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;].&lt;/span&gt;&lt;span&gt;object_id&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;# è¡¨ç¤ºè§’è‰²åˆ†é…çš„ä½œç”¨åŸŸï¼Œå³è¯¥è§’è‰²å¯ä»¥è®¿é—®çš„èµ„æºï¼Œåœ¨è¿™é‡Œæ˜¯æŒ‡çš„æ˜¯Azureå®¹å™¨æ³¨å†Œè¡¨çš„èµ„æºIDï¼Œå³Kubernetesé›†ç¾¤çš„kubeletèº«ä»½å¯ä»¥è®¿é—®è¯¥å®¹å™¨æ³¨å†Œè¡¨&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;scope &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;azurerm_container_registry.&lt;/span&gt;&lt;span&gt;container_registry&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;id&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;# åˆ†é…çš„æƒé™ï¼šAcrPullæ˜¯ä¸€ä¸ªAzureå†…ç½®çš„è§’è‰²ï¼Œå…è®¸ä¸»ä½“ä»Azure Container Registryä¸­æ‹‰å–é•œåƒ&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;27&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;role_definition_name &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;AcrPull&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;28&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;29&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;# è·³è¿‡Azure Active Directory (AAD) æ£€æŸ¥ï¼Œå¯ä»¥åŠ é€Ÿè§’è‰²åˆ†é…è¿‡ç¨‹&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;30&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;skip_service_principal_aad_check &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;31&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;åˆ›å»ºå˜é‡é…ç½®æ–‡ä»¶variables.tf&lt;a href=&quot;#åˆ›å»ºå˜é‡é…ç½®æ–‡ä»¶variablestf&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;variable&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;resource_group_name&quot;&lt;/span&gt;&lt;span&gt; {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;default &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;deakinuni&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;variable&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;location&quot;&lt;/span&gt;&lt;span&gt; {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;default &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;australiaeast&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;variable&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;app_name&quot;&lt;/span&gt;&lt;span&gt; {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;default &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;task92c&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;variable&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;kubernetes_version&quot;&lt;/span&gt;&lt;span&gt; {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;default &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;1.30.3&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;åº”ç”¨Terraformè„šæœ¬&lt;a href=&quot;#åº”ç”¨terraformè„šæœ¬&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;åˆå§‹åŒ–å·¥ä½œç›®å½•&lt;a href=&quot;#åˆå§‹åŒ–å·¥ä½œç›®å½•&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;åœ¨terraformè„šæœ¬çš„ç›®å½•ä¸­æ‰§è¡Œå‘½ä»¤&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;terraform&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;init&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;è¿™æ¡å‘½ä»¤ä¼šæ ¹æ®è„šæœ¬é…ç½®ä¸‹è½½å¿…è¦çš„Provideræ’ä»¶ï¼Œå¦‚æœé…ç½®ä¸­ä½¿ç”¨äº†å¤–éƒ¨æ¨¡å—ä¹Ÿä¼šä¸‹è½½å¯¹åº”çš„å†…å®¹ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;ç”Ÿæˆå¹¶æ˜¾ç¤ºåŸºç¡€è®¾æ–½å˜æ›´è®¡åˆ’&lt;a href=&quot;#ç”Ÿæˆå¹¶æ˜¾ç¤ºåŸºç¡€è®¾æ–½å˜æ›´è®¡åˆ’&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;terraform&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;plan&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;è¯¥å‘½ä»¤å¸®åŠ©ç”¨æˆ·åœ¨åº”ç”¨æ›´æ”¹ä¹‹å‰ï¼Œé¢„è§ˆ Terraform é…ç½®æ–‡ä»¶çš„æ›´æ”¹å¯¹ç°æœ‰åŸºç¡€è®¾æ–½çš„å½±å“ï¼›æ­¤å‘½ä»¤ä¸ä¼šå¯¹åŸºç¡€è®¾ç½®äº§ç”Ÿå®é™…å½±å“ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;åº”ç”¨é…ç½®&lt;a href=&quot;#åº”ç”¨é…ç½®&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;terraform&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;apply&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;è¯¥å‘½ä»¤åˆ‡å®åœ°å°†terraformé…ç½®é€šè¿‡Provideråº”ç”¨åˆ°å¯¹åº”çš„äº‘å¹³å°ï¼Œåœ¨ä¸å­˜åœ¨è¯­æ³•é”™è¯¯æˆ–ä½™é¢ä¸è¶³ç­‰æƒ…å†µä¸‹ï¼Œè¯¥å‘½ä»¤åº”è¯¥ä¼šæ‰§è¡ŒæˆåŠŸã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;æ’¤é”€éƒ¨ç½²&lt;a href=&quot;#æ’¤é”€éƒ¨ç½²&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;terraform&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;destroy&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;è¯¥å‘½ä»¤ä¼šæ ¹æ®è„šæœ¬æ–‡ä»¶åˆ é™¤å…¨éƒ¨çš„åŸºç¡€è®¾æ–½ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;</content:encoded></item><item><title>Kuberneteså­¦ä¹ ç¬”è®°åï¼šKubernetes StatefulSetæ§åˆ¶å™¨</title><link>https://white-festa.net/posts/kubernetes-tutorial/statefulset/</link><guid isPermaLink="true">https://white-festa.net/posts/kubernetes-tutorial/statefulset/</guid><description>ä½¿ç”¨StatefulSetæ§åˆ¶å™¨ç®¡ç†éƒ¨ç½²åœ¨Kubernetesä¸­çš„æœ‰çŠ¶æ€åº”ç”¨</description><pubDate>Mon, 15 Jul 2024 00:00:00 GMT</pubDate><content:encoded>&lt;section&gt;&lt;h1&gt;å®šä¹‰&lt;a href=&quot;#å®šä¹‰&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;StatefulSet æ˜¯Kubernetes ä¸­çš„ä¸€ç§æ§åˆ¶å™¨ï¼Œç”¨äºç®¡ç†æœ‰çŠ¶æ€åº”ç”¨ç¨‹åºçš„éƒ¨ç½²ã€‚&lt;/p&gt;&lt;p&gt;ç›¸æ¯”äºDeployment æ§åˆ¶å™¨ï¼ŒStatefulSet æ§åˆ¶å™¨å…è®¸&lt;u&gt;æœ‰åº&lt;/u&gt;ä¸”&lt;u&gt;å”¯ä¸€&lt;/u&gt;çš„å‘½åï¼Œæ¯ä¸ªPod å¯ä»¥ç»‘å®šåˆ°ä¸åŒçš„æŒä¹…å·ï¼Œæœ‰åºçš„è¿›è¡Œå¯åŠ¨å’Œåœæ­¢ï¼Œä»¥åŠæœ‰åºçš„è¿›è¡Œæ°´å¹³æ‰©å±•å’Œç¼©å°ã€‚è¿™ä½¿å¾—StatefulSet æ§åˆ¶å™¨é€‚åˆè¿è¡Œ&lt;u&gt;æœ‰çŠ¶æ€&lt;/u&gt;åº”ç”¨ç¨‹åºï¼Œå¦‚æ•°æ®åº“ã€ç¼“å­˜å’Œæ¶ˆæ¯é˜Ÿåˆ—ç­‰åº”ç”¨ã€‚&lt;/p&gt;&lt;section&gt;&lt;h2&gt;StatefulSet ç»„æˆ&lt;a href=&quot;#statefulset-ç»„æˆ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;æ§åˆ¶å™¨ï¼ˆControllerï¼‰ï¼šæ§åˆ¶å’Œç®¡ç†è¿è¡ŒStatefulSet çš„Podã€‚&lt;/li&gt;
&lt;li&gt;æŒä¹…å­˜å‚¨ï¼ˆPersistent Storageï¼‰ï¼šStatefulSet æ§åˆ¶å™¨ä½¿ç”¨æŒä¹…å·å°†æ•°æ®ä¿å­˜åœ¨å­˜å‚¨èŠ‚ç‚¹ã€‚&lt;/li&gt;
&lt;li&gt;Headless Serviceï¼šç”¨æ¥å®šä¹‰pod ç½‘è·¯æ ‡è¯†ï¼Œç”Ÿæˆå¯è§£æçš„DNS è®°å½•&lt;/li&gt;
&lt;/ol&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;ä»€ä¹ˆæ˜¯Headless service?&lt;a href=&quot;#ä»€ä¹ˆæ˜¯headless-service&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Headless Service &lt;u&gt;æ²¡æœ‰å›ºå®šçš„Cluster IP åœ°å€&lt;/u&gt;ï¼Œè€Œæ˜¯ç›´æ¥&lt;u&gt;è¿”å›Pod çš„DNSåç§°åˆ—è¡¨&lt;/u&gt;ã€‚è¿™ç§æœåŠ¡æ–¹å¼ç§°ä¸º&lt;code&gt;headless&lt;/code&gt;ï¼Œå› ä¸ºå®ƒä¸ä¼šè´Ÿè´£ç›‘å¬å¯¹åº”çš„DNSåç§°ï¼Œä¹Ÿä¸å­˜åœ¨è™šæ‹ŸIP åœ°å€ï¼Œæ‰€æœ‰çš„è®¿é—®è¯·æ±‚éƒ½ä¼šç›´æ¥è½¬å‘åˆ°Pod ä¸Šã€‚è¿™ä¸ªåŠŸèƒ½éå¸¸é€‚åˆäºå¯¹äºéœ€è¦è®¿é—®ç‰¹å®šçš„Pod çš„åº”ç”¨ç¨‹åºï¼Œä¾‹å¦‚ä¸€äº›åˆ†å¸ƒå¼ç³»ç»Ÿã€‚&lt;/p&gt;&lt;p&gt;Headless Service ä¸æ™®é€šService çš„æœ€å¤§åŒºåˆ«åœ¨äºï¼Œå®ƒè¿”å›çš„ä¸æ˜¯ä¸€ä¸ªCluster IPï¼Œè€Œæ˜¯ä¸€ä¸ªDNS åç§°åˆ—è¡¨ã€‚ä½¿ç”¨Headless Service æ—¶ï¼Œéœ€è¦&lt;u&gt;è®¾ç½®Service çš„clusterIP å­—æ®µä¸ºç©º&lt;/u&gt;ï¼Œåœ¨Service çš„&lt;code&gt;spec &lt;/code&gt;å­—æ®µä¸­è®¾ç½®&lt;code&gt;clusterIP: None&lt;/code&gt;ã€‚é€šè¿‡è¿™ç§æ–¹å¼åˆ›å»ºçš„Headless Serviceï¼Œä¼šåœ¨DNS æœåŠ¡å™¨ä¸­æ³¨å†Œä¸€ä¸ªåŸŸåï¼Œç”¨æ¥è¯†åˆ«Service åç§°ã€‚å¯¹äºæ¯ä¸ªService åç§°ï¼ŒKubernetes å°†è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªä¸å®ƒåŒ¹é…çš„åŸŸåï¼Œå½¢å¼ä¸ºï¼š&lt;code&gt;my-service.my-namespace.svc.cluster.local&lt;/code&gt;ï¼Œå…¶ä¸­ï¼Œ&lt;code&gt;my-service&lt;/code&gt; æ˜¯ Headless Service çš„åç§°ï¼Œ&lt;code&gt;my-namespace&lt;/code&gt; æ˜¯Headless Service æ‰€å¤„çš„å‘½åç©ºé—´ã€‚&lt;/p&gt;&lt;p&gt;StatefulSet ä¼šä¸ºå…³è”çš„Pod åˆ†é…ä¸€ä¸ªdnsNameï¼š&lt;/p&gt;&lt;p&gt;&lt;code&gt;$&amp;lt;Pod Name&amp;gt;.$&amp;lt;service name&amp;gt;.$&amp;lt;namespace name&amp;gt;.svc.cluster.local&lt;/code&gt;&lt;/p&gt;&lt;p&gt;æ€»ä¹‹ï¼ŒHeadless Service æ˜¯ä¸€ç§ç”¨äºè®¿é—®Kubernetes é›†ç¾¤å†…éƒ¨çš„Pod çš„æœåŠ¡æ–¹å¼ï¼Œé€‚ç”¨äºéœ€è¦éå†æ•´ä¸ªPod åˆ—è¡¨çš„åº”ç”¨ç¨‹åºï¼ŒåŒæ—¶é¿å…ä½¿ç”¨Cluster IPçš„åœºæ™¯ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;StatefulSet èµ„æºå®šä¹‰&lt;a href=&quot;#statefulset-èµ„æºå®šä¹‰&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;



























































































































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å­—æ®µå&lt;/th&gt;&lt;th&gt;ç±»å‹&lt;/th&gt;&lt;th&gt;è¯´æ˜&lt;/th&gt;&lt;th&gt;æ˜¯å¦å¿…å¡«&lt;/th&gt;&lt;th&gt;å¤‡æ³¨&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;apiVersion&lt;/code&gt;&lt;/td&gt;&lt;td&gt;string&lt;/td&gt;&lt;td&gt;apps/v1&lt;/td&gt;&lt;td&gt;æ˜¯&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;replicas&lt;/code&gt;&lt;/td&gt;&lt;td&gt;integer&lt;/td&gt;&lt;td&gt;å‰¯æœ¬æ•°ï¼ŒæŒ‡å®š StatefulSet éœ€è¦è¿è¡Œçš„ Pod æ•°é‡&lt;/td&gt;&lt;td&gt;å¦&lt;/td&gt;&lt;td&gt;é»˜è®¤å€¼ä¸º 1&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;serviceName&lt;/code&gt;&lt;/td&gt;&lt;td&gt;string&lt;/td&gt;&lt;td&gt;ä¸ StatefulSet å…³è”çš„ Headless Service åç§°ï¼Œç”¨äºç¨³å®šç½‘ç»œæ ‡è¯†å’Œ DNS è§£æ&lt;/td&gt;&lt;td&gt;æ˜¯&lt;/td&gt;&lt;td&gt;å¿…é¡»æ˜¯å·²æœ‰çš„ Headless Service åç§°&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;selector&lt;/code&gt;&lt;/td&gt;&lt;td&gt;LabelSelector&lt;/td&gt;&lt;td&gt;Pod æ ‡ç­¾é€‰æ‹©å™¨ï¼Œç”¨äºåŒ¹é… StatefulSet ç®¡ç†çš„ Pod&lt;/td&gt;&lt;td&gt;æ˜¯&lt;/td&gt;&lt;td&gt;å¿…é¡»ä¸ &lt;code&gt;template.metadata.labels&lt;/code&gt; åŒ¹é…&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;template&lt;/code&gt;&lt;/td&gt;&lt;td&gt;PodTemplateSpec&lt;/td&gt;&lt;td&gt;Pod æ¨¡æ¿ï¼Œå®šä¹‰ StatefulSet ä¸­å„ Pod çš„è¯¦ç»†è§„æ ¼&lt;/td&gt;&lt;td&gt;æ˜¯&lt;/td&gt;&lt;td&gt;åŒ…å« Pod çš„ metadata å’Œ spec&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;volumeClaimTemplates&lt;/code&gt;&lt;/td&gt;&lt;td&gt;[]PersistentVolumeClaim&lt;/td&gt;&lt;td&gt;PVC æ¨¡æ¿åˆ—è¡¨ï¼Œä¸ºæ¯ä¸ª Pod åŠ¨æ€åˆ›å»ºæŒä¹…å·å£°æ˜&lt;/td&gt;&lt;td&gt;å¦&lt;/td&gt;&lt;td&gt;å¸¸ç”¨äºæœ‰çŠ¶æ€åº”ç”¨çš„æŒä¹…å­˜å‚¨ï¼ˆè¯¥å­—æ®µä¸ºæ¯ä¸ª Pod åˆ›å»º PVCï¼Œå¦‚æœåœ¨é…ç½®æ–‡ä»¶ä¸­åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„ PVC å¹¶ç»‘å®šï¼Œå®é™…ä¸Šä¸Šå¤šä¸ª Pod å…±äº«ä¸€ä¸ª PVCï¼‰&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;updateStrategy&lt;/code&gt;&lt;/td&gt;&lt;td&gt;StatefulSetUpdateStrategy&lt;/td&gt;&lt;td&gt;æ›´æ–°ç­–ç•¥ï¼Œæ§åˆ¶ StatefulSet æ›´æ–°æ–¹å¼&lt;/td&gt;&lt;td&gt;å¦&lt;/td&gt;&lt;td&gt;é»˜è®¤ä¸º &lt;code&gt;RollingUpdate&lt;/code&gt;ï¼Œæœ‰ä¸€ä¸ªå¯ç”¨å­—æ®µ &lt;code&gt;partition&lt;/code&gt; æŒ‡å®šä»å“ªä¸ªå‰¯æœ¬å¼€å§‹æ»šåŠ¨æ›´æ–°ï¼ˆ0-basedç´¢å¼•ï¼‰   ï¼Œå¯é€‰ &lt;code&gt;OnDelete&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;podManagementPolicy&lt;/code&gt;&lt;/td&gt;&lt;td&gt;string&lt;/td&gt;&lt;td&gt;Pod ç®¡ç†ç­–ç•¥ï¼Œæ§åˆ¶ Pod åˆ›å»ºå’Œåˆ é™¤çš„é¡ºåº&lt;/td&gt;&lt;td&gt;å¦&lt;/td&gt;&lt;td&gt;å¯é€‰ &lt;code&gt;OrderedReady&lt;/code&gt;ï¼ˆé»˜è®¤ï¼‰æˆ– &lt;code&gt;Parallel&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;revisionHistoryLimit&lt;/code&gt;&lt;/td&gt;&lt;td&gt;integer&lt;/td&gt;&lt;td&gt;ä¿ç•™æ—§ç‰ˆæœ¬çš„æ•°é‡&lt;/td&gt;&lt;td&gt;å¦&lt;/td&gt;&lt;td&gt;é»˜è®¤ä¸º 10&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;minReadySeconds&lt;/code&gt;&lt;/td&gt;&lt;td&gt;integer&lt;/td&gt;&lt;td&gt;Pod å‡†å¤‡å°±ç»ªçŠ¶æ€éœ€æŒç»­çš„æœ€çŸ­æ—¶é—´ï¼ˆç§’ï¼‰ï¼Œç”¨äºæå‡æœåŠ¡ç¨³å®šæ€§&lt;/td&gt;&lt;td&gt;å¦&lt;/td&gt;&lt;td&gt;é»˜è®¤ 0&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;ordinals&lt;/code&gt;&lt;/td&gt;&lt;td&gt;object&lt;/td&gt;&lt;td&gt;å®šä¹‰ StatefulSet Pod çš„åºå·èŒƒå›´ï¼ŒåŒ…å« &lt;code&gt;start&lt;/code&gt; å’Œ &lt;code&gt;end&lt;/code&gt; ä¸¤ä¸ªæ•´æ•°&lt;/td&gt;&lt;td&gt;å¦&lt;/td&gt;&lt;td&gt;ç”¨äºæŒ‡å®š Pod åºå·åŒºé—´ï¼ˆé—­åŒºé—´ï¼‰&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;ordinals.start  &lt;/code&gt;&lt;/td&gt;&lt;td&gt;integer&lt;/td&gt;&lt;td&gt;Pod åºå·èµ·å§‹å€¼ï¼ˆåŒ…å«è¯¥å€¼ï¼‰&lt;/td&gt;&lt;td&gt;å¦&lt;/td&gt;&lt;td&gt;é»˜è®¤ä¸º 0&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;ordinals.end  &lt;/code&gt;&lt;/td&gt;&lt;td&gt;integer&lt;/td&gt;&lt;td&gt;Pod åºå·ç»“æŸå€¼ï¼ˆåŒ…å«è¯¥å€¼ï¼‰&lt;/td&gt;&lt;td&gt;å¦&lt;/td&gt;&lt;td&gt;é»˜è®¤ä¸º &lt;code&gt;replicas-1&lt;/code&gt;ï¼Œä¸è¶…è¿‡å‰¯æœ¬æ•°èŒƒå›´&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;serviceName  &lt;/code&gt;&lt;/td&gt;&lt;td&gt;string&lt;/td&gt;&lt;td&gt;å…³è”çš„ &lt;strong&gt;Headless Service&lt;/strong&gt; åç§°ï¼Œç”¨äº StatefulSet Pod çš„ç¨³å®šç½‘ç»œæ ‡è¯†å’Œ DNSï¼ˆå¦‚ &lt;code&gt;web-0.web.default.svc.cluster.local&lt;/code&gt;ï¼‰&lt;/td&gt;&lt;td&gt;æ˜¯&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;podManagementPolicy  &lt;/code&gt;&lt;/td&gt;&lt;td&gt;string&lt;/td&gt;&lt;td&gt;æ§åˆ¶ Pod çš„åˆ›å»ºå’Œåˆ é™¤é¡ºåºæ–¹å¼ã€‚&lt;/td&gt;&lt;td&gt;å¦&lt;/td&gt;&lt;td&gt;å¯é€‰å€¼ï¼š   â€¢ &lt;code&gt;OrderedReady&lt;/code&gt;: é¡ºåºåˆ›å»ºå’Œåˆ é™¤ï¼ˆé»˜è®¤ï¼‰   â€¢ &lt;code&gt;Parallel&lt;/code&gt;: å¹¶è¡Œåˆ›å»ºå’Œåˆ é™¤&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;persistentVolumeClaimRetentionPolicy  &lt;/code&gt;&lt;/td&gt;&lt;td&gt;string&lt;/td&gt;&lt;td&gt;æ§åˆ¶ StatefulSet è¢«åˆ é™¤æˆ–ç¼©å®¹æ—¶ï¼ŒPod å¯¹åº”çš„ PVC æ˜¯å¦ä¿ç•™æˆ–åˆ é™¤ã€‚&lt;/td&gt;&lt;td&gt;å¦&lt;/td&gt;&lt;td&gt;åŒ…æ‹¬ä¸¤ä¸ªå­å­—æ®µï¼š&lt;code&gt;whenDeleted&lt;/code&gt; å’Œ &lt;code&gt;whenScaled&lt;/code&gt;ã€‚éœ€è¦ Kubernetes &lt;strong&gt;v1.25+&lt;/strong&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;ç¤ºä¾‹&lt;a href=&quot;#ç¤ºä¾‹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;ä½¿ç”¨ StatefulSet éƒ¨ç½² Web ç«™ç‚¹å¹¶ä½¿ç”¨ nfs-provisioner åˆ›å»ºæŒä¹…åŒ–å­˜å‚¨&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# Serviceç½‘ç»œå…¥å£&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Service&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;labels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;ports&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;port&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;80&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;targetPort&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;clusterIP&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;None&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;selector&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;---&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# åˆ›å»ºStatefulSet&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;apps/v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;StatefulSet&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;selector&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;matchLabels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;serviceName&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;nginx&quot;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;# é€‰æ‹©ä¹‹å‰åˆ›å»ºçš„serviceä½œä¸ºç½‘ç»œå…¥å£&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;27&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;replicas&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;# 2ä¸ªå‰¯æœ¬&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;28&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;updateStrategy&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;29&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;RollingUpdate&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;30&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;template&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;31&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;32&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;labels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;33&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;34&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;35&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;containers&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;36&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;37&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;image&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx:latest&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;38&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;ports&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;39&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;containerPort&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;80&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;40&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;41&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;volumeMounts&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;42&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;www&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;# ä½¿ç”¨ä¸‹é¢å£°æ˜çš„PVC&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;43&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;mountPath&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/usr/share/nginx/html&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;# æŒ‚è½½ç‚¹&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;44&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;volumeClaimTemplates&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;45&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;46&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;www&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;# PVCçš„åç§°&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;47&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;48&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;accessModes&lt;/span&gt;&lt;span&gt;: [&lt;/span&gt;&lt;span&gt;&quot;ReadWriteOnce&quot;&lt;/span&gt;&lt;span&gt;] &lt;/span&gt;&lt;span&gt;# å…è®¸å•èŠ‚ç‚¹è¯»å†™&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;49&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;storageClassName&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;nfs-storage&quot;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;# ä½¿ç”¨å…ˆå‰åˆ›å»ºçš„nfs-storageå­˜å‚¨ç±»è‡ªåŠ¨ä¸ºPodè¯·æ±‚å­˜å‚¨å·&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;50&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;resources&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;51&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;requests&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;52&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;storage&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;500Mi&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;# è¯·æ±‚500Må¤§å°çš„å­˜å‚¨å·&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;StatefulSet çš„å›æ»šå’Œæ›´æ–°&lt;a href=&quot;#statefulset-çš„å›æ»šå’Œæ›´æ–°&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;ol&gt;
&lt;li&gt;æ›´æ–°é•œåƒ&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;containers&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;image&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;tomcat:latest&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;ports&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;containerPort&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;80&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;volumeMounts&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;www&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;# ä½¿ç”¨ä¸‹é¢å£°æ˜çš„PVC&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;mountPath&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/usr/share/nginx/html&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;# æŒ‚è½½ç‚¹&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;åº”ç”¨èµ„æºæ¸…å•æ–‡ä»¶&lt;/li&gt;
&lt;li&gt;æŸ¥çœ‹ StatefulSet&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[root@microk8s-85 /opt/tutorial/statefulset]#kubectl get statefulset -o wide&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;NAME&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;READY&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;AGE&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;CONTAINERS&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;IMAGES&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;web&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;2/2&lt;/span&gt;&lt;span&gt;     &lt;/span&gt;&lt;span&gt;33m&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;nginx&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;tomcat:latest&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;è·å– StatefulSet çš„å†å²ç‰ˆæœ¬&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[root@microk8s-85 /opt/tutorial/statefulset]#kubectl rollout history statefulset web&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;statefulset.apps/web&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;REVISION&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;CHANGE-CAUSE&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;         &lt;/span&gt;&lt;span&gt;&amp;lt;none&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;# ç¬¬ä¸€ä¸ªç‰ˆæœ¬&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;         &lt;/span&gt;&lt;span&gt;&amp;lt;none&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;# å½“å‰ç‰ˆæœ¬&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;å›é€€&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[root@microk8s-85 /opt/tutorial/statefulset]#kubectl rollout undo statefulset web &lt;/span&gt;&lt;span&gt;--to-revision&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;statefulset.apps/web&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;rolled&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;back&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;ä¿®æ”¹èµ„æºæ¸…å•æ–‡ä»¶ï¼Œå°†é•œåƒæ”¹å›æˆ &lt;code&gt;nginx:latest&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;/section&gt;</content:encoded></item><item><title>Kuberneteså­¦ä¹ ç¬”è®°ä¹ï¼šKubernetes æ•°æ®å­˜å‚¨æŒä¹…åŒ–</title><link>https://white-festa.net/posts/kubernetes-tutorial/kubernetes-%E6%8C%81%E4%B9%85%E5%8C%96%E5%AD%98%E5%82%A8/</link><guid isPermaLink="true">https://white-festa.net/posts/kubernetes-tutorial/kubernetes-%E6%8C%81%E4%B9%85%E5%8C%96%E5%AD%98%E5%82%A8/</guid><description>ä»‹ç»äº†Kubernetesä¸­å‡ ç§æ•°æ®æŒä¹…åŒ–çš„æ–¹æ³•</description><pubDate>Tue, 11 Jun 2024 00:00:00 GMT</pubDate><content:encoded>&lt;section&gt;&lt;h1&gt;EmptyDir ç©ºç›®å½•å­˜å‚¨&lt;a href=&quot;#emptydir-ç©ºç›®å½•å­˜å‚¨&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;section&gt;&lt;h2&gt;ä»‹ç»&lt;a href=&quot;#ä»‹ç»&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;EmptyDir æ˜¯ Kubernetes ä¸­çš„æŒä¹…æ€§å­˜å‚¨å·ï¼Œå®ƒå¯ä»¥åœ¨ Pod &lt;code&gt;ç”Ÿå‘½å‘¨æœŸå†…&lt;/code&gt;æŒä¹…åŒ–ä¿å­˜æ•°æ®ã€‚&lt;/p&gt;&lt;p&gt;å½“å®¹å™¨ä½¿ç”¨ EmptyDir æ—¶ï¼ŒKubernetes ä¼šåœ¨èŠ‚ç‚¹ä¸Šä¸ºå…¶åˆ†é…ä¸€ä¸ªç©ºç›®å½•ã€‚åœ¨ Pod çš„ç”Ÿå‘½å‘¨æœŸå†…ï¼Œæ­¤ç›®å½•ä¸€ç›´å­˜åœ¨ï¼Œå¯ä»¥åœ¨å®¹å™¨ä¹‹é—´å…±äº«ï¼Œå³ä½¿ Pod é‡å¯ï¼Œæ•°æ®ä¹Ÿä¿æŒä¸å˜ã€‚&lt;/p&gt;&lt;p&gt;ç„¶è€Œï¼ŒEmptyDir ä»…æ”¯æŒåœ¨&lt;code&gt;å•ä¸ªèŠ‚ç‚¹&lt;/code&gt;ä¸ŠæŒä¹…åŒ–å­˜å‚¨ï¼Œå¦‚æœè¯¥èŠ‚ç‚¹æ•…éšœæˆ– Pod è¿ç§»åˆ°å…¶ä»–èŠ‚ç‚¹ï¼Œæ•°æ®ä¼šä¸¢å¤±ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;ä½¿ç”¨&lt;a href=&quot;#ä½¿ç”¨&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;å£°æ˜èµ„æºæ¸…å•æ–‡ä»¶&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Pod&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;labels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;run&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;pod-empty&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;pod-empty&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;containers&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;pod-empty&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;image&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx:latest&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;ports&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;containerPort&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;80&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;volumeMounts&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;empty-volume&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;mountPath&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/cache&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;# å°†ä¸‹é¢å£°æ˜çš„EmptyDiræŒ‚è½½åˆ°å®¹å™¨ä¸­çš„/cacheç›®å½•&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;volumes&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;empty-volume&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;emptyDir&lt;/span&gt;&lt;span&gt;: {}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;restartPolicy&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Always&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;åº”ç”¨é…ç½®&lt;/li&gt;
&lt;li&gt;éªŒè¯æŒ‚è½½
&lt;ol&gt;
&lt;li&gt;é¦–å…ˆè·å– pod çš„ uid&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[root@microk8s-85 /opt/tutorial/storage/emptydir]#kubectl get pod pod-empty -o yaml | &lt;/span&gt;&lt;span&gt;grep&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;uid&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;uid:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;9c594be2-3cef-4e1e-94ff-cb0d3133c3bd&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;2. æŸ¥çœ‹`/var/lib/kubelet/pods/$POD_UID/volumes`ç›®å½•å¯ä»¥çœ‹åˆ°æŒ‚è½½åˆ°å®¹å™¨ä¸­çš„ç›®å½•&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[root@microk8s-85 /opt/tutorial/storage/emptydir]#tree /var/lib/kubelet/pods/9c594be2-3cef-4e1e-94ff-cb0d3133c3bd/&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;/var/lib/kubelet/pods/9c594be2-3cef-4e1e-94ff-cb0d3133c3bd/&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;â”œâ”€â”€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;containers&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;â”‚&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;â””â”€â”€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;pod-empty&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;â”‚&lt;/span&gt;&lt;span&gt;       &lt;/span&gt;&lt;span&gt;â””â”€â”€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;abf0e2bd&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;â”œâ”€â”€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;etc-hosts&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;â”œâ”€â”€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;plugins&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;â”‚&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;â””â”€â”€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;kubernetes.io~empty-dir&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;â”‚&lt;/span&gt;&lt;span&gt;       &lt;/span&gt;&lt;span&gt;â”œâ”€â”€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;empty-volume&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;â”‚&lt;/span&gt;&lt;span&gt;       &lt;/span&gt;&lt;span&gt;â”‚&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;â””â”€â”€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;ready&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;â”‚&lt;/span&gt;&lt;span&gt;       &lt;/span&gt;&lt;span&gt;â””â”€â”€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;wrapped_kube-api-access-xcsj6&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;â”‚&lt;/span&gt;&lt;span&gt;           &lt;/span&gt;&lt;span&gt;â””â”€â”€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;ready&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;â””â”€â”€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;volumes&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;â”œâ”€â”€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;kubernetes.io~empty-dir&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;â”‚&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;â””â”€â”€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;empty-volume&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;â”‚&lt;/span&gt;&lt;span&gt;       &lt;/span&gt;&lt;span&gt;â””â”€â”€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;test-empty-dir&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;â””â”€â”€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;kubernetes.io~projected&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;â””â”€â”€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;kube-api-access-xcsj6&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;â”œâ”€â”€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;ca.crt&lt;/span&gt;&lt;span&gt; -&amp;gt; &lt;/span&gt;&lt;span&gt;..data/ca.crt&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;â”œâ”€â”€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;namespace&lt;/span&gt;&lt;span&gt; -&amp;gt; &lt;/span&gt;&lt;span&gt;..data/namespace&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;â””â”€â”€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;token&lt;/span&gt;&lt;span&gt; -&amp;gt; &lt;/span&gt;&lt;span&gt;..data/token&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;11&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;directories,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;8&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;files&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;hostPath å­˜å‚¨å·&lt;a href=&quot;#hostpath-å­˜å‚¨å·&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;section&gt;&lt;h2&gt;ä»‹ç»&lt;a href=&quot;#ä»‹ç»-1&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;hostPath æ˜¯Kubernetes ä¸­ä¸€ç§ç®€å•çš„æŒä¹…æ€§å­˜å‚¨å·ç±»å‹ï¼Œå®ƒå¯å°†èŠ‚ç‚¹çš„æ–‡ä»¶ç³»ç»Ÿä¸­çš„æ–‡ä»¶æˆ–ç›®å½•ç›´æ¥æŒ‚è½½åˆ°Pod ä¸­ã€‚&lt;/p&gt;&lt;p&gt;è¯¥å·ç±»å‹é€šè¿‡åœ¨Pod ä¸­æŒ‡å®šä¸»æœºè·¯å¾„å’Œå®¹å™¨ä¸­æ‰€éœ€æŒ‚è½½è¯¥è·¯å¾„çš„ä½ç½®æ¥å·¥ä½œã€‚å®ƒé€‚ç”¨äºéœ€è¦è®¿é—®èŠ‚ç‚¹ä¸­æ–‡ä»¶ç³»ç»Ÿä¸Šçš„ç›®å½•æˆ–æ–‡ä»¶çš„åº”ç”¨ç¨‹åºã€‚&lt;/p&gt;&lt;p&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨hostPath å­˜å‚¨å·éœ€è¦éå¸¸å°å¿ƒï¼Œå› ä¸ºå®ƒä¼šç›´æ¥æš´éœ²èŠ‚ç‚¹çš„æ–‡ä»¶ç³»ç»Ÿã€‚å¦å¤–ï¼Œå½“Pod è¿ç§»åˆ°å…¶ä»–èŠ‚ç‚¹æ—¶ï¼Œè¿™ä¸ªç›®å½•æ˜ å°„ä¸ä¼šè·Ÿéšè¿ç§»è€Œæ”¹å˜ï¼Œå› æ­¤å¯èƒ½ä¼šå½±å“åˆ°åº”ç”¨ç¨‹åºçš„å¯ç§»æ¤æ€§ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;è¯­æ³•ä¸å‚æ•°&lt;a href=&quot;#è¯­æ³•ä¸å‚æ•°&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;code&gt;path&lt;/code&gt;ï¼šä¸»æœºä¸Šç›®å½•çš„è·¯å¾„ã€‚å¦‚æœè·¯å¾„æ˜¯ç¬¦å·é“¾æ¥ï¼Œå®ƒå°†é“¾æ¥åˆ°çœŸå®è·¯å¾„&lt;/li&gt;
&lt;li&gt;&lt;code&gt;type&lt;/code&gt;ï¼šä¸»æœºé»˜è®¤å·çš„ç±»å‹ã€‚å¯é€‰å€¼ï¼š
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;DirectoryOrCreate&lt;/code&gt;ï¼šå¦‚æœæŒ‡å®šçš„ç›®å½•ä¸å­˜åœ¨ï¼Œå°±è‡ªåŠ¨åˆ›å»ºä¸€ä¸ªç©ºç›®å½•ï¼Œæƒé™è®¾ç½®ä¸º&lt;code&gt;0755&lt;/code&gt;ï¼Œä¸kubelet å…·æœ‰ç›¸åŒçš„ç»„å’Œæ‰€æœ‰æƒã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Directory&lt;/code&gt;ï¼šè¡¨ç¤ºå°†ä½¿ç”¨ç°æœ‰ä¸»æœºä¸Šçš„ç›®å½•ã€‚ç»™å®šçš„ç›®å½•å¿…é¡»å­˜åœ¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;FileOrCreate&lt;/code&gt;ï¼šå¦‚æœåœ¨ä¸»æœºä¸ŠæŒ‡å®šçš„æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªè¯¥ç©ºæ–‡ä»¶ï¼Œæƒé™è®¾ç½®ä¸º&lt;code&gt;0644&lt;/code&gt;ï¼Œä¸kubelet å…·æœ‰ç›¸åŒçš„ç»„å’Œæ‰€æœ‰æƒã€‚å¦åˆ™å°†ä½¿ç”¨ç°æœ‰æ–‡ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;File&lt;/code&gt;ï¼šè¡¨ç¤ºå°†ä½¿ç”¨ç°æœ‰ä¸»æœºä¸Šçš„æ–‡ä»¶ã€‚ç»™å®šçš„æ–‡ä»¶å¿…é¡»å­˜åœ¨&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Socket&lt;/code&gt;ï¼šè¡¨ç¤ºä½¿ç”¨ä¸»æœºä¸Šçš„Unix å¥—æ¥å­—æ–‡ä»¶ã€‚å¿…é¡»å­˜åœ¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;CharDevice&lt;/code&gt;ï¼šè¡¨ç¤ºä½¿ç”¨ä¸»æœºä¸Šçš„å­—ç¬¦è®¾å¤‡æ–‡ä»¶ã€‚å¿…é¡»å­˜åœ¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;BlockDevice&lt;/code&gt;ï¼šè¡¨ç¤ºä½¿ç”¨ä¸»æœºä¸Šçš„å—è®¾å¤‡æ–‡ä»¶ã€‚å¿…é¡»å­˜åœ¨ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;ä½¿ç”¨&lt;a href=&quot;#ä½¿ç”¨-1&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Pod&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;test-hostpath&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;containers&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;test-nginx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;image&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;volumeMounts&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;test-volume&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;mountPath&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/test-nginx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;test-tomcat&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;image&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;tomcat:8.5-jre8-alpine&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;volumeMounts&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;test-volume&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;mountPath&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/test-tomcat&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;volumes&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;test-volume&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;hostPath&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;path&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/data1&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;# å®¿ä¸»æœºä¸Šè¦æŒ‚è½½åˆ°å®¹å™¨ä¸­çš„ç›®å½•&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;DirectoryOrCreate&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;# ç±»å‹ï¼šå¦‚æœæŒ‡å®šçš„ç›®å½•ä¸å­˜åœ¨ï¼Œå°±è‡ªåŠ¨åˆ›å»ºä¸€ä¸ªç©ºç›®å½•&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;NFS å­˜å‚¨å·&lt;a href=&quot;#nfs-å­˜å‚¨å·&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;section&gt;&lt;h2&gt;éƒ¨ç½² NFS&lt;a href=&quot;#éƒ¨ç½²-nfs&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;å®‰è£… NFS æœåŠ¡å™¨&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;dnf&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;install&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-y&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;nfs-utils&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;å¯åŠ¨å¹¶è®¾ç½®æœåŠ¡å¼€æœºè‡ªå¯&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;systemctl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;enable&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--now&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;nfs-server&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;åˆ›å»ºå…±äº«ç›®å½•&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;mkdir&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-p&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/nfs/data&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;chown&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;nobody:nobody&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/nfs/data&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;chmod&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;777&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/nfs/data&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;é…ç½® NFS å…±äº«&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;echo&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;/srv/nfs/kubedata 192.168.56.0/24(rw,sync,no_subtree_check,no_root_squash)&quot;&lt;/span&gt;&lt;span&gt; &amp;gt;&amp;gt; &lt;/span&gt;&lt;span&gt;/etc/exports&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;åº”ç”¨é…ç½®&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;exportfs&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-rav&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;è¾“å‡ºï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[root@nfs-13 /nfs/data]#sudo exportfs -rav&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;exporting&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;10.0.0.0/24:/nfs/data&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;åœ¨å…¶ä»–èŠ‚ç‚¹ä¸ŠéªŒè¯ NFS æœåŠ¡&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;showmount&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-e&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;10.0.0.13&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;å£°æ˜ Kubernetes èµ„æºæ¸…å•æ–‡ä»¶&lt;a href=&quot;#å£°æ˜-kubernetes-èµ„æºæ¸…å•æ–‡ä»¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Pod&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;test-nfs&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;containers&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;test-nginx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;image&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx:latest&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;volumeMounts&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;test-nfs-volume&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;mountPath&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/test-nginx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;volumes&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;test-nfs-volume&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;nfs&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;path&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/nfs/data&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;# NFSæœåŠ¡å™¨ä¸Šçš„å…±äº«ç›®å½•&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;server&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;10.0.0.13&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;# NFSæœåŠ¡å™¨åœ°å€&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;æŒä¹…åŒ–å­˜å‚¨ä¹‹ PersistentVolume å’Œ PersistentVolumeClaim&lt;a href=&quot;#æŒä¹…åŒ–å­˜å‚¨ä¹‹-persistentvolume-å’Œ-persistentvolumeclaim&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;section&gt;&lt;h2&gt;å®šä¹‰ä¸å·¥ä½œåŸç†&lt;a href=&quot;#å®šä¹‰ä¸å·¥ä½œåŸç†&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;PersistentVolume (PV)&lt;a href=&quot;#persistentvolume-pv&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;åœ¨Kubernetes ä¸­ï¼ŒPVï¼ˆ&lt;code&gt;PersistentVolume&lt;/code&gt;ï¼‰æ˜¯ä¸€ç§ç‹¬ç«‹äºPod è€Œå­˜åœ¨ï¼Œå¹¶ä¸”å¯ä»¥è¢«å¤šä¸ªPod å…±äº«çš„å­˜å‚¨èµ„æºã€‚PV çš„åˆ›å»ºç”±ç®¡ç†å‘˜å®Œæˆï¼Œè€ŒPod ä¸­çš„å®¹å™¨åˆ™é€šè¿‡PVCï¼ˆ&lt;code&gt;PersistentVolumeClaim&lt;/code&gt;ï¼‰æ¥ç”³è¯·PV çš„ä½¿ç”¨æƒé™ã€‚&lt;/li&gt;
&lt;li&gt;PV å¯ä»¥è¿æ¥åˆ°ä¸åŒç§ç±»çš„æŒä¹…åŒ–å­˜å‚¨åç«¯ï¼Œæ¯”å¦‚&lt;code&gt;NFS&lt;/code&gt;ã€&lt;code&gt;iSCSI&lt;/code&gt;ã€&lt;code&gt;AWS EBS&lt;/code&gt; ç­‰ï¼Œä»¥æä¾›Kubernetes ä¸­çš„æŒä¹…æ€§å­˜å‚¨ã€‚åœ¨Pod å’ŒPV ä¹‹é—´éœ€è¦PVC æ¥è¿›è¡ŒåŒ¹é…ï¼Œä»¥ä¿è¯Pod èƒ½å¤Ÿè·å–åˆ°éœ€è¦çš„PV èµ„æºã€‚&lt;/li&gt;
&lt;li&gt;åœ¨PV ä¸­ï¼Œç®¡ç†å‘˜å¯ä»¥å®šä¹‰å„ç§å­˜å‚¨ç›¸å…³çš„å‚æ•°ï¼ŒåŒ…æ‹¬&lt;code&gt;å­˜å‚¨ç±»åˆ«&lt;/code&gt;ã€&lt;code&gt;è®¿é—®æ¨¡å¼&lt;/code&gt;ã€&lt;code&gt;å­˜å‚¨å®¹é‡&lt;/code&gt;ç­‰ç­‰ã€‚PVC éœ€è¦æä¾›çš„ä¿¡æ¯åˆ™åŒ…æ‹¬&lt;code&gt;éœ€è¦çš„å­˜å‚¨å®¹é‡&lt;/code&gt;ã€&lt;code&gt;è®¿é—®æ¨¡å¼&lt;/code&gt;ç­‰ï¼Œåªæœ‰æ»¡è¶³è¿™äº›æ¡ä»¶çš„PV æ‰èƒ½è¢«ç»‘å®šåˆ°PVC ä¸Šé¢ï¼Œå¹¶èƒ½å¤Ÿè¢«Pod è®¿é—®ã€‚&lt;/li&gt;
&lt;li&gt;ç”±äºPV æ˜¯ç‹¬ç«‹äºPod çš„èµ„æºå¯¹è±¡ï¼Œåœ¨å¤šä¸ªPod ä¹‹é—´å…±äº«æ•°æ®å˜å¾—éå¸¸ç®€ä¾¿ã€‚ä½¿ç”¨PV è¿˜å¯ä»¥ä½¿æ•°æ®å¾—åˆ°æŒä¹…åŒ–ï¼Œè¿™æ ·ä¾¿å¯ä»¥åœ¨Pod è¢«è¿ç§»æˆ–å‡çº§æ—¶ï¼Œä¿ç•™å·²æœ‰çš„æ•°æ®æ–‡ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;æ€»ä¹‹ï¼ŒPV æä¾›äº†Kubernetes é›†ç¾¤ä¸­æŒä¹…æ€§å­˜å‚¨çš„å®Œæ•´æŠ½è±¡å±‚æ¬¡ï¼Œå¹¶ä¸ºPodæä¾›äº†è®¿é—®PV çš„æ¥å£ï¼Œä»è€Œå®ç°äº†æ•°æ®æŒä¹…åŒ–ï¼Œå¹¶ä¸”èƒ½å¤Ÿä¸ºå¤šä¸ªPod æä¾›å…±äº«æ•°æ®çš„èƒ½åŠ›ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;PersistentVolumeClaim (PVC)&lt;a href=&quot;#persistentvolumeclaim-pvc&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;åœ¨Kubernetes ä¸­ï¼Œ PVC ï¼ˆ &lt;code&gt;PersistentVolumeClaim&lt;/code&gt; ï¼‰ ç”¨æ¥ç”³è¯·ä½¿ç”¨PVï¼ˆ&lt;code&gt;PersistentVolume&lt;/code&gt;ï¼‰çš„å­˜å‚¨èµ„æºã€‚PVC æ˜¯ä¸€ä¸ªè¡¨ç¤ºPod ä¸­å®¹å™¨éœ€è¦çš„æŒä¹…åŒ–å­˜å‚¨çš„é€»è¾‘å·ï¼Œå®ƒå£°æ˜äº†éœ€è¦çš„å­˜å‚¨èµ„æºåŠè®¿é—®æ¨¡å¼ï¼ŒKubernetes é›†ç¾¤ä¼šä¸ºå®ƒè‡ªåŠ¨åŒ¹é…å¯ç”¨çš„PV èµ„æºã€‚&lt;/li&gt;
&lt;li&gt;PVC çš„ç”³è¯·è¿‡ç¨‹å¯ä»¥ç†è§£ä¸ºPod å®¹å™¨ä¸å®é™…å­˜å‚¨ä¹‹é—´çš„â€œä¸­ä»‹â€æœºåˆ¶ã€‚åœ¨Podçš„ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œå®¹å™¨ä¼šéœ€è¦æŒä¹…åŒ–å­˜å‚¨æ¥ä¿å­˜æ•°æ®ã€‚PVC å…è®¸åº”ç”¨ç¨‹åºå£°æ˜è‡ªå·±éœ€è¦ä½¿ç”¨ä¸€å®šæ•°é‡çš„å­˜å‚¨ç©ºé—´ï¼Œå¹¶å®šä¹‰è®¿é—®å­˜å‚¨çš„æ¨¡å¼ã€‚&lt;/li&gt;
&lt;li&gt;PVC &lt;em&gt;&lt;u&gt;å¯ä»¥è·¨å‘½åç©ºé—´ä½¿ç”¨&lt;/u&gt;&lt;/em&gt;ï¼Œä½†_&lt;u&gt;åªèƒ½åŒ¹é…åŒä¸€å‘½åç©ºé—´ä¸­çš„PV&lt;/u&gt;&lt;em&gt;ã€‚å¦‚æœå¸Œæœ›PVCå¯ä»¥è®¿é—®æŸä¸ªç‰¹å®šçš„PV èµ„æºï¼Œé‚£ä¹ˆPVC çš„è§„æ ¼å¿…é¡»ä¸è¯¥PV èµ„æºçš„è§„æ ¼&lt;/em&gt;&lt;u&gt;å®Œå…¨åŒ¹é…&lt;/u&gt;_ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœPV è§„æ ¼ä¸­åŒ…å«çš„å­˜å‚¨ç©ºé—´æˆ–è®¿é—®æ¨¡å¼ä¸æ»¡è¶³PVC è§„æ ¼ä¸­å£°æ˜çš„éœ€æ±‚ï¼Œåˆ™PVCå°†æ— æ³•åŒ¹é…åˆ°è¯¥PVã€‚&lt;/li&gt;
&lt;li&gt;å½“Pod å®¹å™¨éœ€è¦ä½¿ç”¨æŒä¹…åŒ–å­˜å‚¨æ—¶ï¼Œå¯ä»¥é€šè¿‡PVC ç”³è¯·ä½¿ç”¨PV èµ„æºã€‚Kubernetes é›†ç¾¤ä¼šä¸ºPVC å¯»æ‰¾ä¸€ä¸ªåˆé€‚çš„PV èµ„æºå¹¶å°†å…¶åˆ†é…ç»™è¯¥PVCã€‚Pod å®¹å™¨åœ¨å¯åŠ¨æ—¶ï¼Œåªéœ€è¦å°†è¯¥PVC æŒ‚è½½åˆ°é¢„å®šç›®å½•å³å¯ä½¿ç”¨PV æä¾›çš„æŒä¹…åŒ–å­˜å‚¨æœåŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;æ€»ä¹‹ï¼ŒPVC ä¸ºKubernetes å†…çš„Pod å®¹å™¨æä¾›äº†ç®¡ç†å­˜å‚¨å·çš„æ–¹å¼ï¼Œé€šè¿‡å£°æ˜å¼çš„æ–¹æ³•ä¸ºPod å¼•å…¥äº†æ–°çš„æŒä¹…å­˜å‚¨å—ã€‚å®ƒå°†å¯¹å­˜å‚¨èµ„æºçš„è¯·æ±‚éš”ç¦»å¼€æ¥ï¼Œæ— éœ€åœ¨Pod å®šä¹‰ä¸­è€¦åˆå…·ä½“çš„å­˜å‚¨å‚æ•°ç»†èŠ‚ï¼Œå¹¶ä¼˜åŒ–äº†èµ„æºçš„çµæ´»ä½¿ç”¨å’Œç®¡ç†ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;PVC å’ŒPV çš„ç»‘å®š&lt;a href=&quot;#pvc-å’Œpv-çš„ç»‘å®š&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;ç”¨æˆ·åˆ›å»º pvc å¹¶æŒ‡å®šéœ€è¦çš„èµ„æºå’Œè®¿é—®æ¨¡å¼ã€‚åœ¨æ‰¾åˆ°å¯ç”¨ pv ä¹‹å‰ï¼Œpvc ä¼šä¿æŒæœªç»‘å®šçŠ¶æ€ã€‚ç»‘å®šæ˜¯é€šè¿‡PVC è§„èŒƒä¸­çš„&lt;code&gt;spec.selector&lt;/code&gt; å­—æ®µå®ç°çš„ï¼Œå®ƒç”¨äºç»‘å®šä¸ pvc è¦æ±‚æœ€æ¥è¿‘çš„ pvã€‚&lt;/li&gt;
&lt;li&gt;pvc å’Œ pv å®ƒä»¬æ˜¯ä¸€ä¸€å¯¹åº”çš„å…³ç³»ï¼Œpv å¦‚æœè¢«pvc ç»‘å®šäº†ï¼Œå°±ä¸èƒ½è¢«å…¶ä»–pvcä½¿ç”¨äº†ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨åˆ›å»ºpvc çš„æ—¶å€™ï¼Œåº”è¯¥ç¡®ä¿å’Œåº•ä¸‹çš„ pv èƒ½ç»‘å®šï¼Œå¦‚æœæ²¡æœ‰åˆé€‚çš„ pvï¼Œpvc å°±ä¼šå¤„äºpending çŠ¶æ€ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;Pod ä¸PVC çš„æŒ‚è½½&lt;a href=&quot;#pod-ä¸pvc-çš„æŒ‚è½½&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;éšç€ PVC å’ŒPV çš„ç»‘å®šï¼Œç®¡ç†å‘˜å°†æŠŠ PV æš´éœ²ç»™Kubernetes ä¸­çš„ Podsã€‚Pod æŒ‡å®š PVC åç§°ï¼ŒKubernetes ç¡®å®šå“ªä¸ªPVC ç»‘å®šäº†å“ªä¸ªPVï¼Œå¹¶å°†PV æ·»åŠ åˆ°Podçš„æ–‡ä»¶ç³»ç»Ÿä¸­ã€‚Pod ç„¶ååœ¨å®¹å™¨ä¸­æŒ‚è½½PVï¼Œä»¥ä½¿å®¹å™¨å¯ä»¥è®¿é—®å®ƒã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;å›æ”¶ç­–ç•¥&lt;a href=&quot;#å›æ”¶ç­–ç•¥&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;å½“åˆ›å»º pod æ—¶å¦‚æœä½¿ç”¨pvc åšä¸ºå­˜å‚¨å·ï¼Œå®ƒä¼šå’Œ pv ç»‘å®šï¼Œå½“åˆ é™¤ podï¼Œpvc å’Œ pv ç»‘å®šå°±ä¼šè§£é™¤ï¼Œè§£é™¤ä¹‹åå’Œpvc ç»‘å®šçš„ pv å·é‡Œçš„æ•°æ®æœ‰å‡ ç§å¤„ç†æ–¹å¼ï¼šå¯ä»¥ä¿ç•™ï¼Œå›æ”¶æˆ–åˆ é™¤ï¼Œå³ Retainã€Recycleï¼ˆä¸æ¨èä½¿ç”¨ï¼Œ1.15è¢«åºŸå¼ƒäº†ï¼‰ã€Deleteã€‚&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;Retain&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;å½“åˆ é™¤pvc çš„æ—¶å€™ï¼Œpv ä»ç„¶å­˜åœ¨ï¼Œå¤„äºreleased çŠ¶æ€ï¼Œä½†æ˜¯å®ƒä¸èƒ½è¢«å…¶ä»– pvc ç»‘å®šä½¿ç”¨ï¼Œé‡Œé¢çš„æ•°æ®è¿˜æ˜¯å­˜åœ¨çš„ï¼Œå½“æˆ‘ä»¬ä¸‹æ¬¡å†ä½¿ç”¨çš„æ—¶å€™ï¼Œæ•°æ®è¿˜æ˜¯å­˜åœ¨çš„ï¼Œè¿™ä¸ªæ˜¯é»˜è®¤çš„å›æ”¶ç­–ç•¥ã€‚&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;Delete&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;åˆ é™¤pvc æ—¶å³ä¼šä»Kubernetes ä¸­ç§»é™¤PVï¼Œä¹Ÿä¼šä»ç›¸å…³çš„å¤–éƒ¨è®¾æ–½ä¸­åˆ é™¤å­˜å‚¨èµ„äº§ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;è¯­æ³•ä¸å­—æ®µè¯´æ˜&lt;a href=&quot;#è¯­æ³•ä¸å­—æ®µè¯´æ˜&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;PersistentVolume&lt;a href=&quot;#persistentvolume&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;




























&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å­—æ®µå&lt;/th&gt;&lt;th&gt;ç±»å‹&lt;/th&gt;&lt;th&gt;å¿…é€‰&lt;/th&gt;&lt;th&gt;å–å€¼&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.accessModes&lt;/code&gt;&lt;/td&gt;&lt;td&gt;[]string&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;ReadWriteOnce&lt;/code&gt;ï¼ˆRWOï¼‰ï¼šå¯è¢«å•ä¸ªèŠ‚ç‚¹ä»¥è¯»å†™æ–¹å¼æŒ‚è½½ï¼›è¯¥æ¨¡å¼è¦æ±‚PV/PVC åªèƒ½è¢«ä¸€ä¸ªèŠ‚ç‚¹ä»¥è¯»å†™æ–¹å¼æŒ‚è½½ã€‚è¿™æ„å‘³ç€ï¼Œå½“PV/PVC ä¸Pod ç»‘å®šæ—¶ï¼ŒPod å¯ä»¥åœ¨&lt;code&gt;ä¸€ä¸ªèŠ‚ç‚¹ä¸Šä»¥è¯»å†™æ¨¡å¼&lt;/code&gt;ä½¿ç”¨è¯¥PV/PVCï¼Œä½†ä¸å…è®¸åœ¨å…¶ä»–èŠ‚ç‚¹ä¸Šä»¥ç›¸åŒæ–¹å¼ä½¿ç”¨ã€‚&lt;br /&gt;&lt;code&gt;ReadOnlyMany&lt;/code&gt;ï¼ˆROXï¼‰ï¼šå¯è¢«å¤šä¸ªèŠ‚ç‚¹ä»¥åªè¯»æ–¹å¼æŒ‚è½½ï¼›è¯¥æ¨¡å¼è¦æ±‚PV/PVC èƒ½å¤Ÿè¢«å¤šä¸ªèŠ‚ç‚¹ä»¥åªè¯»æ–¹å¼æŒ‚è½½ã€‚è¿™æ„å‘³ç€ï¼Œå½“PV/PVC ä¸Podç»‘å®šæ—¶ï¼ŒPod å¯ä»¥åœ¨&lt;code&gt;å¤šä¸ªèŠ‚ç‚¹ä¸Šä»¥åªè¯»æ¨¡å¼&lt;/code&gt;ä½¿ç”¨è¯¥PV/PVCï¼Œä½†ä¸å…è®¸åœ¨ä»»ä½•ä¸€ä¸ªèŠ‚ç‚¹ä¸Šè¿›è¡Œå†™æ“ä½œã€‚&lt;br /&gt;&lt;code&gt;ReadWriteMany&lt;/code&gt;ï¼ˆRWXï¼‰ï¼šå¯è¢«å¤šä¸ªèŠ‚ç‚¹ä»¥è¯»å†™æ–¹å¼æŒ‚è½½ï¼›è¯¥æ¨¡å¼è¦æ±‚PV/PVC å¯ä»¥è¢«å¤šä¸ªèŠ‚ç‚¹ä»¥è¯»å†™æ–¹å¼æŒ‚è½½ã€‚è¿™æ„å‘³ç€ï¼Œå½“PV/PVC ä¸Pod ç»‘å®šæ—¶ï¼ŒPod å¯ä»¥åœ¨&lt;code&gt;å¤šä¸ªèŠ‚ç‚¹ä¸Šä»¥è¯»å†™æ¨¡å¼&lt;/code&gt;ä½¿ç”¨è¯¥PV/PVCã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.capacity&lt;/code&gt;&lt;/td&gt;&lt;td&gt;map[string]&lt;br /&gt;string&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;ç”¨äºæŒ‡å®šPV æˆ–PVC çš„å­˜å‚¨å®¹é‡å¤§å°ã€‚è¯¥å­—æ®µå¿…é¡»æ˜¯ä»¥å­—ç¬¦ä¸²å½¢å¼æŒ‡å®šçš„æ•°å­—ï¼Œå¹¶é™„å¸¦ç›¸åº”çš„å•ä½ï¼ˆå¦‚&lt;code&gt;Gi&lt;/code&gt;ã€&lt;code&gt;G&lt;/code&gt;ã€&lt;code&gt;Mi&lt;/code&gt;ã€&lt;code&gt;M&lt;/code&gt; ç­‰ï¼‰ã€‚&lt;br /&gt;ä¾‹å¦‚ï¼Œè¦åœ¨PV ä¸Šå®šä¹‰1GiB çš„å­˜å‚¨å®¹é‡ï¼Œå¯ä»¥è®¾ç½®&lt;code&gt;spec.capacity.storage&lt;/code&gt;å­—æ®µä¸º1Giã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;persistentVolumeReclaimPolicy&lt;/code&gt;&lt;/td&gt;&lt;td&gt;string&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;PersistentVolume.spec.persistentVolumeReclaimPolicy &lt;/code&gt;æ˜¯æŒ‡åœ¨åˆ é™¤ä½¿ç”¨å®Œçš„PersistentVolumeï¼ˆPVï¼‰åï¼ŒPV ä¸Šæ®‹ç•™çš„æ•°æ®åº”è¯¥å¦‚ä½•å¤„ç†çš„ç­–ç•¥ã€‚è¿™ä¸ªç­–ç•¥å¯ä»¥åœ¨PV åˆ›å»ºæ—¶æŒ‡å®šã€‚&lt;br /&gt;å¯ç”¨å‚æ•°ï¼š&lt;br /&gt;&lt;code&gt;Retain&lt;/code&gt;ï¼šé»˜è®¤ç­–ç•¥ï¼Œä¿ç•™PersistentVolume åˆ é™¤ä¹‹åçš„æ•°æ®ï¼Œä¸è¿›è¡Œå†åˆ©ç”¨ã€‚éœ€è¦æ‰‹åŠ¨æ¸…ç†PV ä¸Šçš„æ•°æ®ã€‚&lt;br /&gt;&lt;code&gt;Recycle&lt;/code&gt;ï¼šè‡ªåŠ¨æ¸…ç©ºPersistentVolume ä¸Šé¢çš„æ•°æ®ï¼ŒPV åˆå¯ä»¥é‡å¤ä½¿ç”¨ã€‚å¯è¿›è¡Œæ ‡å‡†çš„æ–‡ä»¶ç³»ç»Ÿæ ¼å¼åŒ–å’Œæ¸…ç©ºæ“ä½œï¼Œä½†ä¸é€‚ç”¨äºå¤šä¸ªPV å…±äº«çš„åœºæ™¯ã€‚&lt;br /&gt;&lt;code&gt;Delete&lt;/code&gt;ï¼šç›´æ¥åˆ é™¤PersistentVolumeã€‚PV ä¸Šçš„æ•°æ®ä¼šè¢«åŒæ­¥åˆ é™¤ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;PersistentVolumeClaim&lt;a href=&quot;#persistentvolumeclaim&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;














































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å­—æ®µå&lt;/th&gt;&lt;th&gt;ç±»å‹&lt;/th&gt;&lt;th&gt;å¿…é€‰&lt;/th&gt;&lt;th&gt;å–å€¼&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;accessModes&lt;/code&gt;&lt;/td&gt;&lt;td&gt;[]string&lt;/td&gt;&lt;td&gt;âˆš&lt;/td&gt;&lt;td&gt;æŒ‡å®šè®¿é—®æ¨¡å¼ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;resources&lt;/code&gt;&lt;/td&gt;&lt;td&gt;resources&lt;/td&gt;&lt;td&gt;âˆš&lt;/td&gt;&lt;td&gt;ç”¨äºæŒ‡å®šPV æˆ–PVC çš„å­˜å‚¨å®¹é‡å¤§å°ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;resources.limits&lt;/code&gt;&lt;/td&gt;&lt;td&gt;map[string]string&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;é™åˆ¶å…è®¸è¯·æ±‚çš„æœ€å¤§å®¹é‡å¤§å°ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;resources.requests&lt;/code&gt;&lt;/td&gt;&lt;td&gt;map[string]string&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;è¯·æ±‚æ‰€éœ€çš„æœ€å°èµ„æºé‡ã€‚ä¹Ÿå°±æ˜¯æœ€å°å®¹é‡&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;volumeMode&lt;/code&gt;&lt;/td&gt;&lt;td&gt;string&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;ç”¨äºæŒ‡å®šPV å’ŒPVC çš„å·æ¨¡å¼ã€‚å·æ¨¡å¼å†³å®šäº†å·å†…çš„å†…å®¹å¦‚ä½•è¢«å‘ˆç°ç»™å®¹å™¨ã€‚&lt;br /&gt;Kubernetes ç›®å‰æ”¯æŒä¸¤ç§å·æ¨¡å¼ï¼š&lt;br /&gt;&lt;code&gt;Filesystem&lt;/code&gt;ï¼šè¯¥æ¨¡å¼è¡¨ç¤ºå·å°†è¢«æ ¼å¼åŒ–ä¸ºä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œå¹¶ä½œä¸ºå¸¸è§„æŒ‚è½½ç‚¹æä¾›ç»™å®¹å™¨ã€‚è¿™æ˜¯é»˜è®¤çš„å·æ¨¡å¼ã€‚&lt;br /&gt;&lt;code&gt;Block&lt;/code&gt;ï¼šè¯¥æ¨¡å¼è¡¨ç¤ºå·è¢«æ ¼å¼åŒ–ä¸ºä¸€ä¸ªå—è®¾å¤‡å·ï¼Œé€šå¸¸ç”¨äºéœ€è¦æ€§èƒ½è¾ƒé«˜ä¸”éœ€è¦æ˜¾å¼æ§åˆ¶å—è®¾å¤‡çš„åº”ç”¨ç¨‹åºã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;volumeName&lt;/code&gt;&lt;/td&gt;&lt;td&gt;string&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;ç”¨äºå¼•ç”¨ç°æœ‰çš„PersistentVolumeï¼ˆPVï¼‰ï¼Œå³å°†è¯¥PVC ç»‘å®šåˆ°æŒ‡å®šçš„PV ä¸Šã€‚è¯·æ±‚çš„è®¿é—®æ¨¡å¼å’Œå­˜å‚¨å®¹é‡å¤§å°å¿…é¡»è¦å’Œpv åŒ¹é…ä¸Šï¼Œå¦åˆ™æŒ‡å®šäº†PV è¿›è¡Œç»‘å®šï¼Œä¹Ÿä¼šç»‘å®šå¤±è´¥ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;ç¤ºä¾‹&lt;a href=&quot;#ç¤ºä¾‹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;åˆ›å»º PersistentVolume&lt;a href=&quot;#åˆ›å»º-persistentvolume&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;PersistentVolume&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;test-pv&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;capacity&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;storage&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;1Gi&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;accessModes&lt;/span&gt;&lt;span&gt;: [&lt;/span&gt;&lt;span&gt;&quot;ReadOnlyMany&quot;&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;nfs&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;path&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/nfs/data&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;server&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;10.0.0.13&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;åˆ›å»ºPersistentVolumeClaim&lt;a href=&quot;#åˆ›å»ºpersistentvolumeclaim&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;PersistentVolumeClaim&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;test-pvc&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;accessModes&lt;/span&gt;&lt;span&gt;: [&lt;/span&gt;&lt;span&gt;&quot;ReadOnlyMany&quot;&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;resources&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;requests&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;storage&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;1Gi&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;# mircok8sé»˜è®¤ä½¿ç”¨microk8s-hostpathä½œä¸ºåŠ¨æ€å­˜å‚¨ç±»ï¼Œå› æ­¤éœ€è¦æ‰‹åŠ¨å£°æ˜storageClassNameä¸ºç©ºä»¥åŒ¹é…ä¹‹å‰åˆ›å»ºçš„PV&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;storageClassName&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;åœ¨ Pod ä¸­ä½¿ç”¨ PVC&lt;a href=&quot;#åœ¨-pod-ä¸­ä½¿ç”¨-pvc&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Pod&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;test-pvpvc-pod&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;containers&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;test-nginx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;image&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;volumeMounts&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx-html&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;mountPath&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/usr/share/nginx/html&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;volumes&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx-html&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;persistentVolumeClaim&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;claimName&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;test-pvc&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;StorageClass å­˜å‚¨ç±»&lt;a href=&quot;#storageclass-å­˜å‚¨ç±»&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;section&gt;&lt;h2&gt;ä»€ä¹ˆæ˜¯ StorageClass&lt;a href=&quot;#ä»€ä¹ˆæ˜¯-storageclass&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;PV å’ŒPVC æ¨¡å¼éƒ½æ˜¯éœ€è¦å…ˆåˆ›å»ºå¥½PVï¼Œç„¶åå®šä¹‰å¥½PVC å’Œpv è¿›è¡Œä¸€å¯¹ä¸€çš„Boundï¼ˆç»‘å®šï¼‰ï¼Œä½†æ˜¯å¦‚æœPVC è¯·æ±‚æˆåƒä¸Šä¸‡ï¼Œé‚£ä¹ˆå°±éœ€è¦åˆ›å»ºæˆåƒä¸Šä¸‡çš„PVï¼Œå¯¹äºè¿ç»´äººå‘˜æ¥è¯´ç»´æŠ¤æˆæœ¬å¾ˆé«˜ï¼ŒKubernetes æä¾›ä¸€ç§è‡ªåŠ¨åˆ›å»ºPV çš„æœºåˆ¶ï¼Œå«StorageClassï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯åˆ›å»ºPV çš„æ¨¡æ¿ã€‚k8s é›†ç¾¤ç®¡ç†å‘˜é€šè¿‡åˆ›å»ºstorageclass å¯ä»¥åŠ¨æ€ç”Ÿæˆä¸€ä¸ªå­˜å‚¨å·pv ä¾›k8s pvc ä½¿ç”¨&lt;/p&gt;&lt;p&gt;å…·ä½“æ¥è¯´ï¼ŒStorageClass ä¼šå®šä¹‰ä»¥ä¸‹ä¸¤éƒ¨åˆ†ï¼š&lt;/p&gt;&lt;ol&gt;
&lt;li&gt;PV çš„å±æ€§ï¼Œæ¯”å¦‚å­˜å‚¨çš„å¤§å°ã€ç±»å‹ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;åˆ›å»ºè¿™ç§PV éœ€è¦ä½¿ç”¨åˆ°çš„å­˜å‚¨æ’ä»¶ï¼Œæ¯”å¦‚Cephã€NFS ç­‰ã€‚&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;æœ‰äº†è¿™ä¸¤éƒ¨åˆ†ä¿¡æ¯ï¼ŒKubernetes å°±èƒ½å¤Ÿæ ¹æ®ç”¨æˆ·æäº¤çš„PVCï¼Œæ‰¾åˆ°å¯¹åº”çš„StorageClassï¼Œç„¶åKubernetes å°±ä¼šè°ƒç”¨StorageClass å£°æ˜çš„å­˜å‚¨æ’ä»¶ï¼Œåˆ›å»ºå‡ºéœ€è¦çš„PVã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;å­˜å‚¨åˆ¶å¤‡å™¨ Provisioner&lt;a href=&quot;#å­˜å‚¨åˆ¶å¤‡å™¨-provisioner&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;æ¯ä¸ª StorageClass éƒ½æœ‰ä¸€ä¸ªåˆ¶å¤‡å™¨ï¼ˆProvisionerï¼‰ï¼Œç”¨æ¥å†³å®šä½¿ç”¨å“ªä¸ªå·æ’ä»¶åˆ¶å¤‡ PVã€‚ è¯¥å­—æ®µå¿…é¡»æŒ‡å®šã€‚&lt;/p&gt;



























































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å·æ’ä»¶&lt;/th&gt;&lt;th&gt;å†…ç½®åˆ¶å¤‡å™¨&lt;/th&gt;&lt;th&gt;é…ç½®ç¤ºä¾‹&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;AzureFile&lt;/td&gt;&lt;td&gt;âœ“&lt;/td&gt;&lt;td&gt;&lt;a href=&quot;https://kubernetes.io/zh-cn/docs/concepts/storage/storage-classes/#azure-file&quot;&gt; Azure File &lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;CephFS&lt;/td&gt;&lt;td&gt;-&lt;/td&gt;&lt;td&gt;-&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;FC&lt;/td&gt;&lt;td&gt;-&lt;/td&gt;&lt;td&gt;-&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;FlexVolume&lt;/td&gt;&lt;td&gt;-&lt;/td&gt;&lt;td&gt;-&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;iSCSI&lt;/td&gt;&lt;td&gt;-&lt;/td&gt;&lt;td&gt;-&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Local&lt;/td&gt;&lt;td&gt;-&lt;/td&gt;&lt;td&gt;&lt;a href=&quot;https://kubernetes.io/zh-cn/docs/concepts/storage/storage-classes/#local&quot;&gt; Local &lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;NFS&lt;/td&gt;&lt;td&gt;-&lt;/td&gt;&lt;td&gt;&lt;a href=&quot;https://kubernetes.io/zh-cn/docs/concepts/storage/storage-classes/#nfs&quot;&gt; NFS &lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;PortworxVolume&lt;/td&gt;&lt;td&gt;âœ“&lt;/td&gt;&lt;td&gt;&lt;a href=&quot;https://kubernetes.io/zh-cn/docs/concepts/storage/storage-classes/#portworx-volume&quot;&gt; Portworx Volume &lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;RBD&lt;/td&gt;&lt;td&gt;âœ“&lt;/td&gt;&lt;td&gt;&lt;a href=&quot;https://kubernetes.io/zh-cn/docs/concepts/storage/storage-classes/#ceph-rbd&quot;&gt; Ceph RBD &lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;VsphereVolume&lt;/td&gt;&lt;td&gt;âœ“&lt;/td&gt;&lt;td&gt;&lt;a href=&quot;https://kubernetes.io/zh-cn/docs/concepts/storage/storage-classes/#vsphere&quot;&gt; vSphere &lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;provisioner æ‰“å¯¹å‹¾çš„è¡¨ç¤ºå¯ä»¥ç”±å†…éƒ¨ä¾›åº”å•†æä¾›ï¼Œä¹Ÿå¯ä»¥ç”±å¤–éƒ¨ä¾›åº”å•†æä¾›ã€‚&lt;/p&gt;&lt;p&gt;å¦‚æœæ˜¯å¤–éƒ¨ä¾›åº”å•†å¯ä»¥å‚è€ƒå¦‚ä¸‹æä¾›çš„æ–¹æ³•åˆ›å»ºï¼š&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/kubernetes-retired/external-storage&quot;&gt;GitHub - kubernetes-retired/external-storage: [EOL] External storage plugins, provisioners, and helper libraries&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/kubernetes-sigs/sig-storage-lib-external-provisioner&quot;&gt;GitHub - kubernetes-sigs/sig-storage-lib-external-provisioner&lt;/a&gt;&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;å®æˆ˜ï¼šä½¿ç”¨NFS provisioner åŠ¨æ€ç”ŸæˆPV&lt;a href=&quot;#å®æˆ˜ä½¿ç”¨nfs-provisioner-åŠ¨æ€ç”Ÿæˆpv&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;NFS-Subdir-External-Provisioner ç®€ä»‹&lt;a href=&quot;#nfs-subdir-external-provisioner-ç®€ä»‹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;&lt;code&gt;NFS-Subdir-External-Provisioner&lt;/code&gt; æ˜¯Kubernetes ä¸­çš„ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œå®ƒå¯ä»¥è‡ªåŠ¨ä¸ºä¸€ä¸ªæˆ–å¤šä¸ªKubernetes Persistent Volume Claimsï¼ˆPVCsï¼‰åˆ›å»ºNFS å…±äº«ï¼Œå¹¶å°†å®ƒä»¬æŒ‚è½½åˆ°ç›¸åº”çš„Pod ä¸­ã€‚è¿™ä¸ªç¨‹åºä¸»è¦æ˜¯ä¸ºäº†è§£å†³Kubernetes ç¯å¢ƒä¸­åŠ¨æ€PV åˆ›å»ºçš„é—®é¢˜ã€‚ä½¿ç”¨è¿™ä¸ªç¨‹åºå¯ä»¥å¤§å¤§é™ä½PV çš„ç®¡ç†é…ç½®å·¥ä½œé‡ã€‚&lt;/p&gt;&lt;p&gt;è¯¥ç¨‹åºé€šè¿‡ç›‘æ§Kubernetes çš„StorageClasses å’ŒPersistentVolumeClaims èµ„æºï¼Œè‡ªåŠ¨åˆ›å»ºå’Œåˆ é™¤ PersistentVolum èµ„æºã€‚è¿™ä¸ªç¨‹åºä½¿ç”¨äº†NFS å…±äº«æœåŠ¡å™¨æä¾›çš„å·ã€‚å½“ä¸€ä¸ªPVC è¯·æ±‚è¢«åˆ›å»ºæ—¶ï¼Œè¯¥ç¨‹åºä¼šæ–°å»ºä¸€ä¸ªä¸å…¶ç›¸å®¹çš„PVï¼Œå¹¶å°†å…¶æ’å…¥åˆ°Kubernetes PersistentVolume æ ‘ä¸­ã€‚å½“PVC èµ„æºè¢«åˆ é™¤æ—¶ï¼Œå°†ä¼šè‡ªåŠ¨åˆ é™¤PV èµ„æºã€‚&lt;/p&gt;&lt;p&gt;GitHub åœ°å€ï¼š&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/kubernetes-sigs/nfs-subdir-external-provisioner&quot;&gt;GitHub - kubernetes-sigs/nfs-subdir-external-provisioner: Dynamic sub-dir volume provisioner on a remote NFS server.&lt;/a&gt;&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;æ­¥éª¤&lt;a href=&quot;#æ­¥éª¤&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;section&gt;&lt;h4&gt;åˆ›å»ºè¿è¡Œnfs-provisioner éœ€è¦çš„sa è´¦å·&lt;a href=&quot;#åˆ›å»ºè¿è¡Œnfs-provisioner-éœ€è¦çš„sa-è´¦å·&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;ServiceAccount&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nfs-client-provisioner&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;namespace&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;default&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªKubernetes ServiceAccount çš„YAML æ–‡ä»¶ï¼Œç”¨äºåˆ›å»ºä¸€ä¸ªåä¸ºnfs-client-provisioner çš„æœåŠ¡å¸æˆ·ï¼Œå¹¶å°†å…¶éƒ¨ç½²åˆ°åä¸ºdefault çš„å‘½åç©ºé—´ä¸­ã€‚&lt;/p&gt;&lt;p&gt;serviceaccount æ˜¯ä¸ºäº†æ–¹ä¾¿Pod é‡Œé¢çš„è¿›ç¨‹è°ƒç”¨Kubernetes API æˆ–å…¶ä»–å¤–éƒ¨æœåŠ¡è€Œè®¾è®¡çš„ã€‚&lt;/p&gt;&lt;p&gt;åœ¨åˆ›å»ºPod çš„æ—¶å€™æŒ‡å®šserviceaccountï¼Œé‚£ä¹ˆå½“Pod è¿è¡Œåï¼Œä»–å°±æ‹¥æœ‰äº†æˆ‘ä»¬æŒ‡å®šè´¦å·çš„æƒé™äº†ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;å¯¹sa æˆæƒ&lt;a href=&quot;#å¯¹sa-æˆæƒ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;rbac.authorization.k8s.io/v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;ClusterRole&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nfs-client-provisioner-runner&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;rules&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;apiGroups&lt;/span&gt;&lt;span&gt;: [&lt;/span&gt;&lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;resources&lt;/span&gt;&lt;span&gt;: [&lt;/span&gt;&lt;span&gt;&quot;nodes&quot;&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;verbs&lt;/span&gt;&lt;span&gt;: [&lt;/span&gt;&lt;span&gt;&quot;get&quot;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;&quot;list&quot;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;&quot;watch&quot;&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;apiGroups&lt;/span&gt;&lt;span&gt;: [&lt;/span&gt;&lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;resources&lt;/span&gt;&lt;span&gt;: [&lt;/span&gt;&lt;span&gt;&quot;persistentvolumes&quot;&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;verbs&lt;/span&gt;&lt;span&gt;: [&lt;/span&gt;&lt;span&gt;&quot;get&quot;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;&quot;list&quot;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;&quot;watch&quot;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;&quot;create&quot;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;&quot;delete&quot;&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;apiGroups&lt;/span&gt;&lt;span&gt;: [&lt;/span&gt;&lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;resources&lt;/span&gt;&lt;span&gt;: [&lt;/span&gt;&lt;span&gt;&quot;persistentvolumeclaims&quot;&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;verbs&lt;/span&gt;&lt;span&gt;: [&lt;/span&gt;&lt;span&gt;&quot;get&quot;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;&quot;list&quot;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;&quot;watch&quot;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;&quot;update&quot;&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;apiGroups&lt;/span&gt;&lt;span&gt;: [&lt;/span&gt;&lt;span&gt;&quot;storage.k8s.io&quot;&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;resources&lt;/span&gt;&lt;span&gt;: [&lt;/span&gt;&lt;span&gt;&quot;storageclasses&quot;&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;verbs&lt;/span&gt;&lt;span&gt;: [&lt;/span&gt;&lt;span&gt;&quot;get&quot;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;&quot;list&quot;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;&quot;watch&quot;&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;apiGroups&lt;/span&gt;&lt;span&gt;: [&lt;/span&gt;&lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;resources&lt;/span&gt;&lt;span&gt;: [&lt;/span&gt;&lt;span&gt;&quot;events&quot;&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;verbs&lt;/span&gt;&lt;span&gt;: [&lt;/span&gt;&lt;span&gt;&quot;create&quot;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;&quot;update&quot;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;&quot;patch&quot;&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;---&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;ClusterRoleBinding&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;rbac.authorization.k8s.io/v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;run-nfs-client-provisioner&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;subjects&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;27&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;ServiceAccount&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;28&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nfs-client-provisioner&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;29&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;namespace&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;default&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;30&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;roleRef&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;31&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;ClusterRole&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;32&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nfs-client-provisioner-runner&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;33&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;apiGroup&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;rbac.authorization.k8s.io&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;34&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;---&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;35&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Role&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;36&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;rbac.authorization.k8s.io/v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;37&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;38&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;leader-locking-nfs-client-provisioner&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;39&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;namespace&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;default&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;40&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;rules&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;41&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;apiGroups&lt;/span&gt;&lt;span&gt;: [&lt;/span&gt;&lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;42&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;resources&lt;/span&gt;&lt;span&gt;: [&lt;/span&gt;&lt;span&gt;&quot;endpoints&quot;&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;43&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;verbs&lt;/span&gt;&lt;span&gt;: [&lt;/span&gt;&lt;span&gt;&quot;get&quot;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;&quot;list&quot;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;&quot;watch&quot;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;&quot;create&quot;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;&quot;update&quot;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;&quot;patch&quot;&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;44&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;---&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;45&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;RoleBinding&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;46&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;rbac.authorization.k8s.io/v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;47&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;48&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;leader-locking-nfs-client-provisioner&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;49&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;namespace&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;default&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;50&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;subjects&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;51&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;ServiceAccount&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;52&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nfs-client-provisioner&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;53&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;namespace&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;default&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;54&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;roleRef&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;55&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Role&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;56&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;leader-locking-nfs-client-provisioner&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;57&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;apiGroup&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;rbac.authorization.k8s.io&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;é¦–å…ˆæ˜¯ä¸€ä¸ªClusterRole YAML æ–‡ä»¶ï¼Œå®ƒå®šä¹‰äº†nfs-client-provisioner-runner è§’è‰²ï¼Œå¯ä»¥è®¿é—®ä¸€äº›èµ„æºï¼Œæ¯”å¦‚èŠ‚ç‚¹ã€æŒä¹…åŒ–å·ã€æŒä¹…åŒ–å·å£°æ˜ã€å­˜å‚¨ç±»å’Œäº‹ä»¶ï¼Œå¹¶ä¸”å¯ä»¥æ‰§è¡ŒæŸ¥çœ‹å’Œç›‘å¬æ“ä½œã€‚é™¤æ­¤ä¹‹å¤–è¿˜å¯ä»¥åˆ›å»ºã€åˆ é™¤ã€æ›´æ–°ã€è¡¥ä¸æ“ä½œå’Œæ›´æ–°PVã€‚&lt;/li&gt;
&lt;li&gt;æ¥ä¸‹æ¥æ˜¯ä¸€ä¸ªClusterRoleBinding YAML æ–‡ä»¶ï¼Œ å®ƒå°†ä¸Šè¿°è§’è‰²ç»‘å®šåˆ°nfs-client-provisioner Service Accountã€‚æ¥ä¸‹æ¥æ˜¯ä¸€ä¸ªRole YAML æ–‡ä»¶ï¼Œå®ƒå®šä¹‰äº†leader-locking-nfs-client-provisionerè§’è‰²ï¼Œè¯¥è§’è‰²å…·æœ‰getã€listã€watchã€createã€update å’Œpatch æ“ä½œçš„æƒé™ã€‚&lt;/li&gt;
&lt;li&gt;æœ€åï¼Œæ˜¯ä¸€ä¸ªRoleBinding YAML æ–‡ä»¶ï¼Œå®ƒå°†ä¸Šè¿°è§’è‰²ç»‘å®šåˆ°nfs-client-provisionerService Accountã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;å®‰è£…nfs-provisioner ç¨‹åº&lt;a href=&quot;#å®‰è£…nfs-provisioner-ç¨‹åº&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;apps/v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Deployment&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nfs-client-provisioner&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;labels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nfs-client-provisioner&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;namespace&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;default&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;replicas&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;strategy&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Recreate&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;selector&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;matchLabels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nfs-client-provisioner&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;template&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;labels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nfs-client-provisioner&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;serviceAccountName&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nfs-client-provisioner&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;containers&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nfs-client-provisioner&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;image&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;registry.k8s.io/sig-storage/nfs-subdir-external-provisioner:v4.0.2&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;volumeMounts&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nfs-client-root&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;mountPath&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/persistentvolumes&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;27&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;env&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;28&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;PROVISIONER_NAME&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;29&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;kubernetes.test/nfs&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;30&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;NFS_SERVER&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;31&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;10.0.0.13&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;32&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;NFS_PATH&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;33&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/nfs/data&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;34&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;volumes&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;35&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nfs-client-root&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;36&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;nfs&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;37&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;server&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;10.0.0.13&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;38&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;path&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/nfs/data&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;åˆ›å»ºstorageclassï¼ŒåŠ¨æ€ä¾›ç»™pv&lt;a href=&quot;#åˆ›å»ºstorageclassåŠ¨æ€ä¾›ç»™pv&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;storage.k8s.io/v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;StorageClass&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nfs-storage&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;provisioner&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;kubernetes.test/nfs&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;parameters&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;archiveOnDelete&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;true&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;åˆ›å»º PVCï¼Œè‡ªåŠ¨è·å– PV åˆ†é…&lt;a href=&quot;#åˆ›å»º-pvcè‡ªåŠ¨è·å–-pv-åˆ†é…&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;PersistentVolumeClaim&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;test-pvc&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;accessModes&lt;/span&gt;&lt;span&gt;: [&lt;/span&gt;&lt;span&gt;&quot;ReadWriteMany&quot;&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;resources&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;requests&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;storage&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;1Gi&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;storageClassName&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nfs-storage&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;åœ¨åˆ›å»º PVC åï¼Œè§‚å¯Ÿ kubelet äº‹ä»¶å¯ä»¥å‘ç°&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;LAST SEEN   TYPE     REASON                 OBJECT                           MESSAGE&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;0s          Normal   ExternalProvisioning   PersistentVolumeClaim/test-pvc   Waiting for a volume to be created either by the external provisioner &apos;kubernetes.test/nfs&apos; or manually by the system administrator. If volume creation is delayed, please verify that the provisioner is running and correctly registered.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;0s          Normal   Provisioning           PersistentVolumeClaim/test-pvc   External provisioner is provisioning volume for claim &quot;default/test-pvc&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;0s          Normal   ProvisioningSucceeded   PersistentVolumeClaim/test-pvc   Successfully provisioned volume pvc-9984fc2a-bfa7-4aca-8901-7f273174392f&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;0s (x2 over 0s)   Normal   ExternalProvisioning    PersistentVolumeClaim/test-pvc   Waiting for a volume to be created either by the external provisioner &apos;kubernetes.test/nfs&apos; or manually by the system administrator. If volume creation is delayed, please verify that the provisioner is running and correctly registered.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;</content:encoded></item><item><title>Kuberneteså­¦ä¹ ç¬”è®°å…«ï¼šKubernetes Service</title><link>https://white-festa.net/posts/kubernetes-tutorial/service/</link><guid isPermaLink="true">https://white-festa.net/posts/kubernetes-tutorial/service/</guid><description>é€šè¿‡Kubernetes Serviceå°†å·¥ä½œè´Ÿè½½å¯¹å¤–æš´éœ²</description><pubDate>Mon, 03 Jun 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;åœ¨ Kubernetes ä¸­ï¼ŒService æ˜¯ä¸€ç§æŠ½è±¡èµ„æºï¼Œç”¨äºå®šä¹‰ä¸€ç»„ Pod çš„è®¿é—®ç­–ç•¥ã€‚å®ƒä¸ºè¿™äº› Pod æä¾›ç»Ÿä¸€çš„è®¿é—®å…¥å£ï¼Œè§£å†³ Pod çš„ IP ä¸ç¨³å®šé—®é¢˜ï¼Œå®ç°è´Ÿè½½å‡è¡¡å’ŒæœåŠ¡å‘ç°ç­‰åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;section&gt;&lt;h1&gt;Service çš„ä½œç”¨&lt;a href=&quot;#service-çš„ä½œç”¨&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;
























&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;åŠŸèƒ½&lt;/th&gt;&lt;th&gt;è¯´æ˜&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;æœåŠ¡å‘ç°&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;ä¸ºä¸€ç»„å…·æœ‰ç›¸åŒæ ‡ç­¾çš„ Pod æä¾›ä¸€ä¸ªå›ºå®šçš„è®¿é—®åœ°å€ï¼ˆClusterIP æˆ–å…¶ä»–ï¼‰ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;è´Ÿè½½å‡è¡¡&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;å°†è®¿é—®è¯·æ±‚å‡è¡¡åœ°åˆ†å‘åˆ°åç«¯å¤šä¸ª Podã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;è§£è€¦åº”ç”¨ç»„ä»¶&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;å®¢æˆ·ç«¯åªéœ€çŸ¥é“æœåŠ¡åç§°ï¼Œè€Œä¸å…³å¿ƒå…·ä½“ Pod çš„ IPã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;è·¨å‘½åç©ºé—´é€šä¿¡ï¼ˆé€šè¿‡ DNSï¼‰&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;å¯ä»¥ä½¿ç”¨ &lt;code&gt;&amp;lt;service&amp;gt;.&amp;lt;namespace&amp;gt;.svc.cluster.local&lt;/code&gt; å½¢å¼è®¿é—®æœåŠ¡ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;Service é…ç½®æ–‡ä»¶ç»“æ„&lt;a href=&quot;#service-é…ç½®æ–‡ä»¶ç»“æ„&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;



































































































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å­—æ®µè·¯å¾„&lt;/th&gt;&lt;th&gt;ç±»å‹&lt;/th&gt;&lt;th&gt;ç¤ºä¾‹/è¯´æ˜&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;apiVersion&lt;/code&gt;&lt;/td&gt;&lt;td&gt;string&lt;/td&gt;&lt;td&gt;&lt;code&gt;v1&lt;/code&gt;ï¼ˆå›ºå®šï¼‰&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;kind&lt;/code&gt;&lt;/td&gt;&lt;td&gt;string&lt;/td&gt;&lt;td&gt;&lt;code&gt;Service&lt;/code&gt;ï¼ˆå›ºå®šï¼‰&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;metadata.name&lt;/code&gt;&lt;/td&gt;&lt;td&gt;string&lt;/td&gt;&lt;td&gt;æœåŠ¡åç§°&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;metadata.namespace&lt;/code&gt;&lt;/td&gt;&lt;td&gt;string&lt;/td&gt;&lt;td&gt;æ‰€åœ¨å‘½åç©ºé—´ï¼ˆé»˜è®¤æ˜¯ &lt;code&gt;default&lt;/code&gt;ï¼‰&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.selector&lt;/code&gt;&lt;/td&gt;&lt;td&gt;map&lt;/td&gt;&lt;td&gt;&lt;code&gt;{app: nginx}&lt;/code&gt;ï¼Œé€‰æ‹©åŒ¹é…çš„ Pod&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.type&lt;/code&gt;&lt;/td&gt;&lt;td&gt;string&lt;/td&gt;&lt;td&gt;&lt;code&gt;ClusterIP&lt;/code&gt; / &lt;code&gt;NodePort&lt;/code&gt; / &lt;code&gt;LoadBalancer&lt;/code&gt; / &lt;code&gt;ExternalName&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.ports&lt;/code&gt;&lt;/td&gt;&lt;td&gt;list&lt;/td&gt;&lt;td&gt;æœåŠ¡ç«¯å£å®šä¹‰åˆ—è¡¨ï¼Œè¯¦è§ä¸‹æ–¹å­å­—æ®µ&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.ports[].port&lt;/code&gt;&lt;/td&gt;&lt;td&gt;int&lt;/td&gt;&lt;td&gt;æœåŠ¡æš´éœ²çš„ç«¯å£&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.ports[].targetPort&lt;/code&gt;&lt;/td&gt;&lt;td&gt;int/string&lt;/td&gt;&lt;td&gt;åç«¯ Pod çš„ç«¯å£ï¼ˆå¯ä¸ºåç§°æˆ–æ•°å­—ï¼‰&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.ports[].protocol&lt;/code&gt;&lt;/td&gt;&lt;td&gt;string&lt;/td&gt;&lt;td&gt;&lt;code&gt;TCP&lt;/code&gt;ï¼ˆé»˜è®¤ï¼‰æˆ– &lt;code&gt;UDP&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.ports[].name&lt;/code&gt;&lt;/td&gt;&lt;td&gt;string&lt;/td&gt;&lt;td&gt;å¯é€‰ï¼Œä¸ºç«¯å£å‘½å&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.ports[].nodePort&lt;/code&gt;&lt;/td&gt;&lt;td&gt;int&lt;/td&gt;&lt;td&gt;å¦‚æœæ˜¯ NodePort ç±»å‹ï¼ŒæŒ‡å®šæš´éœ²çš„èŠ‚ç‚¹ç«¯å£&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.clusterIP&lt;/code&gt;&lt;/td&gt;&lt;td&gt;string&lt;/td&gt;&lt;td&gt;é»˜è®¤è‡ªåŠ¨åˆ†é…ï¼Œå¯ä»¥æŒ‡å®šæˆ–è®¾ç½®ä¸º &lt;code&gt;None&lt;/code&gt;ï¼ˆå³ Headlessï¼‰&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.externalName&lt;/code&gt;&lt;/td&gt;&lt;td&gt;string&lt;/td&gt;&lt;td&gt;å¦‚æœç±»å‹ä¸º &lt;code&gt;ExternalName&lt;/code&gt;ï¼Œè¿™é‡ŒæŒ‡å®šå¤–éƒ¨åŸŸå&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.sessionAffinity&lt;/code&gt;&lt;/td&gt;&lt;td&gt;string&lt;/td&gt;&lt;td&gt;&lt;code&gt;None&lt;/code&gt;ï¼ˆé»˜è®¤ï¼‰æˆ– &lt;code&gt;ClientIP&lt;/code&gt;ï¼Œç”¨äºä¿æŒè¿æ¥ä¼šè¯&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.externalTrafficPolicy&lt;/code&gt;&lt;/td&gt;&lt;td&gt;string&lt;/td&gt;&lt;td&gt;&lt;code&gt;Cluster&lt;/code&gt;ï¼ˆé»˜è®¤ï¼‰æˆ– &lt;code&gt;Local&lt;/code&gt;ï¼Œä»… NodePort/LoadBalancer ä½¿ç”¨&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.loadBalancerIP&lt;/code&gt;&lt;/td&gt;&lt;td&gt;string&lt;/td&gt;&lt;td&gt;æŒ‡å®šé™æ€è´Ÿè½½å‡è¡¡ IPï¼ˆåœ¨æŸäº›äº‘å¹³å°æ”¯æŒï¼‰&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.healthCheckNodePort&lt;/code&gt;&lt;/td&gt;&lt;td&gt;int&lt;/td&gt;&lt;td&gt;è®¾ç½®ç”¨äºå¥åº·æ£€æŸ¥çš„ç«¯å£ï¼ˆä»… LoadBalancer ç±»å‹ï¼‰&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;Service çš„ç±»å‹&lt;a href=&quot;#service-çš„ç±»å‹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;




























&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;ç±»å‹&lt;/th&gt;&lt;th&gt;æè¿°&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;ClusterIPï¼ˆé»˜è®¤ï¼‰&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;åªåœ¨é›†ç¾¤å†…éƒ¨å¯è®¿é—®ï¼Œæä¾›ä¸€ä¸ªé›†ç¾¤å†… IPã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;NodePort&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;åœ¨æ¯ä¸ªèŠ‚ç‚¹å¼€æ”¾ä¸€ä¸ªç«¯å£ï¼Œé€šè¿‡è¯¥ç«¯å£å¯ä»å¤–éƒ¨è®¿é—®æœåŠ¡ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;LoadBalancer&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;ä¸äº‘æœåŠ¡æä¾›å•†é›†æˆï¼Œåˆ†é…ä¸€ä¸ªå¤–éƒ¨è´Ÿè½½å‡è¡¡å™¨ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;ExternalName&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;å°†æœåŠ¡æ˜ å°„åˆ°å¤–éƒ¨ DNS åç§°ï¼Œä¸åˆ›å»ºä»£ç†è§„åˆ™ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Headlessï¼ˆæ—  ClusterIPï¼‰&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;clusterIP: None&lt;/code&gt;ï¼Œç”¨äºæš´éœ² Pod å®é™… IPï¼Œå®ç°è‡ªå®šä¹‰æœåŠ¡å‘ç°ï¼ˆå¦‚ StatefulSetï¼‰ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;å®è·µ&lt;a href=&quot;#å®è·µ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;æœ‰è¿™æ ·ä¸€ä¸ª deploymentï¼Œä¸ºå®ƒé…ç½® service æµé‡å…¥å£&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;apps/v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Deployment&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;labels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;test-nginx-1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;test-nginx-1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;replicas&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;selector&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;matchLabels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;test-nginx-1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;template&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;labels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;test-nginx-1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;containers&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;image&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx:latest&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;ports&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;containerPort&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;80&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;section&gt;&lt;h2&gt;ä½¿ç”¨ Cluster IP&lt;a href=&quot;#ä½¿ç”¨-cluster-ip&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Cluster IP åªé€‚ç”¨äºé›†ç¾¤çš„å†…éƒ¨è®¿é—®ï¼ŒèŠ‚ç‚¹å¤–æ— æ³•è®¿é—®æœåŠ¡&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Service&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;labels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;test-nginx-cluster-ip&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;test-nginx-cluster-ip&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;ClusterIP&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;ports&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;80-80&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;port&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;80&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;protocol&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;TCP&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;targetPort&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;80&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;appProtocol&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;TCP&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;selector&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;test-nginx-1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;section&gt;&lt;h3&gt;Cluster IP å¦‚ä½•å°†æµé‡è½¬å‘ç»™ Podï¼Ÿ&lt;a href=&quot;#cluster-ip-å¦‚ä½•å°†æµé‡è½¬å‘ç»™-pod&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;ä½¿ç”¨ &lt;code&gt;kubectl describe svc test-nginx-cluster-ip&lt;/code&gt;å¯ä»¥å¾—åˆ°ä»¥ä¸‹ä¿¡æ¯ï¼š&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Name:                     test-nginx-1-svc&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Namespace:                default&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Labels:                   app=test-nginx-1-svc&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Annotations:              &amp;lt;none&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Selector:                 app=test-nginx-1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Type:                     ClusterIP&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;IP Family Policy:         SingleStack&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;IP Families:              IPv4&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;IP:                       10.152.183.166&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;IPs:                      10.152.183.166&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Port:                     80-80  80/TCP&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;TargetPort:               80/TCP&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Endpoints:                10.1.157.243:80,10.1.157.244:80&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Session Affinity:         None&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Internal Traffic Policy:  Cluster&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Events:                   &amp;lt;none&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;å…¶ä¸­ &lt;code&gt;endpoints&lt;/code&gt; ä¹Ÿæ˜¯ kubernetes ä¸­çš„ä¸€ç§å·¥ä½œèµ„æºï¼Œå®ƒä¸ service æ˜¯ä¸€å¯¹ç´§å¯†å…³è”çš„æ¦‚å¿µã€‚ç”¨ä¸€å¥è¯æ¥ç†è§£ï¼š Service æ˜¯ä¸€ä¸ªè®¿é—®å…¥å£ï¼ŒEndpoints æ˜¯å®ƒâ€œå®é™…è¿æ¥åˆ°çš„ Pod åˆ—è¡¨â€ã€‚&lt;/li&gt;
&lt;li&gt;å½“ service æœåŠ¡è¢«åˆ›å»ºæ—¶ï¼Œservice ä¼šåŒæ­¥åˆ›å»ºä¸€ä¸ª endpoints å¯¹è±¡ï¼Œè¯¥å¯¹è±¡è®°å½•äº†å¯æ¥å—æµé‡è½¬å‘çš„ ip åœ°å€ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œendpoints å®é™…ä¸Šæ˜¯ service çš„&lt;code&gt;è¿æ¥æ± &lt;/code&gt;&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ &lt;code&gt;kubectl get endpoints&lt;/code&gt; å¯ä»¥ æŸ¥çœ‹è¿æ¥æ± ï¼š&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;NAME               ENDPOINTS                         AGE&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kubernetes         10.0.0.85:16443                   13d&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;test-nginx-1-svc   10.1.157.243:80,10.1.157.244:80   11m&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;å½“å®¢æˆ·ç«¯å‘èµ·ä¸€ä¸ªè¯·æ±‚ï¼Œè®¿é—® service çš„ Cluster IP åœ°å€æ—¶ï¼Œè¯·æ±‚å…ˆåˆ°è¾¾ kubernetes é›†ç¾¤èŠ‚ç‚¹ä¸Šçš„ &lt;code&gt;kube-proxy&lt;/code&gt; ç»„ä»¶ã€‚&lt;code&gt;kube-proxy&lt;/code&gt; ä¼šæ ¹æ® service ç›‘å¬çš„ç«¯å£å·å’Œåè®®é€‰æ‹©å¯¹åº”çš„åç«¯åœ°å€å’Œç«¯å£ï¼Œç„¶åè½¬å‘è¯·æ±‚åˆ°è¿™äº›åç«¯ Pod ä¸Šã€‚&lt;code&gt;kube-proxy&lt;/code&gt; ä¼šæ ¹æ® &lt;code&gt;iptables&lt;/code&gt; è§„åˆ™æˆ– &lt;code&gt;IPVS&lt;/code&gt; è´Ÿè½½å‡è¡¡ç®—æ³•ç­‰æ–¹å¼æ¥åšè¯·æ±‚çš„è´Ÿè½½å‡è¡¡ã€‚&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;&lt;/p&gt;&lt;figure&gt;&lt;img src=&quot;https://cdn.nlark.com/yuque/0/2025/jpeg/56115187/1749443731241-00faa9e9-739c-45e1-85e6-fb26792953bf.jpeg&quot; alt=&quot;&quot; /&gt;&lt;figcaption&gt;ç”»æ¿&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;é›†ç¾¤çš„ç»å¯¹åŸŸåï¼ˆFQDNï¼‰&lt;a href=&quot;#é›†ç¾¤çš„ç»å¯¹åŸŸåfqdn&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Service åªè¦åˆ›å»ºå®Œæˆï¼Œå°±ä¼šç”Ÿæˆä¸€ä¸ªç»å¯¹åŸŸåç”¨äºé›†ç¾¤å†…éƒ¨èµ„æºçš„è§£æï¼Œæ¯ä¸ªæœåŠ¡åˆ›å»ºå®Œæˆåéƒ½ä¼šåœ¨é›†ç¾¤ dns ä¸­åŠ¨æ€æ·»åŠ ä¸€ä¸ªèµ„æºè®°å½•ï¼Œèµ„æºè®°å½•æ ¼å¼æ˜¯ï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;SVC_NAME.NS_NAME.DOMAIN.LTD&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;å³ æœåŠ¡åç§°.å‘½åç©ºé—´.åŸŸååç¼€ï¼Œé›†ç¾¤çš„é»˜è®¤åŸŸååç¼€æ˜¯ &lt;code&gt;svc.cluster.local&lt;/code&gt;&lt;/p&gt;&lt;p&gt;å› æ­¤ï¼Œä»¥è¿™ä¸ªåˆ›å»ºçš„ Cluster IP æœåŠ¡ä¸ºä¾‹ï¼Œå®ƒçš„ç»å¯¹åŸŸåæ˜¯ï¼š&lt;code&gt;test-nginx-1-svc.default.svc.cluster.local&lt;/code&gt;ï¼Œåœ¨ä»»ä½•ä¸€ä¸ª Pod å†…éƒ½å¯ä»¥è®¿é—®åˆ°å®ƒ&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[root@microk8s-85 ~]#kubectl exec -it test-nginx-1-7df69d5c76-t5n68 -- bash&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;root@test-nginx-1-7df69d5c76-t5n68:/# curl test-nginx-1-svc.default.svc.cluster.local&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;!DOCTYPE html&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;html&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;head&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;title&amp;gt;Welcome to nginx!&amp;lt;/title&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;style&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;html { color-scheme: light dark; }&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;body { width: 35em; margin: 0 auto;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;font-family: Tahoma, Verdana, Arial, sans-serif; }&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;/style&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;/head&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;body&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;h1&amp;gt;Welcome to nginx!&amp;lt;/h1&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;p&amp;gt;If you see this page, the nginx web server is successfully installed and&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;working. Further configuration is required.&amp;lt;/p&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;p&amp;gt;For online documentation and support please refer to&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;a href=&quot;http://nginx.org/&quot;&amp;gt;nginx.org&amp;lt;/a&amp;gt;.&amp;lt;br/&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Commercial support is available at&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;a href=&quot;http://nginx.com/&quot;&amp;gt;nginx.com&amp;lt;/a&amp;gt;.&amp;lt;/p&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;p&amp;gt;&amp;lt;em&amp;gt;Thank you for using nginx.&amp;lt;/em&amp;gt;&amp;lt;/p&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;/body&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;/html&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;root@test-nginx-1-7df69d5c76-t5n68:/#&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;è¯¥ç‰¹æ€§åœ¨é›†ç¾¤ä¸­çš„å¤šä¸ªåº”ç”¨å¤¸å‘½åç©ºé—´é€šä¿¡èµ·åˆ°éå¸¸é‡è¦çš„ä½œç”¨&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;ä½¿ç”¨ NodePort&lt;a href=&quot;#ä½¿ç”¨-nodeport&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;NodePort ä»‹ç»&lt;a href=&quot;#nodeport-ä»‹ç»&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;NodePort&lt;/strong&gt; æ˜¯ Kubernetes ä¸­ä¸€ç§ Service ç±»å‹ï¼Œå®ƒé€šè¿‡åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šå¼€æ”¾ä¸€ä¸ªç«¯å£ï¼Œå°†é›†ç¾¤å†…éƒ¨çš„æœåŠ¡æš´éœ²åˆ°é›†ç¾¤å¤–éƒ¨ï¼Œä½¿ç”¨æˆ·å¯ä»¥é€šè¿‡ &lt;code&gt;&amp;lt;NodeIP&amp;gt;:&amp;lt;NodePort&amp;gt;&lt;/code&gt; çš„æ–¹å¼è®¿é—®æœåŠ¡ã€‚&lt;/p&gt;&lt;p&gt;NodePort ä¸é€‚åˆåœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ä½¿ç”¨ï¼Œè¿™æ˜¯å› ä¸º&lt;/p&gt;&lt;ol&gt;
&lt;li&gt;ç«¯å£èŒƒå›´æœ‰é™ï¼šNodePort çš„ç«¯å£èŒƒå›´æ˜¯ é»˜è®¤ 30000-32767ï¼Œä¸€å…±åªæœ‰ 2768 ä¸ªç«¯å£ï¼Œå®¹æ˜“å†²çªã€éš¾ä»¥ç®¡ç†ã€‚&lt;/li&gt;
&lt;li&gt;æš´éœ²æ•´ä¸ªé›†ç¾¤èŠ‚ç‚¹ï¼šæ‰€æœ‰èŠ‚ç‚¹éƒ½æš´éœ²è¯¥ç«¯å£ï¼Œå¢åŠ äº† å®‰å…¨æ”»å‡»é¢ã€‚æ— æ³•ç»†ç²’åº¦æ§åˆ¶è®¿é—®æ¥æºã€‚&lt;/li&gt;
&lt;li&gt;ç¼ºä¹è´Ÿè½½å‡è¡¡èƒ½åŠ›ï¼šè™½ç„¶è®¿é—®ä»»æ„èŠ‚ç‚¹éƒ½å¯è½¬å‘æµé‡ï¼Œä½†è¿™ç§ è½®è¯¢ä¸æ˜¯çœŸæ­£çš„ L7 è´Ÿè½½å‡è¡¡ï¼Œä¸”æ— å¥åº·æ£€æŸ¥ç­–ç•¥ã€‚&lt;/li&gt;
&lt;li&gt;ä¸æ”¯æŒ HTTPS/åŸŸåç»‘å®šï¼šåªèƒ½ä½¿ç”¨ IP + ç«¯å£è®¿é—®ï¼Œæ— æ³•é…ç½® TLSã€åŸŸåè·¯ç”±ç­‰ä¼ä¸šçº§è¦æ±‚ã€‚&lt;/li&gt;
&lt;li&gt;å…¬ç½‘è®¿é—®éº»çƒ¦ï¼šé€šå¸¸éœ€è¦æ‰‹åŠ¨å¼€æ”¾é˜²ç«å¢™ç«¯å£æˆ–é…ç½®å…¬ç½‘ IPï¼Œä¸äº‘å¹³å°é›†æˆåº¦ä½ã€‚&lt;/li&gt;
&lt;/ol&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;æ ¹æ®ä¹‹å‰çš„ deployment å®Œæˆ NodePort æœåŠ¡éƒ¨ç½²&lt;a href=&quot;#æ ¹æ®ä¹‹å‰çš„-deployment-å®Œæˆ-nodeport-æœåŠ¡éƒ¨ç½²&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Service&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;labels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;test-nginx-1-svc&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;test-nginx-1-svc&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;ports&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;80-80&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;nodePort&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;32001&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;# å¯¹å¤–æš´éœ²çš„èŠ‚ç‚¹ç«¯å£&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;port&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;80&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;# é€»è¾‘å±‚çš„æœåŠ¡ç«¯å£&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;protocol&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;TCP&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;targetPort&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;80&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;# Podæ¥æ”¶è¯·æ±‚çš„å®é™…ç«¯å£&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;selector&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;test-nginx-1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;NodePort&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;ç”±äº NodePort æä¾›å¤–éƒ¨è®¿é—®èƒ½åŠ›ï¼Œå› æ­¤ç›¸æ¯”äº Cluster IPï¼Œå¤šäº†ä¸€ä¸ªæµé‡è½¬å‘å±‚ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;æµé‡æµå‘è§£é‡Š&lt;a href=&quot;#æµé‡æµå‘è§£é‡Š&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;ç”¨æˆ·è®¿é—®ï¼šç”¨æˆ·ä»é›†ç¾¤å¤–è®¿é—®æŸä¸ªèŠ‚ç‚¹çš„ IP å’Œç«¯å£ï¼Œå¦‚ï¼š&lt;code&gt;http://&amp;lt;NodeIP&amp;gt;:30080&lt;/code&gt;ã€‚è¿™ä¸ªç«¯å£å°±æ˜¯ &lt;code&gt;nodePort&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;èŠ‚ç‚¹ç«¯å£æ¥æ”¶æµé‡ï¼šKubernetes åœ¨è¯¥èŠ‚ç‚¹ä¸Šç›‘å¬ 32001 ç«¯å£ï¼ˆæ‰€æœ‰é›†ç¾¤èŠ‚ç‚¹ä¸Šéƒ½ä¼šç›‘å¬ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;è½¬å‘åˆ° Service çš„ &lt;code&gt;port&lt;/code&gt;ï¼šæ¥æ”¶åˆ°çš„æµé‡ä¼šé€šè¿‡ &lt;code&gt;kube-proxy&lt;/code&gt; è½¬å‘åˆ° Service çš„ &lt;code&gt;port: 80&lt;/code&gt;ï¼ˆè¿™æ˜¯ä¸€ä¸ªé€»è¾‘ç«¯å£ï¼Œä¾›å†…éƒ¨ä½¿ç”¨ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;Service è´Ÿè½½å‡è¡¡åˆ°åç«¯ Podï¼šService ä¼šæ ¹æ®å…¶ selector åŒ¹é…çš„ Pod åˆ—è¡¨ï¼Œä½¿ç”¨è½®è¯¢/éšæœºç­‰æ–¹å¼å°†æµé‡åˆ†å‘åˆ°å…¶ä¸­ä¸€ä¸ª Podã€‚&lt;/li&gt;
&lt;li&gt;è½¬å‘åˆ° Pod çš„å®¹å™¨ç«¯å£ï¼šæµé‡è¢«å‘é€åˆ°è¯¥ Pod çš„å®¹å™¨ &lt;code&gt;targetPort: 8080&lt;/code&gt;ï¼Œå³è¯¥å®¹å™¨çœŸå®ç›‘å¬çš„ç«¯å£ã€‚&lt;/li&gt;
&lt;/ol&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;ä¿®æ”¹ NodePort çš„å¯ç”¨ç«¯å£èŒƒå›´&lt;a href=&quot;#ä¿®æ”¹-nodeport-çš„å¯ç”¨ç«¯å£èŒƒå›´&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Kubernetes ä¸­ NodePort çš„å¯ç”¨ç«¯å£èŒƒå›´é»˜è®¤æ˜¯ &lt;code&gt;30000â€“32767&lt;/code&gt;ï¼Œè¦æƒ³ä¿®æ”¹è¿™ä¸€èŒƒå›´ï¼Œéœ€è¦ä¿®æ”¹ &lt;code&gt;kube-apiserver&lt;/code&gt; å’Œ &lt;code&gt;kubelet&lt;/code&gt; çš„é…ç½®ã€‚&lt;/p&gt;&lt;p&gt;NodePort çš„åˆ†é…èŒƒå›´æ˜¯ç”± Kubernetes æ§åˆ¶å¹³é¢çš„ç»„ä»¶ &lt;code&gt;kube-apiserver&lt;/code&gt; å†³å®šçš„ï¼Œå…¶é…ç½®é¡¹ä¸ºï¼š&lt;code&gt;--service-node-port-range=&amp;lt;èµ·å§‹ç«¯å£&amp;gt;-&amp;lt;ç»“æŸç«¯å£&amp;gt;&lt;/code&gt;&lt;/p&gt;&lt;p&gt;å¯¹äºä½¿ç”¨kubeadm å®‰è£…çš„é›†ç¾¤ï¼š&lt;/p&gt;&lt;ol&gt;
&lt;li&gt;ç¼–è¾‘ kube-apiserver çš„é…ç½®&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;vim&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/etc/kubernetes/manifests/kube-apiserver.yaml&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;æ‰¾åˆ°ç±»ä¼¼å¦‚ä¸‹çš„å¯åŠ¨å‚æ•°éƒ¨åˆ†ï¼Œæ·»åŠ æˆ–ä¿®æ”¹&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;containers&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;command&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;kube-apiserver&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;--service-node-port-range=20000-40000&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;# æ·»åŠ è¿™ä¸€è¡Œ&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;ä¿å­˜æ–‡ä»¶åï¼Œkubelet ä¼šè‡ªåŠ¨é‡å¯è¯¥é™æ€ Podã€‚&lt;/li&gt;
&lt;li&gt;éªŒè¯æ˜¯å¦ç”Ÿæ•ˆ : &lt;code&gt;kubectl describe node &amp;lt;node-name&amp;gt; | grep &quot;Service Node Port Range&quot;&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;ä½¿ç”¨ External Name è¿æ¥é›†ç¾¤å†…å¤–çš„æœåŠ¡&lt;a href=&quot;#ä½¿ç”¨-external-name-è¿æ¥é›†ç¾¤å†…å¤–çš„æœåŠ¡&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;æ¦‚å¿µ&lt;a href=&quot;#æ¦‚å¿µ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;åœ¨ Kubernetes ä¸­ï¼ŒExternalName æ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„ Serviceï¼Œç”¨äºå°†ä¸€ä¸ªé›†ç¾¤å†…çš„æœåŠ¡åç§°æ˜ å°„åˆ° é›†ç¾¤å¤–éƒ¨çš„ DNS åç§°ã€‚ExternalName ç±»å‹çš„ Service ä¸ä¼šåˆ›å»ºä»»ä½• ClusterIPï¼Œä¹Ÿä¸ä¼šè¿›è¡Œè´Ÿè½½å‡è¡¡æˆ–ä»£ç†ï¼Œè€Œæ˜¯é€šè¿‡ DNS CNAME è®°å½• å°† Service åç§°è§£æä¸ºå¤–éƒ¨ä¸»æœºåã€‚&lt;/p&gt;&lt;p&gt;ä¹Ÿå°±æ˜¯è¯´ExternalName çš„æœ¬è´¨ä½œç”¨å°±æ˜¯å°† Kubernetes é›†ç¾¤å†…éƒ¨çš„æœåŠ¡åæ˜ å°„åˆ°å¤–éƒ¨çš„ DNS åŸŸåï¼Œèµ·åˆ°â€œæ¡¥æ¢â€ä½œç”¨ï¼Œæ–¹ä¾¿é›†ç¾¤å†…ç¨‹åºè®¿é—®é›†ç¾¤å¤–çš„æœåŠ¡ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;ç¤ºä¾‹&lt;a href=&quot;#ç¤ºä¾‹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;å‡å¦‚æœ‰ä¸€ä¸ªmysqlæ•°æ®åº“æœåŠ¡ï¼Œéƒ¨ç½²åœ¨å…¬ç½‘è™šæ‹Ÿæœºä¸Šï¼Œipåœ°å€æ˜¯44.128.17.88ï¼Œè¿˜æœ‰ä¸€ä¸ªåŸŸådb.qucikservice.netè§£æåˆ°äº†è¿™ä¸ªåŸŸåä¸Šã€‚ ç„¶åæœ‰ä¸€ä¸ªpython djangoç¨‹åºç”¨æ¥æ‰§è¡Œæ•°æ®åº“å¢åˆ æ”¹æŸ¥æ“ä½œï¼Œå¯ä»¥ä½¿ç”¨ External Name è®© django ç¨‹åºè¿æ¥åˆ°æ•°æ®åº“ï¼Œæ–¹æ³•å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;ol&gt;
&lt;li&gt;åˆ›å»º ExternalName Service&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Service&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;mysql-service&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;namespace&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;default&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;ExternalName&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;externalName&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;db.quickservice.net&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;åœ¨ Django çš„ setting.py ä¸­é…ç½®æ•°æ®åº“è¿æ¥&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;DATABASES&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; {&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;&apos;default&apos;&lt;/span&gt;&lt;span&gt;: {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;&apos;ENGINE&apos;&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&apos;django.db.backends.mysql&apos;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;&apos;NAME&apos;&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&apos;your_database_name&apos;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;&apos;USER&apos;&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&apos;your_username&apos;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;&apos;PASSWORD&apos;&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&apos;your_password&apos;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;&apos;HOST&apos;&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&apos;mysql-service&apos;&lt;/span&gt;&lt;span&gt;,   &lt;/span&gt;&lt;span&gt;# ä½¿ç”¨ ExternalName service åç§°&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;&apos;PORT&apos;&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&apos;3306&apos;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;ä½¿ç”¨ deployment éƒ¨ç½² django æœåŠ¡&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;apps/v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Deployment&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;django-app&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;replicas&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;selector&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;matchLabels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;django-app&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;template&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;labels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;django-app&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;containers&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;django&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;image&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;your-django-image:latest&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;env&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;DJANGO_DB_HOST&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;mysql-service&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;DJANGO_DB_NAME&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;your_database_name&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;DJANGO_DB_USER&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;valueFrom&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;secretKeyRef&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;mysql-secret&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;27&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;key&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;username&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;28&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;DJANGO_DB_PASSWORD&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;29&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;valueFrom&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;30&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;secretKeyRef&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;31&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;mysql-secret&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;32&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;key&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;password&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;æˆåŠŸéƒ¨ç½²åï¼Œdjango ä¼šå°è¯•ä½¿ç”¨é›†ç¾¤çš„ FQDN æ¥è¿æ¥æ•°æ®åº“ &lt;code&gt;mysql-service.default.svc.cluster.local&lt;/code&gt;,  ç”±äº ExternalName çš„å­˜åœ¨ï¼Œå½“è®¿é—®è¯¥åŸŸåæ—¶ï¼Œé›†ç¾¤ DNS ä¼šè¿”å›ä¸€ä¸ª CNAMEï¼šdb.quickservice.netï¼Œç„¶ååº”ç”¨ä¼šè‡ªå·±å‘èµ· TCP è¿æ¥åˆ°è¿™ä¸ªåŸŸåã€‚&lt;/p&gt;&lt;hr /&gt;&lt;blockquote&gt;&lt;p&gt;ç”±æ­¤å¯çŸ¥ï¼Œ&lt;code&gt;ExternalName&lt;/code&gt; ç±»å‹çš„ Service åœ¨ Kubernetes ä¸­çš„æœ¬è´¨å°±æ˜¯ï¼š&lt;/p&gt;&lt;p&gt;å‘ Kubernetes å†…éƒ¨çš„ DNS ç³»ç»Ÿï¼ˆCoreDNSï¼‰ æ·»åŠ ä¸€æ¡ CNAME è®°å½•ï¼Œå°†é›†ç¾¤å†…çš„ Service åç§°æ˜ å°„åˆ°é›†ç¾¤å¤–çš„ä¸€ä¸ªåŸŸåã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;ä½¿ç”¨æ— æ ‡ç­¾é€‰æ‹©å™¨çš„ Service ç»“åˆè‡ªå®šä¹‰ EndPoints å…³è”å¤–éƒ¨æœåŠ¡&lt;a href=&quot;#ä½¿ç”¨æ— æ ‡ç­¾é€‰æ‹©å™¨çš„-service-ç»“åˆè‡ªå®šä¹‰-endpoints-å…³è”å¤–éƒ¨æœåŠ¡&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;ä½¿ç”¨æ— æ ‡ç­¾é€‰æ‹©å™¨çš„ Service ç»“åˆè‡ªå®šä¹‰ EndPoints å¯ä»¥å°†å¤–éƒ¨çš„æœåŠ¡è®¾ä¸ºæ¥å—é€šè¿‡ kubernetes service æ¥å—è¯·æ±‚çš„åœ°å€æ± ã€‚&lt;/p&gt;&lt;p&gt;æ¯”å¦‚åœ¨ 10.0.0.31 æœºå™¨ä¸Šéƒ¨ç½²äº†ä¸€ä¸ª mysql æ•°æ®åº“ï¼Œå¦‚ä½•è®© k8s é›†ç¾¤ä¸­éƒ¨ç½²çš„åç«¯ç¨‹åºèƒ½å¤Ÿåœ¨è¿™ä¸ªæ•°æ®åº“ä¸­æ‰§è¡Œå¢åˆ æ”¹æŸ¥æ“ä½œï¼Ÿ&lt;/p&gt;&lt;section&gt;&lt;h3&gt;å£°æ˜ service èµ„æº&lt;a href=&quot;#å£°æ˜-service-èµ„æº&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Service&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;db-service&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;clusterIP&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;None&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;#type: ClusterIP&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;ports&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;port&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;3306&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;ä½¿ç”¨&lt;code&gt;clusterIP: None&lt;/code&gt;è€Œä¸æ˜¯&lt;code&gt;type: ClusterIP&lt;/code&gt;çš„åŸå› ï¼š&lt;/p&gt;&lt;ol&gt;
&lt;li&gt;ä½¿ç”¨&lt;code&gt;clusterIP: None&lt;/code&gt;ï¼ŒDNS æŸ¥è¯¢è¿”å›çš„æ˜¯ Endpoints ä¸­çš„ IP ç›´æ¥åœ°å€ï¼›&lt;/li&gt;
&lt;li&gt;ä¸ä¾èµ– kube-proxyï¼Œä¸ä¼šåˆ›å»ºè™šæ‹Ÿ IP å’Œ iptables è½¬å‘è§„åˆ™&lt;/li&gt;
&lt;li&gt;å¦‚æœä½¿ç”¨ &lt;code&gt;type: ClusterIP&lt;/code&gt; åœ¨ Endpoints æ˜¯â€œæ‰‹åŠ¨åˆ›å»ºçš„é Pod åœ°å€â€çš„æƒ…å†µä¸‹ï¼Œæœ‰æ—¶ä¼šå‡ºç°è½¬å‘å¼‚å¸¸ï¼ˆå–å†³äº CNI å’Œ kube-proxy è¡Œä¸ºï¼‰&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;åœ¨åº”ç”¨æ­¤æ–‡ä»¶åï¼Œè‹¥ä½¿ç”¨ &lt;code&gt;kubectl describe svc mysql-service&lt;/code&gt;å¯ä»¥å‘ç°å…¶ EndPoints åˆ—è¡¨æ˜¯ç©ºçš„ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;åˆ›å»º EndPoints æ–‡ä»¶&lt;a href=&quot;#åˆ›å»º-endpoints-æ–‡ä»¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;æ³¨æ„ EndPoints çš„åç§°å¿…é¡»å¯¹åº” Service çš„åç§°&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Endpoints&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;db-service&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;subsets&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;addresses&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;ip&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;10.0.0.31&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;ports&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;port&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;3306&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;protocol&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;TCP&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;æ£€æŸ¥&lt;a href=&quot;#æ£€æŸ¥&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;åœ¨åº”ç”¨äº†ä¸¤ä¸ªèµ„æºæ¸…å•æ–‡ä»¶åï¼Œæ‰§è¡Œ &lt;code&gt;kubectl describe svc db-service&lt;/code&gt;å¯ä»¥æŸ¥çœ‹ç»“æœ&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Name&lt;/span&gt;&lt;span&gt;:                     &lt;/span&gt;&lt;span&gt;db-service&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Namespace&lt;/span&gt;&lt;span&gt;:                &lt;/span&gt;&lt;span&gt;default&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Labels&lt;/span&gt;&lt;span&gt;:                   &lt;/span&gt;&lt;span&gt;&amp;lt;none&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Annotations&lt;/span&gt;&lt;span&gt;:              &lt;/span&gt;&lt;span&gt;&amp;lt;none&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Selector&lt;/span&gt;&lt;span&gt;:                 &lt;/span&gt;&lt;span&gt;&amp;lt;none&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Type&lt;/span&gt;&lt;span&gt;:                     &lt;/span&gt;&lt;span&gt;ClusterIP&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;IP Family Policy&lt;/span&gt;&lt;span&gt;:         &lt;/span&gt;&lt;span&gt;SingleStack&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;IP Families&lt;/span&gt;&lt;span&gt;:              &lt;/span&gt;&lt;span&gt;IPv4&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;IP&lt;/span&gt;&lt;span&gt;:                       &lt;/span&gt;&lt;span&gt;10.152.183.70&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;IPs&lt;/span&gt;&lt;span&gt;:                      &lt;/span&gt;&lt;span&gt;10.152.183.70&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Port&lt;/span&gt;&lt;span&gt;:                     &lt;/span&gt;&lt;span&gt;&amp;lt;unset&amp;gt;  3306/TCP&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;TargetPort&lt;/span&gt;&lt;span&gt;:               &lt;/span&gt;&lt;span&gt;3306/TCP&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Endpoints&lt;/span&gt;&lt;span&gt;:                &lt;/span&gt;&lt;span&gt;10.0.0.31:3306&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Session Affinity&lt;/span&gt;&lt;span&gt;:         &lt;/span&gt;&lt;span&gt;None&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Internal Traffic Policy&lt;/span&gt;&lt;span&gt;:  &lt;/span&gt;&lt;span&gt;Cluster&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Events&lt;/span&gt;&lt;span&gt;:                   &lt;/span&gt;&lt;span&gt;&amp;lt;none&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;å¯è§å£°æ˜çš„ EndPoints å·²ç»æˆä¸ºäº† service çš„åœ°å€æ± &lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;Service ç«¯å£æ˜ å°„æµç¨‹å›¾&lt;a href=&quot;#service-ç«¯å£æ˜ å°„æµç¨‹å›¾&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;å®¢æˆ·ç«¯æµé‡&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;â”‚&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;â–¼&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Serviceï¼ˆClusterIPï¼‰&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;â”œâ”€â”€ port&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;80            â† æ¥æ”¶å®¢æˆ·ç«¯æµé‡çš„ç«¯å£&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;â””â”€â”€ targetPort&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web     â† è½¬å‘ç»™ Pod ç«¯å£åä¸º web çš„å®¹å™¨ç«¯å£&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;â”‚&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;â–¼&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;Podï¼ˆé€šè¿‡ label selector é€‰ä¸­çš„ï¼‰&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;â””â”€â”€ containerPort&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;80&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web       â† å®¹å™¨ç›‘å¬çš„çœŸå®ç«¯å£&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;è§£é‡Š&lt;/p&gt;




























&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;ä½ç½®&lt;/th&gt;&lt;th&gt;å­—æ®µå&lt;/th&gt;&lt;th&gt;å«ä¹‰&lt;/th&gt;&lt;th&gt;ä¸¾ä¾‹&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;Service&lt;/td&gt;&lt;td&gt;&lt;code&gt;port&lt;/code&gt;&lt;/td&gt;&lt;td&gt;Service å¯¹å¤–æš´éœ²çš„ç«¯å£ï¼ˆé›†ç¾¤å†…å¤–éƒ¨è¯·æ±‚æµé‡è¿›å…¥çš„ç«¯å£ï¼‰&lt;/td&gt;&lt;td&gt;&lt;code&gt;80&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Service&lt;/td&gt;&lt;td&gt;&lt;code&gt;targetPort&lt;/code&gt;&lt;/td&gt;&lt;td&gt;è¯·æ±‚åº”è¯¥è¢«è½¬å‘åˆ° Pod ä¸­å“ªä¸ªç«¯å£ï¼Œå¯ä»¥æ˜¯æ•°å­—æˆ–ç«¯å£å&lt;/td&gt;&lt;td&gt;&lt;code&gt;web&lt;/code&gt;&lt;br /&gt; æˆ– &lt;code&gt;80&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Pod â†’ container&lt;/td&gt;&lt;td&gt;&lt;code&gt;containerPort&lt;/code&gt;&lt;/td&gt;&lt;td&gt;å®¹å™¨çœŸæ­£ç›‘å¬è¯·æ±‚çš„ç«¯å£ï¼Œå¿…é¡»å’Œ &lt;code&gt;targetPort&lt;/code&gt;&lt;br /&gt; åŒ¹é…ï¼ˆç›´æ¥æˆ–é€šè¿‡åå­—ï¼‰&lt;/td&gt;&lt;td&gt;&lt;code&gt;80&lt;/code&gt;&lt;br /&gt;ï¼Œ&lt;code&gt;name: web&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;</content:encoded></item><item><title>Kuberneteså­¦ä¹ ç¬”è®°ä¸ƒï¼šDaemonSetæ§åˆ¶å™¨</title><link>https://white-festa.net/posts/kubernetes-tutorial/deamonset-%E6%8E%A7%E5%88%B6%E5%99%A8/</link><guid isPermaLink="true">https://white-festa.net/posts/kubernetes-tutorial/deamonset-%E6%8E%A7%E5%88%B6%E5%99%A8/</guid><description>ä½¿ç”¨DaemonSetç¡®ä¿åœ¨é›†ç¾¤ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½è¿è¡Œä¸€ä¸ªç‰¹å®šPodï¼Œè¯¥Podå¯ä»¥ç”¨äºæ‰§è¡ŒæŸäº›ç‰¹å®šä»»åŠ¡ã€‚</description><pubDate>Tue, 07 May 2024 00:00:00 GMT</pubDate><content:encoded>&lt;section&gt;&lt;h1&gt;æ¦‚è¿°&lt;a href=&quot;#æ¦‚è¿°&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;DeamonSet æ§åˆ¶å™¨ç”¨äºç¡®ä¿åœ¨é›†ç¾¤ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹ä¸Šè¿è¡Œä¸€ä¸ª Pod çš„å‰¯æœ¬ï¼Œå¹¶ä¸”è¯¥å‰¯æœ¬å¯ä»¥æ‰§è¡Œä¸€äº›ç‰¹å®šä»»åŠ¡ï¼Œå¦‚ç›‘æ§ã€æ—¥å¿—æ”¶é›†ã€èŠ‚ç‚¹ç»´æŠ¤ç­‰ã€‚&lt;/p&gt;&lt;p&gt;ä¸ Deployment ä¸åŒï¼ŒDaemonSet ä¸æŒ‡å®šå‰¯æœ¬æ•°ï¼Œè€Œæ˜¯å›ºå®šåœ°åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šè¿è¡Œä¸€ä¸ª Podï¼Œå½“æ–°çš„èŠ‚ç‚¹åŠ å…¥åˆ°é›†ç¾¤æ—¶ï¼ŒDaemonSet ä¹Ÿä¼šè‡ªåŠ¨åœ°åœ¨æ–°èŠ‚ç‚¹ä¸Šè¿è¡Œä¸€ä¸ª Podï¼Œå½“èŠ‚ç‚¹ä»é›†ç¾¤ä¸­ç§»é™¤æ—¶ï¼Œå¯¹åº”çš„ Pod ä¹Ÿä¼šè¢«è‡ªåŠ¨ç§»é™¤ã€‚&lt;/p&gt;&lt;p&gt;DaemonSet æ§åˆ¶å™¨é€šå¸¸ç”¨äºéƒ¨ç½²ä¸€äº›ç³»ç»Ÿçº§åˆ«çš„æœåŠ¡æˆ–åº”ç”¨ç¨‹åºï¼Œæ¯”å¦‚ &lt;code&gt;fluentd&lt;/code&gt;ã€&lt;code&gt;kube-proxy&lt;/code&gt; å’Œ &lt;code&gt;Node Exporter&lt;/code&gt;ã€‚&lt;/p&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;å…¸å‹åº”ç”¨&lt;a href=&quot;#å…¸å‹åº”ç”¨&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;ol&gt;
&lt;li&gt;æ—¥å¿—æ”¶é›†&lt;br /&gt;
åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šéƒ¨ç½²æ—¥å¿—é‡‡é›†å™¨ï¼ˆå¦‚ &lt;code&gt;Fluentd&lt;/code&gt;ã€&lt;code&gt;Filebeat&lt;/code&gt;ã€&lt;code&gt;Logstash&lt;/code&gt;ï¼‰ï¼Œå°†èŠ‚ç‚¹æœ¬åœ°çš„å®¹å™¨æ—¥å¿—æ”¶é›†å¹¶è½¬å‘åˆ°é›†ä¸­å¼ç³»ç»Ÿï¼ˆå¦‚ &lt;code&gt;Elasticsearch&lt;/code&gt;ã€&lt;code&gt;Kafka&lt;/code&gt;ï¼‰ã€‚è¿™ç§æ–¹å¼å¯ä»¥ç¡®ä¿æ— è®ºåœ¨å“ªä¸ªèŠ‚ç‚¹ä¸Šè¿è¡Œçš„ Podï¼Œå…¶æ—¥å¿—éƒ½èƒ½è¢«é‡‡é›†åˆ°ã€‚&lt;/li&gt;
&lt;li&gt;ç³»ç»Ÿå’ŒèŠ‚ç‚¹æŒ‡æ ‡ç›‘æ§&lt;br /&gt;
åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šè¿è¡ŒæŒ‡æ ‡é‡‡é›†å·¥å…·ï¼ˆå¦‚ &lt;code&gt;Prometheus Node Exporter&lt;/code&gt;ã€&lt;code&gt;Datadog Agent&lt;/code&gt;ã€&lt;code&gt;Telegraf&lt;/code&gt;ï¼‰ï¼Œæ”¶é›† CPUã€å†…å­˜ã€ç£ç›˜ã€ç½‘ç»œç­‰ç³»ç»Ÿçº§åˆ«çš„æ€§èƒ½æ•°æ®ï¼Œå¹¶å‘é€ç»™ç›‘æ§å¹³å°ã€‚æ˜¯ &lt;code&gt;Prometheus/Grafana&lt;/code&gt; ç±»ç›‘æ§ç³»ç»Ÿçš„åŸºç¡€è®¾æ–½éƒ¨åˆ†ã€‚&lt;/li&gt;
&lt;li&gt;ç½‘ç»œæ’ä»¶ç»„ä»¶&lt;br /&gt;
å¾ˆå¤šå®¹å™¨ç½‘ç»œæ¥å£ï¼ˆ&lt;code&gt;CNI&lt;/code&gt;ï¼‰æ’ä»¶ï¼ˆå¦‚ &lt;code&gt;Calico&lt;/code&gt;ã€&lt;code&gt;Cilium&lt;/code&gt;ã€&lt;code&gt;Flannel&lt;/code&gt;ï¼‰éƒ½ä½¿ç”¨ DaemonSet éƒ¨ç½²ä¸€ä¸ªç½‘ç»œä»£ç†æˆ–ç®¡ç†ç»„ä»¶åˆ°æ¯ä¸ªèŠ‚ç‚¹ï¼Œç”¨äºé…ç½®è™šæ‹Ÿç½‘ç»œã€è®¾ç½®è·¯ç”±è§„åˆ™æˆ–æ‰§è¡Œç½‘ç»œç­–ç•¥ã€‚&lt;/li&gt;
&lt;li&gt;å®‰å…¨ç›‘æ§å’Œå®¡è®¡&lt;br /&gt;
è¿è¡Œå®‰å…¨ä»£ç†ï¼ˆå¦‚ &lt;code&gt;Falco&lt;/code&gt;ã€&lt;code&gt;Sysdig&lt;/code&gt;ã€&lt;code&gt;OSSEC&lt;/code&gt;ï¼‰æ¥å®æ—¶ç›‘æ§èŠ‚ç‚¹å’Œå®¹å™¨çš„ç³»ç»Ÿè°ƒç”¨è¡Œä¸ºã€è¿›ç¨‹æ“ä½œã€æ–‡ä»¶è®¿é—®ã€ç½‘ç»œè¿æ¥ç­‰ï¼Œå¸®åŠ©æ£€æµ‹å…¥ä¾µæˆ–å¼‚å¸¸è¡Œä¸ºã€‚&lt;/li&gt;
&lt;li&gt;å­˜å‚¨é©±åŠ¨å’Œè®¾å¤‡æ’ä»¶&lt;br /&gt;
åœ¨æ”¯æŒç‰¹å®šç¡¬ä»¶ï¼ˆå¦‚ GPUã€NVMeï¼‰çš„èŠ‚ç‚¹ä¸Šï¼Œé€šè¿‡ DaemonSet éƒ¨ç½²é©±åŠ¨æ’ä»¶æˆ–èµ„æºç®¡ç†å™¨ï¼ˆå¦‚ &lt;code&gt;NVIDIA device plugin&lt;/code&gt;ï¼‰ï¼Œä»¥å®ç°èµ„æºè°ƒåº¦å’Œéš”ç¦»ã€‚&lt;/li&gt;
&lt;li&gt;å®¹å™¨è¿è¡Œæ—¶å·¥å…·&lt;br /&gt;
éƒ¨ç½²å¦‚ &lt;code&gt;Kata Containers&lt;/code&gt;ã€&lt;code&gt;gVisor&lt;/code&gt; ç­‰æ²™ç®±è¿è¡Œæ—¶å·¥å…·çš„ä»£ç†è¿›ç¨‹ï¼Œå¢å¼ºå®¹å™¨éš”ç¦»å’Œå®‰å…¨æ€§ã€‚è¿™äº›è¿›ç¨‹éœ€è¦ä»¥å®ˆæŠ¤è¿›ç¨‹å½¢å¼å­˜åœ¨äºæ¯ä¸ªç›®æ ‡èŠ‚ç‚¹ä¸Šã€‚&lt;/li&gt;
&lt;li&gt;é•œåƒé¢„æ‹‰å–å™¨ï¼ˆpre-pullerï¼‰&lt;br /&gt;
åœ¨é›†ç¾¤æ›´æ–°å‰ï¼Œä½¿ç”¨ DaemonSet æ‹‰å–æŸäº›å¤§é•œåƒåˆ°æ‰€æœ‰èŠ‚ç‚¹ï¼Œä»¥åŠ å¿«åç»­æœåŠ¡å¯åŠ¨é€Ÿåº¦ï¼Œé˜²æ­¢å› ä¸ºé•œåƒæœªç¼“å­˜å¯¼è‡´çš„éƒ¨ç½²å»¶è¿Ÿã€‚&lt;/li&gt;
&lt;li&gt;èŠ‚ç‚¹æ¸…ç†å™¨æˆ–èµ„æºå›æ”¶å·¥å…·&lt;br /&gt;
è¿è¡Œç£ç›˜æ¸…ç†ã€æ—§æ—¥å¿—åˆ é™¤ã€volume æ¸…ç†ç­‰å·¥å…·ï¼Œä»¥ç¡®ä¿èŠ‚ç‚¹ä¸ä¼šå› æ®‹ç•™æ–‡ä»¶å ç”¨è¿‡å¤šç©ºé—´è€Œå½±å“ç¨³å®šæ€§ã€‚&lt;/li&gt;
&lt;li&gt;è‡ªå®šä¹‰èŠ‚ç‚¹åˆå§‹åŒ–å™¨æˆ–åŠ©æ‰‹è¿›ç¨‹&lt;br /&gt;
æŸäº›ç³»ç»Ÿæˆ–ä¸šåŠ¡éœ€è¦åœ¨èŠ‚ç‚¹ä¸Šè¿è¡Œè‡ªå®šä¹‰çš„åˆå§‹åŒ–è¿›ç¨‹ã€é…ç½®å·¥å…·æˆ–ç»´æŠ¤è„šæœ¬ï¼ŒDaemonSet èƒ½ç¡®ä¿è¿™äº›å·¥å…·åœ¨æ‰€æœ‰èŠ‚ç‚¹ä¸Šä»¥ä¸€è‡´æ–¹å¼è¿è¡Œã€‚&lt;/li&gt;
&lt;li&gt;å®¹å™¨è°ƒè¯•å·¥å…·&lt;br /&gt;
åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šéƒ¨ç½²è°ƒè¯•å®¹å™¨ï¼ˆå¦‚ &lt;code&gt;netshoot&lt;/code&gt;ã€&lt;code&gt;debug-agent&lt;/code&gt;ï¼‰ï¼Œä¾¿äºä½ ç”¨ &lt;code&gt;kubectl exec&lt;/code&gt; è¿›å…¥ä¸€ä¸ªèƒ½æ‰§è¡Œ &lt;code&gt;ping&lt;/code&gt;, &lt;code&gt;curl&lt;/code&gt;, &lt;code&gt;tcpdump&lt;/code&gt;, &lt;code&gt;dig&lt;/code&gt; ç­‰å‘½ä»¤çš„å·¥å…·å®¹å™¨ï¼Œå¸®åŠ©æ’æŸ¥ç½‘ç»œã€å­˜å‚¨ã€DNS ç­‰åº•å±‚é—®é¢˜ã€‚&lt;/li&gt;
&lt;/ol&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;DaemonSet å¯ç”¨é…ç½®&lt;a href=&quot;#daemonset-å¯ç”¨é…ç½®&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;




















































































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å­—æ®µè·¯å¾„&lt;/th&gt;&lt;th&gt;ç±»å‹&lt;/th&gt;&lt;th&gt;è¯´æ˜&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.template.spec&lt;/code&gt;&lt;/td&gt;&lt;td&gt;object&lt;/td&gt;&lt;td&gt;Pod çš„è¯¦ç»†å®šä¹‰ï¼ŒåŒ…å«å®¹å™¨ã€æŒ‚è½½ã€ç½‘ç»œç­‰&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.updateStrategy&lt;/code&gt;&lt;/td&gt;&lt;td&gt;object&lt;/td&gt;&lt;td&gt;æ›´æ–°ç­–ç•¥é…ç½®&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.updateStrategy.type&lt;/code&gt;&lt;/td&gt;&lt;td&gt;string&lt;/td&gt;&lt;td&gt;æ›´æ–°ç±»å‹ï¼š&lt;code&gt;RollingUpdate&lt;/code&gt;ï¼ˆé»˜è®¤ï¼‰æˆ– &lt;code&gt;OnDelete&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.updateStrategy.rollingUpdate.maxUnavailable&lt;/code&gt;&lt;/td&gt;&lt;td&gt;int/string&lt;/td&gt;&lt;td&gt;æ»šåŠ¨æ›´æ–°æ—¶ï¼Œå…è®¸åŒæ—¶ä¸å¯ç”¨çš„ Pod æ•°ï¼ˆå¯ä¸ºç»å¯¹å€¼æˆ–ç™¾åˆ†æ¯”ï¼‰&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.minReadySeconds&lt;/code&gt;&lt;/td&gt;&lt;td&gt;integer&lt;/td&gt;&lt;td&gt;Pod åœ¨è¢«è®¤ä¸ºâ€œreadyâ€å‰éœ€ä¿æŒ Ready çŠ¶æ€çš„ç§’æ•°&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.revisionHistoryLimit&lt;/code&gt;&lt;/td&gt;&lt;td&gt;integer&lt;/td&gt;&lt;td&gt;ä¿ç•™çš„å†å²ç‰ˆæœ¬æ•°ï¼Œç”¨äºæ”¯æŒå›æ»šï¼ˆé»˜è®¤æ˜¯ 10ï¼‰&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.template.spec.containers&lt;/code&gt;&lt;/td&gt;&lt;td&gt;list&lt;/td&gt;&lt;td&gt;å®šä¹‰è¦è¿è¡Œçš„å®¹å™¨&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.template.spec.volumes&lt;/code&gt;&lt;/td&gt;&lt;td&gt;list&lt;/td&gt;&lt;td&gt;å®šä¹‰ Pod ä½¿ç”¨çš„å·ï¼ˆå¦‚ ConfigMapã€HostPathï¼‰&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.template.spec.nodeSelector&lt;/code&gt;&lt;/td&gt;&lt;td&gt;map&lt;/td&gt;&lt;td&gt;èŠ‚ç‚¹é€‰æ‹©å™¨ï¼Œç”¨äºæŒ‡å®š Pod è¿è¡Œåœ¨å“ªäº›èŠ‚ç‚¹ä¸Š&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.template.spec.affinity&lt;/code&gt;&lt;/td&gt;&lt;td&gt;object&lt;/td&gt;&lt;td&gt;èŠ‚ç‚¹æˆ– Pod äº²å’Œæ€§è§„åˆ™&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.template.spec.tolerations&lt;/code&gt;&lt;/td&gt;&lt;td&gt;list&lt;/td&gt;&lt;td&gt;å®¹å¿æŸäº›æ±¡ç‚¹çš„é…ç½®ï¼Œå…è®¸éƒ¨ç½²åˆ°æ‰“äº† Taint çš„èŠ‚ç‚¹ä¸Š&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.template.spec.hostNetwork&lt;/code&gt;&lt;/td&gt;&lt;td&gt;boolean&lt;/td&gt;&lt;td&gt;æ˜¯å¦ä½¿ç”¨ä¸»æœºç½‘ç»œï¼ˆtrue è¡¨ç¤ºå…±äº«èŠ‚ç‚¹çš„ç½‘ç»œï¼‰&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.template.spec.dnsPolicy&lt;/code&gt;&lt;/td&gt;&lt;td&gt;string&lt;/td&gt;&lt;td&gt;DNS ç­–ç•¥ï¼Œå¸¸è§å€¼ï¼š&lt;code&gt;ClusterFirst&lt;/code&gt;, &lt;code&gt;Default&lt;/code&gt;, &lt;code&gt;None&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.template.spec.securityContext&lt;/code&gt;&lt;/td&gt;&lt;td&gt;object&lt;/td&gt;&lt;td&gt;Pod çº§åˆ«çš„å®‰å…¨ä¸Šä¸‹æ–‡é…ç½®&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.template.spec.terminationGracePeriodSeconds&lt;/code&gt;&lt;/td&gt;&lt;td&gt;integer&lt;/td&gt;&lt;td&gt;ç»ˆæ­¢å‰çš„ä¼˜é›…å…³é—­ç­‰å¾…æ—¶é—´ï¼ˆç§’ï¼‰&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;ç¤ºä¾‹ï¼šä½¿ç”¨ Daemonset éƒ¨ç½² Fluentd æ”¶é›†èŠ‚ç‚¹çš„æ—¥å¿—ä¿¡æ¯&lt;a href=&quot;#ç¤ºä¾‹ä½¿ç”¨-daemonset-éƒ¨ç½²-fluentd-æ”¶é›†èŠ‚ç‚¹çš„æ—¥å¿—ä¿¡æ¯&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;apps/v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;DaemonSet&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;fluentd&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;namespace&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;kube-system&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;selector&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;matchLabels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;fluentd&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;template&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;labels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;fluentd&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;tolerations&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;# å®¹å¿ master èŠ‚ç‚¹çš„ NoSchedule æ±¡ç‚¹&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;key&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;node-role.kubernetes.io/master&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;operator&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;Exists&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;effect&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;NoSchedule&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;containers&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;fluentd&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;image&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;fluent/fluentd:v1.14.2&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;resources&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;requests&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;memory&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;200Mi&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;cpu&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;100m&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;27&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;limits&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;28&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;memory&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;500Mi&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;29&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;cpu&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;500m&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;30&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;# åœ¨Fluentdå®¹å™¨å†…æŒ‚è½½å®¿ä¸»æœºçš„æ—¥å¿—ç›®å½•è·¯å¾„&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;31&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;volumeMounts&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;32&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;varlog&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;33&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;mountPath&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/var/log&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;34&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;varlibdockercontainers&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;35&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;mountPath&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/var/lib/docker/containers&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;36&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;readOnly&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;37&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;volumes&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;38&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;varlog&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;39&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;hostPath&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;40&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;path&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/var/log&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;41&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;varlibdockercontainers&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;42&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;hostPath&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;43&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;path&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/var/lib/docker/containers&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;44&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;serviceAccountName&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;fluentd&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;</content:encoded></item><item><title>Kuberneteså­¦ä¹ ç¬”è®°å…­ï¼šåœ¨Podä¸­æ·»åŠ åŸŸåè§£æå’ŒDNSé…ç½®</title><link>https://white-festa.net/posts/kubernetes-tutorial/pod-%E4%B8%AD%E6%B7%BB%E5%8A%A0%E5%9F%9F%E5%90%8D%E8%A7%A3%E6%9E%90%E5%92%8Cdns%E9%85%8D%E7%BD%AE/</link><guid isPermaLink="true">https://white-festa.net/posts/kubernetes-tutorial/pod-%E4%B8%AD%E6%B7%BB%E5%8A%A0%E5%9F%9F%E5%90%8D%E8%A7%A3%E6%9E%90%E5%92%8Cdns%E9%85%8D%E7%BD%AE/</guid><description>ä½¿ç”¨hostAliasesè¿›è¡Œåˆ«åæ˜ å°„ï¼›åœ¨Podä¸­é…ç½®åŸŸåè§£æã€‚</description><pubDate>Wed, 17 Apr 2024 00:00:00 GMT</pubDate><content:encoded>&lt;section&gt;&lt;h1&gt;ä½¿ç”¨ hostAliases å­—æ®µæ·»åŠ åŸŸåè§£æ&lt;a href=&quot;#ä½¿ç”¨-hostaliases-å­—æ®µæ·»åŠ åŸŸåè§£æ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;hostAliases ç”¨äºå°†ä¸€äº›ä¸»æœºåˆ«åæ˜ å°„åˆ° Pod å†…çš„ IP åœ°å€ï¼Œä»¥ä¾¿ Pod å¯ä»¥é€šè¿‡è¿™äº›åˆ«åæ¥è®¿é—®ä¸»æœºä¸Šçš„æœåŠ¡ã€‚&lt;/p&gt;&lt;section&gt;&lt;h2&gt;æ·»åŠ åŸŸåè§£æ&lt;a href=&quot;#æ·»åŠ åŸŸåè§£æ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;apps/v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Deployment&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;labels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;test-nginx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;test-nginx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;replicas&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;5&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;selector&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;matchLabels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;test-nginx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;template&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;labels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;test-nginx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;containers&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;image&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx:latest&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;ports&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;containerPort&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;80&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;hostAliases&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;ip&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;192.168.31.213&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;hostnames&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;&quot;test-db-1&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;&quot;test-db-2&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;Pod ä¸­æ·»åŠ  DNS è§£æ&lt;a href=&quot;#pod-ä¸­æ·»åŠ -dns-è§£æ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;dnsPolicy&lt;a href=&quot;#dnspolicy&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;





























&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å–å€¼&lt;/th&gt;&lt;th&gt;å«ä¹‰&lt;/th&gt;&lt;th&gt;è¯´æ˜&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;Default&lt;/code&gt;&lt;/td&gt;&lt;td&gt;é»˜è®¤ç­–ç•¥&lt;/td&gt;&lt;td&gt;ä½¿ç”¨é›†ç¾¤é»˜è®¤çš„ DNS é…ç½®ã€‚å¯¹äºæ™®é€š Podï¼Œä¸€èˆ¬æ˜¯ ClusterFirstã€‚å¯¹äºä¸»æœºç½‘ç»œï¼ˆ&lt;code&gt;hostNetwork: true&lt;/code&gt;ï¼‰çš„ Podï¼Œåˆ™ä½¿ç”¨å®¿ä¸»æœºçš„ &lt;code&gt;/etc/resolv.conf&lt;/code&gt;ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;ClusterFirst&lt;/code&gt;&lt;/td&gt;&lt;td&gt;&lt;strong&gt;é»˜è®¤è¡Œä¸º&lt;/strong&gt;ï¼ˆé™¤é hostNetwork=trueï¼‰&lt;/td&gt;&lt;td&gt;ä½¿ç”¨é›†ç¾¤å†…çš„ DNS æœåŠ¡ï¼ˆkube-dns/CoreDNSï¼‰ï¼Œä¼˜å…ˆè§£æ Kubernetes Service åç§°ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;ClusterFirstWithHostNet&lt;/code&gt;&lt;/td&gt;&lt;td&gt;ä¸»æœºç½‘ç»œä¸‹ä¹Ÿä½¿ç”¨é›†ç¾¤ DNS&lt;/td&gt;&lt;td&gt;å¦‚æœä½¿ç”¨ &lt;code&gt;hostNetwork: true&lt;/code&gt;ï¼Œä½†ä»å¸Œæœ›ä½¿ç”¨é›†ç¾¤ DNSï¼Œå°±ç”¨è¿™ä¸ªå€¼ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;None&lt;/code&gt;&lt;/td&gt;&lt;td&gt;ç¦ç”¨è‡ªåŠ¨ DNS é…ç½®&lt;/td&gt;&lt;td&gt;è¡¨ç¤ºä½ ä¼šæ‰‹åŠ¨æŒ‡å®š &lt;code&gt;dnsConfig&lt;/code&gt; å­—æ®µæ¥è‡ªå®šä¹‰ &lt;code&gt;/etc/resolv.conf&lt;/code&gt;ã€‚é€‚ç”¨äºéœ€è¦ç²¾ç»†æ§åˆ¶ DNS çš„æƒ…å†µã€‚&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;dnsConfig&lt;a href=&quot;#dnsconfig&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;ä»…å½“&lt;code&gt;dnsPolicy&lt;/code&gt; å€¼ä¸º &lt;code&gt;None&lt;/code&gt; æ—¶æ‰æœ‰æ•ˆ&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;apps/v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Deployment&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;custom-dns-deployment&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;replicas&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;selector&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;matchLabels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;custom-dns-app&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;template&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;labels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;custom-dns-app&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;dnsPolicy&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;None&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;dnsConfig&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;nameservers&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;          &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;1.1.1.1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;          &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;8.8.8.8&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;searches&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;          &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;mynamespace.svc.cluster.local&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;          &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;svc.cluster.local&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;          &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;cluster.local&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;options&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;          &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;ndots&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;2&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;27&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;          &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;timeout&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;28&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;1&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;29&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;          &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;single-request&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;30&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;containers&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;31&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;32&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;image&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;busybox&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;33&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;command&lt;/span&gt;&lt;span&gt;: [&lt;/span&gt;&lt;span&gt;&quot;sleep&quot;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;&quot;3600&quot;&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;searches
&lt;ol&gt;
&lt;li&gt;è®¾ç½® DNS æœç´¢åŸŸï¼ˆsearch domainsï¼‰ï¼Œå³å½“å®¹å™¨ä¸­çš„è¿›ç¨‹å°è¯•è§£æä¸€ä¸ª éå…¨é™å®šåŸŸåï¼ˆFQDNï¼Œå³å®Œæ•´çš„åŸŸåï¼‰ æ—¶ï¼Œç³»ç»Ÿä¼šä¾æ¬¡åœ¨è¿™äº›åŸŸåé¢è¡¥å…¨è¿›è¡Œå°è¯•è§£æã€‚&lt;/li&gt;
&lt;li&gt;å¯¹äºä¸Šé¢çš„ä¾‹å­ï¼Œå‡å¦‚å®¹å™¨å†…å°è¯•è§£æ &lt;code&gt;nginx&lt;/code&gt;æ—¶ï¼Œå®é™…çš„è§£æä¼šæ˜¯ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;nginx.mynamespace.svc.cluster.local&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;nginx.svc.cluster.local&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;nginx.cluster.local&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;ç›´åˆ°æ‰¾åˆ°è§£ææˆåŠŸçš„ä¸€ä¸ªã€‚&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;3. å¤ªå¤š search åŸŸå¯èƒ½ä¼šè®© DNS æŸ¥è¯¢å˜æ…¢ï¼ŒLinux é»˜è®¤æœ€å¤§æ˜¯ 6 ä¸ªã€‚&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;4. å¦‚æœä½ å†™çš„æ˜¯å®Œæ•´çš„åŸŸåï¼ˆå¦‚ `nginx.default.svc.cluster.local.`ï¼Œå¸¦ç‚¹ç»“å°¾ï¼‰ï¼Œsearch ä¸ä¼šè¢«åº”ç”¨&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;2. options
1. é…ç½® DNS è§£æå™¨çš„è¡Œä¸ºï¼ˆç›¸å½“äº /etc/resolv.conf ä¸­çš„ options è¡Œï¼‰ï¼ŒåŒ…æ‹¬é‡è¯•æ¬¡æ•°ã€åŸŸåè¡¥å…¨ç­–ç•¥ç­‰ã€‚
2. å¸¸è§é€‰é¡¹&lt;/p&gt;


































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;name&lt;/th&gt;&lt;th&gt;value&lt;/th&gt;&lt;th&gt;è¯´æ˜&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;ndots&lt;/code&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;5&lt;/code&gt;ï¼ˆé»˜è®¤ï¼‰&lt;/td&gt;&lt;td&gt;æ§åˆ¶å¸¦ç‚¹çš„åŸŸåæ˜¯å¦è¢«è§†ä½œâ€œç›¸å¯¹åŸŸåâ€ã€‚å€¼è¶Šå°ï¼Œè¶Šå®¹æ˜“è¢«å½“ä½œâ€œç»å¯¹åŸŸåâ€ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;timeout&lt;/code&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;2&lt;/code&gt;&lt;/td&gt;&lt;td&gt;DNS æŸ¥è¯¢çš„è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;attempts&lt;/code&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;3&lt;/code&gt;&lt;/td&gt;&lt;td&gt;å°è¯•æŸ¥è¯¢çš„æ¬¡æ•°&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;rotate&lt;/code&gt;&lt;/td&gt;&lt;td&gt;æ— &lt;/td&gt;&lt;td&gt;ä½¿ç”¨ &lt;code&gt;/etc/resolv.conf&lt;/code&gt; ä¸­å¤šä¸ª nameserver è½®è¯¢æŸ¥è¯¢&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;single-request&lt;/code&gt;&lt;/td&gt;&lt;td&gt;æ— &lt;/td&gt;&lt;td&gt;å¼ºåˆ¶ä½¿ç”¨ IPv4 å’Œ IPv6 åˆ†åˆ«å‘èµ·è¯·æ±‚ï¼ˆå…¼å®¹æŸäº›ç½‘ç»œé—®é¢˜ï¼‰&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;</content:encoded></item><item><title>Kuberneteså­¦ä¹ ç¬”è®°äº”ï¼šDeploymentæ§åˆ¶å™¨</title><link>https://white-festa.net/posts/kubernetes-tutorial/deployment-%E6%8E%A7%E5%88%B6%E5%99%A8/</link><guid isPermaLink="true">https://white-festa.net/posts/kubernetes-tutorial/deployment-%E6%8E%A7%E5%88%B6%E5%99%A8/</guid><description>ä½¿ç”¨Deployment ä¸º Pod å’Œ ReplicaSet æä¾›å£°æ˜å¼çš„æ›´æ–°èƒ½åŠ›ã€‚</description><pubDate>Sun, 25 Feb 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Deployment ä¸º Pod å’Œ ReplicaSet æä¾›å£°æ˜å¼çš„æ›´æ–°èƒ½åŠ›ã€‚&lt;/p&gt;
&lt;section&gt;&lt;h1&gt;Deployment çš„å…¸å‹ç”¨ä¾‹&lt;a href=&quot;#deployment-çš„å…¸å‹ç”¨ä¾‹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;ol&gt;
&lt;li&gt;åˆ›å»º Deployment ä»¥å°† ReplicaSet ä¸Šçº¿ã€‚ReplicaSet åœ¨åå°åˆ›å»º Podã€‚ æ£€æŸ¥ ReplicaSet çš„ä¸Šçº¿çŠ¶æ€ï¼ŒæŸ¥çœ‹å…¶æ˜¯å¦æˆåŠŸã€‚&lt;/li&gt;
&lt;li&gt;é€šè¿‡æ›´æ–° Deployment çš„ PodTemplateSpecï¼Œå£°æ˜ Pod çš„æ–°çŠ¶æ€ã€‚æ–°çš„ ReplicaSet ä¼šè¢«åˆ›å»ºï¼ŒDeployment ä»¥å—æ§é€Ÿç‡å°† Pod ä»æ—§ ReplicaSet è¿ç§»åˆ°æ–° ReplicaSetã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœ Deployment çš„å½“å‰çŠ¶æ€ä¸ç¨³å®šï¼Œå¯ä»¥å›æ»šåˆ°è¾ƒæ—©çš„ Deployment ç‰ˆæœ¬ã€‚&lt;/li&gt;
&lt;li&gt;æ‰©å¤§ Deployment è§„æ¨¡ (æé«˜å‰¯æœ¬æ•°é‡) ä»¥æ‰¿æ‹…æ›´å¤šè´Ÿè½½ã€‚&lt;/li&gt;
&lt;li&gt;æ¸…ç†è¾ƒæ—§çš„ä¸å†éœ€è¦çš„ ReplicaSet&lt;/li&gt;
&lt;/ol&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;Deployment çš„å¯ç”¨å­—æ®µ&lt;a href=&quot;#deployment-çš„å¯ç”¨å­—æ®µ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;






















































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å­—æ®µè·¯å¾„&lt;/th&gt;&lt;th&gt;ç±»å‹&lt;/th&gt;&lt;th&gt;è¯´æ˜&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.replicas&lt;/code&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;int32&lt;/code&gt;&lt;/td&gt;&lt;td&gt;æœŸæœ›çš„ Pod å‰¯æœ¬æ•°ï¼Œé»˜è®¤æ˜¯ 1ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.template&lt;/code&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;PodTemplateSpec&lt;/code&gt;&lt;/td&gt;&lt;td&gt;å®šä¹‰ Pod æ¨¡æ¿ï¼ŒåŒ…æ‹¬å®¹å™¨ã€å·ã€ç¯å¢ƒå˜é‡ç­‰é…ç½®ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.strategy.type&lt;/code&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;string&lt;/code&gt;&lt;/td&gt;&lt;td&gt;æ›´æ–°ç­–ç•¥ç±»å‹ï¼š&lt;code&gt;RollingUpdate&lt;/code&gt;ï¼ˆé»˜è®¤ï¼‰æˆ– &lt;code&gt;Recreate&lt;/code&gt;ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.strategy.rollingUpdate.maxUnavailable&lt;/code&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;int&lt;/code&gt; æˆ– &lt;code&gt;string&lt;/code&gt;&lt;/td&gt;&lt;td&gt;æ»šåŠ¨æ›´æ–°ä¸­å…è®¸åŒæ—¶ä¸å¯ç”¨çš„ Pod æ•°é‡ï¼Œå¯ç”¨ç»å¯¹å€¼æˆ–ç™¾åˆ†æ¯”ï¼ˆå¦‚ &lt;code&gt;&quot;25%&quot;&lt;/code&gt;ï¼‰ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.strategy.rollingUpdate.maxSurge&lt;/code&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;int&lt;/code&gt; æˆ– &lt;code&gt;string&lt;/code&gt;&lt;/td&gt;&lt;td&gt;æ»šåŠ¨æ›´æ–°ä¸­å…è®¸çš„æœ€å¤§é¢å¤– Pod æ•°é‡ï¼Œå¯ç”¨ç»å¯¹å€¼æˆ–ç™¾åˆ†æ¯”ï¼ˆå¦‚ &lt;code&gt;&quot;25%&quot;&lt;/code&gt;ï¼‰ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.minReadySeconds&lt;/code&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;int32&lt;/code&gt;&lt;/td&gt;&lt;td&gt;Pod å°±ç»ªåæœ€å°‘ä¿æŒå°±ç»ªçŠ¶æ€çš„æ—¶é—´ï¼ˆç§’ï¼‰å†è®¡ä¸ºâ€œå¯ç”¨â€ï¼Œé»˜è®¤æ˜¯ 0ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.revisionHistoryLimit&lt;/code&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;int32&lt;/code&gt;&lt;/td&gt;&lt;td&gt;ä¿ç•™çš„æ—§ ReplicaSet çš„æ•°é‡ï¼Œé»˜è®¤æ˜¯ 10ã€‚è¶…è¿‡å°†è‡ªåŠ¨æ¸…ç†æ—§çš„ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.paused&lt;/code&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;bool&lt;/code&gt;&lt;/td&gt;&lt;td&gt;å¦‚æœä¸º trueï¼Œåˆ™æš‚åœ Deployment çš„æ»šåŠ¨æ›´æ–°ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;spec.progressDeadlineSeconds&lt;/code&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;int32&lt;/code&gt;&lt;/td&gt;&lt;td&gt;Deployment æœ€é•¿æ›´æ–°æ—¶é—´ï¼ˆç§’ï¼‰ï¼Œè¶…æ—¶å°†è¢«æ ‡è®°ä¸ºå¤±è´¥ï¼Œé»˜è®¤æ˜¯ 600ã€‚&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;Depolyment æ»šåŠ¨æ›´æ–°ä¸ç‰ˆæœ¬å›é€€&lt;a href=&quot;#depolyment-æ»šåŠ¨æ›´æ–°ä¸ç‰ˆæœ¬å›é€€&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;ol&gt;
&lt;li&gt;æ»šåŠ¨æ›´æ–°å…è®¸é€šè¿‡ä½¿ç”¨æ–°çš„å®ä¾‹é€æ­¥æ›´æ–° Pod å®ä¾‹ï¼Œå®ç°é›¶åœæœºçš„ Deployment æ›´æ–°ã€‚ æ–°çš„ Pod å°†è¢«è°ƒåº¦åˆ°å…·æœ‰å¯ç”¨èµ„æºçš„èŠ‚ç‚¹ä¸Šã€‚&lt;/li&gt;
&lt;li&gt;ä¸åº”ç”¨ç¨‹åºè§„æ¨¡æ‰©ç¼©ç±»ä¼¼ï¼Œå¦‚æœ Deployment çš„è®¿é—®æ˜¯å…¬å¼€çš„ï¼ŒService åœ¨æ›´æ–°æœŸé—´ä»…å°†æµé‡è´Ÿè½½å‡è¡¡åˆ°å¯ç”¨çš„ Podã€‚å¯ç”¨çš„ Pod æ˜¯æŒ‡å¯¹åº”ç”¨çš„ç”¨æˆ·å¯ç”¨çš„å®ä¾‹ã€‚&lt;/li&gt;
&lt;li&gt;æ»šåŠ¨æ›´æ–°å…è®¸ä»¥ä¸‹æ“ä½œï¼š
&lt;ol&gt;
&lt;li&gt;å°†åº”ç”¨ç¨‹åºä»ä¸€ä¸ªç¯å¢ƒå‡çº§åˆ°å¦ä¸€ä¸ªç¯å¢ƒï¼ˆé€šè¿‡å®¹å™¨é•œåƒæ›´æ–°ï¼‰&lt;/li&gt;
&lt;li&gt;å›æ»šåˆ°ä»¥å‰çš„ç‰ˆæœ¬&lt;/li&gt;
&lt;li&gt;æŒç»­é›†æˆå’ŒæŒç»­äº¤ä»˜åº”ç”¨ç¨‹åºï¼Œæ— éœ€åœæœº&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;ç¤ºä¾‹&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;apps/v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Deployment&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;rolling-update-demo&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;labels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;demo&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;replicas&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;4&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;strategy&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;RollingUpdate&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;rollingUpdate&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;maxUnavailable&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;# åœ¨æ»šåŠ¨æ›´æ–°è¿‡ç¨‹ä¸­ï¼Œæ‰€æœ‰æ—§çš„ Pod å¿…é¡»ä¿æŒå¯ç”¨ï¼Œä¸èƒ½æœ‰ä»»ä½•ä¸å¯ç”¨çš„ Podã€‚&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;maxSurge&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;# æœ€å¤šå…è®¸æ¯” replicas å¤š 1 ä¸ª Podï¼ˆç”¨äºéƒ¨ç½²ä¸­çš„ä¸´æ—¶è¶…é¢ï¼‰&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;revisionHistoryLimit&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;5&lt;/span&gt;&lt;span&gt;     &lt;/span&gt;&lt;span&gt;# ä¿ç•™æœ€è¿‘ 5 ä¸ªå†å²ç‰ˆæœ¬&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;progressDeadlineSeconds&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;300&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;# æ›´æ–°è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰ï¼Œè¶…è¿‡å°†è¢«æ ‡è®°ä¸ºå¤±è´¥&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;minReadySeconds&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;5&lt;/span&gt;&lt;span&gt;         &lt;/span&gt;&lt;span&gt;# æ–° Pod å°±ç»ªåè‡³å°‘ä¿æŒ 5 ç§’æ‰ç®—â€œå¯ç”¨â€&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;selector&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;matchLabels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;demo&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;template&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;labels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;demo&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;containers&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;27&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;image&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx:1.21&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;28&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;ports&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;29&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;containerPort&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;80&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;ç‰ˆæœ¬å›é€€
&lt;ol&gt;
&lt;li&gt;æŸ¥çœ‹å†å²ç‰ˆæœ¬&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kubectl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;rollout&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;history&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;deployment&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;DEPLOYMENT_NAME&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;è¾“å‡ºç±»ä¼¼äº&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;deployment.apps/rolling-update-demo&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;REVISION  CHANGE-CAUSE&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;1         &amp;lt;none&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;2         kubectl apply --filename=...&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;2. å›é€€åˆ°æŒ‡å®šç‰ˆæœ¬&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kubectl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;rollout&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;undo&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;deployment&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;rolling-update-demo&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--to-revision=1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;</content:encoded></item><item><title>æå‡ç½‘ç«™å®‰å…¨æ€§å’Œå®‰å…¨è¯„ä¼°ç­‰çº§çš„æ–¹æ³•</title><link>https://white-festa.net/posts/%E6%8F%90%E5%8D%87%E7%BD%91%E7%AB%99%E5%AE%89%E5%85%A8%E6%80%A7%E5%92%8C%E5%AE%89%E5%85%A8%E8%AF%84%E4%BC%B0%E7%AD%89%E7%BA%A7%E7%9A%84%E6%96%B9%E6%B3%95/</link><guid isPermaLink="true">https://white-festa.net/posts/%E6%8F%90%E5%8D%87%E7%BD%91%E7%AB%99%E5%AE%89%E5%85%A8%E6%80%A7%E5%92%8C%E5%AE%89%E5%85%A8%E8%AF%84%E4%BC%B0%E7%AD%89%E7%BA%A7%E7%9A%84%E6%96%B9%E6%B3%95/</guid><description>é€šè¿‡ç¦ç”¨TLS1.0ä¸å¯ç”¨HSTSæ¥æé«˜ç«™ç‚¹å®‰å…¨æ€§</description><pubDate>Wed, 21 Feb 2024 00:00:00 GMT</pubDate><content:encoded>&lt;section&gt;&lt;h1&gt;æå‡ç½‘ç«™å®‰å…¨æ€§å’Œå®‰å…¨è¯„ä¼°ç­‰çº§çš„æ–¹æ³•&lt;a href=&quot;#æå‡ç½‘ç«™å®‰å…¨æ€§å’Œå®‰å…¨è¯„ä¼°ç­‰çº§çš„æ–¹æ³•&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;section&gt;&lt;h2&gt;ç¦ç”¨TSL1.0&lt;a href=&quot;#ç¦ç”¨tsl10&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;TLS 1.0ï¼ˆä¼ è¾“å±‚å®‰å…¨åè®®ç¬¬1.0ç‰ˆï¼‰æ˜¯ä¸€ç§ç”¨äºåœ¨ç½‘ç»œä¸Šå®‰å…¨ä¼ è¾“æ•°æ®çš„åè®®ã€‚å®ƒåœ¨1999å¹´ç”±äº’è”ç½‘å·¥ç¨‹ä»»åŠ¡ç»„ï¼ˆIETFï¼‰å‘å¸ƒï¼Œä½œä¸ºå®‰å…¨å¥—æ¥å­—å±‚ï¼ˆSSLï¼‰3.0çš„ç»§ä»»è€…ã€‚SSLæ˜¯ä¸€ç§æ—©æœŸçš„å®‰å…¨åè®®ï¼Œç”±ç½‘æ™¯é€šè®¯å…¬å¸å¼€å‘ã€‚TLS 1.0ä¸SSL 3.0éå¸¸ç›¸ä¼¼ï¼Œä½†åŒ…å«äº†å¯¹å®‰å…¨æ€§çš„æ”¹è¿›ã€‚&lt;/p&gt;&lt;section&gt;&lt;h3&gt;TSL1.0çš„åŠŸèƒ½å’Œç‰¹ç‚¹&lt;a href=&quot;#tsl10çš„åŠŸèƒ½å’Œç‰¹ç‚¹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;TLS 1.0çš„ä¸»è¦ç›®æ ‡æ˜¯åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´æä¾›éšç§å’Œæ•°æ®å®Œæ•´æ€§ã€‚è¿™æ˜¯é€šè¿‡åœ¨ä¼ è¾“æ•°æ®ä¹‹å‰å»ºç«‹ä¸€ä¸ªå®‰å…¨è¿æ¥æ¥å®ç°çš„ã€‚è¿™ä¸ªè¿‡ç¨‹åŒ…æ‹¬å‡ ä¸ªå…³é”®æ­¥éª¤ï¼š&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;æ¡æ‰‹åè®®ï¼šå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡å¼€å§‹äºä¸€ä¸ªæ¡æ‰‹è¿‡ç¨‹ï¼Œç”¨äºåå•†åŠ å¯†ç®—æ³•ã€äº¤æ¢å¯†é’¥ã€éªŒè¯æœåŠ¡å™¨èº«ä»½ï¼ˆå¯é€‰åœ°éªŒè¯å®¢æˆ·ç«¯èº«ä»½ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å¯†é’¥äº¤æ¢ï¼šåœ¨æ¡æ‰‹é˜¶æ®µï¼ŒåŒæ–¹å°†å•†å®šä¸€ä¸ªå…±äº«å¯†é’¥ï¼Œç”¨äºå¯¹è¯çš„åŠ å¯†ã€‚&lt;/li&gt;
&lt;li&gt;åŠ å¯†ï¼šæ•°æ®ä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨å•†å®šçš„å¯†é’¥æ¥åŠ å¯†æ•°æ®ï¼Œç¡®ä¿ä¼ è¾“è¿‡ç¨‹ä¸­æ•°æ®çš„éšç§æ€§å’Œå®‰å…¨æ€§ã€‚&lt;/li&gt;
&lt;li&gt;å®Œæ•´æ€§æ£€æŸ¥ï¼šç¡®ä¿æ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æœªè¢«ç¯¡æ”¹ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ç„¶è€Œï¼Œéšç€æ—¶é—´çš„æ¨ç§»ï¼ŒTLS 1.0è¢«å‘ç°æœ‰å¤šä¸ªå®‰å…¨æ¼æ´å’Œé™åˆ¶ã€‚è¿™äº›é—®é¢˜åŒ…æ‹¬åƒBEASTï¼ˆBrowser Exploit Against SSL/TLSï¼‰æ”»å‡»è¿™æ ·çš„æ¼æ´ï¼Œä»¥åŠå¯¹ç°ä»£åŠ å¯†ç®—æ³•çš„æ”¯æŒä¸è¶³ã€‚è¿™äº›å®‰å…¨é—®é¢˜ä¿ƒä½¿äº†å¯¹TLSæ ‡å‡†çš„è¿›ä¸€æ­¥å‘å±•ï¼Œå¯¼è‡´äº†TLS 1.1ã€TLS 1.2ä»¥åŠæœ€æ–°çš„TLS 1.3ç‰ˆæœ¬çš„æ¨å‡ºã€‚éšç€è¿™äº›æ›´æ–°ç‰ˆæœ¬çš„å‘å¸ƒï¼ŒTLS 1.0é€æ¸è¢«è®¤ä¸ºæ˜¯ä¸å®‰å…¨çš„ï¼Œå¹¶ä¸”è®¸å¤šç°ä»£æµè§ˆå™¨å’Œç³»ç»Ÿå·²ç»åœæ­¢æ”¯æŒTLS 1.0ï¼Œä»¥æé«˜å®‰å…¨æ€§ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;åœ¨Nginxä¸­ç¦ç”¨TSL1.0&lt;a href=&quot;#åœ¨nginxä¸­ç¦ç”¨tsl10&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;å¯ä»¥é€šè¿‡æŒ‡å®šSSLåè®®çš„æ–¹å¼å°†TSL1.0æ’é™¤åœ¨å¤–&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ssl_protocols &lt;/span&gt;&lt;span&gt;TLSv1.1 TLSv1.2 TLSv1.3;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;ç¦ç”¨TSL1.0çš„å½±å“&lt;a href=&quot;#ç¦ç”¨tsl10çš„å½±å“&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;ä¸»è¦æ˜¯å¯¹å…¼å®¹æ€§å­˜åœ¨ä¸€å®šçš„å½±å“ï¼Œå¯¹äºä»ç„¶ä½¿ç”¨TSL1.0ç”šè‡³æ›´å¤è€åè®®çš„æµè§ˆå™¨å’Œç³»ç»Ÿæ¥è¯´ï¼Œç¦ç”¨TSL1.0åä¼šå¯¼è‡´åœ¨æ¡æ‰‹é˜¶æ®µçš„å¤±è´¥ã€‚
ç›®å‰å·²çŸ¥åœ¨ç¦ç”¨TSL1.0åæ— æ³•å…¼å®¹çš„æµè§ˆå™¨å’Œç³»ç»Ÿï¼š&lt;/p&gt;







































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;ç§»åŠ¨ç«¯&lt;/th&gt;&lt;th&gt;æ¡Œé¢ç«¯&lt;/th&gt;&lt;th&gt;å…¶ä»–&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;Andriod4.3&lt;/td&gt;&lt;td&gt;IE6/XP&lt;/td&gt;&lt;td&gt;OpenSSL0.9.8y&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Andriod4.2.2&lt;/td&gt;&lt;td&gt;IE7/VISTA&lt;/td&gt;&lt;td&gt;Java6u45&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Andriod4.1.1&lt;/td&gt;&lt;td&gt;IE8/XP&lt;/td&gt;&lt;td&gt;Java7u25&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Andriod4.0.4&lt;/td&gt;&lt;td&gt;IE8-10/WIN7&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Andriod2.3.7&lt;/td&gt;&lt;td&gt;Safari5.1.9/OSX10.6.8&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;IE10/WinPhone8&lt;/td&gt;&lt;td&gt;Safari6.0.4/OSX10.8.4&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;ä½¿ç”¨HTTPä¸¥æ ¼ä¼ è¾“å®‰å…¨ç­–ç•¥&lt;a href=&quot;#ä½¿ç”¨httpä¸¥æ ¼ä¼ è¾“å®‰å…¨ç­–ç•¥&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;HTTPä¸¥æ ¼ä¼ è¾“å®‰å…¨ï¼Œå³HSTS(HTTP Strict Transport Security),æ˜¯ä¸€ç§ç½‘ç»œå®‰å…¨ç­–ç•¥æœºåˆ¶ï¼Œç”¨äºä¿æŠ¤ç½‘ç«™å…å—ä¸­é—´äººæ”»å‡»ï¼Œç‰¹åˆ«æ˜¯SSLå‰¥ç¦»æ”»å‡»ã€‚HSTSé€šè¿‡å¼ºåˆ¶æµè§ˆå™¨ä»…é€šè¿‡å®‰å…¨çš„HTTPSè¿æ¥ä¸æœåŠ¡å™¨é€šä¿¡ï¼Œæ¥æé«˜å®‰å…¨æ€§ã€‚è¿™æ˜¯é€šè¿‡åœ¨HTTPå“åº”å¤´ä¸­è®¾ç½®ä¸€ä¸ªåä¸ºStrict-Transport-Securityçš„ç‰¹æ®Šå­—æ®µå®ç°çš„ã€‚&lt;/p&gt;&lt;section&gt;&lt;h3&gt;HSTSçš„ä¸»è¦åŠŸèƒ½å’Œç‰¹ç‚¹&lt;a href=&quot;#hstsçš„ä¸»è¦åŠŸèƒ½å’Œç‰¹ç‚¹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;å¼ºåˆ¶HTTPSè¿æ¥ï¼šå½“ç”¨æˆ·é¦–æ¬¡è®¿é—®æ”¯æŒHSTSçš„ç½‘ç«™æ—¶ï¼Œç½‘ç«™ä¼šé€šè¿‡å“åº”å¤´æŒ‡ç¤ºæµè§ˆå™¨åœ¨åç»­è®¿é—®ä¸­è‡ªåŠ¨ä½¿ç”¨HTTPSã€‚è¿™æ„å‘³ç€å³ä½¿ç”¨æˆ·è¾“å…¥äº†ä¸€ä¸ªHTTP URLæˆ–ç‚¹å‡»äº†ä¸€ä¸ªHTTPé“¾æ¥ï¼Œæµè§ˆå™¨ä¹Ÿä¼šè‡ªåŠ¨å°†å…¶è½¬æ¢ä¸ºHTTPSè¯·æ±‚ã€‚&lt;/li&gt;
&lt;li&gt;é¢„åŠ è½½åå•ï¼šä¸ºäº†è¿›ä¸€æ­¥åŠ å¼ºå®‰å…¨æ€§ï¼Œç½‘ç«™å¯ä»¥é€‰æ‹©è¢«åŠ å…¥åˆ°ä¸»æµæµè§ˆå™¨çš„HSTSé¢„åŠ è½½åå•ä¸­ã€‚è¿™æ„å‘³ç€æµè§ˆå™¨åœ¨é¦–æ¬¡è®¿é—®ç½‘ç«™ä¹‹å‰å°±å·²ç»çŸ¥é“å¿…é¡»é€šè¿‡HTTPSæ¥è®¿é—®è¿™äº›ç½‘ç«™ã€‚&lt;/li&gt;
&lt;li&gt;æœ‰æ•ˆæœŸï¼šStrict-Transport-Securityå“åº”å¤´åŒ…æ‹¬ä¸€ä¸ªmax-ageå‚æ•°ï¼ŒæŒ‡å®šæµè§ˆå™¨åº”è¯¥å¤šé•¿æ—¶é—´å†…åªé€šè¿‡HTTPSè¿æ¥åˆ°ç½‘ç«™ã€‚åœ¨è¿™æ®µæ—¶é—´è¿‡åï¼Œç½‘ç«™å¿…é¡»å†æ¬¡å‘é€HSTSå¤´æ¥ç»­æœŸã€‚&lt;/li&gt;
&lt;li&gt;å­åŸŸåŒ…å«ï¼šå¯é€‰çš„includeSubDomainsæŒ‡ä»¤å¯ä»¥æ·»åŠ åˆ°HSTSå¤´ä¸­ï¼ŒæŒ‡ç¤ºæµè§ˆå™¨å¯¹ç½‘ç«™çš„æ‰€æœ‰å­åŸŸä¹Ÿå¼ºåˆ¶ä½¿ç”¨HTTPSã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;åœ¨Nginxä¸­å¯ç”¨HSTS&lt;a href=&quot;#åœ¨nginxä¸­å¯ç”¨hsts&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;åœ¨ NGINX å’Œ NGINX Plus ä¸­è®¾ç½®ä¸¥æ ¼ä¼ è¾“å®‰å…¨ï¼ˆSTSï¼‰å“åº”å¤´ç›¸å¯¹ç®€å•ï¼Œåªéœ€è¦ä¸€è¡Œé…ç½®ï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;add_header &lt;/span&gt;&lt;span&gt;Strict-Transport-Security &lt;/span&gt;&lt;span&gt;&quot;max-age=31536000; includeSubDomains&quot;&lt;/span&gt;&lt;span&gt; always;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;å¯ç”¨HSTSçš„æ³¨æ„äº‹é¡¹&lt;a href=&quot;#å¯ç”¨hstsçš„æ³¨æ„äº‹é¡¹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;ä¸€æ—¦å¯ç”¨HSTSï¼Œåœ¨è®¾å®šçš„max_ageæ—¶é—´å†…å¿…é¡»ç¡®ä¿SSLè¯ä¹¦çš„æœ‰æ•ˆæ€§ï¼Œè¿™æ˜¯å› ä¸ºHSTSä¿¡æ¯å­˜å‚¨åœ¨ç”¨æˆ·æµè§ˆå™¨ä¸­çš„ä¸€ä¸ªä¸“é—¨åˆ—è¡¨ä¸­ï¼Œé€šè¿‡æ¸…æ¥šç¼“å­˜å’ŒCookieçš„æ–¹å¼æ— æ³•æ¸…é™¤è¿™ä¸ªHSTSçš„é“¾æ¥ç­–ç•¥ã€‚
å¦å¤–ï¼Œå³ä½¿åœ¨WebæœåŠ¡å™¨ä¸­æ¸…é™¤äº†HSTSç­–ç•¥ï¼Œä¹Ÿåªå¯¹æœªè®¿é—®è¿‡ç½‘ç«™çš„æ–°ç”¨æˆ·ï¼Œå¯¹æ—¢å¾€ç”¨æˆ·æ˜¯ä»ç„¶æ— æ•ˆçš„ã€‚
å› æ­¤ï¼Œåœ¨ç¬¬ä¸€æ¬¡å°è¯•å¼•å…¥HSTSæœºåˆ¶æ—¶ï¼Œå»ºè®®ä½¿ç”¨ä¸€ä¸ªè¾ƒçŸ­çš„max_ageï¼Œè¿‡æœŸæ—¶é—´çŸ­ï¼Œå› æ­¤å¦‚æœå‡ºç°é—®é¢˜çš„è¯ä¹Ÿæ— éœ€ç­‰å¾…å¤ªé•¿æ—¶é—´ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;</content:encoded></item><item><title>Kuberneteså­¦ä¹ ç¬”è®°å››ï¼šå®¹å™¨é’©å­ä¸æ¢é’ˆ</title><link>https://white-festa.net/posts/kubernetes-tutorial/%E5%AE%B9%E5%99%A8%E9%92%A9%E5%AD%90%E4%B8%8E%E6%8E%A2%E9%92%88/</link><guid isPermaLink="true">https://white-festa.net/posts/kubernetes-tutorial/%E5%AE%B9%E5%99%A8%E9%92%A9%E5%AD%90%E4%B8%8E%E6%8E%A2%E9%92%88/</guid><description>ä½¿ç”¨Kubernetesçš„å®¹å™¨é’©å­ä¸æ¢é’ˆæ‰§è¡Œåœ¨Podç”Ÿå‘½å‘¨æœŸå†…æŒ‡å®šæ—¶é—´ç‚¹çš„ç‰¹å®šæ“ä½œä»¥åŠé€šè¿‡æ¢é’ˆç¡®å®šå®¹å™¨æ˜¯å¦å°±ç»ªæˆ–å­˜æ´»</description><pubDate>Wed, 07 Feb 2024 00:00:00 GMT</pubDate><content:encoded>&lt;section&gt;&lt;h1&gt;å®¹å™¨é’©å­&lt;a href=&quot;#å®¹å™¨é’©å­&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;å®¹å™¨é’©å­ï¼ˆContainer Hooksï¼‰æ˜¯ Kubernetes æä¾›çš„ä¸€ç§æœºåˆ¶ï¼Œå…è®¸ä½ åœ¨å®¹å™¨ç”Ÿå‘½å‘¨æœŸä¸­çš„ç‰¹å®šæ—¶æœºæ‰§è¡Œè‡ªå®šä¹‰å‘½ä»¤æˆ–è„šæœ¬ï¼Œç”¨äºæ‰§è¡Œä¸€äº›åˆå§‹åŒ–æˆ–æ¸…ç†ä»»åŠ¡ã€‚&lt;/p&gt;&lt;section&gt;&lt;h2&gt;é’©å­ç±»å‹&lt;a href=&quot;#é’©å­ç±»å‹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;



















&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;ç±»å‹&lt;/th&gt;&lt;th&gt;è§¦å‘æ—¶æœº&lt;/th&gt;&lt;th&gt;å…¸å‹ç”¨é€”&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;postStart&lt;/td&gt;&lt;td&gt;å®¹å™¨å¯åŠ¨åã€ä¸»è¿›ç¨‹æ‰§è¡Œå‰&lt;/td&gt;&lt;td&gt;æ—¥å¿—æ ‡è®°ã€æƒé™è®¾ç½®ã€æœåŠ¡æ³¨å†Œç­‰&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;preStop&lt;/td&gt;&lt;td&gt;å®¹å™¨ç»ˆæ­¢å‰ï¼ˆSIGTERMå‘å‡ºåï¼‰&lt;/td&gt;&lt;td&gt;ä¼˜é›…å…³æœºã€è¿æ¥æ–­å¼€ã€çŠ¶æ€ä¸ŠæŠ¥ç­‰&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;ä½¿ç”¨é’©å­&lt;a href=&quot;#ä½¿ç”¨é’©å­&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;æœ‰è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼šéƒ¨ç½²ä¸€ä¸ª nginx æœåŠ¡ï¼Œå¹¶ä¸ºå…¶åˆ›å»ºä¸€ä¸ªæµ‹è¯•ç½‘é¡µ&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;apps/v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Deployment&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web-app&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;replicas&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;5&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;selector&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;matchLabels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web-app&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;template&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;labels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web-app&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;containers&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx-app&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;image&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx:latest&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;imagePullPolicy&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;IfNotPresent&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;ports&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;containerPort&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;80&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;lifecycle&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;postStart&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;exec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;                &lt;/span&gt;&lt;span&gt;command&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;                  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;sh&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;                  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;-c&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;27&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;                  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;echo &quot;Test web page&quot; &amp;gt; /usr/share/nginx/html/index.html&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;28&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;# åœ¨åœæ­¢Podå‰ä¼˜é›…å…³é—­nginxæœåŠ¡&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;29&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;preStop&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;30&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;exec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;31&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;                &lt;/span&gt;&lt;span&gt;command&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;32&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;                  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;sh&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;33&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;                  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;-c&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;34&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;                  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;nginx -s stop&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;å®¹å™¨æ¢é’ˆ&lt;a href=&quot;#å®¹å™¨æ¢é’ˆ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;section&gt;&lt;h2&gt;å­˜æ´»æ€§æ¢é’ˆ&lt;a href=&quot;#å­˜æ´»æ€§æ¢é’ˆ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;å­˜æ´»æ€§æ¢æµ‹æ˜¯ kubernetes ç”¨äºæ£€æµ‹å®¹å™¨æ˜¯å¦å¤„äºè¿è¡ŒçŠ¶æ€çš„ä¸€ç§æœºåˆ¶ï¼Œå®ƒå®šæœŸå‘å®¹å™¨å‘é€ä¸€ä¸ªè¯·æ±‚ï¼Œå¹¶æ ¹æ®ç»“æœåˆ¤æ–­å®¹å™¨æ˜¯å¦æ­£åœ¨è¿è¡Œã€‚&lt;/p&gt;&lt;section&gt;&lt;h3&gt;è¯­æ³•&lt;a href=&quot;#è¯­æ³•&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;



























































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å­—æ®µ&lt;/th&gt;&lt;th&gt;ç±»å‹&lt;/th&gt;&lt;th&gt;è¯´æ˜&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;livenessProbe&lt;/code&gt;&lt;/td&gt;&lt;td&gt;object&lt;/td&gt;&lt;td&gt;å­˜æ´»æ€§æ¢æµ‹&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;livenessProbe.exec&lt;/code&gt;&lt;/td&gt;&lt;td&gt;object&lt;/td&gt;&lt;td&gt;åœ¨å®¹å™¨ä¸­æ‰§è¡Œç‰¹å®šçš„æµ‹è¯•å‘½ä»¤&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;livenessProbe**.**httpGet&lt;/code&gt;&lt;/td&gt;&lt;td&gt;object&lt;/td&gt;&lt;td&gt;å‘é€ HTTP GET è¯·æ±‚æµ‹è¯•å®¹å™¨æ´»æ€§&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;livenessProbe.tcpSocket&lt;/code&gt;&lt;/td&gt;&lt;td&gt;object&lt;/td&gt;&lt;td&gt;å¯¹æŒ‡å®šçš„ TCP ç«¯å£è¿›è¡Œè¿æ¥æµ‹è¯•&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;livenessProbe.failureThreshold&lt;/code&gt;&lt;/td&gt;&lt;td&gt;integer&lt;/td&gt;&lt;td&gt;åœ¨è¿ç»­æ£€æµ‹å¤±è´¥ N æ¬¡åï¼Œè®¤å®šè¯¥å®¹å™¨å·²ç»ˆæ­¢&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;livenessProbe.initialDelaySeconds&lt;/code&gt;&lt;/td&gt;&lt;td&gt;integer&lt;/td&gt;&lt;td&gt;åœ¨ Pod å¯åŠ¨ N ç§’åå¼€å§‹æ‰§è¡Œæ£€æµ‹&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;livenessProbe.periodSeconds&lt;/code&gt;&lt;/td&gt;&lt;td&gt;integer&lt;/td&gt;&lt;td&gt;ä¸¤æ¬¡æ£€æµ‹çš„é—´éš”æ—¶é—´ï¼ˆé»˜è®¤ 10sï¼‰&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;livenessProbe.successThreshold&lt;/code&gt;&lt;/td&gt;&lt;td&gt;integer&lt;/td&gt;&lt;td&gt;è¿ç»­ N æ¬¡æµ‹è¯•æˆåŠŸåå°†å®¹å™¨è§†ä¸ºæˆåŠŸå¯åŠ¨ï¼Œé»˜è®¤ä¸º 1ï¼Œæ„å‘³ç€éœ€è¦è¿ç»­æˆåŠŸé€šè¿‡ 2 æ¬¡æµ‹è¯•&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;livenessProbe.terminationGracePeriodSeconds&lt;/code&gt;&lt;/td&gt;&lt;td&gt;integer&lt;/td&gt;&lt;td&gt;åœ¨å®¹å™¨ç»ˆæ­¢å‰ç­‰å¾…çš„æ—¶é—´ï¼Œä»¥ä¾¿è®©å®¹å™¨æ‰§è¡Œæ¸…ç†å’Œå…³é—­è¿æ¥ç­‰å·¥ä½œï¼Œé»˜è®¤å€¼ä¸º 30s&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;livenessProbe.timeoutSeconds&lt;/code&gt;&lt;/td&gt;&lt;td&gt;integer&lt;/td&gt;&lt;td&gt;è¶…æ—¶æ—¶é—´ï¼Œåœ¨æŒ‡å®šçš„æ—¶é—´å†…æœªè·å¾—å“åº”ï¼Œè§†ä¸ºæµ‹è¯•å¤±è´¥&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;ç¤ºä¾‹&lt;a href=&quot;#ç¤ºä¾‹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;ä½¿ç”¨ exec çš„æ–¹å¼è¿›è¡Œå­˜æ´»å¥åº·æ¢æµ‹&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Pod&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;labels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;run&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;test-nginx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;test-nginx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;containers&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;image&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx:latest&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;test-nginx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;ports&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;containerPort&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;80&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;livenessProbe&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;initialDelaySeconds&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;10&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;periodSeconds&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;10&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;failureThreshold&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;10&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;timeoutSeconds&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;3&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;exec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;command&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;sh&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;-c&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;|&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;          &lt;/span&gt;&lt;/span&gt;&lt;span&gt;curl -f http://localhost/ || exit 1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;restartPolicy&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Always&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;ä½¿ç”¨ httpGet çš„æ–¹å¼è¿›è¡Œå¥åº·æµ‹è¯•&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Pod&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;labels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;run&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;test-nginx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;test-nginx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;containers&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;image&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx:latest&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;test-nginx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;ports&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;containerPort&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;80&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;livenessProbe&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;initialDelaySeconds&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;10&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;periodSeconds&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;10&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;failureThreshold&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;10&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;timeoutSeconds&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;3&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;httpGet&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;scheme&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;HTTP&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;#ä¹Ÿå¯ä»¥æ˜¯HTTPS&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;path&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/healthz&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;# è®¾å®šä¸“é—¨ç”¨äºæ‰§è¡Œå¥åº·æµ‹è¯•çš„è·¯å¾„&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;port&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;80&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;host&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;127.0.0.1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;httpHeaders&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;# é€šè¿‡æŒ‡å®šHTTP headersé˜²æ­¢æ™®é€šç”¨æˆ·è®¿é—®&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;          &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;X-Health-Check&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;kube-probe&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;restartPolicy&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Always&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;ä½¿ç”¨ tcpSocket çš„æ–¹å¼è¿›è¡Œå¥åº·æµ‹è¯•&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;tcpSocket é€šå¸¸ç”¨äºæœåŠ¡ä¸æä¾› HTTP è®¿é—®ä½†ä»éœ€è¦ä½¿ç”¨ TCP è¿æ¥çš„æƒ…æ™¯ï¼Œæ¯”å¦‚æœåŠ¡å™¨è¿æ¥&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Pod&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;labels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;run&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;db&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;db&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;containers&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;image&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;mysql:8.0&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;db&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;ports&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;containerPort&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;80&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;livenessProbe&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;initialDelaySeconds&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;10&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;periodSeconds&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;10&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;failureThreshold&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;10&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;timeoutSeconds&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;3&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;tcpSocket&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;host&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;127.0.0.1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;port&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;3306&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;restartPolicy&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Always&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;å°±ç»ªæ€§æ¢é’ˆ&lt;a href=&quot;#å°±ç»ªæ€§æ¢é’ˆ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;å°±ç»ªæ€§æ¢é’ˆæ˜¯ kubernetes ä¸­ç”¨äºç¡®å®š Pod æ˜¯å¦å‡†å¤‡å¥½æ¥å—æµé‡çš„æœºåˆ¶ï¼Œé€šè¿‡å°±ç»ªæ€§æ¢é’ˆï¼Œkubernetes å¯ä»¥åœ¨æµé‡å‘é€åˆ° Pod ä¹‹å‰ï¼Œæ£€æŸ¥å®¹å™¨ä¸­çš„ Pod æ˜¯å¦å·²ç»å¯åŠ¨å¹¶åšå¥½äº†å¤„ç†ç”¨æˆ·è¯·æ±‚çš„å‡†å¤‡ã€‚å¦‚æœ Pod æœªé€šè¿‡å°±ç»ªæ€§æ£€æµ‹ï¼Œkubelet å°†ä» Service çš„åœ°å€æ± ä¸­å°† Pod ç§»é™¤ï¼Œé˜²æ­¢æµé‡è½¬å‘åˆ°æœªå°±ç»ªçš„ Pod ä¸Šå¯¼è‡´æµé‡ä¸¢å¤±ã€‚&lt;/p&gt;&lt;p&gt;å°±ç»ªæ€§æ¢æµ‹é€šå¸¸é€šè¿‡ HTTP æˆ– TCP çš„æ–¹å¼å®ç°ã€‚&lt;/p&gt;&lt;section&gt;&lt;h3&gt;è¯­æ³•&lt;a href=&quot;#è¯­æ³•-1&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;






















































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å­—æ®µ&lt;/th&gt;&lt;th&gt;ç±»å‹&lt;/th&gt;&lt;th&gt;è¯´æ˜&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;readinessProbe&lt;/code&gt;&lt;/td&gt;&lt;td&gt;object&lt;/td&gt;&lt;td&gt;å­˜æ´»æ€§æ¢æµ‹&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;readinessProbe.exec&lt;/code&gt;&lt;/td&gt;&lt;td&gt;object&lt;/td&gt;&lt;td&gt;åœ¨å®¹å™¨ä¸­æ‰§è¡Œç‰¹å®šçš„æµ‹è¯•å‘½ä»¤&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;readinessProbe**.**httpGet&lt;/code&gt;&lt;/td&gt;&lt;td&gt;object&lt;/td&gt;&lt;td&gt;å‘é€ HTTP GET è¯·æ±‚æµ‹è¯•å®¹å™¨æ˜¯å¦å°±ç»ª&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;readinessProbe.tcpSocket&lt;/code&gt;&lt;/td&gt;&lt;td&gt;object&lt;/td&gt;&lt;td&gt;å¯¹æŒ‡å®šçš„ TCP ç«¯å£è¿›è¡Œè¿æ¥æµ‹è¯•&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;readinessProbe.failureThreshold&lt;/code&gt;&lt;/td&gt;&lt;td&gt;integer&lt;/td&gt;&lt;td&gt;åœ¨è¿ç»­æ£€æµ‹å¤±è´¥ N æ¬¡åï¼Œè®¤å®šè¯¥å®¹å™¨å¤„äºæœªå°±ç»ªçŠ¶æ€&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;readinessProbe.initialDelaySeconds&lt;/code&gt;&lt;/td&gt;&lt;td&gt;integer&lt;/td&gt;&lt;td&gt;åœ¨ Pod å¯åŠ¨ N ç§’åå¼€å§‹æ‰§è¡Œæ£€æµ‹&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;readinessProbe.periodSeconds&lt;/code&gt;&lt;/td&gt;&lt;td&gt;integer&lt;/td&gt;&lt;td&gt;ä¸¤æ¬¡æ£€æµ‹çš„é—´éš”æ—¶é—´ï¼ˆé»˜è®¤ 10sï¼‰&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;readinessProbe.successThreshold&lt;/code&gt;&lt;/td&gt;&lt;td&gt;integer&lt;/td&gt;&lt;td&gt;è¿ç»­ N æ¬¡æµ‹è¯•æˆåŠŸåå°†å®¹å™¨è§†ä¸ºå·²å°±ç»ªï¼Œé»˜è®¤ä¸º 1ï¼Œæ„å‘³ç€éœ€è¦è¿ç»­æˆåŠŸé€šè¿‡ 2 æ¬¡æµ‹è¯•&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;readinessProbe.timeoutSeconds&lt;/code&gt;&lt;/td&gt;&lt;td&gt;integer&lt;/td&gt;&lt;td&gt;è¶…æ—¶æ—¶é—´ï¼Œåœ¨æŒ‡å®šçš„æ—¶é—´å†…æœªè·å¾—å“åº”ï¼Œè§†ä¸ºæµ‹è¯•å¤±è´¥&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;ä½¿ç”¨&lt;a href=&quot;#ä½¿ç”¨&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;ä¸&lt;code&gt;livenessProbe&lt;/code&gt;çš„ä½¿ç”¨æ–¹æ³•åŸºæœ¬ç›¸åŒ&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;å¯åŠ¨æ¢é’ˆ&lt;a href=&quot;#å¯åŠ¨æ¢é’ˆ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;å¯åŠ¨æ¢é’ˆï¼ˆ&lt;code&gt;startupProbe&lt;/code&gt;ï¼‰æ˜¯ Kubernetes ä¸­çš„ä¸€ç§æ¢é’ˆç±»å‹ï¼Œä¸“é—¨ç”¨äºåˆ¤æ–­å®¹å™¨â€œæ˜¯å¦å¯åŠ¨å®Œæˆâ€ã€‚å®ƒå’Œ &lt;code&gt;livenessProbe&lt;/code&gt;ã€&lt;code&gt;readinessProbe&lt;/code&gt; ä¸€æ ·æ˜¯å®¹å™¨æ¢é’ˆçš„ä¸€ç§ï¼Œä½†åŠŸèƒ½å’Œç”¨é€”ä¸åŒã€‚&lt;/p&gt;&lt;p&gt;å¯åŠ¨æ¢é’ˆé€‚åˆå¯åŠ¨æ—¶é—´è¾ƒé•¿çš„æœåŠ¡ã€‚åªæœ‰åœ¨å¯åŠ¨æˆåŠŸåï¼ŒKubernetes æ‰ä¼šå¼€å§‹æ‰§è¡Œ &lt;code&gt;livenessProbe&lt;/code&gt; å’Œ &lt;code&gt;readinessProbe&lt;/code&gt;ã€‚&lt;/p&gt;&lt;section&gt;&lt;h3&gt;ä¸ºä»€ä¹ˆéœ€è¦å¯åŠ¨æ¢é’ˆ&lt;a href=&quot;#ä¸ºä»€ä¹ˆéœ€è¦å¯åŠ¨æ¢é’ˆ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;ä¸€äº›æœåŠ¡ï¼ˆå¦‚ Java/SpringBootã€æ•°æ®åº“ç­‰ï¼‰å¯åŠ¨æ—¶é—´é•¿ï¼Œåœ¨å¯åŠ¨å‰å°±æ‰§è¡Œäº† &lt;code&gt;livenessProbe&lt;/code&gt;ï¼Œå®¹æ˜“è¢«è¯¯åˆ¤ä¸ºâ€œå¡æ­»â€è€Œé‡å¯ï¼Œå¯¼è‡´ â€œå¯åŠ¨å¤±è´¥æ­»å¾ªç¯â€ã€‚&lt;/p&gt;&lt;p&gt;ä½¿ç”¨ &lt;code&gt;startupProbe&lt;/code&gt; å¯ä»¥é˜²æ­¢è¿™ç§æƒ…å†µ&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;å®¹å™¨å¯åŠ¨æœŸé—´åªæ‰§è¡Œ &lt;code&gt;startupProbe&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;startupProbe&lt;/code&gt; æˆåŠŸåï¼Œæ‰å¼€å§‹æ‰§è¡Œ &lt;code&gt;livenessProbe&lt;/code&gt; å’Œ &lt;code&gt;readinessProbe&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;å¯åŠ¨æ¢é’ˆä¸å°±ç»ªæ€§æ¢é’ˆå’Œå­˜æ´»æ€§æ¢é’ˆä¸€æ ·ï¼Œä¹Ÿæœ‰ &lt;code&gt;exec&lt;/code&gt;, &lt;code&gt;httpGet&lt;/code&gt; å’Œ &lt;code&gt;tcpSocket&lt;/code&gt; ä¸‰ç§æ–¹æ³•&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;ç¤ºä¾‹&lt;a href=&quot;#ç¤ºä¾‹-1&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;ä¸º SpringBoot åº”ç”¨é…ç½®å¯åŠ¨æ¢é’ˆ&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Pod&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;labels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;run&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;java-app&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;java-app&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;containers&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;image&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;java-app:v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;java-app&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;ports&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;containerPort&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;80&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;startupProbe&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;periodSeconds&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;5&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;failureThreshold&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;12&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;# æœ€å¤§å¯åŠ¨å®¹å¿æ—¶é—´ 5 * 12s = 60s&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;timeoutSeconds&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;3&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;httpGet&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;path&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/actuator/health&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;port&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;8000&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;restartPolicy&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Always&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;kubectl å‘½ä»¤æŸ¥çœ‹ Pod çŠ¶æ€æ—¶çš„æ¢æµ‹ç»“æœ&lt;a href=&quot;#kubectl-å‘½ä»¤æŸ¥çœ‹-pod-çŠ¶æ€æ—¶çš„æ¢æµ‹ç»“æœ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;ä½¿ç”¨ &lt;code&gt;kubectl&lt;/code&gt; å‘½ä»¤æŸ¥çœ‹ pod çŠ¶æ€æ—¶ï¼Œæœ‰ä¸€ä¸ª &lt;code&gt;READY&lt;/code&gt; å­—æ®µï¼Œè¯¥å­—æ®µé€šå¸¸æ˜¯ &lt;code&gt;1/1&lt;/code&gt; æˆ– &lt;code&gt;0/1&lt;/code&gt;ï¼Œå‰è€…ä»£è¡¨ Pod å­˜æ´»ä¸”å·²å°±ç»ªï¼Œåè€…ä»£è¡¨ Pod å­˜æ´»ä½†æœªå°±ç»ªã€‚&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;NAME                                       READY   STATUS    RESTARTS      AGE&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;calico-kube-controllers-5947598c79-zbs52   1/1     Running   3 (84m ago)   9d&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;calico-node-7ts8z                          1/1     Running   3 (84m ago)   9d&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;coredns-79b94494c7-q5jgb                   1/1     Running   2 (84m ago)   7d2h&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;hostpath-provisioner-c778b7559-t8xrd       1/1     Running   3 (84m ago)   7d2h&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;</content:encoded></item><item><title>ä½¿ç”¨ACME.SHè¿›è¡Œå…è´¹ä¸”è‡ªåŠ¨åŒ–çš„DVè¯ä¹¦ç»­è®¢</title><link>https://white-festa.net/posts/acme/</link><guid isPermaLink="true">https://white-festa.net/posts/acme/</guid><description>ACMEï¼Œå³è‡ªåŠ¨è‡ªåŠ¨è¯ä¹¦ç®¡ç†ç¯å¢ƒ(Automatic Certificate Management Environment)ï¼Œæ˜¯ä¸€ä¸ªæ— éœ€äººå·¥å¹²é¢„å°±èƒ½è‡ªåŠ¨é¢å‘å’Œæ›´æ–°è¯ä¹¦çš„åè®®ã€‚ç›®å‰ï¼Œè¯ä¹¦é¢å‘æœºæ„Letâ€™s Encrypté€šè¿‡ACMEåè®®å…è´¹æä¾›DVè¯ä¹¦ã€‚</description><pubDate>Tue, 23 Jan 2024 00:00:00 GMT</pubDate><content:encoded>&lt;section&gt;&lt;h1&gt;acme.shæ˜¯ä»€ä¹ˆ&lt;a href=&quot;#acmeshæ˜¯ä»€ä¹ˆ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;ACMEï¼Œå³è‡ªåŠ¨è‡ªåŠ¨è¯ä¹¦ç®¡ç†ç¯å¢ƒ(Automatic Certificate Management Environment)ï¼Œæ˜¯ä¸€ä¸ªæ— éœ€äººå·¥å¹²é¢„å°±èƒ½è‡ªåŠ¨é¢å‘å’Œæ›´æ–°è¯ä¹¦çš„åè®®ã€‚ç›®å‰ï¼Œè¯ä¹¦é¢å‘æœºæ„Letâ€™s Encrypté€šè¿‡ACMEåè®®å…è´¹æä¾›DVè¯ä¹¦ã€‚&lt;br /&gt;
&lt;a href=&quot;https://github.com/acmesh-official/acme.sh&quot;&gt;acme.sh&lt;/a&gt;æ˜¯ä¸€ä¸ªé€šè¿‡shellè„šæœ¬å®ç°çš„è‡ªåŠ¨åŒ–sslè¯ä¹¦è·å–å·¥å…·ã€‚&lt;/p&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;å®‰è£…acme.shå·¥å…·&lt;a href=&quot;#å®‰è£…acmeshå·¥å…·&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;éå¸¸ç®€å•ï¼Œä¸€è¡Œä»£ç &lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;curl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;https://get.acme.sh&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;sh&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-s&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;email=your@email.com&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;acme.shä¼šè‡ªåŠ¨è¢«å®‰è£…åœ¨~/.acme.sh/ç›®å½•ä¸‹ï¼›åŒæ—¶è¿˜ä¼šç”Ÿæˆä¸€ä¸ªacme.shçš„aliasï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;alias&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;acme.sh=~/.acme.sh/acme.sh&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;ç”Ÿæˆè¯ä¹¦&lt;a href=&quot;#ç”Ÿæˆè¯ä¹¦&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;acme.shæ”¯æŒæ™ºèƒ½è¯»å–nginxå’Œapacheé…ç½®å¹¶å®ŒæˆéªŒè¯ã€‚&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# nginxæœåŠ¡å™¨&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;acme.sh&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--issue&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-d&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;mydomain.com&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--nginx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# apacheæœåŠ¡å™¨&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;acme.sh&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--issue&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-d&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;mydomain.com&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--apache&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;è¿™ç§æ–¹æ³•ä¼šè‡ªåŠ¨åœ¨ä½ çš„ç½‘ç«™æ ¹ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªæ–‡ä»¶æ¥éªŒè¯åŸŸåæ‰€æœ‰æƒã€‚&lt;/p&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;å®‰è£…è¯ä¹¦&lt;a href=&quot;#å®‰è£…è¯ä¹¦&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;&lt;em&gt;éœ€è¦æ“ä½œç”¨æˆ·æ˜¯rootæˆ–è€…sudoer&lt;/em&gt;&lt;br /&gt;
ä»¥nginxä¸ºä¾‹ï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;acme.sh&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--install-cert&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-d&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;example.com&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;\&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;--key-file       &lt;/span&gt;&lt;span&gt;/key-fileçš„ç›®æ ‡è·¯å¾„/key.pem&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;\&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;--fullchain-file &lt;/span&gt;&lt;span&gt;/fullchain-fileçš„ç›®æ ‡è·¯å¾„/cert.pem&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;\&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;--reloadcmd     &lt;/span&gt;&lt;span&gt;&quot;service nginx force-reload&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;å…¶ä¸­&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;â€”key-fileå‚æ•°æ˜¯key.pemè¦è¢«å­˜æ”¾çš„ç›®æ ‡è·¯å¾„ï¼Œä¸€èˆ¬éƒ½æ˜¯/etc/nginxç›®å½•ä¸‹ï¼Œè¿™æ ·æˆ‘ä»¬æ‰èƒ½åœ¨nginxè¯»å–åˆ°&lt;/li&gt;
&lt;li&gt;â€”fullchain-fileåŒç†&lt;/li&gt;
&lt;li&gt;â€”reloadcmdå‚æ•°æ˜¯åœ¨æ‰§è¡Œå®Œå®‰è£…åè¦æ±‚nginxè¿›è¡Œçš„é‡è½½åŠ¨ä½œ&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;æŸ¥çœ‹å·²å®‰è£…çš„è¯ä¹¦ä¿¡æ¯&lt;a href=&quot;#æŸ¥çœ‹å·²å®‰è£…çš„è¯ä¹¦ä¿¡æ¯&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;acme.sh â€”info -d ä½ çš„åŸŸå&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[root@blog-187 ~]#acme.sh --info -d blog.freelytomorrow.com&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[Sun Sep &lt;/span&gt;&lt;span&gt;24&lt;/span&gt;&lt;span&gt; 11:01:01 AEST 2023] The domain &lt;/span&gt;&lt;span&gt;&apos;blog.freelytomorrow.com&apos;&lt;/span&gt;&lt;span&gt; seems to have a ECC cert already, lets use ecc cert.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;DOMAIN_CONF&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;/root/.acme.sh/blog.freelytomorrow.com_ecc/blog.freelytomorrow.com.conf&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Le_Domain&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;blog.freelytomorrow.com&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Le_Alt&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;no&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Le_Webroot&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;nginx:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Le_PreHook&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Le_PostHook&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Le_RenewHook&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Le_API&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;https://acme.zerossl.com/v2/DV90&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Le_Keylength&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;ec-256&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Le_OrderFinalize&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;https://acme.zerossl.com/v2/DV90/order/k8qN5WvqYzX8Qij4jrQPPg/finalize&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Le_LinkOrder&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;https://acme.zerossl.com/v2/DV90/order/k8qN5WvqYzX8Qij4jrQPPg&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Le_LinkCert&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;https://acme.zerossl.com/v2/DV90/cert/eNi3DeDNOfAuC8QqbKtI2A&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Le_CertCreateTime&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;1695256995&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Le_CertCreateTimeStr&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;2023-09-21T00:43:15Z&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Le_NextRenewTimeStr&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;2023-11-19T00:43:15Z&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Le_NextRenewTime&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;1700354595&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Le_RealCertPath&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Le_RealCACertPath&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Le_RealKeyPath&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;/etc/nginx/blog.cert/key.pem&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Le_ReloadCmd&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Le_RealFullChainPath&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;/etc/nginx/blog.cert/cert.pem&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;é…ç½®è¯ä¹¦&lt;a href=&quot;#é…ç½®è¯ä¹¦&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;åœ¨nginxçš„é…ç½®æ–‡ä»¶ä¸­&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ssl_certificate &lt;/span&gt;&lt;span&gt;/etc/nginx/blog.cert/cert.pem;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ssl_certificate_key &lt;/span&gt;&lt;span&gt;/etc/nginx/blog.cert/key.pem;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;è¿™ä¸¤ä¸ªå‚æ•°æ‰€æŒ‡å®šçš„è·¯å¾„å°±æ˜¯ä¹‹å‰å®‰è£…è¯ä¹¦æ—¶çš„é‚£ä¸¤ä¸ªå‚æ•°ï¼Œä¹Ÿå°±æ˜¯â€”key-fileå’Œâ€”fullchain-fileçš„å€¼ã€‚&lt;/p&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;æ›´æ–°è¯ä¹¦&lt;a href=&quot;#æ›´æ–°è¯ä¹¦&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;acme.shä¼šè‡ªåŠ¨ç»™ä½ çš„æœåŠ¡å™¨ä¸Šç”Ÿæˆå®šæ—¶ä»»åŠ¡ï¼Œä¼šåœ¨ä¸€æ®µæ—¶é—´åè‡ªåŠ¨æ›´æ–°ï¼Œæ‰€ä»¥æ— éœ€æ‰‹åŠ¨æ“ä½œã€‚&lt;br /&gt;
åªéœ€è¦è®©ä½ çš„å®šæ—¶ä»»åŠ¡çœ‹èµ·æ¥åƒè¿™æ ·ï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[root@blog-187 ~]#crontab -l&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;27&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;*&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;*&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;*&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;/root/.acme.sh&quot;/acme.sh&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--cron&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--home&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;/root/.acme.sh&quot;&lt;/span&gt;&lt;span&gt; &amp;gt; &lt;/span&gt;&lt;span&gt;/dev/null&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;åœæ­¢è¯ä¹¦ç»­è®¢&lt;a href=&quot;#åœæ­¢è¯ä¹¦ç»­è®¢&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;acme.sh&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--remove&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-d&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;example.com&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;è¯ä¹¦å’Œç§˜é’¥ä¸ä¼šè¢«åˆ é™¤ï¼Œéœ€è¦ä½ æ‰‹åŠ¨åˆ é™¤ã€‚&lt;/p&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;æ›´æ–°acme.sh&lt;a href=&quot;#æ›´æ–°acmesh&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;æ›´æ–°åˆ°æœ€æ–°ç‰ˆ&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;acme.sh&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--upgrade&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;è‡ªåŠ¨æ›´æ–°&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;acme.sh&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--upgrade&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--auto-upgrade&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;å…³é—­è‡ªåŠ¨æ›´æ–°&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;acme.sh&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--upgrade&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--auto-upgrade&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;è¯¦ç»†æ•™ç¨‹ï¼š&lt;a href=&quot;https://github.com/acmesh-official/acme.sh&quot;&gt;https://github.com/acmesh-official/acme.sh&lt;/a&gt;&lt;/p&gt;&lt;/section&gt;</content:encoded></item><item><title>Kuberneteså­¦ä¹ ç¬”è®°ä¸‰ï¼šPodçš„è°ƒåº¦ç­–ç•¥</title><link>https://white-festa.net/posts/kubernetes-tutorial/pod-%E8%B0%83%E5%BA%A6%E7%AD%96%E7%95%A5/</link><guid isPermaLink="true">https://white-festa.net/posts/kubernetes-tutorial/pod-%E8%B0%83%E5%BA%A6%E7%AD%96%E7%95%A5/</guid><description>Podçš„è°ƒåº¦ç­–ç•¥ä¸èŠ‚ç‚¹äº²å’Œæ€§</description><pubDate>Wed, 27 Dec 2023 00:00:00 GMT</pubDate><content:encoded>&lt;section&gt;&lt;h1&gt;æ ¹æ® Node èŠ‚ç‚¹é€‰æ‹©å™¨è¿›è¡Œ Pod èµ„æºè°ƒåº¦&lt;a href=&quot;#æ ¹æ®-node-èŠ‚ç‚¹é€‰æ‹©å™¨è¿›è¡Œ-pod-èµ„æºè°ƒåº¦&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;section&gt;&lt;h2&gt;ä½¿ç”¨ nodeName è¿›è¡Œèµ„æºè°ƒåº¦&lt;a href=&quot;#ä½¿ç”¨-nodename-è¿›è¡Œèµ„æºè°ƒåº¦&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;ä½¿ç”¨ nodeName è°ƒåº¦ Pod ä¸ä¼šç»è¿‡ Scheduler&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;nodeName&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;node-02&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;containers&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;example-pod&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;image&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx:latest&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;ä½¿ç”¨ nodeSelector è¿›è¡Œèµ„æºè°ƒåº¦&lt;a href=&quot;#ä½¿ç”¨-nodeselector-è¿›è¡Œèµ„æºè°ƒåº¦&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;containers&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;image&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;nodeSelector&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;disktype&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;ssd&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;gpu&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;true&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;region&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;east&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;Node Affinity èŠ‚ç‚¹äº²å’Œæ€§&lt;a href=&quot;#node-affinity-èŠ‚ç‚¹äº²å’Œæ€§&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;èŠ‚ç‚¹äº²å’Œæ€§æ˜¯ Kubernetes é›†ç¾¤ä¸­çš„èµ„æºè°ƒåº¦ç­–ç•¥ï¼Œå®ƒå¯ä»¥æ§åˆ¶ Pod è¢«è°ƒåº¦åˆ°å“ªäº›èŠ‚ç‚¹ä¸Šã€‚èŠ‚ç‚¹äº²å’Œæ€§é€šå¸¸ç”¨äºæ»¡è¶³æŸäº›åº”ç”¨ç¨‹åºçš„ç‰¹æ®Šéœ€æ±‚ï¼Œæ¯”å¦‚å°†åº”ç”¨ç¨‹åºçš„ Pod è°ƒåº¦åˆ°åŒä¸€èŠ‚ç‚¹ä¸Šï¼Œä»¥æé«˜åº”ç”¨ç¨‹åºçš„æ€§èƒ½å’Œç¨³å®šæ€§ã€‚&lt;/p&gt;&lt;section&gt;&lt;h2&gt;èŠ‚ç‚¹äº²å’Œæ€§ä¸åäº²å’Œæ€§&lt;a href=&quot;#èŠ‚ç‚¹äº²å’Œæ€§ä¸åäº²å’Œæ€§&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;åœ¨ Kubernetes é›†ç¾¤ä¸­ï¼ŒèŠ‚ç‚¹äº²å’Œæ€§ç”±äº²å’Œæ€§è§„åˆ™ Affinity Rule å®šä¹‰ï¼Œäº²å’Œæ€§è§„åˆ™å¯ä»¥æŒ‡å®šä¸€ç»„æ ‡ç­¾ï¼Œä»¥åŠ Pod è¢«è°ƒåº¦åˆ°èŠ‚ç‚¹ä¸Šæ—¶éœ€è¦åŒ¹é…çš„èŠ‚ç‚¹æ ‡ç­¾ã€‚äº²å’Œæ€§è§„åˆ™é€šå¸¸ç”¨äºæŒ‡å®š Pod åº”è¯¥è¿è¡Œåœ¨å“ªäº›èŠ‚ç‚¹ä¸Šï¼Œä¾‹å¦‚ï¼Œå¯ä»¥é€šè¿‡æŒ‡å®šäº²å’Œæ€§è§„åˆ™ï¼Œå°† Pod è°ƒåº¦åˆ°åªåŒ…å«ç‰¹å®šå•å…ƒæµ‹è¯•çš„èŠ‚ç‚¹ä¸Šï¼Œæˆ–å°†æ‰€æœ‰ Pod è°ƒåº¦åˆ°åªæ‹¥æœ‰å¼ºå¤§ CPU çš„èŠ‚ç‚¹ä¸Šã€‚&lt;/p&gt;&lt;p&gt;ä¸äº²å’Œæ€§ç›¸åçš„æ˜¯åäº²å’Œæ€§ Node Anti-affinityï¼Œå®ƒæŒ‡å®šå½“ Kubernetes é›†ç¾¤ä¸­æœ‰å¤šä¸ªèŠ‚ç‚¹ç¬¦åˆè°ƒåº¦æ¡ä»¶æ—¶ï¼Œ ä¸åº”å°† Pod è°ƒåº¦åˆ°æŸäº›èŠ‚ç‚¹ä¸Šã€‚ä¾‹å¦‚ï¼Œå¯ä»¥é€šè¿‡è®¾å®šåäº²å’Œæ€§è§„åˆ™ï¼Œç¡®ä¿æ•°æ®åº“ Pod è¢«è°ƒåº¦åˆ°ä¸å«å…¶ä»–æ•°æ®åº“ Pod çš„èŠ‚ç‚¹ä¸Šï¼Œæé«˜æ€§èƒ½ã€‚&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;https://kubernetes.io/zh-cn/docs/concepts/scheduling-eviction/assign-pod-node/#node-affinity&quot;&gt;å°† Pod æŒ‡æ´¾ç»™èŠ‚ç‚¹&lt;/a&gt;&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;èŠ‚ç‚¹ç¡¬äº²å’Œæ€§&lt;a href=&quot;#èŠ‚ç‚¹ç¡¬äº²å’Œæ€§&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;ç¡¬äº²å’Œæ€§ æ˜¯ Kubernetes ä¸­ä¸€ç§å¼ºåˆ¶æ€§çš„è°ƒåº¦ç­–ç•¥ï¼Œç”¨äºä¸¥æ ¼é™åˆ¶ Pod åªèƒ½è¿è¡Œåœ¨æ»¡è¶³ç‰¹å®šæ¡ä»¶çš„èŠ‚ç‚¹ä¸Šã€‚å¦‚æœèŠ‚ç‚¹ä¸æ»¡è¶³æ¡ä»¶ï¼ŒPod å°†ä¸ä¼šè¢«è°ƒåº¦ï¼ˆå¤„äº &lt;code&gt;Pending&lt;/code&gt; çŠ¶æ€ï¼‰ï¼Œç›´åˆ°ç¬¦åˆæ¡ä»¶çš„èŠ‚ç‚¹å¯ç”¨ã€‚ç¡¬äº²å’Œæ€§ä¼šè¦†ç›–é»˜è®¤è°ƒåº¦å™¨æˆ–å…¶ä»–è½¯æ€§è§„åˆ™ã€‚&lt;/p&gt;&lt;p&gt;é…ç½®ç¤ºä¾‹&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Pod&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;affinity&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;nodeAffinity&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;requiredDuringSchedulingIgnoredDuringExecution&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;nodeSelectorTerms&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;matchExpressions&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;          &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;key&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;disktype&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;operator&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;In&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;values&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;ssd&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;containers&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;image&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;å…¶ä¸­ &lt;code&gt;requiredDuringSchedulingIgnoredDuringExecution&lt;/code&gt; æ˜¯ç¡¬äº²å’Œæ€§çš„å›ºå®šå­—æ®µåï¼Œè¡¨ç¤ºâ€œè°ƒåº¦æ—¶å¿…é¡»æ»¡è¶³ï¼Œè¿è¡Œæ—¶å¿½ç•¥â€ï¼ˆå³è°ƒåº¦åèŠ‚ç‚¹æ ‡ç­¾å˜åŒ–ä¸å½±å“å·²è¿è¡Œçš„ Podï¼‰&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;èŠ‚ç‚¹è½¯äº²å’Œæ€§&lt;a href=&quot;#èŠ‚ç‚¹è½¯äº²å’Œæ€§&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;ä¸ç¡¬äº²å’Œæ€§ç›¸å¯¹ï¼Œè½¯äº²å’Œæ€§æ˜¯ Kubernetes é›†ç¾¤ä¸­éå¼ºåˆ¶æ€§çš„è°ƒåº¦ç­–ç•¥ï¼ŒPod ä¼šè¢«ä¼˜å…ˆè°ƒåº¦åˆ°ç¬¦åˆè½¯äº²å’Œæ€§è§„åˆ™çš„èŠ‚ç‚¹ä¸Šï¼Œå¦‚æœæ²¡æœ‰ä»»ä½•èŠ‚ç‚¹æ»¡è¶³è§„åˆ™ï¼Œåˆ™éšæœºè°ƒåº¦åˆ°æŸä¸ªèŠ‚ç‚¹ä¸Šã€‚&lt;/p&gt;&lt;p&gt;è½¯äº²å’Œæ€§å’Œç¡¬äº²å’Œæ€§å¯ä»¥ç»„åˆä½¿ç”¨ï¼Œè°ƒåº¦å™¨åœ¨æ‰€æœ‰æ»¡è¶³ç¡¬äº²å’Œæ€§è§„åˆ™çš„èŠ‚ç‚¹ä¸­å¯»æ‰¾æœ€å¤§ç¨‹åº¦ä¸Šæ»¡è¶³è½¯äº²å’Œæ€§è§„åˆ™çš„èŠ‚ç‚¹è¿›è¡Œè°ƒåº¦ã€‚&lt;/p&gt;&lt;p&gt;é…ç½®ç¤ºä¾‹ï¼š&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Pod&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;my-pod&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;affinity&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;nodeAffinity&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;# è½¯äº²å’Œæ€§ï¼šå°½é‡è¿è¡Œåœ¨ zone=us-east-1a çš„èŠ‚ç‚¹&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;preferredDuringSchedulingIgnoredDuringExecution&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;weight&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;100&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;# æƒé‡ï¼ˆ1-100ï¼‰&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;preference&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;matchExpressions&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;          &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;key&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;zone&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;operator&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;In&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;values&lt;/span&gt;&lt;span&gt;: [&lt;/span&gt;&lt;span&gt;us-east-1a&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;containers&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;image&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;æƒé‡å€¼ï¼š&lt;/p&gt;&lt;p&gt;æƒé‡å€¼ï¼ˆweightï¼‰ä»…ç”¨äºåœ¨å¤šä¸ªè½¯æ€§è§„åˆ™é—´æ’åºï¼Œå¦‚ weight: 100 æ¯” weight: 50 ä¼˜å…ˆçº§æ›´é«˜ï¼Œå½“å¤šä¸ªèŠ‚ç‚¹åˆ†åˆ«æ»¡è¶³ä¸åŒçš„è½¯äº²å’Œæ€§è§„åˆ™æ—¶ï¼ŒPod ä¼šè¢«éƒ¨ç½²åˆ°æ»¡è¶³æœ€é«˜æƒé‡è§„åˆ™çš„èŠ‚ç‚¹ä¸Šã€‚&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;Pod äº²å’Œæ€§&lt;a href=&quot;#pod-äº²å’Œæ€§&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;Pod äº²å’Œæ€§ (Pod Affinity) æ˜¯ Kubernetes é›†ç¾¤ä¸­çš„è°ƒåº¦ç­–ç•¥ä¹‹ä¸€ï¼Œç”¨äºæŒ‡å®šä¸€ç»„ Pod éœ€è¦è¢«è°ƒåº¦åˆ°ç›¸åŒçš„èŠ‚ç‚¹ä¸Šæˆ–é¿å…è¢«è°ƒåº¦åˆ°ç›¸åŒçš„èŠ‚ç‚¹ä¸Šï¼Œä»¥æ­¤æé«˜åº”ç”¨ç¨‹åºæ€§èƒ½ã€å¯é æ€§å’Œå®‰å…¨æ€§ã€‚&lt;/p&gt;&lt;p&gt;ä¸ Node Affinity ç±»ä¼¼ï¼ŒPod äº²å’Œæ€§ç”± Pod Affinity Rule å®šä¹‰ï¼Œäº²å’Œæ€§è§„åˆ™å¯ä»¥æŒ‡å®šä¸€ç»„æ ‡ç­¾ä»¥åŠ Pod è¢«è°ƒåº¦åˆ°èŠ‚ç‚¹ä¸Šæ—¶ï¼Œéœ€è¦æ»¡è¶³çš„å…¶ä»– Podã€èŠ‚ç‚¹æ ‡ç­¾æ¡ä»¶ã€‚&lt;/p&gt;&lt;p&gt;Pod äº²å’Œæ€§è§„åˆ™æœ‰ä»¥ä¸‹å…¸å‹åº”ç”¨ï¼š&lt;/p&gt;&lt;ol&gt;
&lt;li&gt;é¿å…åŒä¸€åº”ç”¨ç¨‹åºçš„ Pod éƒ¨ç½²åœ¨åŒä¸€èŠ‚ç‚¹ä¸Šï¼Œé˜²æ­¢èŠ‚ç‚¹å®•æœºå¯¼è‡´æœåŠ¡çš„å…¨éƒ¨å¤±æ•ˆ&lt;/li&gt;
&lt;li&gt;éƒ¨ç½² å¤šä¸ªå…³è” Pod åœ¨åŒä¸€èŠ‚ç‚¹ä¸Šï¼Œæé«˜é€šä¿¡æ•ˆç‡&lt;/li&gt;
&lt;li&gt;æé«˜åˆ†å¸ƒå¼æ•°æ®å­˜å‚¨ç³»ç»Ÿçš„å¯é æ€§ï¼Œå°†æ•°æ®å‰¯æœ¬éƒ¨ç½²åœ¨é›†ç¾¤çš„ä¸åŒèŠ‚ç‚¹ä¸Š&lt;/li&gt;
&lt;/ol&gt;&lt;section&gt;&lt;h2&gt;Pod ç¡¬äº²å’Œæ€§&lt;a href=&quot;#pod-ç¡¬äº²å’Œæ€§&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Pod&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;with-pod-affinity&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;affinity&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;podAffinity&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;requiredDuringSchedulingIgnoredDuringExecution&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;labelSelector&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;matchExpressions&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;          &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;key&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;security&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;operator&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;In&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;values&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;S1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;topologyKey&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;topology.kubernetes.io/zone&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;è¯¥é…ç½®çš„å«ä¹‰æ˜¯ï¼šåªæœ‰èŠ‚ç‚¹å±äºç‰¹å®šçš„åŒºåŸŸ ä¸”è¯¥åŒºåŸŸä¸­çš„å…¶ä»– Pod å·²æ‰“ä¸Š &lt;code&gt;security=S1&lt;/code&gt; æ ‡ç­¾æ—¶ï¼Œè°ƒåº¦å™¨æ‰å¯ä»¥å°†ç¤ºä¾‹ Pod è°ƒåº¦åˆ°æ­¤èŠ‚ç‚¹ä¸Šã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;Pod è½¯äº²å’Œæ€§&lt;a href=&quot;#pod-è½¯äº²å’Œæ€§&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Pod&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;with-pod-affinity&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;affinity&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;podAffinity&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;preferredDuringSchedulingIgnoredDuringExecution&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;weight&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;100&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;podAffinityTerm&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;labelSelector&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;matchExpressions&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;key&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;security&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;operator&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;In&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;values&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;              &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;S2&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;TopologyKey&lt;a href=&quot;#topologykey&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;åœ¨ Kubernetes çš„ Pod äº²å’Œæ€§ï¼ˆPod Affinity/Anti-Affinityï¼‰ è§„åˆ™ä¸­ï¼Œ&lt;code&gt;topologyKey&lt;/code&gt; æ˜¯ä¸€ä¸ªå…³é”®å­—æ®µï¼Œç”¨äºå®šä¹‰ Pod ä¹‹é—´çš„â€œæ‹“æ‰‘åŸŸâ€èŒƒå›´ï¼Œå³å†³å®š Pod åº”è¯¥å¦‚ä½•åˆ†ç»„æˆ–åˆ†æ•£è°ƒåº¦ã€‚&lt;/p&gt;&lt;section&gt;&lt;h3&gt;æ ¸å¿ƒä½œç”¨&lt;a href=&quot;#æ ¸å¿ƒä½œç”¨&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;&lt;code&gt;topologyKey&lt;/code&gt; æŒ‡å®šäº†ä¸€ä¸ª èŠ‚ç‚¹æ ‡ç­¾çš„é”®ï¼ˆLabel Keyï¼‰ï¼ŒKubernetes ä¼šæ ¹æ®è¯¥æ ‡ç­¾çš„å€¼å°†èŠ‚ç‚¹åˆ’åˆ†ä¸ºä¸åŒçš„ æ‹“æ‰‘åŸŸã€‚è°ƒåº¦å™¨é€šè¿‡è¿™ä¸ªåŸŸæ¥åˆ¤æ–­ Pod æ˜¯å¦æ»¡è¶³â€œåœ¨åŒä¸€åŸŸâ€æˆ–â€œä¸åœ¨åŒä¸€åŸŸâ€çš„äº²å’Œæ€§/åäº²å’Œæ€§è§„åˆ™ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;ç¤ºä¾‹&lt;a href=&quot;#ç¤ºä¾‹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;æœ‰ä»¥ä¸‹åœºæ™¯ï¼šéƒ¨ç½²ä¸€ä¸ªåº”ç”¨ï¼Œè¯¥åº”ç”¨æœ‰ä¸‰ä¸ªå‰¯æœ¬ï¼Œä¸‰ä¸ªå‰¯æœ¬éœ€è¦åˆ†åˆ«éƒ¨ç½²åˆ°ä¸‰ä¸ªä½äºä¸åŒåœ°åŒº (australia-central, us-east, europe-central) çš„èŠ‚ç‚¹ä¸Šã€‚&lt;/p&gt;&lt;p&gt;æ–¹æ³•ï¼š&lt;/p&gt;&lt;ol&gt;
&lt;li&gt;ä¸ºä¸‰ä¸ªèŠ‚ç‚¹æ‰“æ ‡ç­¾ï¼Œåˆ†åˆ«æ˜¯ï¼š&lt;code&gt;topology.kubernetes.io/zone=australia-central-1&lt;/code&gt;, &lt;code&gt;topology.kubernetes.io/zone=us-east-1&lt;/code&gt; ä»¥åŠ &lt;code&gt;topology.kubernetes.io/zone=europe-central-1&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kubectl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;label&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;nodes&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;node1&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;topology.kubernetes.io/zone=australia-central-1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kubectl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;label&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;nodes&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;node2&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;topology.kubernetes.io/zone=us-east-1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kubectl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;label&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;nodes&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;node3&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;topology.kubernetes.io/zone=europe-central-1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;ç¼–å†™èµ„æºå®šä¹‰æ–‡ä»¶ï¼Œä½¿ç”¨ podAntiAffinity è®©ä¸‰ä¸ª Pod æ ¹æ®åœ°åŒºå·®å¼‚éƒ¨ç½²åœ¨ä¸åŒçš„èŠ‚ç‚¹ä¸Š&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;podAntiAffinity&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;requiredDuringSchedulingIgnoredDuringExecution&lt;/span&gt;&lt;span&gt;:  &lt;/span&gt;&lt;span&gt;# ç¡¬åäº²å’Œæ€§&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;labelSelector&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;matchExpressions&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;          &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;key&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;operator&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;In&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;values&lt;/span&gt;&lt;span&gt;: [&lt;/span&gt;&lt;span&gt;my-app&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;topologyKey&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;topology.kubernetes.io/zone&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;# æŒ‰å¯ç”¨åŒºåˆ†æ•£&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;æ‹“æ‰‘åŸŸçš„èŒƒå›´&lt;a href=&quot;#æ‹“æ‰‘åŸŸçš„èŒƒå›´&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Kubernetes æ ‡ç­¾åˆ¤å®šèŠ‚ç‚¹æ˜¯å¦åœ¨åŒä¸€ä¸ªæ‹“æ‰‘åŸŸã€‚ä¾‹å¦‚ï¼ŒèŠ‚ç‚¹ 1 å’ŒèŠ‚ç‚¹ 2 éƒ½æ‹¥æœ‰æ ‡ç­¾ &lt;code&gt;topology.kubernetes.io/performance=high&lt;/code&gt;ï¼Œå› æ­¤è¿™ä¸¤ä¸ªèŠ‚ç‚¹è¢«è§†ä¸ºå¤„åœ¨åŒä¸€ä¸ªæ‹“æ‰‘åŸŸï¼Œå½“ä½¿ç”¨åäº²å’Œæ€§è§„åˆ™ä»¥ &lt;code&gt;topology.kubernetes.io/performance=high&lt;/code&gt; æ ‡ç­¾ä½œä¸ºæ‹“æ‰‘åŸŸçš„åˆ¤å®šè§„åˆ™æ—¶ï¼Œåªæœ‰ä¸€ä¸ª Pod ä¼šè¢«éƒ¨ç½²åˆ°è¿™ä¸¤ä¸ªèŠ‚ç‚¹ä¸­çš„ä¸€ä¸ªä¸Šã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;ä¸ºä»€ä¹ˆæ¨èä½¿ç”¨ topology.kubernetes.io å‰ç¼€ï¼Ÿ&lt;a href=&quot;#ä¸ºä»€ä¹ˆæ¨èä½¿ç”¨-topologykubernetesio-å‰ç¼€&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;åœ¨ Kubernetes ä¸­ï¼Œ&lt;code&gt;topology.kubernetes.io&lt;/code&gt; å‰ç¼€å¹¶éä¸¥æ ¼å¿…éœ€ï¼Œä½†å®ƒæ˜¯å®˜æ–¹æ¨èçš„æ ‡ç­¾å‘½åè§„èŒƒï¼Œå°¤å…¶æ˜¯åœ¨æ¶‰åŠæ‹“æ‰‘æ„ŸçŸ¥è°ƒåº¦ï¼ˆå¦‚ Pod äº²å’Œæ€§ã€åäº²å’Œæ€§ï¼‰æ—¶ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;æƒ…æ™¯&lt;a href=&quot;#æƒ…æ™¯&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;æœ‰ä¸€ä¸ªmysql podå’Œä¸€ä¸ª web podï¼Œå¦‚ä½•ç¡®ä¿mysql æ°¸è¿œä¸web podå¤„åœ¨åŒä¸€èŠ‚ç‚¹ä¸Š&lt;/p&gt;&lt;ol&gt;
&lt;li&gt;éƒ¨ç½² MySQL Pod&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Pod&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;mysql&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;labels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;mysql&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;# ç”¨äº Web Pod çš„äº²å’Œæ€§åŒ¹é…&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;containers&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;mysql&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;image&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;mysql:5.7&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;env&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;MYSQL_ROOT_PASSWORD&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;password&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;éƒ¨ç½² Web Pod&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Pod&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;affinity&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;podAffinity&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;requiredDuringSchedulingIgnoredDuringExecution&lt;/span&gt;&lt;span&gt;:  &lt;/span&gt;&lt;span&gt;# ç¡¬äº²å’Œæ€§&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;labelSelector&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;matchExpressions&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;          &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;key&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;operator&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;In&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;values&lt;/span&gt;&lt;span&gt;: [&lt;/span&gt;&lt;span&gt;mysql&lt;/span&gt;&lt;span&gt;]  &lt;/span&gt;&lt;span&gt;# åŒ¹é… MySQL Pod çš„æ ‡ç­¾&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;topologyKey&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;kubernetes.io/hostname&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;# å¿…é¡»åœ¨åŒä¸€èŠ‚ç‚¹&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;containers&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;image&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;Operator&lt;a href=&quot;#operator&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;








































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Operator&lt;/th&gt;&lt;th&gt;åŠŸèƒ½&lt;/th&gt;&lt;th&gt;æ˜¯å¦éœ€è¦ values&lt;/th&gt;&lt;th&gt;ç¤ºä¾‹&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;In&lt;/code&gt;&lt;/td&gt;&lt;td&gt;æ ‡ç­¾å€¼åœ¨åˆ—è¡¨ä¸­&lt;/td&gt;&lt;td&gt;æ˜¯ï¼ˆè‡³å°‘ä¸€ä¸ªå€¼ï¼‰&lt;/td&gt;&lt;td&gt;é€‰æ‹© &lt;code&gt;app=web&lt;/code&gt; æˆ– &lt;code&gt;app=api&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;NotIn&lt;/code&gt;&lt;/td&gt;&lt;td&gt;æ ‡ç­¾å€¼ä¸åœ¨åˆ—è¡¨ä¸­&lt;/td&gt;&lt;td&gt;æ˜¯&lt;/td&gt;&lt;td&gt;æ’é™¤ &lt;code&gt;env=test&lt;/code&gt; æˆ– &lt;code&gt;env=dev&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;Exists&lt;/code&gt;&lt;/td&gt;&lt;td&gt;æ ‡ç­¾é”®å­˜åœ¨ï¼ˆä¸æ£€æŸ¥å€¼ï¼‰&lt;/td&gt;&lt;td&gt;å¦&lt;/td&gt;&lt;td&gt;é€‰æ‹©æ‰€æœ‰ GPU èŠ‚ç‚¹&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;DoesNotExists&lt;/code&gt;&lt;/td&gt;&lt;td&gt;æ ‡ç­¾é”®ä¸å­˜åœ¨&lt;/td&gt;&lt;td&gt;å¦&lt;/td&gt;&lt;td&gt;æ’é™¤ç»´æŠ¤ä¸­çš„èŠ‚ç‚¹&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;Gt&lt;/code&gt;/&lt;code&gt;Lt&lt;/code&gt;&lt;/td&gt;&lt;td&gt;æ ‡ç­¾å€¼å¤§äº/å°äºæŒ‡å®šæ•°å€¼&lt;/td&gt;&lt;td&gt;æ˜¯ï¼ˆä»…ä¸€ä¸ªæ•°å€¼å­—ç¬¦ä¸²ï¼‰&lt;/td&gt;&lt;td&gt;é€‰æ‹©é«˜ä¼˜å…ˆçº§ï¼ˆ&lt;code&gt;priority&amp;gt;50&lt;/code&gt;ï¼‰&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;Pod æ±¡ç‚¹å’Œå®¹å¿&lt;a href=&quot;#pod-æ±¡ç‚¹å’Œå®¹å¿&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;section&gt;&lt;h2&gt;ä»€ä¹ˆæ˜¯æ±¡ç‚¹å’Œå®¹å¿&lt;a href=&quot;#ä»€ä¹ˆæ˜¯æ±¡ç‚¹å’Œå®¹å¿&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;åœ¨ kubernetes ä¸­ï¼ŒPod æ±¡ç‚¹ (Taint)æ˜¯ä¸€ä¸ªæ ‡è®°ï¼Œè¡¨ç¤ºä¸€ä¸ª Node å…·æœ‰ä¸€äº›ç‰¹æ®Šçš„æˆ–è€…ä¸å¯æ¥å—çš„ç‰¹å¾ï¼Œä¾‹å¦‚æŸäº›åŸºç¡€è®¾æ–½æ•…éšœæˆ–è€…ä¸€äº›ä¸å…è®¸éƒ¨ç½²çš„èµ„æºã€‚Pod å®¹å¿ (Toleration) æ˜¯æŒ‡ä¸€ä¸ª Pod åœ¨è°ƒåº¦æ—¶å¯ä»¥æ¥å— Node ä¸Šå­˜åœ¨çš„ä¸€äº›æ±¡ç‚¹ï¼Œä»è€Œå°†å…¶è°ƒåº¦åˆ°è¯¥èŠ‚ç‚¹ä¸Šè¿è¡Œã€‚&lt;/p&gt;&lt;p&gt;å¸¸è§åœºæ™¯ï¼š&lt;/p&gt;&lt;ol&gt;
&lt;li&gt;èŠ‚ç‚¹ç»´æŠ¤ï¼šåœ¨èŠ‚ç‚¹éœ€è¦è¿›è¡Œç»´æŠ¤æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ±¡ç‚¹çš„æ–¹å¼å°†èŠ‚ç‚¹æ ‡è®°ä¸ºä¸å¯è°ƒåº¦çŠ¶æ€ï¼Œè¿™æ ·æ–°çš„ Pod å°±ä¸ä¼šè¢«è°ƒåº¦åˆ°è¯¥èŠ‚ç‚¹ä¸Šï¼›åŒæ—¶ï¼Œæœ‰æ±¡ç‚¹çš„èŠ‚ç‚¹å¯ä»¥ç»§ç»­è¿è¡Œå·²åœ¨è¿è¡ŒçŠ¶æ€çš„ Podã€‚&lt;/li&gt;
&lt;li&gt;Pod éœ€è¦ç‰¹å®šèµ„æºï¼šæ¯”å¦‚æŸäº›éœ€è¦ä½¿ç”¨ GPU çš„åº”ç”¨ï¼Œä½¿ç”¨æ±¡ç‚¹æ ‡è®°æ²¡æœ‰ GPU çš„èŠ‚ç‚¹ï¼Œé˜²æ­¢ Pod è¢«è°ƒåº¦åˆ°è¿™äº›ä¸æ»¡è¶³æ¡ä»¶çš„èŠ‚ç‚¹ä¸Šã€‚&lt;/li&gt;
&lt;li&gt;å®‰å…¨é£é™©ï¼šå½“éƒ¨åˆ†èŠ‚ç‚¹é¢ä¸´å¤–éƒ¨å®‰å…¨å¨èƒæ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ±¡ç‚¹æ ‡è®°è¿™äº›èŠ‚ç‚¹ï¼Œé˜²æ­¢ Pod éƒ¨ç½²åˆ°è¿™äº›æœ‰éšæ‚£çš„èŠ‚ç‚¹ä¸Šã€‚&lt;/li&gt;
&lt;li&gt;èµ„æºåˆ†é…ï¼šå½“æŸä¸ªèŠ‚ç‚¹å¯ç”¨èµ„æºä¸è¶³æ—¶ï¼Œä½¿ç”¨æ±¡ç‚¹æ ‡è®°èŠ‚ç‚¹é˜²æ­¢ Pod è¢«è°ƒåº¦åˆ°è¿™äº›èŠ‚ç‚¹ä¸Šï¼›åŒæ—¶ï¼Œè¿˜å¯ä»¥ä½¿ç”¨å®¹å¿æ¥å£°æ˜æŸäº›ç‰¹å®šçš„ Pod å¯ä»¥è¢«è°ƒåº¦åˆ°è¿™äº›èŠ‚ç‚¹ä¸Šã€‚&lt;/li&gt;
&lt;/ol&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;ä½¿ç”¨æ–¹æ³•&lt;a href=&quot;#ä½¿ç”¨æ–¹æ³•&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;æ±¡ç‚¹&lt;a href=&quot;#æ±¡ç‚¹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;code&gt;NoSchedule&lt;/code&gt;ï¼šä»…å½±å“è°ƒåº¦è¿‡ç¨‹ï¼Œå¦‚æœæ–°éƒ¨ç½²çš„ Pod èƒ½å¤Ÿå®¹å¿æ­¤æ±¡ç‚¹ï¼Œä¹Ÿå¯ä»¥éƒ¨ç½²åˆ°æ­¤èŠ‚ç‚¹ä¸Šï¼›ä¸å½±å“å·²å­˜åœ¨çš„ Podã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;PreferNoSchedule&lt;/code&gt;ï¼šä»…å½“æ²¡æœ‰å…¶ä»–å¯ç”¨èŠ‚ç‚¹æ—¶ï¼ŒPod æ‰ä¼šè¢«è°ƒåº¦åˆ°æ­¤èŠ‚ç‚¹ä¸Šã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NoExecute&lt;/code&gt;ï¼šæ—¢å½±å“è°ƒåº¦è¿‡ç¨‹ï¼Œä¹Ÿå½±å“ç°å­˜çš„ Podï¼Œç°å­˜çš„ä¸èƒ½å®¹å¿æ­¤æ±¡ç‚¹çš„ Pod ä¼šè¢«å…¨éƒ¨é©±é€ã€‚&lt;/li&gt;
&lt;/ol&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;å®¹å¿&lt;a href=&quot;#å®¹å¿&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;







































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å­—æ®µåç§°&lt;/th&gt;&lt;th&gt;å€¼ç±»å‹&lt;/th&gt;&lt;th&gt;è¯´æ˜&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;toleration&lt;/code&gt;&lt;/td&gt;&lt;td&gt;&amp;lt;[]object&amp;gt;&lt;/td&gt;&lt;td&gt;æ±¡ç‚¹å®¹å¿&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;tolerations.effect&lt;/code&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;è¦åŒ¹é…çš„æ±¡ç‚¹æ•ˆæœï¼Œä¸ºç©ºæ—¶åŒ¹é…æ‰€æœ‰ï¼Œå¯æŒ‡å®šçš„å€¼ä¸º &lt;code&gt;NoSchedule&lt;/code&gt;, &lt;code&gt;PreferNoSchedule&lt;/code&gt;, &lt;code&gt;NoExecute&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;tolerations.key&lt;/code&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;åŒ¹é…æ±¡ç‚¹çš„ keyï¼Œkey è‹¥ä¸ºç©ºåˆ™è¿ç®—ç¬¦å¿…é¡»ä¸º Existsï¼Œè¡¨ç¤ºåŒ¹é…æ‰€æœ‰çš„å€¼å’Œé”®&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;tolerations.operator&lt;/code&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;è¡¨ç¤ºé”®ä¸å€¼çš„å…³ç³»ï¼Œ&lt;code&gt;Exists&lt;/code&gt; æ— éœ€æŒ‡å®š valueï¼Œ&lt;code&gt;Equal &lt;/code&gt;æ±¡ç‚¹å¿…é¡»å’Œ value ç›¸ç­‰æ‰èƒ½åŒ¹é…&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;tolerations.tolerationSeconds&lt;/code&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;è¡¨ç¤ºå®¹å¿çš„æ—¶é—´æ®µ&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;tolerations.values&lt;/code&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;ä¸å®¹å¿åº¦åŒ¹é…çš„æ±¡ç‚¹å€¼&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;ä½¿ç”¨&lt;a href=&quot;#ä½¿ç”¨&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;ä¸ºèŠ‚ç‚¹æ‰“ä¸Šæ±¡ç‚¹&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kubectl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;taint&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;nodes&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;k8s-node-112&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;type=production:NoSchedule&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;æ­¤æ—¶å†åº”ç”¨èµ„æºæ¸…å•æ–‡ä»¶ï¼Œå¦‚æœæ²¡æœ‰å¯ç”¨çš„èŠ‚ç‚¹ï¼ŒPod çŠ¶æ€ä¼šå˜ä¸º &lt;code&gt;Pending&lt;/code&gt;ï¼ŒåŸå› æ˜¯ &lt;code&gt;FailedShceduling&lt;/code&gt;&lt;/p&gt;&lt;ol&gt;
&lt;li&gt;åˆ é™¤æ±¡ç‚¹&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kubectl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;taint&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;nodes&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;k8s-node-112&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;type=production:NoSchedule-&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;åˆ›å»ºä¸€ä¸ª Podï¼Œå¯ä»¥å®¹å¿ &lt;code&gt;type=production:NoSchedule&lt;/code&gt; æ±¡ç‚¹&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Pod&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;namespace&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;default&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;labels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;containers&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;image&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx:latest&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;tolerations&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;key&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;type&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;operator&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;Equal&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;production&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;effect&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;NoSchedule&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;æ‹“æ‰‘åˆ†å¸ƒçº¦æŸ&lt;a href=&quot;#æ‹“æ‰‘åˆ†å¸ƒçº¦æŸ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;æ‹“æ‰‘åˆ†å¸ƒçº¦æŸï¼ˆTopology Spread Constraintsï¼‰å¯ä»¥ç”¨æ¥æ§åˆ¶ &lt;a href=&quot;https://kubernetes.io/zh-cn/docs/concepts/workloads/pods/&quot;&gt;Pod&lt;/a&gt; åœ¨é›†ç¾¤å†…æ•…éšœåŸŸä¹‹é—´çš„åˆ†å¸ƒï¼Œ ä¾‹å¦‚åŒºåŸŸï¼ˆRegionï¼‰ã€å¯ç”¨åŒºï¼ˆZoneï¼‰ã€èŠ‚ç‚¹å’Œå…¶ä»–ç”¨æˆ·è‡ªå®šä¹‰æ‹“æ‰‘åŸŸã€‚ è¿™æ ·åšæœ‰åŠ©äºå®ç°é«˜å¯ç”¨å¹¶æå‡èµ„æºåˆ©ç”¨ç‡ã€‚&lt;/p&gt;&lt;section&gt;&lt;h2&gt;ç¤ºä¾‹&lt;a href=&quot;#ç¤ºä¾‹-1&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Pod&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;example-pod&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;# é…ç½®ä¸€ä¸ªæ‹“æ‰‘åˆ†å¸ƒçº¦æŸ&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;topologySpreadConstraints&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;maxSkew&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&amp;lt;integer&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;minDomains&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&amp;lt;integer&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;# å¯é€‰&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;topologyKey&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&amp;lt;string&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;whenUnsatisfiable&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&amp;lt;string&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;labelSelector&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&amp;lt;object&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;å­—æ®µ&lt;a href=&quot;#å­—æ®µ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;code&gt;maxSkew&lt;/code&gt;ï¼šå®šä¹‰äº†å…è®¸çš„ Pod æ•°é‡åœ¨ä¸åŒæ‹“æ‰‘åŸŸä¹‹é—´çš„æœ€å¤§å·®å¼‚ï¼Œæ˜¯æ§åˆ¶åˆ†å¸ƒå‡åŒ€æ€§çš„æ ¸å¿ƒå‚æ•°ã€‚è¯¥æ•°å€¼è¡¨ç¤ºè¡¨ç¤ºåœ¨ä»»ä½•ä¸¤ä¸ªæ‹“æ‰‘åŸŸä¹‹é—´ï¼ŒPod æ•°é‡çš„æœ€å¤§å…è®¸å·®å€¼ï¼Œå€¼è¶Šå°ï¼Œåˆ†å¸ƒè¶Šå‡åŒ€ï¼›å€¼è¶Šå¤§ï¼Œå…è®¸çš„ä¸å‡è¡¡ç¨‹åº¦è¶Šé«˜ï¼Œè®¾ç½®ä¸º 1 è¡¨ç¤ºè¿½æ±‚å®Œå…¨å‡åŒ€åˆ†å¸ƒã€‚ä¾‹å¦‚ï¼Œå¦‚æœæœ‰ 3 ä¸ª zone å’Œ 5 ä¸ª Podï¼Œå½“ maxSkew ä¸º 1 æ—¶ï¼Œå¯èƒ½çš„åˆ†å¸ƒæ˜¯ 2-2-1ï¼Œå½“ maxSkew ä¸º 2 æ—¶ï¼Œå¯èƒ½çš„åˆ†å¸ƒæ˜¯ 3-1-1ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;minDomains&lt;/code&gt;ï¼šå®šä¹‰äº†è°ƒåº¦æ—¶åº”è€ƒè™‘çš„æœ€å°æ‹“æ‰‘åŸŸæ•°é‡ï¼Œç”¨äºå¤„ç†é›†ç¾¤åŠ¨æ€å˜åŒ–æ—¶çš„è°ƒåº¦è¡Œä¸ºï¼Œåªæœ‰æ»¡è¶³æŒ‡å®šæ•°é‡çš„æ‹“æ‰‘åŸŸå¯ç”¨æ—¶ï¼Œæ‰ä¼šè¿›è¡Œè°ƒåº¦ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;whenUnsatisfiable&lt;/code&gt;ï¼šå®šä¹‰äº†å½“è°ƒåº¦å™¨æ— æ³•æ»¡è¶³åˆ†å¸ƒçº¦æŸæ—¶åº”é‡‡å–çš„è¡Œä¸ºï¼Œæœ‰ä¸¤ä¸ªå¯é€‰å€¼
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;DoNotSchedule&lt;/code&gt; - é»˜è®¤å€¼ï¼Œä¸¥æ ¼æ¨¡å¼ï¼Œä¸æ»¡è¶³æ¡ä»¶åˆ™ä¸è°ƒåº¦&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ScheduleAnyway&lt;/code&gt; - å®½æ¾æ¨¡å¼ï¼Œå°½é‡æ»¡è¶³ä½†å…è®¸ä¸å®Œç¾è°ƒåº¦&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;matchLabels&lt;/code&gt;ï¼šå®šä¹‰äº†è®¡ç®—åŸºå‡†ï¼Œæ ¹æ® pod æ ‡ç­¾æ¥è®¡ç®—æŸä¸ªæ ‡ç­¾çš„ pod æ˜¯å¦éœ€è¦è¢«è®¡ç®—åˆ°æ‹“æ‰‘åŸŸ Pod åˆ†é…ä¸­ï¼Œä¾‹å¦‚ï¼š&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;apps/v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Deployment&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web-server&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;replicas&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;10&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;selector&lt;/span&gt;&lt;span&gt;:           &lt;/span&gt;&lt;span&gt;# å¿…é¡»æ·»åŠ selectoråŒ¹é…templateçš„labels&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;matchLabels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web-server&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;template&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;labels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web-server&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;version&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;dev&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;# é…ç½®ä¸€ä¸ªæ‹“æ‰‘åˆ†å¸ƒçº¦æŸ&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;topologySpreadConstraints&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;maxSkew&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;minDomains&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;5&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;topologyKey&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;topology.kubernetes.io/zone&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;whenUnsatisfiable&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;DoNotSchedule&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;labelSelector&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;matchExpressions&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;          &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;key&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;operator&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;In&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;values&lt;/span&gt;&lt;span&gt;: [&lt;/span&gt;&lt;span&gt;web-server&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;test-web-server&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;27&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;containers&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;28&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web-server&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;29&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;image&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx:latest&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;åœ¨è¿™ä¸ªé…ç½®ä¸­ï¼Œ10 ä¸ª Pod å‰¯æœ¬å°†è¢«éƒ¨ç½²åˆ°è‡³å°‘ 5 ä¸ªæ‹“æ‰‘åŸŸä¸Šï¼Œä½†æ˜¯&lt;code&gt;labelSelector&lt;/code&gt; ä¸­æŒ‡å®šäº†å°†ä¸¤ä¸ªæ ‡ç­¾å‡å¦‚åˆ°è®¡ç®—åŸºå‡†ä¸­ï¼Œè¯¥é…ç½®å£°æ˜äº† Pod åœ¨ä¸åŒåŸŸä¸­çš„æœ€å¤§å·®å€¼ä¸º 1ï¼Œå‡å¦‚åœ¨å¯ç”¨çš„æ‹“æ‰‘åŸŸä¸­æœ‰ 1 ä¸ªå·²å­˜åœ¨çš„ï¼Œæ ‡ç­¾ä¸º &lt;code&gt;app: test-web-server&lt;/code&gt;çš„ Podï¼Œåˆ™æœ€ç»ˆ Scheduler éœ€è¦è®¡ç®—å¦‚ä½•åœ¨ 5 ä¸ªåŸŸä¸­ä¿æŒ 11 ä¸ª Pod å‡åŒ€åˆ†å¸ƒï¼Œä¸”ä»»æ„ä¸¤ä¸ªåŸŸä¸­ Pod çš„æœ€å¤§å·®å€¼å°äºç­‰äº 1ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;Pod ä¼˜å…ˆçº§å’ŒæŠ¢å å¼è°ƒåº¦&lt;a href=&quot;#pod-ä¼˜å…ˆçº§å’ŒæŠ¢å å¼è°ƒåº¦&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;Pod ä¼˜å…ˆçº§æ˜¯ä¸€ä¸ªæ•´æ•°å€¼ï¼Œä»£è¡¨è¯¥ Pod çš„ç›¸å¯¹é‡è¦æ€§ã€‚Kubernetes ä½¿ç”¨å®ƒæ¥å†³å®šåœ¨èµ„æºç´§å¼ æ—¶å“ªä¸ª Pod æ›´åº”è¯¥è¢«ä¿ç•™æˆ–è¢«è°ƒåº¦ã€‚&lt;/p&gt;&lt;section&gt;&lt;h2&gt;Pod ä¼˜å…ˆçº§çš„ä½œç”¨&lt;a href=&quot;#pod-ä¼˜å…ˆçº§çš„ä½œç”¨&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;æŠ¢å &lt;a href=&quot;#æŠ¢å &quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;å½“æ²¡æœ‰è¶³å¤Ÿçš„èµ„æºè°ƒåº¦ä¸€ä¸ªé«˜ä¼˜å…ˆçº§ Pod æ—¶ï¼ŒKubernetes å¯ä»¥ä¸»åŠ¨æŠ¢å å¹¶é©±é€ä½ä¼˜å…ˆçº§çš„ Podï¼Œä»¥ä¸ºé«˜ä¼˜å…ˆçº§ Pod è…¾å‡ºèµ„æºã€‚&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;é«˜ä¼˜å…ˆçº§ Pod è¿›å…¥ Pending çŠ¶æ€ï¼Œç­‰å¾…èµ„æºã€‚&lt;/li&gt;
&lt;li&gt;è°ƒåº¦å™¨å°è¯•è°ƒåº¦ï¼Œä½†æ‰¾ä¸åˆ°èµ„æºå……è¶³çš„èŠ‚ç‚¹ã€‚&lt;/li&gt;
&lt;li&gt;è°ƒåº¦å™¨æŸ¥æ‰¾æ˜¯å¦å¯ä»¥é€šè¿‡æŠ¢å è¾ƒä½ä¼˜å…ˆçº§çš„ Podæ¥é‡Šæ”¾èµ„æºã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœå¯ä»¥ï¼š
&lt;ul&gt;
&lt;li&gt;æ ‡è®°è¢«æŠ¢å çš„ Pod ä¸º Terminating çŠ¶æ€ï¼›&lt;/li&gt;
&lt;li&gt;ä¸€æ®µæ—¶é—´åå¼ºåˆ¶åˆ é™¤ï¼ˆæœ‰ grace periodï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;é«˜ä¼˜å…ˆçº§ Pod è¢«æˆåŠŸè°ƒåº¦ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;è°ƒåº¦æ’åºï¼ˆä¼˜å…ˆè°ƒåº¦ï¼‰&lt;a href=&quot;#è°ƒåº¦æ’åºä¼˜å…ˆè°ƒåº¦&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;åœ¨å¤šä¸ª Pod ç­‰å¾…èµ„æºæ—¶ï¼Œå½“æœ‰è¶³å¤Ÿçš„å¯ç”¨èµ„æºå‡ºç°ï¼Œè°ƒåº¦å™¨ä¼šä¼˜å…ˆè°ƒåº¦ä¼˜å…ˆçº§æ›´é«˜çš„èµ„æº&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;è°ƒåº¦é€»è¾‘&lt;a href=&quot;#è°ƒåº¦é€»è¾‘&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;blockquote&gt;&lt;p&gt;æƒ…æ™¯ï¼š&lt;br /&gt;
å‡å¦‚å½“å‰æœ‰ä¸¤ä¸ª Pod æ­£åœ¨ç­‰å¾…èµ„æºï¼ŒPod 1 ä¼˜å…ˆçº§50ï¼Œéœ€è¦50Mçš„å¯åŠ¨å†…å­˜ï¼ŒPod 2ä¼˜å…ˆçº§100ï¼Œéœ€è¦100Mçš„å¯åŠ¨å†…å­˜ï¼Œä¸¤ä¸ªPodçš„æŠ¢å ç­–ç•¥éƒ½æ˜¯ Neverï¼Œæ­¤æ—¶å½“èŠ‚ç‚¹çªç„¶é‡Šæ”¾äº†ä¸€ä¸ª Podï¼Œæ‹¥æœ‰ 70M çš„ç©ºé—²å†…å­˜ï¼Œé‚£ä¹ˆè°ƒåº¦å™¨ä¼šå…ˆå°† Pod 1 è°ƒåº¦åˆ°èŠ‚ç‚¹ä¸Šï¼Œè¿˜æ˜¯ä¼šç»§ç»­ç­‰å¾…èµ„æºç›´åˆ°æœ‰ 100M å†…å­˜å¹¶è°ƒåº¦ Pod 2ï¼Ÿ&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;ç­”æ¡ˆæ˜¯ï¼šè°ƒåº¦å™¨ä¼šè°ƒåº¦ Pod 1ï¼Œä¸ä¼šç­‰å¾… Pod 2&lt;/p&gt;&lt;ol&gt;
&lt;li&gt;è°ƒåº¦å™¨ä¸ä¼šä¸ºäº†é«˜ä¼˜å…ˆçº§ Pod è€Œâ€œè·³è¿‡è°ƒåº¦ä½ä¼˜å…ˆçº§ Podâ€ï¼Œé™¤éè¯¥é«˜ä¼˜å…ˆçº§ Pod è¢«é…ç½®ä¸ºå¯ä»¥æŠ¢å ï¼ˆ&lt;code&gt;PreemptLowerPriority&lt;/code&gt;ï¼‰åˆ«äººã€‚&lt;/li&gt;
&lt;li&gt;è°ƒåº¦å™¨çš„è¡Œä¸ºé€»è¾‘å¤§è‡´æ˜¯è¿™æ ·çš„ï¼š
&lt;ol&gt;
&lt;li&gt;å…ˆæŒ‰ä¼˜å…ˆçº§æ’åº Pending Podsï¼ˆå€¼è¶Šé«˜è¶Šå…ˆè€ƒè™‘ï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;é€ä¸ªå°è¯•è°ƒåº¦ï¼›&lt;/li&gt;
&lt;li&gt;é‡åˆ°èµ„æºä¸å¤Ÿçš„ Pod â†’ è·³è¿‡ï¼Œç»§ç»­çœ‹ä¸‹ä¸€ä¸ªï¼›&lt;/li&gt;
&lt;li&gt;å¦‚æœæŸä¸ªä½ä¼˜å…ˆçº§ Pod èƒ½è°ƒåº¦ä¸Šï¼Œå°±ä¼šç«‹åˆ»è°ƒåº¦å®ƒï¼Œè€Œä¸æ˜¯â€œç­‰å¾…èµ„æºâ€ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;ä½¿ç”¨&lt;a href=&quot;#ä½¿ç”¨-1&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Pod ä¼˜å…ˆçº§ç”± &lt;code&gt;PriorityClass&lt;/code&gt; èµ„æºåˆ›å»ºï¼Œç„¶åèµ‹å€¼ç»™ Pod&lt;/p&gt;&lt;section&gt;&lt;h3&gt;å­—æ®µä»‹ç»&lt;a href=&quot;#å­—æ®µä»‹ç»&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;


































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å­—æ®µ&lt;/th&gt;&lt;th&gt;ç±»å‹&lt;/th&gt;&lt;th&gt;è¯´æ˜&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;apiVersion&lt;/td&gt;&lt;td&gt;string&lt;/td&gt;&lt;td&gt;&lt;code&gt;scheduling.k8s.io/v1&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;description&lt;/td&gt;&lt;td&gt;string&lt;/td&gt;&lt;td&gt;æè¿°ä¿¡æ¯&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;globalDefault&lt;/td&gt;&lt;td&gt;boolean&lt;/td&gt;&lt;td&gt;æ˜¯å¦å°†ä¼˜å…ˆçº§åº”ç”¨è‡³æ‰€æœ‰æœªæŒ‡å®š&lt;code&gt;PriorityClass&lt;/code&gt; çš„ Pod èµ„æº&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;preemptionPolicy&lt;/td&gt;&lt;td&gt;string&lt;/td&gt;&lt;td&gt;æŠ¢å ç­–ç•¥ï¼š&lt;code&gt;Never&lt;/code&gt; - ä»ä¸æŠ¢å ï¼›&lt;code&gt;PreemptLowerPriority&lt;/code&gt; - æŠ¢å è¾ƒä½ä¼˜å…ˆçº§&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;value&lt;/td&gt;&lt;td&gt;integer&lt;/td&gt;&lt;td&gt;ä¼˜å…ˆçº§ï¼Œæ•°å­—çº¦å¤§ï¼Œä¼˜å…ˆçº§è¶Šé«˜ï¼Œè¶…è¿‡ 1 äº¿çš„æ•°å­—è¢«ç³»ç»Ÿä¿ç•™ï¼Œç”¨äºæŒ‡æ´¾ç»™ç³»ç»Ÿç»„ä»¶ Pod&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;åˆ›å»ºä¼˜å…ˆçº§èµ„æº&lt;a href=&quot;#åˆ›å»ºä¼˜å…ˆçº§èµ„æº&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;---&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;scheduling.k8s.io/v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;PriorityClass&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;default-priority&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;globalDefault&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;# å°†æ‰€æœ‰Podçš„é»˜è®¤ä¼˜å…ˆçº§è®¾ç½®ä¸º0&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;description&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;This is the default priority class&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;---&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;---&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;scheduling.k8s.io/v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;PriorityClass&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;high-priority&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;100&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;globalDefault&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;false&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;# å£°æ˜ä¸€ä¸ªä¼˜å…ˆçº§ï¼Œå€¼ä¸º100ï¼Œè¯¥ä¼˜å…ˆçº§åªèƒ½åœ¨èµ„æºæ¸…å•æ–‡ä»¶ä¸­æ˜¾ç¤ºè°ƒç”¨&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;description&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;This is the high priority class&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;---&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;ä¸º Pod åº”ç”¨ä¼˜å…ˆçº§&lt;a href=&quot;#ä¸º-pod-åº”ç”¨ä¼˜å…ˆçº§&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Pod&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx-high-priority&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;priorityClassName&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;high-priority&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;preemptionPolicy&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;PreemptLowerPriority&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;# å£°æ˜æŠ¢å å¼è°ƒåº¦ï¼Œå…è®¸è¯¥PodæŠ¢å ä½ä¼˜å…ˆçº§Podçš„èµ„æº&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;containers&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;image&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx:latest&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;resources&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;requests&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;cpu&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;300m&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;memory&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;50Mi&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;</content:encoded></item><item><title>å­ç½‘æ©ç è®¡ç®—</title><link>https://white-festa.net/posts/%E5%AD%90%E7%BD%91%E6%8E%A9%E7%A0%81/</link><guid isPermaLink="true">https://white-festa.net/posts/%E5%AD%90%E7%BD%91%E6%8E%A9%E7%A0%81/</guid><description>å¦‚ä½•é€šè¿‡å­ç½‘æ©ç è®¡ç®—ä¸€ä¸ªIPåœ°å€çš„ç½‘ç»œä½ä»¥åŠè¿™ä¸ªç½‘ç»œæœ‰å¤šå°‘å¯ç”¨ä¸»æœºä½</description><pubDate>Tue, 05 Dec 2023 00:00:00 GMT</pubDate><content:encoded>&lt;section&gt;&lt;h2&gt;ä»€ä¹ˆæ˜¯å­ç½‘æ©ç &lt;a href=&quot;#ä»€ä¹ˆæ˜¯å­ç½‘æ©ç &quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;å­ç½‘æ©ç ï¼Œå³subnet maskï¼Œæ˜¯ä¸€ä¸ªç”¨æ¥æŒ‡æ˜ä¸€ä¸ªIPåœ°å€ä¸­å“ªäº›æ˜¯ç½‘ç»œåœ°å€ï¼Œå“ªäº›æ˜¯ä¸»æœºåœ°å€çš„ä½æ©ç ï¼Œä¸€ä¸ªå…¸å‹çš„å­ç½‘æ©ç å¦‚ä¸‹ï¼š255.255.255.0&lt;/p&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;ä½¿ç”¨å­ç½‘æ©ç è®¡ç®—IPçš„ä¸»æœº&lt;a href=&quot;#ä½¿ç”¨å­ç½‘æ©ç è®¡ç®—ipçš„ä¸»æœº&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;è®¡ç®—æ–¹æ³•åŸºäºäºŒè¿›åˆ¶ã€‚ä»¥æœ€å¸¸è§çš„å­ç½‘æ©ç 255.255.255.0ä¸ºä¾‹ï¼Œè¿™ä¸ªå­ç½‘æ©ç æ”¯æŒ254å°ä¸»æœºï¼Œè¿™æ˜¯å› ä¸ºå¦‚æœå°†è¿™ä¸ªå­ç½‘æ©ç è½¬æ¢ä¸ºäºŒè¿›åˆ¶ï¼Œç»“æœæ˜¯
&lt;code&gt;11111111.11111111.11111111.00000000&lt;/code&gt;
å…¶ä¸­äºŒè¿›åˆ¶æ•°1çš„éƒ¨åˆ†ä»£è¡¨è¿™æ˜¯å·²è¢«å ç”¨çš„ä½ï¼Œå³ç½‘ç»œä½ï¼Œ0çš„éƒ¨åˆ†ä»£è¡¨è¿™æ˜¯æœªè¢«å ç”¨çš„ä½ï¼Œå³ä¸»æœºä½ï¼Œå› æ­¤ä¸»æœºä½ä»00000000åˆ°11111111å°±æ˜¯åè¿›åˆ¶ä»0åˆ°255ï¼Œé™¤å»é¢„ç•™çš„0å’Œ255ç”¨äºè¡¨ç¤ºç½‘ç»œæœ¬èº«å’Œå¹¿æ’­ï¼Œè¿™ä¸ªç½‘æ®µæœ‰254ä¸ªå¯åˆ†é…çš„ä¸»æœºä½ã€‚
å†ä¸¾ä¸€ä¸ªä¾‹å­ï¼Œ255.255.255.192æ¢æˆäºŒè¿›åˆ¶å°±æ˜¯
&lt;code&gt;11111111.11111111.11111111.11000000&lt;/code&gt;
ä¸€å…±æœ‰6ä¸ªä½å¯ä»¥ç”¨æ¥åˆ†é…ä¸»æœºä½ï¼Œä»000000åˆ°111111å°±æ˜¯åè¿›åˆ¶ä»0åˆ°63ï¼Œä¸€å…±64ä½ï¼Œé™¤å»000000ç”¨æ¥æ ‡è¯†å­ç½‘æœ¬èº«å’Œ111111ç”¨ä½œå¹¿æ’­ï¼Œå› æ­¤ä¸€å…±æœ‰62ä¸ªå¯åˆ†é…çš„ä¸»æœºåœ°å€&lt;/p&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;æ©ç ä½(CIDR)&lt;a href=&quot;#æ©ç ä½cidr&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;æ©ç ä½æ˜¯è·Ÿåœ¨IPåœ°å€åé¢ç”¨æ¥æ ‡è¯†å­ç½‘æ©ç çš„æ•°å­—ï¼Œä¸€ä¸ªä¾‹å­å¦‚ä¸‹ï¼š192.168.0.1/24ã€‚
æ©ç ä½å®é™…ä¸Šå°±æ˜¯å­ç½‘æ©ç ä¸­1çš„æ•°é‡ï¼Œ24å°±æ˜¯
&lt;code&gt;11111111.11111111.11111111.00000000&lt;/code&gt;
ä¸€å…±24ä¸ª1ï¼Œæ¢æˆåè¿›åˆ¶å°±æ˜¯255.255.255.0ï¼Œå› æ­¤ä¹Ÿå¯ä»¥å¾—å‡ºï¼Œ24å°±æ˜¯è¡¨ç¤ºè¿™ä¸ªå­ç½‘æ©ç æœ‰24ä¸ªç½‘ç»œä½å’Œ8ä¸ªä¸»æœºä½ã€‚
åŒç†ï¼Œ/25å°±æ˜¯
&lt;code&gt;11111111.11111111.11111111.10000000&lt;/code&gt;
ä¹Ÿå°±æ˜¯255.255.255.128ï¼Œå†æ ¹æ®å­ç½‘æ©ç çš„è®¡ç®—æ–¹æ³•å°±å¯ä»¥è®¡ç®—å‡ºè¿™ä¸ªç½‘ç»œæœ‰å¤šå°‘å¯ç”¨çš„ä¸»æœºä½ã€‚&lt;/p&gt;&lt;section&gt;&lt;h4&gt;ç¬¬äºŒç§æ–¹æ³•&lt;a href=&quot;#ç¬¬äºŒç§æ–¹æ³•&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;å¦å¤–ä¸€ç§æ–¹æ³•æ›´ç®€å•ï¼Œå·²çŸ¥ç½‘ç»œä½æœ‰24ä¸ºï¼Œä¸»æœºä½æœ‰8ä½ï¼Œç”±äºåœ¨äºŒè¿›åˆ¶ä¸‹æ¯ä¸ªä¸»æœºä½æœ‰0å’Œ1ä¸¤ç§çŠ¶æ€ï¼Œå› æ­¤ä¸»æœºä½å…±æœ‰2çš„8æ¬¡æ–¹ä¸ªï¼Œä¹Ÿå°±æ˜¯256ä¸ªï¼Œé™¤å»ä¸»æœºä½å…¨0çš„åœ°å€ï¼ˆè¡¨ç¤ºå­ç½‘æœ¬èº«ï¼‰å’Œä¸»æœºä½å…¨1çš„åœ°å€ï¼ˆå¹¿æ’­åœ°å€ï¼‰ï¼Œè¯¥ç½‘ç»œå…±æœ‰254ä¸ªå¯åˆ†é…çš„ä¸»æœºä½ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;ä½¿ç”¨å­ç½‘æ©ç è®¡ç®—IPçš„ç½‘ç»œåœ°å€&lt;a href=&quot;#ä½¿ç”¨å­ç½‘æ©ç è®¡ç®—ipçš„ç½‘ç»œåœ°å€&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;è®¡ç®—ç½‘ç»œåœ°å€ä¸»è¦è¿è¥çš„æ˜¯IPåœ°å€çš„äºŒè¿›åˆ¶å’Œå­ç½‘æ©ç çš„äºŒè¿›åˆ¶çš„&lt;code&gt;æ¯ä¸€ä½&lt;/code&gt;äºŒè¿›åˆ¶æ•°è¿›è¡ŒANDè¿ç®—ï¼Œè¿™é‡Œä»¥è¿™ä¸ªIPä¸ºä¾‹ï¼š180.97.107.90/17
ANDè¿ç®—çš„æ–¹æ³•å¦‚ä¸‹ï¼š&lt;/p&gt;



















&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;AND&lt;/th&gt;&lt;th&gt;0&lt;/th&gt;&lt;th&gt;1&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;ä¹Ÿå°±æ˜¯åªè¯´æœ‰1 AND 1 = 1,å…¶ä»–éƒ½æ˜¯0ã€‚
é‚£ä¹ˆæ ¹æ®è¿™ä¸ªIPï¼š180.97.107.90/17ï¼Œæˆ‘ä»¬å¯ä»¥å¾—çŸ¥ï¼Œé¦–å…ˆå®ƒçš„æ©ç ä½æ˜¯17ï¼Œå› æ­¤ï¼Œå®ƒçš„å­ç½‘æ©ç æ˜¯
&lt;code&gt;11111111.11111111.10000000.00000000&lt;/code&gt;
å†å°†IPè½¬æ¢ä¸ºäºŒè¿›åˆ¶ï¼Œç»“æœæ˜¯ï¼š
&lt;code&gt;10110100.01100001.01101011.01011010&lt;/code&gt;
è¿›è¡ŒANDè¿ç®—ï¼š&lt;/p&gt;


































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Binary(IP)&lt;/th&gt;&lt;th&gt;Binary(mask)&lt;/th&gt;&lt;th&gt;AND result&lt;/th&gt;&lt;th&gt;Decimal(Network)&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;10110100&lt;/td&gt;&lt;td&gt;11111111&lt;/td&gt;&lt;td&gt;10110100&lt;/td&gt;&lt;td&gt;180&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;01100001&lt;/td&gt;&lt;td&gt;11111111&lt;/td&gt;&lt;td&gt;01100001&lt;/td&gt;&lt;td&gt;97&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;01101011&lt;/td&gt;&lt;td&gt;10000000&lt;/td&gt;&lt;td&gt;00000000&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;01011010&lt;/td&gt;&lt;td&gt;00000000&lt;/td&gt;&lt;td&gt;00000000&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;æ‰€ä»¥ï¼ŒIP 180.97.107.90/17çš„ç½‘ç»œåœ°å€ä¸º180.97.0.0ã€‚&lt;/p&gt;&lt;/section&gt;</content:encoded></item><item><title>Kuberneteså­¦ä¹ ç¬”è®°äºŒï¼šKubernetes Pods</title><link>https://white-festa.net/posts/kubernetes-tutorial/kubernetes-pod/</link><guid isPermaLink="true">https://white-festa.net/posts/kubernetes-tutorial/kubernetes-pod/</guid><description>Kubernetes Podæ¦‚å¿µï¼ŒSidecarã€Initå’ŒPauseå®¹å™¨çš„æ¦‚å¿µå’Œä½¿ç”¨ä»¥åŠPodçš„å‡ ç§çŠ¶æ€</description><pubDate>Sun, 22 Oct 2023 00:00:00 GMT</pubDate><content:encoded>&lt;section&gt;&lt;h1&gt;Pod çš„ç»„æˆ&lt;a href=&quot;#pod-çš„ç»„æˆ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;section&gt;&lt;h2&gt;ä¸»åº”ç”¨å®¹å™¨/ä¸šåŠ¡å®¹å™¨&lt;a href=&quot;#ä¸»åº”ç”¨å®¹å™¨ä¸šåŠ¡å®¹å™¨&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;è¿è¡Œåº”ç”¨ç¨‹åºçš„ä¸»è¦å®¹å™¨&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;è¾¹è½¦å®¹å™¨(Sidecar)&lt;a href=&quot;#è¾¹è½¦å®¹å™¨sidecar&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;ä¸ä¸»åº”ç”¨å®¹å™¨åœ¨åŒä¸€ä¸ª Pod ä¸­è¿è¡Œçš„è¾…åŠ©å®¹å™¨ã€‚ è¿™äº›å®¹å™¨é€šè¿‡æä¾›é¢å¤–çš„æœåŠ¡æˆ–åŠŸèƒ½ï¼ˆå¦‚æ—¥å¿—è®°å½•ã€ç›‘æ§ã€å®‰å…¨æ€§æˆ–æ•°æ®åŒæ­¥ï¼‰æ¥å¢å¼ºæˆ–æ‰©å±•ä¸»åº”ç”¨å®¹å™¨çš„åŠŸèƒ½ï¼Œ è€Œæ— éœ€ç›´æ¥ä¿®æ”¹ä¸»åº”ç”¨ä»£ç ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;Init å®¹å™¨&lt;a href=&quot;#init-å®¹å™¨&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Init å®¹å™¨æ˜¯ä¸€ç§ç‰¹æ®Šå®¹å™¨ï¼Œåœ¨ Pod å†…çš„åº”ç”¨å®¹å™¨å¯åŠ¨ä¹‹å‰è¿è¡Œã€‚Init å®¹å™¨å¯ä»¥åŒ…æ‹¬ä¸€äº›åº”ç”¨é•œåƒä¸­ä¸å­˜åœ¨çš„å®ç”¨å·¥å…·å’Œå®‰è£…è„šæœ¬ã€‚&lt;/p&gt;&lt;p&gt;åˆå§‹åŒ–å®¹å™¨å¯ä»¥æœ‰ 1 ä¸ªæˆ–å¤šä¸ªï¼Œå¤šä¸ªå®¹å™¨ä¾ç…§èµ„æºæ¸…å•æ–‡ä»¶ä¸­çš„å®šä¹‰ä¸²è¡Œæ‰§è¡Œã€‚&lt;/p&gt;&lt;p&gt;Init å®¹å™¨ä¸æ™®é€šçš„å®¹å™¨éå¸¸åƒï¼Œé™¤äº†å¦‚ä¸‹ä¸¤ç‚¹ï¼š&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;å®ƒä»¬æ€»æ˜¯è¿è¡Œåˆ°å®Œæˆã€‚&lt;/li&gt;
&lt;li&gt;æ¯ä¸ªéƒ½å¿…é¡»åœ¨ä¸‹ä¸€ä¸ªå¯åŠ¨ä¹‹å‰æˆåŠŸå®Œæˆã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;å¦‚æœ Pod çš„ Init å®¹å™¨å¤±è´¥ï¼Œkubelet ä¼šä¸æ–­åœ°é‡å¯è¯¥ Init å®¹å™¨ç›´åˆ°è¯¥å®¹å™¨æˆåŠŸä¸ºæ­¢ã€‚ ç„¶è€Œï¼Œå¦‚æœ Pod å¯¹åº”çš„ restartPolicy å€¼ä¸º â€œNeverâ€ï¼Œå¹¶ä¸” Pod çš„ Init å®¹å™¨å¤±è´¥ï¼Œ åˆ™ Kubernetes ä¼šå°†æ•´ä¸ª Pod çŠ¶æ€è®¾ç½®ä¸ºå¤±è´¥ã€‚&lt;/p&gt;&lt;section&gt;&lt;h3&gt;Init å®¹å™¨çš„ä½¿ç”¨åœºæ™¯&lt;a href=&quot;#init-å®¹å™¨çš„ä½¿ç”¨åœºæ™¯&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;æ–‡ä»¶ä¸‹è½½ï¼šä¸‹è½½éœ€è¦åœ¨ä¸»å®¹å™¨ä¸­ä½¿ç”¨çš„é…ç½®æ–‡ä»¶ç­‰&lt;/li&gt;
&lt;li&gt;æ•°æ®å¡«å……ï¼šåœ¨ä¸»å®¹å™¨å¯åŠ¨ä¹‹å‰å¡«å……æ•°æ®ï¼Œå¦‚æ•°æ®åº“åˆå§‹åŒ–&lt;/li&gt;
&lt;li&gt;ç½‘ç»œè®¾ç½®ï¼šå®Œæˆä¸€äº›å¿…è¦çš„ç½‘ç»œé…ç½®&lt;/li&gt;
&lt;li&gt;ç­‰å¾…ä¾èµ–é¡¹ï¼šç­‰å¾…å…¶ä»–æœåŠ¡æˆ–èµ„æºå‡†å¤‡å°±ç»ªï¼Œä»¥ä¾¿ä¸»å®¹å™¨å¯åŠ¨&lt;/li&gt;
&lt;li&gt;è¿è¡Œè„šæœ¬æˆ–å‘½ä»¤ï¼šåœ¨ä¸»å®¹å™¨å¯åŠ¨å‰æ‰§è¡Œåˆå§‹åŒ–è„šæœ¬æˆ–å‘½ä»¤&lt;/li&gt;
&lt;/ol&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;ä½¿ç”¨ Init å®¹å™¨&lt;a href=&quot;#ä½¿ç”¨-init-å®¹å™¨&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;å› ä¸º Init å®¹å™¨å…·æœ‰ä¸åº”ç”¨å®¹å™¨åˆ†ç¦»çš„å•ç‹¬é•œåƒï¼Œå…¶å¯åŠ¨ç›¸å…³ä»£ç å…·æœ‰å¦‚ä¸‹ä¼˜åŠ¿ï¼š&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;Init å®¹å™¨å¯ä»¥åŒ…å«ä¸€äº›å®‰è£…è¿‡ç¨‹ä¸­åº”ç”¨å®¹å™¨ä¸­ä¸å­˜åœ¨çš„å®ç”¨å·¥å…·æˆ–ä¸ªæ€§åŒ–ä»£ç ã€‚ ä¾‹å¦‚ï¼Œæ²¡æœ‰å¿…è¦ä»…ä¸ºäº†åœ¨å®‰è£…è¿‡ç¨‹ä¸­ä½¿ç”¨ç±»ä¼¼ sedã€awkã€python æˆ– dig è¿™æ ·çš„å·¥å…·è€Œå» FROM ä¸€ä¸ªé•œåƒæ¥ç”Ÿæˆä¸€ä¸ªæ–°çš„é•œåƒã€‚&lt;/li&gt;
&lt;li&gt;åº”ç”¨é•œåƒçš„åˆ›å»ºè€…å’Œéƒ¨ç½²è€…å¯ä»¥å„è‡ªç‹¬ç«‹å·¥ä½œï¼Œè€Œæ²¡æœ‰å¿…è¦è”åˆæ„å»ºä¸€ä¸ªå•ç‹¬çš„åº”ç”¨é•œåƒã€‚&lt;/li&gt;
&lt;li&gt;ä¸åŒä¸€ Pod ä¸­çš„å¤šä¸ªåº”ç”¨å®¹å™¨ç›¸æ¯”ï¼ŒInit å®¹å™¨èƒ½ä»¥ä¸åŒçš„æ–‡ä»¶ç³»ç»Ÿè§†å›¾è¿è¡Œã€‚å› æ­¤ï¼ŒInit å®¹å™¨å¯ä»¥è¢«èµ‹äºˆè®¿é—®åº”ç”¨å®¹å™¨ä¸èƒ½è®¿é—®çš„ Secret çš„æƒé™ã€‚&lt;/li&gt;
&lt;li&gt;ç”±äº Init å®¹å™¨å¿…é¡»åœ¨åº”ç”¨å®¹å™¨å¯åŠ¨ä¹‹å‰è¿è¡Œå®Œæˆï¼Œå› æ­¤ Init å®¹å™¨æä¾›äº†ä¸€ç§æœºåˆ¶æ¥é˜»å¡æˆ–å»¶è¿Ÿåº”ç”¨å®¹å™¨çš„å¯åŠ¨ï¼Œç›´åˆ°æ»¡è¶³äº†ä¸€ç»„å…ˆå†³æ¡ä»¶ã€‚ ä¸€æ—¦å‰ç½®æ¡ä»¶æ»¡è¶³ï¼ŒPod å†…çš„æ‰€æœ‰çš„åº”ç”¨å®¹å™¨ä¼šå¹¶è¡Œå¯åŠ¨ã€‚&lt;/li&gt;
&lt;li&gt;Init å®¹å™¨å¯ä»¥å®‰å…¨åœ°è¿è¡Œå®ç”¨ç¨‹åºæˆ–è‡ªå®šä¹‰ä»£ç ï¼Œè€Œåœ¨å…¶ä»–æ–¹å¼ä¸‹è¿è¡Œè¿™äº›å®ç”¨ç¨‹åºæˆ–è‡ªå®šä¹‰ä»£ç å¯èƒ½ä¼šé™ä½åº”ç”¨å®¹å™¨é•œåƒçš„å®‰å…¨æ€§ã€‚ é€šè¿‡å°†ä¸å¿…è¦çš„å·¥å…·åˆ†å¼€ï¼Œä½ å¯ä»¥é™åˆ¶åº”ç”¨å®¹å™¨é•œåƒçš„è¢«æ”»å‡»èŒƒå›´ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;å®æˆ˜&lt;a href=&quot;#å®æˆ˜&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;ç¡®ä¿ä»…å½“ harbor é•œåƒæ³¨å†Œè¡¨å¯ç”¨æ—¶æ‰å¯åŠ¨ä¸»å®¹å™¨ï¼Œå¦‚æœ harbor åœ¨ 5 åˆ†é’Ÿåä»ä¸å¯ç”¨ï¼Œè‡ªåŠ¨ç»ˆæ­¢ deployment&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;apps/v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Deployment&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;app-wait-for-harbor&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;replicas&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;5&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;selector&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;matchLabels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;wait-harbor&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;template&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;labels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;wait-harbor&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;initContainers&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;wait-for-harbor&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;image&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;curlimages/curl:7.88.1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;command&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;sh&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;-c&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;|&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;              &lt;/span&gt;&lt;/span&gt;&lt;span&gt;echo &quot;Waiting for Harbor to be available...&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;              &lt;/span&gt;&lt;/span&gt;&lt;span&gt;COUNT=0&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;              &lt;/span&gt;&lt;/span&gt;&lt;span&gt;while true; do&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;                &lt;/span&gt;&lt;/span&gt;&lt;span&gt;if curl -k -s --head &quot;$HARBOR_URL&quot; | grep &quot;200 OK&quot; &amp;gt; /dev/null; then&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;                  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;echo &quot;Harbor is available!&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;27&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;                  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;break&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;28&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;                &lt;/span&gt;&lt;/span&gt;&lt;span&gt;fi&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;29&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;                &lt;/span&gt;&lt;/span&gt;&lt;span&gt;COUNT=$((COUNT + 1))&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;30&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;                &lt;/span&gt;&lt;/span&gt;&lt;span&gt;echo &quot;Attempt $COUNT/$MAX_RETRIES failed. Waiting $RETRY_INTERVAL seconds...&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;31&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;                &lt;/span&gt;&lt;/span&gt;&lt;span&gt;if [ &quot;$COUNT&quot; -ge &quot;$MAX_RETRIES&quot; ]; then&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;32&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;                  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;echo &quot;Harbor not available after $MAX_RETRIES attempts. Exiting.&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;33&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;                  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;exit 1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;34&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;                &lt;/span&gt;&lt;/span&gt;&lt;span&gt;fi&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;35&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;                &lt;/span&gt;&lt;/span&gt;&lt;span&gt;sleep &quot;$RETRY_INTERVAL&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;36&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;              &lt;/span&gt;&lt;/span&gt;&lt;span&gt;done&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;37&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;env&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;38&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;HARBOR_URL&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;39&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;https://harbor.example.com&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;40&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;RETRY_INTERVAL&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;41&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;5&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;42&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;MAX_RETRIES&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;43&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;60&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;44&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;containers&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;45&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;main-app&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;46&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;image&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx:alpine&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;47&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;ports&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;48&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;containerPort&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;80&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;49&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;restartPolicy&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Always&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;ä»ç½‘ç»œä¸Šä¸‹è½½ html æ–‡ä»¶ï¼Œå¹¶å°†å…¶è®¾ç½®ä¸ºä¸»å®¹å™¨ nginx æœåŠ¡çš„é¦–é¡µæ–‡ä»¶&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;apps/v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Deployment&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;setup-nginx-homepage&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;replicas&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;5&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;selector&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;matchLabels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx-homepage&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;template&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;labels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx-homepage&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;initContainers&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;download-webpage&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;image&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;busybox:1.35.0&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;command&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;sh&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;-c&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;|&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;              &lt;/span&gt;&lt;/span&gt;&lt;span&gt;wget -O /web/index.html $WEB_URL || (echo &quot;Download failed&quot; &amp;amp;&amp;amp; exit 1)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;env&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;WEB_URL&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;https://example.com&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;volumeMounts&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;27&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;          &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;28&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;mountPath&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/web&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;29&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;containers&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;30&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;main-app&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;31&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;image&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nginx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;32&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;ports&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;33&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;containerPort&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;80&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;34&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;volumeMounts&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;35&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;          &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;36&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;mountPath&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/usr/share/nginx/html&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;37&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;volumes&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;38&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;39&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;emptyDir&lt;/span&gt;&lt;span&gt;: {}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;Pause å®¹å™¨&lt;a href=&quot;#pause-å®¹å™¨&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;åœ¨ Kubernetes ä¸­ï¼Œpause å®¹å™¨ æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å®¹å™¨ï¼Œå®ƒåœ¨æ¯ä¸ª Pod ä¸­éšå½¢å­˜åœ¨ï¼Œæ˜¯ Pod æ‰€æœ‰å…¶ä»–å®¹å™¨çš„â€çˆ¶å®¹å™¨â€ï¼ˆæˆ–ç§°ä¸ºâ€åŸºç¡€è®¾æ–½å®¹å™¨â€ï¼‰ã€‚å®ƒçš„ä½œç”¨æ˜¯ä¸º Pod æä¾›å…±äº«çš„ Linux å‘½åç©ºé—´ï¼Œæ˜¯ Kubernetes å®ç° Pod èµ„æºéš”ç¦»çš„æ ¸å¿ƒæœºåˆ¶ã€‚&lt;/p&gt;&lt;section&gt;&lt;h3&gt;pause å®¹å™¨çš„æ ¸å¿ƒä½œç”¨&lt;a href=&quot;#pause-å®¹å™¨çš„æ ¸å¿ƒä½œç”¨&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;æä¾›å…±äº«çš„å‘½åç©ºé—´
&lt;ul&gt;
&lt;li&gt;ç½‘ç»œå‘½åç©ºé—´ï¼šPod å†…æ‰€æœ‰å®¹å™¨å…±äº«åŒä¸€ä¸ª IP å’Œç«¯å£ç©ºé—´ï¼ˆé€šè¿‡ pause å®¹å™¨å®ç°ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;PID å‘½åç©ºé—´ï¼šå®¹å™¨é—´å¯ä»¥çœ‹åˆ°å½¼æ­¤çš„è¿›ç¨‹ï¼ˆé»˜è®¤å…³é—­ï¼Œéœ€é…ç½® shareProcessNamespace: trueï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;IPC å‘½åç©ºé—´ï¼šå…è®¸å®¹å™¨é€šè¿‡ System V IPC æˆ– POSIX æ¶ˆæ¯é˜Ÿåˆ—é€šä¿¡&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å……å½“â€PID 1â€è¿›ç¨‹ - pause å®¹å™¨æ˜¯ Pod å†…ç¬¬ä¸€ä¸ªå¯åŠ¨çš„è¿›ç¨‹ï¼ˆPID 1ï¼‰ï¼Œè´Ÿè´£å›æ”¶åƒµå°¸è¿›ç¨‹ï¼ˆé¿å…ä¸»å®¹å™¨è¿›ç¨‹æˆä¸º PID 1ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;ç»´æŒ Pod çš„ç”Ÿå‘½å‘¨æœŸ - å³ä½¿ Pod å†…æ‰€æœ‰ä¸šåŠ¡å®¹å™¨é€€å‡ºï¼Œpause å®¹å™¨ä»ä¼šè¿è¡Œï¼Œç›´åˆ° Pod è¢«åˆ é™¤ï¼Œç¡®ä¿ Kubernetes èƒ½æ­£ç¡®è·Ÿè¸ª Pod çŠ¶æ€ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;ä¸ºä»€ä¹ˆéœ€è¦ pause å®¹å™¨ï¼Ÿ&lt;a href=&quot;#ä¸ºä»€ä¹ˆéœ€è¦-pause-å®¹å™¨&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Linux ä¸­ï¼Œå‘½åç©ºé—´ï¼ˆnetwork/pid/ipc ç­‰ï¼‰éœ€è¦ç”±ä¸€ä¸ªè¿›ç¨‹æŒæœ‰ã€‚å¦‚æœç›´æ¥å¯åŠ¨ä¸šåŠ¡å®¹å™¨ï¼š&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;è‹¥ç¬¬ä¸€ä¸ªä¸šåŠ¡å®¹å™¨å´©æºƒï¼ŒPod çš„ç½‘ç»œ/IP ç­‰å‘½åç©ºé—´ä¼šéšä¹‹é”€æ¯ï¼Œå½±å“å…¶ä»–å®¹å™¨ã€‚&lt;/li&gt;
&lt;li&gt;ç¼ºä¹ç¨³å®šçš„çˆ¶è¿›ç¨‹ç®¡ç†åƒµå°¸è¿›ç¨‹ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;Pod èµ„æºé™åˆ¶&lt;a href=&quot;#pod-èµ„æºé™åˆ¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;section&gt;&lt;h2&gt;Requests å’Œ Limits&lt;a href=&quot;#requests-å’Œ-limits&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;Requests ç¡®ä¿ Pod æœ‰è¶³å¤Ÿèµ„æºæ¥å¯åŠ¨å’Œç»´æŒè¿è¡Œï¼ŒLimits ç¡®ä¿ Pod ä¸æ˜¯æ— é™åˆ¶çš„ä½¿ç”¨èµ„æºï¼›&lt;/li&gt;
&lt;li&gt;Limits å£°æ˜çš„èµ„æºå€¼å¯ä»¥å¤§äº Requests ä½†ä¸å¯ä»¥å°äºï¼›&lt;/li&gt;
&lt;li&gt;å¯ä»¥è®¾å®šçš„èµ„æºç±»å‹åŒ…æ‹¬ CPU ä¸å†…å­˜
&lt;ul&gt;
&lt;li&gt;CPU é…é¢è¾¾åˆ° Limits è®¾å®šçš„ä¸Šé™æ—¶ï¼ŒPod æ— æ³•è·å–æ›´å¤šçš„ CPU èµ„æºï¼Œä½† Pod æ‰”å¯ä»¥è¿è¡Œ&lt;/li&gt;
&lt;li&gt;å†…å­˜é…é¢è¾¾åˆ° Limits è®¾å®šçš„ä¸Šé™æ—¶ï¼ŒPod ä¸­çš„ container è¿›ç¨‹ä¼šè¢«å†…æ ¸ä»¥ OOM çš„åŸå› å¼ºåˆ¶ç»ˆæ­¢ï¼Œä¹‹å kubelet ä¼šé‡å¯æˆ–é‡æ–°åˆ›å»º Pod&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;ä½¿ç”¨æ–¹æ³•&lt;a href=&quot;#ä½¿ç”¨æ–¹æ³•&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;apps/v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Deployment&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;labels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;ecommerce&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;ecommerce-super-pets&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;replicas&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;3&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;selector&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;matchLabels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;ecommerce&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;template&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;labels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;ecommerce&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;containers&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;image&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;localhost:32000/node-web:3&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;ecommerce&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;ports&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;http&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;containerPort&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;8080&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;resources&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;requests&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;cpu&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;50m&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;memory&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;50Mi&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;27&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;limits&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;28&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;cpu&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;50m&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;29&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;memory&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;50Mi&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;å¸¸è§ Pod çŠ¶æ€&lt;a href=&quot;#å¸¸è§-pod-çŠ¶æ€&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;&lt;/p&gt;&lt;figure&gt;&lt;img src=&quot;https://cdn.nlark.com/yuque/0/2025/jpeg/56115187/1748753009575-e24751f7-2a82-437f-a4f4-9e27acd7065c.jpeg&quot; alt=&quot;&quot; /&gt;&lt;figcaption&gt;ç”»æ¿&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;Pod çš„ status å®šä¹‰åœ¨ PodStatus å¯¹è±¡ä¸­ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ª phase å­—æ®µï¼Œå®ƒç®€å•æè¿°äº† Pod åœ¨å…¶ç”Ÿå‘½å‘¨æœŸçš„é˜¶æ®µã€‚&lt;/p&gt;&lt;section&gt;&lt;h2&gt;ç¬¬ä¸€é˜¶æ®µ&lt;a href=&quot;#ç¬¬ä¸€é˜¶æ®µ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;code&gt;Pending&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;æ­£åœ¨åˆ›å»º Pod ä½†æ˜¯ Pod ä¸­çš„å®¹å™¨è¿˜æ²¡æœ‰è¢«å…¨éƒ¨åˆ›å»ºå®Œæˆï¼Œå¤„äºæ­¤çŠ¶æ€çš„ Pod åº”æ£€æŸ¥ Pod æ‰€ä¾èµ–çš„å­˜å‚¨æ˜¯å¦æœ‰æƒé™æŒ‚è½½ï¼Œè°ƒåº¦æ˜¯å¦æ­£å¸¸ç­‰ã€‚&lt;/p&gt;&lt;ol&gt;
&lt;li&gt;&lt;code&gt;Failed&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;Pod ä¸­çš„å…¨éƒ¨å®¹å™¨éƒ½å·²ç»ç»ˆæ­¢äº†ï¼Œå¹¶ä¸”è‡³å°‘ä¸€ä¸ªå®¹å™¨æ˜¯å¤±è´¥ç»ˆæ­¢ï¼Œå³ä»¥éé›¶çŠ¶æ€é€€å‡ºæˆ–è¢«ç³»ç»Ÿç»ˆæ­¢ã€‚&lt;/p&gt;&lt;ol&gt;
&lt;li&gt;&lt;code&gt;Unknown&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;Pod çŠ¶æ€çš„ä¾é  &lt;code&gt;ApiServer&lt;/code&gt; ä¸èŠ‚ç‚¹ä¸Šçš„ &lt;code&gt;kubelet&lt;/code&gt; é€šä¿¡è·å¾—ï¼Œå½“å‡ºç°æ­¤çŠ¶æ€æ—¶æ„å‘³ç€ &lt;code&gt;ApiServer&lt;/code&gt; ä¸èŠ‚ç‚¹ &lt;code&gt;kubelet&lt;/code&gt; æ— æ³•æ­£å¸¸é€šä¿¡ï¼Œé€šå¸¸æ˜¯ç”±äºèŠ‚ç‚¹æ•…éšœå¯¼è‡´çš„ã€‚&lt;/p&gt;&lt;ol&gt;
&lt;li&gt;&lt;code&gt;Error&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;Pod å¯åŠ¨è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯ï¼Œå¯èƒ½æ˜¯é•œåƒé—®é¢˜ã€‚&lt;/p&gt;&lt;ol&gt;
&lt;li&gt;&lt;code&gt;Succeeded&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;Pod ä¸­æ‰€æœ‰å®¹å™¨éƒ½å·²ç»ˆæ­¢ï¼Œä¸”ä¸ä¼šå†é‡å¯ï¼Œä¸å¤±è´¥ (Failed)çŠ¶æ€æƒ³æ³•&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;ç¬¬äºŒé˜¶æ®µ&lt;a href=&quot;#ç¬¬äºŒé˜¶æ®µ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;code&gt;Running&lt;/code&gt; - Pod æ­£åœ¨è¿è¡Œä¸­&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Unschedulable&lt;/code&gt; - Pod æ— æ³•è¢«è°ƒåº¦ï¼ŒScheduler æ— æ³•æ‰¾åˆ°ç¬¦åˆè°ƒåº¦æ¡ä»¶çš„èŠ‚ç‚¹&lt;/li&gt;
&lt;li&gt;&lt;code&gt;PodScheduled&lt;/code&gt; - Pod æ­£åœ¨è¢«è°ƒåº¦ä¸­ï¼Œæ­¤æ—¶ Shceduler è¿˜æ²¡æœ‰å†³å®š Pod æ‰€åˆ†é…çš„èŠ‚ç‚¹ï¼Œåœ¨ç­›é€‰å‡ºåˆé€‚èŠ‚ç‚¹åå°±ä¼šæ›´æ–° etcd æ•°æ®å¹¶å°† Pod åˆ†é…åˆ°è¯¥èŠ‚ç‚¹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Initialized&lt;/code&gt; - Pod ä¸­çš„åˆå§‹åŒ–å®¹å™¨ä»¥å®Œæˆè¿è¡Œ&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ImagePullBackOff&lt;/code&gt; - Pod æ‰€åœ¨çš„ node èŠ‚ç‚¹ä¸‹è½½é•œåƒå¤±è´¥&lt;/li&gt;
&lt;li&gt;&lt;code&gt;InvalidImageName&lt;/code&gt; - æ— æ³•è§£æé•œåƒåç§°&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ErrImageNeverPull&lt;/code&gt; - ç­–ç•¥ç¦æ­¢æ‹‰å–é•œåƒ&lt;/li&gt;
&lt;li&gt;&lt;code&gt;RegistryUnavailable&lt;/code&gt; - æ— æ³•è¿æ¥åˆ°é•œåƒæ³¨å†Œè¡¨&lt;/li&gt;
&lt;li&gt;&lt;code&gt;CreateContainerError&lt;/code&gt; - åˆ›å»ºå®¹å™¨å¤±è´¥&lt;/li&gt;
&lt;li&gt;&lt;code&gt;RunContainerError&lt;/code&gt; - å¯åŠ¨å®¹å™¨å¤±è´¥&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ContainerCreating&lt;/code&gt; - å®¹å™¨æ­£åœ¨åˆ›å»º&lt;/li&gt;
&lt;li&gt;&lt;code&gt;PodInitializing&lt;/code&gt; - Pod åˆå§‹åŒ–ä¸­&lt;/li&gt;
&lt;/ol&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;å…¶ä»–çŠ¶æ€&lt;a href=&quot;#å…¶ä»–çŠ¶æ€&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;code&gt;Evicted&lt;/code&gt; - å¤§å¤šæ•°æƒ…å†µæ˜¯å†…å­˜æˆ–å¯ç”¨ç¡¬ç›˜ç©ºé—´ä¸è¶³&lt;/li&gt;
&lt;li&gt;&lt;code&gt;CrashLoopBackOff&lt;/code&gt; - å®¹å™¨å¯åŠ¨äº†ï¼Œä½†åˆå› ä¸ºæŸäº›åŸå› å¼‚å¸¸ç»ˆæ­¢äº†ï¼ˆå¤šæ˜¯åº”ç”¨æœ¬èº«çš„é—®é¢˜ï¼‰&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Error&lt;/code&gt; - Pod å¯åŠ¨æ—¶å‘ç”Ÿé”™è¯¯&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Complete&lt;/code&gt; - å®Œæˆ&lt;/li&gt;
&lt;/ol&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;Pod é‡å¯ç­–ç•¥&lt;a href=&quot;#pod-é‡å¯ç­–ç•¥&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;section&gt;&lt;h2&gt;ç±»å‹&lt;a href=&quot;#ç±»å‹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;code&gt;Always&lt;/code&gt; - é»˜è®¤çš„é‡å¯ç­–ç•¥ï¼šå§‹ç»ˆé‡å¯ Pod&lt;/li&gt;
&lt;li&gt;&lt;code&gt;OnFailure&lt;/code&gt; - ä»…åœ¨å®¹å™¨å¤±è´¥æ—¶é‡å¯ Pod&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Never&lt;/code&gt; - ä¸é‡å¯ Pod&lt;/li&gt;
&lt;/ol&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;ç¤ºä¾‹&lt;a href=&quot;#ç¤ºä¾‹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;ä½¿ç”¨ &lt;code&gt;restartPolicy&lt;/code&gt; å­—æ®µå®šä¹‰é‡å¯ç­–ç•¥&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;apps/v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Deployment&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;labels&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;ecommerce&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;ecommerce-super-pets&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;replicas&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;3&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;template&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;restartPolicy&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Always&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;# OnFailure/Never&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;containers&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;image&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;localhost:32000/node-web:3&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;ecommerce&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;</content:encoded></item><item><title>Shellç³»ç»Ÿç›‘æ§è„šæœ¬</title><link>https://white-festa.net/posts/system_monitor/</link><guid isPermaLink="true">https://white-festa.net/posts/system_monitor/</guid><description>ä¸€ä¸ªç³»ç»Ÿç›‘æ§è„šæœ¬ï¼Œä¸»è¦ç›‘æ§äº†cpuã€å†…å­˜å’Œç£ç›˜ä½¿ç”¨ç‡ï¼Œå®¹å™¨å’ŒæœåŠ¡ç›‘æ§ï¼Œä½¿ç”¨jsonä½œä¸ºé…ç½®æ–‡ä»¶ï¼Œå¹¶åœ¨æ»¡è¶³è®¾å®šçš„æ¡ä»¶æ—¶å‘ç”¨æˆ·å‘é‚®ä»¶æŠ¥è­¦ã€‚</description><pubDate>Thu, 19 Oct 2023 00:00:00 GMT</pubDate><content:encoded>&lt;section&gt;&lt;h1&gt;ç›‘æ§è„šæœ¬&lt;a href=&quot;#ç›‘æ§è„šæœ¬&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;#!/bin/bash&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;EMAIL_CONF&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;LOGFILE&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;CONF&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ipAddress&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;$(&lt;/span&gt;&lt;/span&gt;&lt;span&gt;curl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-s&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;ifconfig.me&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;sendEmail&lt;/span&gt;&lt;span&gt;(){&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;local&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;userEmails&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;$(&lt;/span&gt;&lt;/span&gt;&lt;span&gt;cat&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;$EMAIL_CONF&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;jq&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-r&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;to_entries[] | .value.email&apos;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;local&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;issue&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;$1&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;local&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;title&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;$2&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;for&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;email&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;in&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;$userEmails&lt;/span&gt;&lt;span&gt;; &lt;/span&gt;&lt;span&gt;do&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;echo&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-e&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;æ—¶é—´: $(&lt;/span&gt;&lt;span&gt;date&lt;/span&gt;&lt;span&gt; +&quot;%Y-%m-%d %H:%M:%S&quot;)\nä¸»æœºIP: &lt;/span&gt;&lt;span&gt;&lt;span&gt;${&lt;/span&gt;&lt;span&gt;ipAddress&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span&gt;\né—®é¢˜: &lt;/span&gt;&lt;span&gt;$issue&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;mail&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-s&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$title&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$email&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;done&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;writeLog&lt;/span&gt;&lt;span&gt;(){&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;echo&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-e&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;$(&lt;/span&gt;&lt;span&gt;date&lt;/span&gt;&lt;span&gt; +&quot;%Y-%m-%d %H:%M:%S&quot;) - &lt;/span&gt;&lt;span&gt;$1&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt; &amp;gt;&amp;gt; &lt;/span&gt;&lt;span&gt;$LOGFILE&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;cpuUsage&lt;/span&gt;&lt;span&gt;(){&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;local&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;cpuIdle&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;$(&lt;/span&gt;&lt;/span&gt;&lt;span&gt;top&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-bn1&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;grep&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Cpu&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;sed&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;s/,/ /g&apos;&lt;/span&gt;&lt;span&gt;|&lt;/span&gt;&lt;span&gt;awk&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;{print $8}&apos;&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;cut&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-d.&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-f1&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;local&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;cpuUsed&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;$[100-&lt;/span&gt;&lt;/span&gt;&lt;span&gt;$cpuIdle&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;local&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;cpuLimit&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;$(&lt;/span&gt;&lt;/span&gt;&lt;span&gt;jq&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;.cpu.cpu_limit&apos;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;$CONF&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;#echo &quot;cpuLimit: $cpuLimit&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; [ &lt;/span&gt;&lt;span&gt;$cpuUsed&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-gt&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;$cpuLimit&lt;/span&gt;&lt;span&gt; ]; &lt;/span&gt;&lt;span&gt;then&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;sendEmail&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;CPUä½¿ç”¨ç‡è¿‡é«˜ - &lt;/span&gt;&lt;span&gt;&lt;span&gt;${&lt;/span&gt;&lt;span&gt;cpuUsed&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span&gt;%&quot;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;è­¦æŠ¥: CPUä½¿ç”¨ç‡è¿‡é«˜&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;writeLog&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;CPU usage too high&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;fi&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;27&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;28&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;memUsage&lt;/span&gt;&lt;span&gt;(){&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;29&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;local&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;memAvail&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;$(&lt;/span&gt;&lt;/span&gt;&lt;span&gt;free&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-h&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;sed&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-n&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;2p&apos;&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;awk&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;{print $NF}&apos;&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;sed&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;s/[^0-9.]//g&apos;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;30&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;local&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;memLimit&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;$(&lt;/span&gt;&lt;/span&gt;&lt;span&gt;jq&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;.memory.memory_limit&apos;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;$CONF&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;31&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;#echo &quot;memLimit: $memLimit&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;32&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; (( $(&lt;/span&gt;&lt;span&gt;echo&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$memAvail&lt;/span&gt;&lt;span&gt; &amp;lt; &lt;/span&gt;&lt;span&gt;$memLimit&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;|&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;bc&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-&lt;/span&gt;&lt;/span&gt;&lt;span&gt;l&lt;/span&gt;&lt;span&gt;) )); &lt;/span&gt;&lt;span&gt;then&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;33&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;sendEmail&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;å¯ç”¨å†…å­˜ä¸è¶³ - å‰©ä½™å¯ç”¨å†…å­˜ä¸º&lt;/span&gt;&lt;span&gt;&lt;span&gt;${&lt;/span&gt;&lt;span&gt;memAvail&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span&gt;M&quot;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;è­¦æŠ¥: å¯ç”¨å†…å­˜ä¸è¶³&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;34&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;writeLog&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;Insufficient available memory&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;35&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;fi&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;36&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;37&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;diskSpaceUsage&lt;/span&gt;&lt;span&gt;(){&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;38&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;local&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;jsonArr&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;$(&lt;/span&gt;&lt;/span&gt;&lt;span&gt;jq&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-r&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;.disk_space.mount_point[]&apos;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;$CONF&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;39&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;IFS&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;$&apos;&lt;/span&gt;&lt;span&gt;\n&lt;/span&gt;&lt;span&gt;&apos;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;read&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-rd&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;&apos;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-a&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;mountList&lt;/span&gt;&lt;span&gt; &amp;lt;&amp;lt;&amp;lt; &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$jsonArr&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;40&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;local&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;diskUsageLimit&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;$(&lt;/span&gt;&lt;/span&gt;&lt;span&gt;jq&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;.disk_space.disk_usage_limit&apos;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;$CONF&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;41&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;local&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;diskAvailLimit&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;$(&lt;/span&gt;&lt;/span&gt;&lt;span&gt;jq&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;.disk_space.disk_avail_limit&apos;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;$CONF&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;42&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;for&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;mountPoint&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;in&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&lt;span&gt;${&lt;/span&gt;&lt;span&gt;mountList&lt;/span&gt;&lt;/span&gt;&lt;span&gt;[@]&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;; &lt;/span&gt;&lt;span&gt;do&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;43&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;local&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;diskUsage&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;$(&lt;/span&gt;&lt;/span&gt;&lt;span&gt;df&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-h&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;$mountPoint&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;sed&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-n&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;2p&apos;&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;awk&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;{print $(NF-1)}&apos;&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;sed&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;s/[^0-9.]//g&apos;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;44&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;local&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;diskAvail&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;$(&lt;/span&gt;&lt;/span&gt;&lt;span&gt;df&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-h&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;$mountPoint&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;sed&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-n&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;2p&apos;&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;awk&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;{print $(NF-2)}&apos;&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;sed&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;s/[^0-9.]//g&apos;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;45&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;echo&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;mount point: &lt;/span&gt;&lt;span&gt;$mountPoint&lt;/span&gt;&lt;span&gt;; usage size: &lt;/span&gt;&lt;span&gt;$diskUsage&lt;/span&gt;&lt;span&gt;; avail: &lt;/span&gt;&lt;span&gt;$diskAvail&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;46&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; [ &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$diskUsage&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-gt&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$diskUsageLimit&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt; ] || [ &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$diskAvail&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-lt&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$diskAvailLimit&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt; ]; &lt;/span&gt;&lt;span&gt;then&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;47&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;sendEmail&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;æŒ‚è½½ç‚¹&lt;/span&gt;&lt;span&gt;\&quot;&lt;/span&gt;&lt;span&gt;$mountPoint&lt;/span&gt;&lt;span&gt;\&quot;&lt;/span&gt;&lt;span&gt; å¯ç”¨ç£ç›˜ç©ºé—´ä¸è¶³ - å‰©ä½™ç£ç›˜ç©ºé—´ä¸º&lt;/span&gt;&lt;span&gt;&lt;span&gt;${&lt;/span&gt;&lt;span&gt;diskUsage&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span&gt;G&quot;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;è­¦æŠ¥: å¯ç”¨ç£ç›˜ç©ºé—´ä¸è¶³&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;48&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;writeLog&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;Mount point: &lt;/span&gt;&lt;span&gt;$mountPoint&lt;/span&gt;&lt;span&gt;; Insufficient available disk space&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;49&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;fi&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;50&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;done&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;51&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;52&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;connectionStatus&lt;/span&gt;&lt;span&gt;(){&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;53&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;local&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;amount&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;$(&lt;/span&gt;&lt;/span&gt;&lt;span&gt;jq&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;.connection_status.amount&apos;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;$CONF&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;54&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;local&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;jsonArr&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;$(&lt;/span&gt;&lt;/span&gt;&lt;span&gt;jq&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-r&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;.connection_status.status[]&apos;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;$CONF&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;55&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;IFS&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;$&apos;&lt;/span&gt;&lt;span&gt;\n&lt;/span&gt;&lt;span&gt;&apos;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;read&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-rd&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;&apos;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-a&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;STATUS&lt;/span&gt;&lt;span&gt; &amp;lt;&amp;lt;&amp;lt; &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$jsonArr&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;56&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;for&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;element&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;in&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&lt;span&gt;${&lt;/span&gt;&lt;span&gt;STATUS&lt;/span&gt;&lt;/span&gt;&lt;span&gt;[@]&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;; &lt;/span&gt;&lt;span&gt;do&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;57&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;#echo &quot;element: $element&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;58&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;count&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;$(&lt;/span&gt;&lt;/span&gt;&lt;span&gt;netstat&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-ant&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;grep&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-c&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&lt;span&gt;${&lt;/span&gt;&lt;span&gt;element&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;59&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; [ &lt;/span&gt;&lt;span&gt;$count&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-gt&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;$amount&lt;/span&gt;&lt;span&gt; ]; &lt;/span&gt;&lt;span&gt;then&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;60&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;sendEmail&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;é“¾æ¥çŠ¶æ€å¼‚å¸¸ï¼š&lt;/span&gt;&lt;span&gt;&lt;span&gt;${&lt;/span&gt;&lt;span&gt;STATUS&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span&gt;çŠ¶æ€é“¾æ¥æ•°è¿‡å¤š, å½“å‰æ•°é‡&lt;/span&gt;&lt;span&gt;&lt;span&gt;${&lt;/span&gt;&lt;span&gt;count&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span&gt;ä¸ª&quot;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;è­¦æŠ¥: å¼‚å¸¸çŠ¶æ€é“¾æ¥æ•°è¿‡å¤š&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;61&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;writeLog&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;Connection status exception: too many &lt;/span&gt;&lt;span&gt;$STATUS&lt;/span&gt;&lt;span&gt; connections&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;62&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;fi&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;63&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;done&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;64&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;65&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;containerStatus&lt;/span&gt;&lt;span&gt;(){&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;66&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;local&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;containerList&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;$(&lt;/span&gt;&lt;/span&gt;&lt;span&gt;docker&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;ps&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-a&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;awk&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;{print $1}&apos;&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;tail&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-n&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;+2&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;67&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;for&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;container&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;in&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;$containerList&lt;/span&gt;&lt;span&gt;; &lt;/span&gt;&lt;span&gt;do&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;68&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;local&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;status&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;$(&lt;/span&gt;&lt;/span&gt;&lt;span&gt;docker&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;inspect&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&lt;span&gt;${&lt;/span&gt;&lt;span&gt;container&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;jq&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-r&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;.[0].State.Status&apos;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;69&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; [ &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$status&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;!=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&quot;running&quot;&lt;/span&gt;&lt;span&gt; ]; &lt;/span&gt;&lt;span&gt;then&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;70&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;sendEmail&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;å®¹å™¨çŠ¶æ€å¼‚å¸¸ï¼š&lt;/span&gt;&lt;span&gt;&lt;span&gt;${&lt;/span&gt;&lt;span&gt;container&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span&gt;-&lt;/span&gt;&lt;span&gt;&lt;span&gt;${&lt;/span&gt;&lt;span&gt;status&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;è­¦æŠ¥: å®¹å™¨çŠ¶æ€å¼‚å¸¸&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;71&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;writeLog&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;Container shut down: &lt;/span&gt;&lt;span&gt;&lt;span&gt;${&lt;/span&gt;&lt;span&gt;container&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;72&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;fi&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;73&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;done&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;74&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;75&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;serviceStatus&lt;/span&gt;&lt;span&gt;(){&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;76&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;local&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;jsonArr&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;$(&lt;/span&gt;&lt;/span&gt;&lt;span&gt;jq&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-r&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;.services[]&apos;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;$CONF&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;77&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;IFS&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;$&apos;&lt;/span&gt;&lt;span&gt;\n&lt;/span&gt;&lt;span&gt;&apos;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;read&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-rd&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;&apos;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-a&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;SERVICE_LIST&lt;/span&gt;&lt;span&gt; &amp;lt;&amp;lt;&amp;lt; &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$jsonArr&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;78&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;for&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;service&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;in&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&lt;span&gt;${&lt;/span&gt;&lt;span&gt;SERVICE_LIST&lt;/span&gt;&lt;/span&gt;&lt;span&gt;[@]&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;; &lt;/span&gt;&lt;span&gt;do&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;79&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;#echo &quot;service: $service&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;80&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;pgrep&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-x&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$service&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt; &amp;gt; &lt;/span&gt;&lt;span&gt;/dev/null&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;81&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; [ &lt;/span&gt;&lt;span&gt;$?&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-eq&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt; ]; &lt;/span&gt;&lt;span&gt;then&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;82&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;sendEmail&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;æœåŠ¡çŠ¶æ€å¼‚å¸¸: &lt;/span&gt;&lt;span&gt;&lt;span&gt;${&lt;/span&gt;&lt;span&gt;service&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span&gt; è¿›ç¨‹å…³é—­&quot;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;è­¦æŠ¥: æœåŠ¡çŠ¶æ€å¼‚å¸¸&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;83&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;writeLog&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;Service shut down: &lt;/span&gt;&lt;span&gt;&lt;span&gt;${&lt;/span&gt;&lt;span&gt;service&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;84&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;fi&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;85&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;done&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;86&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;87&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;88&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;while&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;getopts&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;c:e:l:h&quot;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;opt&lt;/span&gt;&lt;span&gt;; &lt;/span&gt;&lt;span&gt;do&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;89&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;case&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;$opt&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;in&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;90&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;c&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;91&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;CONF&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$OPTARG&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;92&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;93&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;e&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;94&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;EMAIL_CONF&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$OPTARG&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;95&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;96&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;l&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;97&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;LOGFILE&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$OPTARG&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;98&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;99&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;h&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;100&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;echo&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;Usage: ./monitor.sh -c CONFIGURATION_FILE.json -e EMAIL_CONTACT.json -l LOGFILE.log&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;101&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;exit&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;102&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;103&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;\?&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;104&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;exit&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;105&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;106&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;esac&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;107&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;done&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;108&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt;&lt;span&gt; [ &lt;/span&gt;&lt;span&gt;-z&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$CONF&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;&lt;span&gt; ] || [ &lt;/span&gt;&lt;span&gt;-z&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$EMAIL_CONF&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;&lt;span&gt; ] || [ &lt;/span&gt;&lt;span&gt;-z&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$LOGFILE&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt; ]; &lt;/span&gt;&lt;span&gt;then&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;109&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;echo&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;é”™è¯¯: æœªæä¾›æ­£ç¡®çš„æ–‡ä»¶è·¯å¾„&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;110&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;echo&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;Try &apos;./monitor -h&apos; for more information&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;111&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;exit&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;112&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;fi&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;113&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt;&lt;span&gt; [ &lt;/span&gt;&lt;span&gt;!&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-f&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$CONF&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;&lt;span&gt; ] || [ &lt;/span&gt;&lt;span&gt;!&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-f&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$EMAIL_CONF&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;&lt;span&gt; ] || [ &lt;/span&gt;&lt;span&gt;!&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-f&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$LOGFILE&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt; ]; &lt;/span&gt;&lt;span&gt;then&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;114&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;echo&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;é”™è¯¯: æœªæ‰¾åˆ°æ–‡ä»¶&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;115&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;exit&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;116&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;else&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;117&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;cpuUsage&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;118&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;memUsage&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;119&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;diskSpaceUsage&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;120&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;connectionStatus&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;121&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;containerStatus&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;122&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;serviceStatus&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;123&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;fi&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;Jsonç›‘æ§é…ç½®æ–‡ä»¶&lt;a href=&quot;#jsonç›‘æ§é…ç½®æ–‡ä»¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;//cpuç›‘æ§é¡¹ï¼Œcpuä½¿ç”¨ç‡å¤§äºè¯¥å€¼æ—¶æŠ¥è­¦&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;&quot;cpu&quot;&lt;/span&gt;&lt;span&gt;: {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;&quot;cpu_limit&quot;&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;90&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;},&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;//å†…å­˜ç›‘æ§é¡¹ï¼Œå¯ç”¨å†…å­˜ä½äºè¯¥å€¼æ—¶æŠ¥è­¦&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;&quot;memory&quot;&lt;/span&gt;&lt;span&gt;: {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;&quot;memory_limit&quot;&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;0.5&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;},&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;//ç£ç›˜ç›‘æ§é¡¹&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;&quot;disk_space&quot;&lt;/span&gt;&lt;span&gt;: {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;//ç£ç›˜æŒ‚è½½ç‚¹&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;&quot;mount_point&quot;&lt;/span&gt;&lt;span&gt;: [&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;&quot;/&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;],&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;//ç£ç›˜ä½¿ç”¨ç‡å’Œç©ºé—²ç©ºé—´ï¼Œå¤§äºæŒ‡å®šçš„ä½¿ç”¨ç‡æˆ–ç©ºé—²ç©ºé—´å°äºæŒ‡å®šçš„å€¼æ—¶å‡æŠ¥è­¦&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;&quot;disk_usage_limit&quot;&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;80&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;&quot;disk_avail_limit&quot;&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;5&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;},&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;//ç½‘ç»œé“¾æ¥ç›‘æ§&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;&quot;connection_status&quot;&lt;/span&gt;&lt;span&gt;: {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;//å—ç›‘æ§çš„é“¾æ¥çŠ¶æ€ç±»å‹&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;&quot;status&quot;&lt;/span&gt;&lt;span&gt;: [&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;&quot;TIME_WAIT&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;&quot;SYN_SENT&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;],&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;27&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;//å¤§äºè¿™ä¸ªæ•°é‡æ—¶æŠ¥è­¦&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;28&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;&quot;amount&quot;&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;500&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;29&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;},&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;30&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;//é‚£äº›æœåŠ¡å—ç›‘æ§&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;31&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;&quot;services&quot;&lt;/span&gt;&lt;span&gt;: [&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;32&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;&quot;nginx&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;33&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;34&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;è”ç³»äººé…ç½®æ–‡ä»¶ï¼šç”µå­é‚®ä»¶&lt;a href=&quot;#è”ç³»äººé…ç½®æ–‡ä»¶ç”µå­é‚®ä»¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;&quot;user1&quot;&lt;/span&gt;&lt;span&gt;: {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;&quot;email&quot;&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;your@email.com&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;&quot;smtp_server&quot;&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;smtp.qq.com:465&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;&quot;passwd&quot;&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;*****&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;&quot;cert&quot;&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;qq.crt&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;},&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;&quot;user2&quot;&lt;/span&gt;&lt;span&gt;: {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;&quot;email&quot;&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;your@email.com&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;&quot;smtp_server&quot;&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;smtp.qq.com:465&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;&quot;passwd&quot;&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;*****&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;&quot;cert&quot;&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;qq.crt&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;</content:encoded></item><item><title>Kuberneteså­¦ä¹ ç¬”è®°ä¸€ï¼šKubernetes Namespaceä¸Label</title><link>https://white-festa.net/posts/kubernetes-tutorial/kubernetes-namespace%E5%92%8Clabel/</link><guid isPermaLink="true">https://white-festa.net/posts/kubernetes-tutorial/kubernetes-namespace%E5%92%8Clabel/</guid><description>Kubernetes Namespaceä¸Labelçš„åŸºæœ¬æ¦‚å¿µã€å®šä¹‰å’Œä½¿ç”¨</description><pubDate>Thu, 19 Oct 2023 00:00:00 GMT</pubDate><content:encoded>&lt;section&gt;&lt;h1&gt;Kubernetes Namespace&lt;a href=&quot;#kubernetes-namespace&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;section&gt;&lt;h2&gt;Namespace çš„ç”¨é€”&lt;a href=&quot;#namespace-çš„ç”¨é€”&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;å®ç°èµ„æºéš”ç¦» - ç”¨ä»¥å®ç°ä¸åŒç§Ÿæˆ·/å›¢é˜Ÿçš„èµ„æºåˆ†éš”&lt;/li&gt;
&lt;li&gt;å¤šç¯å¢ƒéƒ¨ç½² - è®¾å®š Devï¼ŒTest ç­‰ Namespaceï¼Œå°†ä¸åŒéƒ¨ç½²ç¯å¢ƒè¿›è¡Œåˆ†éš”&lt;/li&gt;
&lt;li&gt;å¾®æœåŠ¡éƒ¨ç½² - å°†åº”ç”¨æ‹†åˆ†ä¸ºå¤šä¸ªç‹¬ç«‹æ¨¡å—ï¼Œé€šè¿‡ç‹¬ç«‹çš„ Namespace è¿›è¡Œåˆ†éš”&lt;/li&gt;
&lt;li&gt;å®‰å…¨å’Œåˆè§„æ€§&lt;/li&gt;
&lt;/ol&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;Namespace çš„å®ç°åŸç†&lt;a href=&quot;#namespace-çš„å®ç°åŸç†&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;æ¯ä¸ª Namespace éƒ½æ˜¯ Kubernetes ä¸‹çš„ä¸€ä¸ªè™šæ‹Ÿé›†ç¾¤ï¼Œå…¶å†…éƒ¨åŒ…å«çš„èµ„æºï¼ˆPodï¼ŒServiceï¼ŒVolume ç­‰ï¼‰åªèƒ½åœ¨è¯¥ Namespace ä¸‹ä½¿ç”¨&lt;/li&gt;
&lt;li&gt;Kubernetes API server ä½¿ç”¨ etcd å­˜å‚¨èµ„æºå¯¹è±¡çš„å…ƒæ•°æ®ï¼Œæ¯ä¸€ä¸ª Namespace æ‹¥æœ‰ä¸€ä¸ªç‹¬ç«‹çš„ etcd å­˜å‚¨ç©ºé—´&lt;/li&gt;
&lt;li&gt;åœ¨ Kubernetes è¿è¡Œæ—¶ï¼Œæ¯ä¸ª Namespace ä¸‹çš„èµ„æºéƒ½è¢«åˆ†é…ä¸€ä¸ªå”¯ä¸€æ ‡è¯†ç¬¦ï¼Œå¹¶ä¸è¯¥ Namespace çš„æ ‡è¯†ç¬¦ç›¸å…³è”ï¼Œå› æ­¤ä¸åŒ Namespace ä¸‹çš„åŒåèµ„æºå¯¹è±¡ä¸å†²çª&lt;/li&gt;
&lt;li&gt;Kubernetes Scheduler æ ¹æ®ä¸åŒçš„ Namespace å°† Pod è°ƒåº¦åˆ°èŠ‚ç‚¹&lt;/li&gt;
&lt;li&gt;Kubernetes DNS æ’ä»¶ä¸ºæ¯ä¸ª Namespace åˆ›å»ºä¸€ä¸ª DNS åŸŸåï¼Œç”¨äºè§£æè¯¥ Namespace ä¸‹çš„æ‰€æœ‰ Service åŸŸå&lt;/li&gt;
&lt;/ol&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;åŸºç¡€ä½¿ç”¨&lt;a href=&quot;#åŸºç¡€ä½¿ç”¨&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;æŸ¥çœ‹å…¨éƒ¨ Namespace&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kubectl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;get&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;ns&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;åˆ›å»ºä¸åˆ é™¤ Namespace&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# åˆ›å»º&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kubectl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;create&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;ns&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;test_ns&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# åˆ é™¤&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kubectl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;delete&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;ns&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;test_ns&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;ä½¿ç”¨ Yaml æ–‡ä»¶åˆ›å»º Namespace&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# å¿«é€Ÿåˆ›å»ºæ¨¡æ¿ï¼škubectl create ns test --dry-run -o yaml &amp;gt; test_ns.yaml&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Namespace&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;test_ns&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;åˆ‡æ¢å‘½åç©ºé—´&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kubectl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;config&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;set-context&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--current&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--namespace=kube-system&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;æŸ¥çœ‹å“ªäº›èµ„æºæ˜¯å‘½åç©ºé—´çº§åˆ«çš„&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kubectl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;api-resources&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--namespaced=true&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;Namespace èµ„æºé…é¢&lt;a href=&quot;#namespace-èµ„æºé…é¢&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;å¸¸è§çš„èµ„æºé…é¢&lt;a href=&quot;#å¸¸è§çš„èµ„æºé…é¢&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;CPU é…é¢ - é™åˆ¶ä¸€ä¸ª Namespace ä¸‹æ‰€æœ‰ Pod ä½¿ç”¨çš„ CPU é¢åº¦&lt;/li&gt;
&lt;li&gt;å†…å­˜é…é¢ - é™åˆ¶ä¸€ä¸ª Namespace ä¸‹æ‰€æœ‰ Pod ä½¿ç”¨çš„å†…å­˜é¢åº¦&lt;/li&gt;
&lt;li&gt;å­˜å‚¨é…é¢ - é™åˆ¶ä¸€ä¸ª Namespace ä¸‹æ‰€æœ‰ PVC ä½¿ç”¨çš„å­˜å‚¨é¢åº¦&lt;/li&gt;
&lt;li&gt;Pod é…é¢ - é™åˆ¶ Namespace ä¸‹å¯è¿è¡Œçš„ Pod çš„æœ€å¤§æ•°é‡&lt;/li&gt;
&lt;li&gt;æœåŠ¡é…é¢ - é™åˆ¶ Namespace ä¸‹å¯è¿è¡Œçš„ service çš„æœ€å¤§æ•°é‡&lt;/li&gt;
&lt;/ol&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;å¯åŠ¨èµ„æºé…é¢&lt;a href=&quot;#å¯åŠ¨èµ„æºé…é¢&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;æ£€æŸ¥é›†ç¾¤æ˜¯å¦å¯ç”¨äº†èµ„æºé…é¢&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;cat&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/etc/kubernetes/manifest/kube-apuserver.yaml&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;grep&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;enable-admission-plugins&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;å¦‚æœæ²¡æœ‰ï¼Œä¸ºå…¶å¢åŠ  ResourceQuota&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;-&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--enable-admission-plugins=NodeRestriction,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;ResourceQuota&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;é…é¢æœºåˆ¶æ”¯æŒçš„èµ„æºç±»å‹&lt;a href=&quot;#é…é¢æœºåˆ¶æ”¯æŒçš„èµ„æºç±»å‹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;https://kubernetes.io/zh-cn/docs/concepts/policy/resource-quotas/&quot;&gt;https://kubernetes.io/zh-cn/docs/concepts/policy/resource-quotas/&lt;/a&gt;&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;å£°æ˜èµ„æºé™é¢&lt;a href=&quot;#å£°æ˜èµ„æºé™é¢&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apiVersion&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;v1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kind&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;ResourceQuota&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;metadata&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;example-quota&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;namespace&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;test-quota&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;spec&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;hard&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;pods&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;5&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;services&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;3&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;requests.cpu&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;1&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;requests.memory&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;1Gi&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;limits.cpu&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;1&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;limits.memory&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;1Gi&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;Kubernets Label&lt;a href=&quot;#kubernets-label&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;section&gt;&lt;h2&gt;åŸºç¡€ä½¿ç”¨&lt;a href=&quot;#åŸºç¡€ä½¿ç”¨-1&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;åˆ›å»ºæ ‡ç­¾&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kubectl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;label&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;èµ„æºç±»å‹&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;åç§°&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&amp;lt;label-key1&amp;gt;=&amp;lt;label-value1&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&amp;lt;label-key2&amp;gt;=&amp;lt;label-value2&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;æˆ–è€…åœ¨åˆ›å»ºèµ„æºæ—¶ä½¿ç”¨ â€”labels å‚æ•°ç›´æ¥å®šä¹‰&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kubectl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;run&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;web-nginx&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--image=nginx:latest&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--labels=version=test&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;åˆ é™¤æ ‡ç­¾&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kubectl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;label&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;èµ„æºç±»å‹&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;åç§°&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&amp;lt;label-key&amp;gt;-&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;æŸ¥çœ‹æ ‡ç­¾&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kubectl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;get&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;èµ„æºç±»å‹&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;åç§°&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--show-labels&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;æ ¹æ®æ ‡ç­¾è¿‡æ»¤èµ„æº&lt;a href=&quot;#æ ¹æ®æ ‡ç­¾è¿‡æ»¤èµ„æº&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;æŒ‡å®š Key=value&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kubectl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;get&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;pods&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-l&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;env=test&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;æ ¹æ® key åç§°æ˜¾ç¤ºèµ„æº&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kubectl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;get&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;pods&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-L&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;env&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;æ ¹æ®æ ‡ç­¾åˆ é™¤èµ„æº&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;kubectl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;delete&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;pods&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-l&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;env=xxx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;</content:encoded></item><item><title>Shellè„šæœ¬åƒæ™®é€šå‘½ä»¤ä¸€æ ·ä½¿ç”¨é€‰é¡¹ä¼ é€’å‚æ•°</title><link>https://white-festa.net/posts/shell-arguments/</link><guid isPermaLink="true">https://white-festa.net/posts/shell-arguments/</guid><description>åŸºäºgetoptså’Œshiftä¸¤ä¸ªå‘½ä»¤å®ç°é€šè¿‡é€‰é¡¹å‘Shellè„šæœ¬ä¼ é€’å‚æ•°</description><pubDate>Sat, 07 Oct 2023 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Linuxä¸Šçš„å‘½ä»¤åŒ…å«å„ç§å¯é€‰çš„å‚æ•°ä»¥å®ç°ä¸åŒçš„åŠŸèƒ½ï¼Œä¾‹å¦‚å¾ˆå¸¸ç”¨çš„ps -efå¯ä»¥æŸ¥çœ‹ç³»ç»Ÿè¿›ç¨‹ï¼Œls -lå¯ä»¥æŸ¥çœ‹ç›®å½•ä¸‹æ–‡ä»¶çš„è¯¦ç»†ä¿¡æ¯ï¼›shellè„šæœ¬ä¹Ÿå¯ä»¥å®ç°ç±»ä¼¼çš„åŠŸèƒ½ï¼Œä¸»è¦æ˜¯åŸºäºgetoptså’Œshiftä¸¤ä¸ªå‘½ä»¤å®ç°ã€‚&lt;/p&gt;
&lt;section&gt;&lt;h2&gt;getoptsçŸ­é€‰é¡¹&lt;a href=&quot;#getoptsçŸ­é€‰é¡¹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h4&gt;å‘½ä»¤æ ¼å¼&lt;a href=&quot;#å‘½ä»¤æ ¼å¼&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;getopts optstring name [arg]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;å‚æ•°å«ä¹‰ï¼š&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;optstringï¼šè¡¨ç¤ºè¦è¯†åˆ«çš„å‘½ä»¤è¡Œé€‰é¡¹å½¢å¼ï¼Œå¦‚æœä¸€ä¸ªå­—æ¯åé¢æœ‰ä¸€ä¸ªâ€:â€œï¼Œè¡¨ç¤ºè¯¥å‘½ä»¤è¡Œé€‰é¡¹åé¢è¦è·Ÿä¸€ä¸ªå‚æ•°ã€‚å¦‚optstingå†™æˆâ€co:f:â€œï¼Œè¡¨ç¤ºæ”¯æŒ-cã€-oã€-fé€‰é¡¹è¯†åˆ«ï¼Œ-oå’Œ-fé€‰é¡¹åé¢éœ€è¦è·Ÿä¸€ä¸ªå‚æ•°&lt;/li&gt;
&lt;li&gt;nameï¼šæ¯æ¬¡è°ƒç”¨å®ƒå‰ï¼Œgetoptséƒ½ä¼šå°†ä¸‹ä¸€ä¸ªé€‰é¡¹æ”¾ç½®åœ¨shellå˜é‡$nameä¸­ï¼Œå¦‚æœä¼ å…¥å‘½ä»¤è¡Œä¸­ä¸å­˜åœ¨nameé€‰é¡¹ï¼Œåˆ™å°†å…¶é‡æ–°åˆå§‹åŒ–&lt;/li&gt;
&lt;li&gt;argï¼šè¡¨ç¤ºè¦è§£æå‚æ•°ï¼Œåœ¨shellè„šæœ¬ä¸­ä½¿ç”¨æ—¶ï¼Œé»˜è®¤è§£æçš„æ˜¯æ‰§è¡Œshellè„šæœ¬ä¼ å…¥çš„å‚æ•°ï¼Œæ‰€ä»¥è¿™ä¸ªéƒ¨åˆ†å¯çœç•¥ä¸å†™&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;ä½¿ç”¨æ–¹æ³•&lt;a href=&quot;#ä½¿ç”¨æ–¹æ³•&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;ä»¥ä¸€ä¸ªè„šæœ¬ä¸ºä¾‹ï¼šè¯¥è„šæœ¬å®ç°äº†è¿‘ä¼¼findå‘½ä»¤çš„åŠŸèƒ½ï¼Œä½¿ç”¨-då‚æ•°ä¼ å…¥ç›®å½•è·¯å¾„ï¼Œä½¿ç”¨-så‚æ•°ä¼ å…¥æ–‡ä»¶åç¼€åï¼Œæœ€åè¿™ä¸ªè„šæœ¬é€’å½’è¿”å›è¯¥ç›®å½•ä¸‹æ‰€æœ‰ä¸ºç»™å®šå€¼ä¸ºåç¼€çš„æ–‡ä»¶è·¯å¾„&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;#!/bin/bash&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;list_files&lt;/span&gt;&lt;span&gt;() {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;local&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;dir&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$1&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;local&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;suffix&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$2&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;for&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;file&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;in&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$dir&lt;/span&gt;&lt;span&gt;&quot;/*&lt;/span&gt;&lt;span&gt;; &lt;/span&gt;&lt;span&gt;do&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt;&lt;span&gt; [ &lt;/span&gt;&lt;span&gt;-f&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$file&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt; ] &amp;amp;&amp;amp; [[ &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$file&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;==&lt;/span&gt;&lt;span&gt; *&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&quot;.&lt;/span&gt;&lt;span&gt;$suffix&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt; ]]; &lt;/span&gt;&lt;span&gt;then&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;echo&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$file&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;elif&lt;/span&gt;&lt;span&gt;&lt;span&gt; [ &lt;/span&gt;&lt;span&gt;-d&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$file&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt; ]; &lt;/span&gt;&lt;span&gt;then&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;list_files&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$file&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$suffix&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;fi&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;done&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;directory&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;suffix&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;while&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;getopts&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;d:s:h&quot;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;opt&lt;/span&gt;&lt;span&gt;; &lt;/span&gt;&lt;span&gt;do&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;case&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;$opt&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;in&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;d&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;# å°†-dåé¢ä¼ å…¥çš„å€¼èµ‹å€¼ç»™directoryå˜é‡&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;directory&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$OPTARG&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;s&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;# å°†-såé¢ä¼ å…¥çš„å€¼èµ‹å€¼ç»™suffixå˜é‡&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;suffix&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$OPTARG&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;h&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;27&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;# -h æ˜¾ç¤ºç”¨æ³•&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;28&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;echo&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;Usage: ./find.sh -d [path] -s [suffix]&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;29&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;exit&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;30&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;31&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;\?&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;32&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;echo&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;Invalid argument: -&lt;/span&gt;&lt;span&gt;$OPTARG&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt; &amp;gt;&amp;amp;2&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;33&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;exit&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;34&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;35&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;esac&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;36&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;done&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;37&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt;&lt;span&gt; [ &lt;/span&gt;&lt;span&gt;-z&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$directory&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;&lt;span&gt; ] || [ &lt;/span&gt;&lt;span&gt;-z&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$suffix&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt; ]; &lt;/span&gt;&lt;span&gt;then&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;38&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;echo&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;FATAL: No directory or suffix provided. &quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;39&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;echo&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;Try &apos;./find.sh -h&apos; for more information&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;40&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;exit&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;41&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;fi&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;42&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt;&lt;span&gt; [ &lt;/span&gt;&lt;span&gt;!&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-d&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$directory&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt; ]; &lt;/span&gt;&lt;span&gt;then&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;43&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;echo&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;FATAL: Invalid parameter: &lt;/span&gt;&lt;span&gt;$directory&lt;/span&gt;&lt;span&gt; does not exists&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;44&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;exit&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;45&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;fi&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;46&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;list_files&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$directory&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$suffix&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;ä½¿ç”¨ï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;./find.sh&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-d&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/etc&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-s&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;conf&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;é•¿çŸ­é€‰é¡¹ç»“åˆä½¿ç”¨&lt;a href=&quot;#é•¿çŸ­é€‰é¡¹ç»“åˆä½¿ç”¨&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;getoptsåªæ”¯æŒçŸ­å‚æ•°ï¼Œå› æ­¤å¦‚æœæƒ³ä½¿ç”¨é•¿å‚æ•°ï¼Œä¾‹å¦‚â€”helpï¼Œå°±ä¸èƒ½ä½¿ç”¨getoptsäº†ã€‚åªèƒ½å°†é€‰é¡¹å’Œå®é™…çš„å‚æ•°ä¸€èµ·ä¼ å…¥ã€‚&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;#!/bin/bash&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;list_files&lt;/span&gt;&lt;span&gt;() {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;local&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;dir&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$1&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;local&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;suffix&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$2&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;for&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;file&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;in&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$dir&lt;/span&gt;&lt;span&gt;&quot;/*&lt;/span&gt;&lt;span&gt;; &lt;/span&gt;&lt;span&gt;do&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt;&lt;span&gt; [ &lt;/span&gt;&lt;span&gt;-f&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$file&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt; ] &amp;amp;&amp;amp; [[ &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$file&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;==&lt;/span&gt;&lt;span&gt; *&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&quot;.&lt;/span&gt;&lt;span&gt;$suffix&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt; ]]; &lt;/span&gt;&lt;span&gt;then&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;echo&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$file&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;elif&lt;/span&gt;&lt;span&gt;&lt;span&gt; [ &lt;/span&gt;&lt;span&gt;-d&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$file&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt; ]; &lt;/span&gt;&lt;span&gt;then&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;list_files&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$file&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$suffix&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;# é€’å½’è°ƒç”¨è‡ªèº«æ¥éå†å­ç›®å½•&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;fi&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;done&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;directory&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;suffix&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;while&lt;/span&gt;&lt;span&gt; [ &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$#&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-gt&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt; ]; &lt;/span&gt;&lt;span&gt;do&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;case&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;$1&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;in&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;-d&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;directory&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$2&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;shift&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;-s&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;suffix&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$2&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;shift&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;-h&lt;/span&gt;&lt;span&gt;|&lt;/span&gt;&lt;span&gt;--help&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;echo&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;Usage: ./find.sh -d [path] -s [suffix]&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;27&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;exit&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;28&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;29&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;*)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;30&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;echo&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;Invalid argument&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;31&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;exit&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;32&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;33&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;esac&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;34&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;done&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;35&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt;&lt;span&gt; [ &lt;/span&gt;&lt;span&gt;-z&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$directory&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;&lt;span&gt; ] || [ &lt;/span&gt;&lt;span&gt;-z&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$suffix&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt; ]; &lt;/span&gt;&lt;span&gt;then&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;36&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;echo&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;No directory and suffix provided. /n Try &quot;./find.sh -h&quot; for more information&apos;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;37&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;exit&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;38&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;fi&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;39&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt;&lt;span&gt; [ &lt;/span&gt;&lt;span&gt;!&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-d&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$directory&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt; ]; &lt;/span&gt;&lt;span&gt;then&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;40&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;echo&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;Invalid parameter: &lt;/span&gt;&lt;span&gt;$directory&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;41&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;echo&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;Directory does not exists&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;42&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;exit&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;43&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;fi&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;44&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;list_files&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$directory&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$suffix&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;è¿™ç§å†™æ³•shellæ— æ³•è¯†åˆ«é‚£ä¸ªæ˜¯é€‰é¡¹è€Œé‚£ä¸ªæ˜¯å‚æ•°ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨åˆ°&lt;code&gt;shift&lt;/code&gt;ï¼Œshiftçš„ä¸»è¦ç›®çš„æ˜¯å°†å‘½ä»¤è¡Œå‚æ•°å‘å·¦ç§»åŠ¨ï¼Œä½¿å¾—ç¨‹åºå¯ä»¥è®¿é—®åˆ°ä¸‹ä¸€ä¸ªå‚æ•°ã€‚
&lt;code&gt;shift&lt;/code&gt;çš„é»˜è®¤åç§»é‡æ˜¯1ï¼Œä¹Ÿå°±æ˜¯æ¯æ¬¡å¤„ç†ä¸€ä¸ªå‚æ•°ï¼Œä½†ä¹Ÿå¯ä»¥æ‰‹åŠ¨æŒ‡å®šï¼Œåœ¨è¿™ä¸ªè„šæœ¬ä¸­ï¼Œå› ä¸ºæˆ‘ä»¬æ¯ä¸ªé€‰é¡¹åé¢éƒ½è·Ÿç€ä¸€ä¸ªå‚æ•°ï¼Œå› æ­¤å°†&lt;code&gt;shift&lt;/code&gt;è®¾ç½®ä¸º2æ¥åŒºåˆ†é€‰é¡¹å’Œå‚æ•°ï¼Œå¹¶åœ¨whileå¾ªç¯ä¸­ï¼Œé€šè¿‡åˆ¤æ–­å‰©ä½™å‚æ•°çš„æ•°é‡æ¥æ§åˆ¶å¾ªç¯çš„å‰©ä½™æ¬¡æ•°ã€‚
å¯¹äºé•¿çŸ­é€‰é¡¹ç»“åˆï¼Œåªè¦ä½¿ç”¨&lt;code&gt;åˆ†éš”ç¬¦|&lt;/code&gt;å°±å¯ä»¥å®ç°ã€‚&lt;/p&gt;&lt;/section&gt;</content:encoded></item><item><title>Zabbixå®‰è£…å’Œè‡ªå®šä¹‰ç›‘æ§é¡¹</title><link>https://white-festa.net/posts/zabbix/</link><guid isPermaLink="true">https://white-festa.net/posts/zabbix/</guid><pubDate>Thu, 07 Sep 2023 00:00:00 GMT</pubDate><content:encoded>&lt;section&gt;&lt;h2&gt;å®‰è£…ZabbixæœåŠ¡ç«¯&lt;a href=&quot;#å®‰è£…zabbixæœåŠ¡ç«¯&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;ZabbixæœåŠ¡ç«¯åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼šæä¾›å‰ç«¯äº¤äº’çš„WebæœåŠ¡ç«¯å’Œå­˜å‚¨æ•°æ®çš„MySQLæ•°æ®åº“&lt;/p&gt;&lt;section&gt;&lt;h3&gt;è®¾ç½®Zabbixæ•°æ®åº“&lt;a href=&quot;#è®¾ç½®zabbixæ•°æ®åº“&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;è¿™é‡Œç›´æ¥ä½¿ç”¨dockerçš„MySQLé•œåƒï¼Œä½¿ç”¨ä¸‹é¢çš„docker-composeï¼š&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;version&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;3&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;services&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;db&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;     &lt;/span&gt;&lt;span&gt;image&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;mysql:5.7&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;     &lt;/span&gt;&lt;span&gt;command&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;--default_authentication_plugin=mysql_native_password&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;--character-set-server=utf8&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;--collation-server=utf8_unicode_ci&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;     &lt;/span&gt;&lt;span&gt;volumes&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;       &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;db_data:/var/lib/mysql&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;     &lt;/span&gt;&lt;span&gt;restart&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;always&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;     &lt;/span&gt;&lt;span&gt;environment&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;       &lt;/span&gt;&lt;span&gt;MYSQL_ROOT_PASSWORD&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;å¯†ç &lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;       &lt;/span&gt;&lt;span&gt;MYSQL_DATABASE&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;zabbix&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;       &lt;/span&gt;&lt;span&gt;MYSQL_PASSWORD&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;å¯†ç &lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;volumes&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;db_data&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;å¯åŠ¨ï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;docker-compose -f docker-compose.yml up -d&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;æ­¤æ—¶Zabbixæ•°æ®åº“å·²ç»å»ºå¥½äº†ï¼Œä½†è¿˜åªæ˜¯ä¸ªç©ºå£³ï¼Œå…·ä½“çš„åº“è¡¨è¿˜éœ€è¦å†å®‰è£…å¥½Zabbixåå¯¼å…¥ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;å®‰è£…Zabbix-server&lt;a href=&quot;#å®‰è£…zabbix-server&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;section&gt;&lt;h4&gt;é…ç½®yumæº&lt;a href=&quot;#é…ç½®yumæº&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;è¿™é‡Œç”¨çš„æ˜¯æ¸…åæºï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;rpm&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-ivh&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;https://mirrors.tuna.tsinghua.edu.cn/zabbix/zabbix/4.0/rhel/8/x86_64/zabbix-release-4.0-2.el8.noarch.rpm&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;ä¿®æ”¹repoæ–‡ä»¶ï¼Œæ”¹ä¸ºæ¸…åæº&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;sed&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-i&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;s#repo.zabbix.com#mirrors.tuna.tsinghua.edu.cn/zabbix#g&apos;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/etc/yum.repos.d/zabbix.repo&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;å®‰è£…Zabbixå’Œå…¶ä»–ç»„ä»¶&lt;a href=&quot;#å®‰è£…zabbixå’Œå…¶ä»–ç»„ä»¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;yum&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;install&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-y&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;zabbix-server-mysql&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;zabbix-web-mysql&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;zabbix-agent&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;php-fpm&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;å¯¼å…¥Zabbixæ•°æ®åº“åº“è¡¨ï¼Œåˆ›å»ºZabbixç”¨æˆ·&lt;a href=&quot;#å¯¼å…¥zabbixæ•°æ®åº“åº“è¡¨åˆ›å»ºzabbixç”¨æˆ·&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;zcat&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/usr/share/doc/zabbix-server-mysql/create.sql.gz&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;mysql&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-h172.18.0.2&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-uroot&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-på¯†ç &lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;zabbix&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;åˆ›å»ºzabbixç”¨æˆ·å¹¶æˆæƒ&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;grant&lt;/span&gt;&lt;span&gt; all privileges &lt;/span&gt;&lt;span&gt;on&lt;/span&gt;&lt;span&gt; zabbix.* &lt;/span&gt;&lt;span&gt;to&lt;/span&gt;&lt;span&gt;&lt;span&gt; zabbix&lt;/span&gt;&lt;span&gt;@localhost&lt;/span&gt;&lt;span&gt; identified &lt;/span&gt;&lt;/span&gt;&lt;span&gt;by&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;password&apos;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;ä¿®æ”¹zabbix-serveré…ç½®æ–‡ä»¶&lt;a href=&quot;#ä¿®æ”¹zabbix-serveré…ç½®æ–‡ä»¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;é…ç½®æ–‡ä»¶ï¼š&lt;code&gt;/etc/zabbix/zabbix_server.conf&lt;/code&gt;ã€‚
ä¸»è¦æ˜¯ä¿®æ”¹æ•°æ®åº“éƒ¨åˆ†&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;DBHost=localhost&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;DBName=zabbix&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;DBUser=zabbix&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;DBPassword=å¯†ç &lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;æœ€åå¯åŠ¨æœåŠ¡&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;é…ç½®Nginxä»£ç†Zabbixå‰ç«¯&lt;a href=&quot;#é…ç½®nginxä»£ç†zabbixå‰ç«¯&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;server&lt;/span&gt;&lt;span&gt; {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;   &lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;listen &lt;/span&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;80&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;   &lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;listen &lt;/span&gt;&lt;span&gt;      [::]:80;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;   &lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;server_name &lt;/span&gt;&lt;span&gt; _;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;   &lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;root &lt;/span&gt;&lt;span&gt;/usr/share/zabbix/;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;   &lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;index &lt;/span&gt;&lt;span&gt;index.php index.html;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;# Load configuration files for the default server block.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;   &lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;include &lt;/span&gt;&lt;span&gt;/etc/nginx/default.d/*.conf;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;location&lt;/span&gt;&lt;span&gt; / {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;   &lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;try_files &lt;/span&gt;&lt;span&gt;$&lt;/span&gt;&lt;span&gt;uri&lt;/span&gt;&lt;span&gt; $&lt;/span&gt;&lt;span&gt;uri&lt;/span&gt;&lt;span&gt;/ /index.php?$&lt;/span&gt;&lt;span&gt;args&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;location&lt;/span&gt;&lt;span&gt; ~ &lt;/span&gt;&lt;span&gt;[^/]\.php(/|$) &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;   &lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;fastcgi_buffer_size &lt;/span&gt;&lt;span&gt;128k&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;   &lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;fastcgi_buffers &lt;/span&gt;&lt;span&gt;32&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;32k&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;   &lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;fastcgi_pass &lt;/span&gt;&lt;span&gt;127.0.0.1:9000;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;   &lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;fastcgi_index &lt;/span&gt;&lt;span&gt;index.php;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;   &lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;fastcgi_param &lt;/span&gt;&lt;span&gt;SCRIPT_FILENAME $&lt;/span&gt;&lt;span&gt;document_root&lt;/span&gt;&lt;span&gt;$&lt;/span&gt;&lt;span&gt;fastcgi_script_name&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;   &lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;include &lt;/span&gt;&lt;span&gt;fastcgi_params;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;   &lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;include &lt;/span&gt;&lt;span&gt;fastcgi.conf;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;å› ä¸ºzabbixçš„å‰ç«¯æ˜¯ç”¨phpå†™çš„ï¼Œæ‰€ä»¥è¿™æ—¶å€™å°±ç”¨åˆ°äº†php-fpmç”¨æ¥å¤„ç†åŠ¨æ€è¯·æ±‚ã€‚
é‡å¯Nginxåè®¿é—®IP/zabbix/setup.phpå³å¯è¿›å…¥zabbixå®‰è£…ç•Œé¢ã€‚&lt;/p&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;å®‰è£…é…ç½®zabbixå‰ç«¯&lt;a href=&quot;#å®‰è£…é…ç½®zabbixå‰ç«¯&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;å®‰è£…zabbixå‰ç«¯ä¸»è¦å°±æ˜¯æ£€æŸ¥phpçš„ä¸€äº›å˜é‡å’Œé…ç½®å’Œæ•°æ®åº“çš„é“¾æ¥ã€‚
æ‰€æœ‰æ˜¾ç¤ºæ²¡æœ‰è¾¾åˆ°è¦æ±‚çš„é€‰é¡¹éƒ½å¯ä»¥åœ¨&lt;code&gt;php.ini&lt;/code&gt;æ–‡ä»¶ä¸­è¿›è¡Œä¿®æ”¹ã€‚
&lt;/p&gt;&lt;figure&gt;&lt;img src=&quot;https://blog.freelytomorrow.com/articles_img/zabbix/php-ini.png&quot; alt=&quot;&quot; /&gt;&lt;figcaption&gt;php.ini&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;å®‰è£…è¿‡ç¨‹ä¸­å¯èƒ½å‡ºç°çš„é”™è¯¯&lt;a href=&quot;#å®‰è£…è¿‡ç¨‹ä¸­å¯èƒ½å‡ºç°çš„é”™è¯¯&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;500æŠ¥é”™&lt;a href=&quot;#500æŠ¥é”™&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;500æŠ¥é”™æ˜¯å‰åç«¯æ²¡æœ‰å»ºç«‹æœ‰æ•ˆçš„é“¾æ¥ï¼Œæˆ–è€…åç«¯æ— æ³•æä¾›æœåŠ¡ã€‚
é¦–å…ˆè¦æŸ¥çœ‹zabbix-serverï¼Œphp-fpmæ˜¯å¦æ­£å¸¸å¯åŠ¨äº†ï¼›å¦‚æœè¿™ä¸¤ä¸ªæ²¡é—®é¢˜å¯ä»¥æŸ¥çœ‹php-fpmçš„æ—¥å¿—&lt;code&gt;/var/log/php-fpm/error.log&lt;/code&gt;ã€‚
å¦‚æœæŠ¥é”™æ˜¯ï¼š&lt;code&gt;Failed opening required &apos;/etc/zabbix/web/maintenance.inc.php&apos;&lt;/code&gt;é‚£ä¹ˆæ‰¾åˆ°å¯¹åº”çš„æ–‡ä»¶ï¼Œå°†ä»–çš„å±ä¸»å±ç»„ä¿®æ”¹é—®nginxçš„è¿è¡Œç”¨æˆ·å°±å¯ä»¥äº†&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;chown&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-R&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;nginx.nginx&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/etc/zabbix/web/maintenance.inc.php&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;å¦‚æœnginxçˆ¶è¿›ç¨‹æ˜¯æ˜¯rootè¿è¡Œçš„ï¼Œåˆ™ä¸ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;å®‰è£…å‰ç«¯æ—¶ç½‘é¡µå¤§é‡æŠ¥é”™&lt;a href=&quot;#å®‰è£…å‰ç«¯æ—¶ç½‘é¡µå¤§é‡æŠ¥é”™&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;&lt;/p&gt;&lt;figure&gt;&lt;img src=&quot;https://blog.freelytomorrow.com/articles_img/zabbix/php-session.png&quot; alt=&quot;&quot; /&gt;&lt;figcaption&gt;php-session&lt;/figcaption&gt;&lt;/figure&gt;
è¿™ä¸ªä¿å­˜çš„åŸå› æ˜¯ç¼ºå°‘phpçš„ä¼šè¯ç›®å½•ï¼Œä½¿ç”¨ä¸€æ¡å‘½ä»¤ä¿®å¤ï¼š&lt;p&gt;&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;mkdir&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-p&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/var/lib/php/session&lt;/span&gt;&lt;span&gt; &amp;amp;&amp;amp; &lt;/span&gt;&lt;span&gt;chmod&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1733&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/var/lib/php/session&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;æ— æ³•æ˜¾ç¤ºä¸­æ–‡&lt;a href=&quot;#æ— æ³•æ˜¾ç¤ºä¸­æ–‡&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;åœ¨é€‰é¡¹ä¸­ä¿®æ”¹ç•Œé¢è¯­è¨€ä¸ºä¸­æ–‡åï¼Œä¸­æ–‡å…¨æ˜¯æ–¹å—ï¼Œè¿™æ˜¯å› ä¸ºç¼ºå°‘zabbixæ‰€éœ€çš„å­—ä½“ã€‚&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# å®‰è£…å­—ä½“&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;yum&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;install&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;wqy-microhei-fonts&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-y&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# æ›¿æ¢é»˜è®¤å­—ä½“&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;cp&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/usr/share/fonts/wqy-microhei/wqy-microhei.ttc&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/usr/share/zabbix/assets/fonts/graphfont.ttf&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;è‡ªå®šä¹‰ç›‘æ§é¡¹&lt;a href=&quot;#è‡ªå®šä¹‰ç›‘æ§é¡¹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;ç›‘æ§dockerå®¹å™¨çŠ¶æ€&lt;a href=&quot;#ç›‘æ§dockerå®¹å™¨çŠ¶æ€&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;é¦–å…ˆåˆ›å»ºä¸€ä¸ªshellè„šæœ¬ï¼Œè¿™ä¸ªè„šæœ¬ä¸»è¦æ˜¯åˆ©ç”¨&lt;code&gt;docker ps | grep&lt;/code&gt;æ¥æŸ¥çœ‹æŒ‡å®šçš„å®¹å™¨æ˜¯å¦æ­£åœ¨è¿è¡Œï¼Œå¦‚æœæ­£åœ¨è¿è¡Œåˆ™è¿”å›1ï¼Œå¦åˆ™è¿”å›0&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;#!/bin/bash&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;result&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;$(&lt;/span&gt;&lt;/span&gt;&lt;span&gt;docker&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;ps&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;grep&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;$1&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt;&lt;span&gt; [ &lt;/span&gt;&lt;span&gt;-z&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;$result&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt; ]; &lt;/span&gt;&lt;span&gt;then&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;echo&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;0&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;else&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;echo&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;1&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;fi&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;unset&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;result&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;ç¼–å†™zabbix-agentç›‘æ§é¡¹é…ç½®æ–‡ä»¶&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;echo&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;UserParameter=container.status[*],/bin/bash /etc/zabbix/scripts/docker_containers.sh $1&apos;&lt;/span&gt;&lt;span&gt; &amp;gt; &lt;/span&gt;&lt;span&gt;/etc/zabbix/zabbix_agentd.d/docker_containers.conf&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;å°†dockerç”¨æˆ·ç»„è®¾ç½®ä¸ºzabbixç”¨æˆ·çš„é™„åŠ ç»„&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;usermod&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-aG&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;docker&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;zabbix&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;ä¿®æ”¹dockerçš„socketæ–‡ä»¶æƒé™&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;chmod&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;666&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/run/docker.sock&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;ä¿®æ”¹å®Œæƒé™åï¼Œzabbixç”¨æˆ·æ‰èƒ½æœ‰æƒé™è®¿é—®åˆ°dockerçš„å®¹å™¨åˆ—è¡¨ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;ä½¿ç”¨zabbix_getå‘½ä»¤ç¡®è®¤ç›‘æ§é¡¹æ˜¯å¦ç”Ÿæ•ˆ&lt;a href=&quot;#ä½¿ç”¨zabbix_getå‘½ä»¤ç¡®è®¤ç›‘æ§é¡¹æ˜¯å¦ç”Ÿæ•ˆ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;zabbix_get&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-s&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;127.0.0.1&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-k&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;container.status[alist_alist_1]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;å¦‚æœå¾—åˆ°äº†é¢„æœŸçš„ç»“æœ(1æˆ–0)ï¼Œåˆ™è¯´æ˜è¯¥ç›‘æ§é¡¹å¯ä»¥æ­£å¸¸ä½¿ç”¨ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;åœ¨zabbixå‰ç«¯é…ç½®ç›‘æ§é¡¹&lt;a href=&quot;#åœ¨zabbixå‰ç«¯é…ç½®ç›‘æ§é¡¹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;section&gt;&lt;h4&gt;æ–°å»ºä¸€ä¸ªdockeræ¨¡æ¿&lt;a href=&quot;#æ–°å»ºä¸€ä¸ªdockeræ¨¡æ¿&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;&lt;/p&gt;&lt;figure&gt;&lt;img src=&quot;https://blog.freelytomorrow.com/articles_img/zabbix/template.png&quot; alt=&quot;&quot; /&gt;&lt;figcaption&gt;zabbix-template&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;ç»™æ¨¡æ¿åˆ›å»ºç›‘æ§é¡¹&lt;a href=&quot;#ç»™æ¨¡æ¿åˆ›å»ºç›‘æ§é¡¹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;&lt;/p&gt;&lt;figure&gt;&lt;img src=&quot;https://blog.freelytomorrow.com/articles_img/zabbix/create.png&quot; alt=&quot;&quot; /&gt;&lt;figcaption&gt;create&lt;/figcaption&gt;&lt;/figure&gt;
ç„¶åç‚¹å‡»å³ä¸Šè§’ï¼šåˆ›å»ºç›‘æ§é¡¹
&lt;figure&gt;&lt;img src=&quot;https://blog.freelytomorrow.com/articles_img/zabbix/create2.png&quot; alt=&quot;&quot; /&gt;&lt;figcaption&gt;create&lt;/figcaption&gt;&lt;/figure&gt;
é”®å€¼å¡«å†™æˆ‘ä»¬åœ¨zabbix-agentd.dç›®å½•ä¸‹åˆ›å»ºçš„é…ç½®æ–‡ä»¶ï¼Œæ–¹æ‹¬å·ä¸­å¯ä»¥å¡«dockerçš„åå­—æˆ–è€…docker idã€‚&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;æŸ¥çœ‹æœ€æ–°æ•°æ®&lt;a href=&quot;#æŸ¥çœ‹æœ€æ–°æ•°æ®&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;&lt;/p&gt;&lt;figure&gt;&lt;img src=&quot;https://blog.freelytomorrow.com/articles_img/zabbix/data.png&quot; alt=&quot;&quot; /&gt;&lt;figcaption&gt;create&lt;/figcaption&gt;&lt;/figure&gt;
ä¸‰ä¸ªå®¹å™¨éƒ½åœ¨è¿è¡Œä¸­ã€‚&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;åˆ›å»ºè§¦å‘å™¨&lt;a href=&quot;#åˆ›å»ºè§¦å‘å™¨&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;è§¦å‘å™¨æ˜¯å½“ç›‘æ§é¡¹æ»¡è¶³ä¸€å®šæ¡ä»¶æ—¶å°±ä¼šè‡ªåŠ¨è§¦å‘çš„åŠ¨ä½œï¼Œä¸€èˆ¬æ˜¯ç”¨æ¥æä¾›å‘Šè­¦ä¿¡æ¯ï¼Œæ¯”å¦‚å½“æŸä¸ªå®¹å™¨çš„çŠ¶æ€ä¸º0æ—¶ï¼Œå°±æç¤ºè­¦æŠ¥ã€‚
&lt;/p&gt;&lt;figure&gt;&lt;img src=&quot;https://blog.freelytomorrow.com/articles_img/zabbix/trigger.png&quot; alt=&quot;&quot; /&gt;&lt;figcaption&gt;create&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;</content:encoded></item><item><title>Redisé’ˆå¯¹å¸¸è§WARNINGçš„ä¼˜åŒ–</title><link>https://white-festa.net/posts/redis-warning/</link><guid isPermaLink="true">https://white-festa.net/posts/redis-warning/</guid><description>æè¿°äº†å‡ ç§Redisæ—¥å¿—ä¸­å¸¸è§çš„è­¦æŠ¥å’Œæ•´æ”¹æªæ–½</description><pubDate>Tue, 15 Aug 2023 00:00:00 GMT</pubDate><content:encoded>&lt;section&gt;&lt;h2&gt;é“¾æ¥æ•°è­¦å‘Š&lt;a href=&quot;#é“¾æ¥æ•°è­¦å‘Š&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;&lt;code&gt;WARNING: The TCP backlog setting of 511 cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower value of 128.&lt;/code&gt;&lt;/p&gt;&lt;p&gt;è¿™ä¸ªè­¦å‘Šçš„ä¸»è¦å†…å®¹æ˜¯å‘ŠçŸ¥å½“å‰çš„TCP backlogçš„è®¾ç½®å€¼å¤ªä½ï¼Œåªæœ‰128ï¼› TCP Backlogæ˜¯é˜Ÿåˆ—ä¿ç•™çš„é“¾æ¥æŒ‚èµ·æ•°ï¼Œå½“å¤šä¸ªå®¢æˆ·ç«¯è¿æ¥åˆ°æœåŠ¡å™¨æ—¶ï¼ŒæœåŠ¡å™¨ä¼šå°†ä¼ å…¥çš„è¯·æ±‚ä¿å­˜åœ¨ä¸€ä¸ªé˜Ÿåˆ—ä¸­ã€‚å®¢æˆ·ç«¯æ’åˆ—åœ¨é˜Ÿåˆ—ä¸­ï¼ŒæœåŠ¡å™¨éšç€queue-memberçš„è¿›è¡Œï¼Œä¸€ä¸ªä¸€ä¸ªåœ°å¤„ç†ä»–ä»¬çš„è¯·æ±‚ã€‚è¿™ç§è¿æ¥çš„æ€§è´¨ç§°ä¸ºæ’é˜Ÿè¿æ¥ã€‚&lt;/p&gt;&lt;p&gt;128æ˜¯ä¸€ä¸ªå¾ˆçŸ­çš„å€¼ï¼Œå¦‚æœè¯·æ±‚é‡æ¯”è¾ƒå¤§çš„è¯ï¼Œå¯èƒ½ä¼šå¯¼è‡´è§¦å‘å¤§é‡çš„TCPé‡ä¼ ï¼Œå¯¼è‡´ç½‘ç»œå¸¦å®½çš„æ‹¥å¡ï¼Œå› æ­¤ï¼Œå°†TCP Backlogè®¾ç½®ä¸ºä¸€ä¸ªæ°å½“çš„å€¼æ˜¯æœ‰å¿…è¦çš„ã€‚å…·ä½“æ–¹æ³•ï¼š&lt;/p&gt;&lt;p&gt;ç¼–è¾‘&lt;code&gt;/etc/sysctl.conf&lt;/code&gt;æ–‡ä»¶ï¼ŒåŠ å…¥ä¸€è¡Œé…ç½®ï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;net.core.somaxconn&lt;/span&gt;&lt;span&gt;=1024&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;ç„¶åä½¿ç”¨&lt;code&gt;sysctl -p&lt;/code&gt;å‘½ä»¤é‡è½½é…ç½®ï¼Œæœ€åé‡å¯redis-serverï¼Œå¯ä»¥å‘ç°è¯¥è­¦å‘Šå·²ç»æ¶ˆå¤±ã€‚&lt;/p&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;å†…å­˜ä½¿ç”¨è¿‡è½½æœªå¼€å¯è­¦å‘Š&lt;a href=&quot;#å†…å­˜ä½¿ç”¨è¿‡è½½æœªå¼€å¯è­¦å‘Š&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;&lt;code&gt;WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add &apos;vm.overcommit_memory = 1&apos; to /etc/sysctl.conf and then reboot or run the command &apos;sysctl vm.overcommit_memory=1&apos; for this to take effect.&lt;/code&gt;&lt;/p&gt;&lt;p&gt;è¿™ä¸ªè­¦å‘Šæ˜¯å‘ŠçŸ¥ç”¨æˆ·å½“å‰ç³»ç»Ÿæœªå¼€å¯å†…å­˜è¿‡è½½ã€‚overcommit_memoryå‚æ•°ç¡®å®šç³»ç»Ÿæ˜¯å¦å…è®¸è¶…å‡ºç‰©ç† RAM å’Œäº¤æ¢ç©ºé—´çš„å†…å­˜åˆ†é…ã€‚å½“å®ƒè®¾ç½®ä¸º0æ—¶ï¼Œæ„å‘³ç€å†…æ ¸å°†åœ¨å…è®¸å†…å­˜åˆ†é…è¯·æ±‚ä¹‹å‰æ€»æ˜¯æ£€æŸ¥æ˜¯å¦æœ‰è¶³å¤Ÿçš„æ€»å†…å­˜(RAM + äº¤æ¢åŒº)ã€‚å¦åˆ™ï¼Œåˆ†é…è¯·æ±‚å°†å¤±è´¥å¹¶å‡ºç°å†…å­˜ä¸è¶³é”™è¯¯ã€‚&lt;br /&gt;
ç”±äºRedisé«˜åº¦ä¾èµ–å†…å­˜ä½¿ç”¨ï¼Œè¯¥å‚æ•°è®¾ç½®ä¸º0æ—¶ä¼šå¯¼è‡´ç³»ç»Ÿå†…å­˜çš„ä½¿ç”¨æ•ˆç‡ä½ä¸‹ï¼Œå¯èƒ½å¯¼è‡´Redisåœ¨Forkå­è¿›ç¨‹ä»¥è¿›è¡ŒBGSAVEæ—¶å¤±è´¥ï¼Œç”šè‡³å¯èƒ½å¼•èµ·Rediså´©æºƒã€‚&lt;br /&gt;
é€šè¿‡å°†è¯¥å‚æ•°è®¾å®šä¸º1å¯ä»¥æ¶ˆé™¤æ­¤è­¦å‘Šï¼›ä¿®æ”¹&lt;code&gt;etc/sysctl.conf&lt;/code&gt;æ–‡ä»¶å¹¶å°†è¯¥å‚æ•°çš„å€¼è®¾å®šä¸º1.&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;vm.overcommit_memory&lt;/span&gt;&lt;span&gt;=1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;ç„¶åä½¿ç”¨&lt;code&gt;sysctl -p&lt;/code&gt;å‘½ä»¤é‡è½½é…ç½®ï¼Œæœ€åé‡å¯redis-serverï¼Œå¯ä»¥å‘ç°è¯¥è­¦å‘Šå·²ç»æ¶ˆå¤±ã€‚&lt;/p&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;ç¦ç”¨é€æ˜å¤§é¡µè­¦å‘Š&lt;a href=&quot;#ç¦ç”¨é€æ˜å¤§é¡µè­¦å‘Š&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;&lt;code&gt;WARNING you have Transparent Huge Pages (THP) support enabled in your kernel. This will create latency and memory usage issues with Redis. To fix this issue run the command &apos;echo never &amp;gt; /sys/kernel/mm/transparent_hugepage/enabled&apos; as root, and add it to your /etc/rc.local in order to retain the setting after a reboot. Redis must be restarted after THP is disabled.&lt;/code&gt;&lt;/p&gt;&lt;p&gt;é€æ˜å¤§é¡µ(ç®€ç§°THP)æ˜¯Linuxçš„ä¸€ç§å†…å­˜ç®¡ç†ç³»ç»Ÿï¼Œå®ƒé€šè¿‡ä½¿ç”¨è¾ƒå¤§çš„å†…å­˜é¡µæ¥å‡å°‘å…·æœ‰å¤§é‡å†…å­˜çš„è®¡ç®—æœºä¸Šçš„è½¬æ¢åå¤‡ç¼“å†²åŒº (TLB) æŸ¥æ‰¾çš„å¼€é”€ã€‚&lt;br /&gt;&lt;/p&gt;&lt;p&gt;é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸€ä¸ªå†…å­˜åˆ†é¡µçš„å¤§å°ä¸º4KBï¼Œåœ¨å¼€å¯THPçš„æƒ…å†µä¸‹ï¼Œä¸€ä¸ªå†…å­˜å¤§é¡µä¸º2MBï¼›è¿™ä¹ˆçœ‹æ¥THPèƒ½å¤Ÿå‡å°‘å†…å­˜åˆ†é…çš„æ¬¡æ•°ï¼Œä¹Ÿå¯ä»¥å¢åŠ å­è¿›ç¨‹forkæ—¶çš„é€Ÿåº¦ï¼Œä½†æ˜¯ï¼Œç”±äºredisé‡‡ç”¨çš„å†™æ—¶å¤åˆ¶çš„æœºåˆ¶ï¼Œä¸€æ—¦æœ‰æ•°æ®éœ€è¦è¢«ä¿®æ”¹ï¼Œredisä¸ä¼šç›´æ¥ä¿®æ”¹å†…å­˜æ•°æ®ï¼Œè€Œæ˜¯copyä¸€ä»½è¯¥æ•°æ®å¹¶è¿›è¡Œä¿®æ”¹ï¼›&lt;br /&gt;&lt;/p&gt;&lt;p&gt;è¿™å°±å¯¼è‡´äº†ï¼Œåœ¨THPå¼€å¯çš„æƒ…å†µä¸‹ï¼Œå³ä½¿è¦ä¿®æ”¹çš„æ•°æ®ç›´æœ‰2KBï¼Œredisä¹Ÿè¦å¤åˆ¶ä¸€ä¸ª2MBçš„å†…å­˜å¤§é¡µï¼Œè¿™æ„å‘³ç€å•æ¬¡å¤åˆ¶çš„å¼€é”€æ˜¯å…³é—­å†…å­˜å¤§é¡µæ—¶çš„ä¸Šç™¾å€ï¼Œä¼šä¸¥é‡æ‹–æ…¢å†™æ“ä½œçš„æ‰§è¡Œæ—¶é—´ï¼Œå› æ­¤ï¼Œrediså®˜æ–¹å»ºè®®æ˜¯å…³é—­THPä»¥å¢å¼ºå†™æ€§èƒ½ã€‚&lt;/p&gt;&lt;section&gt;&lt;h3&gt;è§£å†³æ–¹æ³•&lt;a href=&quot;#è§£å†³æ–¹æ³•&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;ä¸´æ—¶å…³é—­ï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;echo&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;never&lt;/span&gt;&lt;span&gt; &amp;gt; &lt;/span&gt;&lt;span&gt;/sys/kernel/mm/transparent_hugepage/enabled&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;æ°¸ä¹…å…³é—­ï¼š
ç¼–è¾‘&lt;code&gt;/etc/rc.local&lt;/code&gt;æ–‡ä»¶ï¼ŒåŠ ä¸Šå¦‚ä¸‹ä»£ç &lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;test&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-f&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/sys/kernel/mm/redhat_transparent_hugepage/enabled&lt;/span&gt;&lt;span&gt;; &lt;/span&gt;&lt;span&gt;then&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;echo&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;never&lt;/span&gt;&lt;span&gt; &amp;gt; &lt;/span&gt;&lt;span&gt;/sys/kernel/mm/redhat_transparent_hugepage/enabled&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;fi&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;éªŒè¯THPçŠ¶æ€ï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[root@db-51 /opt/redis/logs]#cat /sys/kernel/mm/transparent_hugepage/enabled&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;always madvise [never]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;hr /&gt;&lt;p&gt;é‡å¯rediså&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;6783:C 16 Aug 2023 21:44:38.219 # oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;6783:C 16 Aug 2023 21:44:38.219 # Redis version=5.0.7, bits=64, commit=00000000, modified=0, pid=6783, just started&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;6783:C 16 Aug 2023 21:44:38.219 # Configuration loaded&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;6784:M 16 Aug 2023 21:44:38.220 * Increased maximum number of open files to 10032 (it was originally set to 1024).&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;6784:M 16 Aug 2023 21:44:38.221 * Running mode=standalone, port=6379.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;6784:M 16 Aug 2023 21:44:38.221 # Server initialized&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;6784:M 16 Aug 2023 21:44:38.221 * Ready to accept connections&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;å¯ä»¥å‘ç°ä¹‹å‰çš„è­¦å‘Šéƒ½å·²ç»æ¶ˆå¤±ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;</content:encoded></item><item><title>ä¸€ä¸ªæŸ¥çœ‹åŸŸåsslè®¤è¯æœ‰æ•ˆæœŸçš„è„šæœ¬</title><link>https://white-festa.net/posts/ssl-cert-expire/</link><guid isPermaLink="true">https://white-festa.net/posts/ssl-cert-expire/</guid><description>ä¸€ä¸ªæŸ¥çœ‹åŸŸåsslè®¤è¯æœ‰æ•ˆæœŸçš„shellè„šæœ¬</description><pubDate>Mon, 14 Aug 2023 00:00:00 GMT</pubDate><content:encoded>&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;server_name&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;$1&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# è·å–ç½‘ç«™çš„è¯ä¹¦æœ‰æ•ˆæœŸ&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ssl_time&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;$(&lt;/span&gt;&lt;/span&gt;&lt;span&gt;echo&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;openssl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;s_client&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-servername&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&lt;span&gt;${&lt;/span&gt;&lt;span&gt;server_name&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;-connect&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&lt;span&gt;${&lt;/span&gt;&lt;span&gt;server_name&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span&gt;:443&lt;/span&gt;&lt;span&gt; 2&amp;gt;&lt;/span&gt;&lt;span&gt;/dev/null&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;openssl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;x509&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-noout&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-dates&lt;/span&gt;&lt;span&gt;|&lt;/span&gt;&lt;span&gt;awk&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-F&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;=&apos;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;/notAfter/{print $2}&apos;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# è½¬æ¢æ—¶é—´æˆ³&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ssl_unix_time&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;$(&lt;/span&gt;&lt;/span&gt;&lt;span&gt;date&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;+%s&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-d&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;&lt;span&gt;${&lt;/span&gt;&lt;span&gt;ssl_time&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# è·å–ä»Šå¤©æ—¶é—´æˆ³&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;today&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;$(&lt;/span&gt;&lt;/span&gt;&lt;span&gt;date&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;+%s&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# è®¡ç®—å‰©ä½™æ—¶é—´&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;expr_time=&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;$ssl_unix_time&lt;/span&gt;&lt;span&gt;-&lt;/span&gt;&lt;span&gt;$today&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;/24/3600&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;echo&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;&lt;span&gt;${&lt;/span&gt;&lt;span&gt;server_name&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span&gt; : SSL Certification Expired in &lt;/span&gt;&lt;span&gt;$expr_time&lt;/span&gt;&lt;span&gt; days. &quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;
&lt;section&gt;&lt;h3&gt;ä½¿ç”¨&lt;a href=&quot;#ä½¿ç”¨&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[root@wordpress-187 ~]#./ssl_expire.sh blog.freelytomorrow.com&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;blog.freelytomorrow.com&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;SSL&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Certification&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Expired&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;in&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;247&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;days.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;</content:encoded></item><item><title>é€šè¿‡dockerhubçš„å®˜æ–¹APIæŸ¥æ‰¾å®˜æ–¹é•œåƒçš„å†å²ç‰ˆæœ¬</title><link>https://white-festa.net/posts/docker-search/</link><guid isPermaLink="true">https://white-festa.net/posts/docker-search/</guid><description>ä¸€é”®æŸ¥æ‰¾å®˜æ–¹é•œåƒçš„å†å²ç‰ˆæœ¬</description><pubDate>Sat, 01 Jul 2023 00:00:00 GMT</pubDate><content:encoded>&lt;section&gt;&lt;h2&gt;å‘½ä»¤&lt;a href=&quot;#å‘½ä»¤&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;curl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-L&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-s&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;https://registry.hub.docker.com/v2/repositories/library/&lt;/span&gt;&lt;span&gt;$1&lt;/span&gt;&lt;span&gt;/tags?page_size=1024&quot;&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;jq&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;.results[][&quot;name&quot;]&apos;&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;sed&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;s/\&quot;//g&apos;&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;sort&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-u&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;ç”¨æ³•&lt;a href=&quot;#ç”¨æ³•&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;å¯ä»¥å°†ä¸Šé¢çš„å‘½ä»¤å†™æˆä¸€ä¸ªshellè„šæœ¬ï¼Œè¿è¡Œè„šæœ¬æ¥æŸ¥æ‰¾ã€‚
å¦‚ï¼š&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[root@wordpress-187 /opt/ShellScripts]#./search-tag.sh centos&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;5&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;5.11&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;6&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;6.10&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;6.6&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;6.7&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;6.8&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;6.9&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;7&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;7.0.1406&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;7.1.1503&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;7.2.1511&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;7.3.1611&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;7.4.1708&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;7.5.1804&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;7.6.1810&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;7.7.1908&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;7.8.2003&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;7.9.2009&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;8&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;8.1.1911&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;8.2.2004&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;8.3.2011&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;8.4.2105&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;centos5&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;27&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;centos5.11&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;28&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;centos6&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;29&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;centos6.10&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;30&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;centos6.6&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;31&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;centos6.7&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;32&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;centos6.8&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;33&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;centos6.9&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;34&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;centos7&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;35&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;centos7.0.1406&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;36&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;centos7.1.1503&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;37&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;centos7.2.1511&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;38&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;centos7.3.1611&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;39&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;centos7.4.1708&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;40&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;centos7.5.1804&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;41&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;centos7.6.1810&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;42&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;centos7.7.1908&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;43&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;centos7.8.2003&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;44&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;centos7.9.2009&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;45&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;centos8&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;46&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;centos8.1.1911&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;47&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;centos8.2.2004&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;48&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;centos8.3.2011&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;49&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;centos8.4.2105&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;50&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;latest&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;</content:encoded></item><item><title>Redis clusteråˆ†ç‰‡å­˜å‚¨æŠ€æœ¯</title><link>https://white-festa.net/posts/redis-cluster/</link><guid isPermaLink="true">https://white-festa.net/posts/redis-cluster/</guid><description>Redisåˆ†ç‰‡å­˜å‚¨ - å°†å¤§é‡æ•°æ®åˆ†å¸ƒå¼å­˜å‚¨åœ¨å¤šä¸ªRedisæ•°æ®åº“å®ä¾‹ä¸­</description><pubDate>Sun, 25 Jun 2023 00:00:00 GMT</pubDate><content:encoded>&lt;section&gt;&lt;h2&gt;ä»€ä¹ˆæ˜¯åˆ†ç‰‡å­˜å‚¨&lt;a href=&quot;#ä»€ä¹ˆæ˜¯åˆ†ç‰‡å­˜å‚¨&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;ç”±äºredisæ˜¯åŸºäºå†…å­˜çš„æ•°æ®åº“ï¼Œä¸åƒä¼ ç»Ÿçš„æ•°æ®åº“å¯ä»¥é€šè¿‡å¤§é‡æ‰©å±•ç£ç›˜æ¥æ‰©å¤§å­˜å‚¨èƒ½åŠ›ï¼Œå› æ­¤å¼€å‘äº†åˆ†ç‰‡å­˜å‚¨çš„æŠ€æœ¯ï¼›åˆ†ç‰‡å­˜å‚¨å°±æ˜¯å°†å¤§é‡æ•°æ®åˆ†å¸ƒå¼å­˜å‚¨åœ¨å¤šä¸ªrediså®ä¾‹ä¸­ã€‚&lt;/p&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;redis clusteræ ¸å¿ƒæ¦‚å¿µ&lt;a href=&quot;#redis-clusteræ ¸å¿ƒæ¦‚å¿µ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;redisé›†ç¾¤é€šè¿‡å“ˆå¸Œæ§½çš„æ¦‚å¿µï¼Œæ¥å†³å®škeyæ”¾åœ¨å“ªä¸ªæ§½é‡Œï¼Œä¸€ä¸ªredisé›†ç¾¤æœ€å¤šæœ‰16384ä¸ªå“ˆå¸Œæ§½ï¼›&lt;/li&gt;
&lt;li&gt;æ¯ä¸€ä¸ªkeyé€šè¿‡CRC16ç®—æ³•æ ¡éªŒåå†³å®šæ”¾å…¥å“ªä¸ªæ§½ä½ï¼›&lt;/li&gt;
&lt;li&gt;redisé›†ç¾¤ä¸­çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè´Ÿè´£ä¸€éƒ¨åˆ†å“ˆå¸Œæ§½ï¼ˆhash slotï¼‰ï¼›ä¾‹å¦‚é›†ç¾¤ä¸­æœ‰ä¸‰ä¸ªèŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹Aè´Ÿè´£0-5500ï¼ŒèŠ‚ç‚¹Bè´Ÿè´£5501-11000ï¼ŒèŠ‚ç‚¹cè´Ÿè´£11001-16384ã€‚&lt;/li&gt;
&lt;li&gt;æ§½ä½å¿…é¡»åˆ†é…æ­£ç¡®(æ”¶å°¾ç›¸è¿)ï¼Œå¦åˆ™é›†ç¾¤æ— æ³•ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;redisé€šè¿‡ hash tagsåŠŸèƒ½ï¼Œå®ç°å°†å¤šä¸ªç›¸å…³çš„keyï¼Œæ”¾åˆ°åŒä¸€ä¸ªhash slotä¸­&lt;/li&gt;
&lt;li&gt;redisé›†ç¾¤çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œéƒ½æœ‰å”¯ä¸€çš„åå­—ï¼Œç”±åå…­è¿›åˆ¶çš„æ•°å­—è¡¨ç¤ºï¼Œä¸€èˆ¬åŸºäº/dev/urandomè‡ªåŠ¨ç”Ÿæˆã€‚ä¸”èŠ‚ç‚¹åœ¨é…ç½®æ–‡ä»¶ä¸­ä¿ç•™IDï¼Œé™¤éç”¨æˆ·ä¸»åŠ¨æ‰§è¡Œ&lt;code&gt;cluster reset hard&lt;/code&gt;æˆ–è€…&lt;code&gt;hard reset&lt;/code&gt;èŠ‚ç‚¹ã€‚ä¸»è¦å­˜å‚¨çš„ä¿¡æ¯æ˜¯:
&lt;code&gt;node id, address:port, flags, last ping sent, last pong received, configuration epoch, link state, slots&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;redisé›†ç¾¤æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½ç›¸äº’pingï¼Œå»ºç«‹äº†TCPè¿æ¥ï¼Œä¸”ä¿å­˜æ´»è·ƒæ€§ï¼ŒæœŸæœ›å¾—åˆ°å¯¹æ–¹èŠ‚ç‚¹çš„pongå›å¤ã€‚&lt;/li&gt;
&lt;li&gt;redisè¯·æ±‚é‡å®šå‘
redis clusteré‡‡ç”¨å»ä¸­å¿ƒåŒ–çš„æ¶æ„ï¼Œé›†ç¾¤çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½å¤åˆ¶ä¸€éƒ¨åˆ†æ§½ä½ï¼Œå®¢æˆ·ç«¯åœ¨å†™å…¥keyæ—¶ï¼Œåˆ°åº•æ”¾åˆ°å“ªä¸ªæ§½ä½å‘¢ï¼Ÿ
&lt;ul&gt;
&lt;li&gt;æ£€æŸ¥å½“å‰keyæ˜¯å¦å­˜åœ¨äºnodeï¼šåŸºäºcrc16ç®—æ³•/16384å–æ¨¡è®¡ç®—ï¼Œå¾—åˆ°slotæ§½ä½ï¼Œç„¶åæŸ¥è¯¢è´Ÿè´£è¯¥slotçš„èŠ‚ç‚¹&lt;/li&gt;
&lt;li&gt;è‹¥slotä¸æ˜¯è‡ªèº«ï¼Œè‡ªåŠ¨è¿›è¡Œmovedé‡å®šå‘&lt;/li&gt;
&lt;li&gt;è‹¥slotæ˜¯è‡ªèº«ï¼Œä¸”keyåœ¨sloté‡Œï¼Œç«‹å³è¿”å›è¯¥keyçš„ç»“æœ&lt;/li&gt;
&lt;li&gt;è‹¥keyä¸åœ¨å½“å‰èŠ‚ç‚¹sloté‡Œï¼Œæ£€æŸ¥slotæ˜¯å¦åœ¨migratingï¼Œæ•°æ®è¿ç§»ä¸­&lt;/li&gt;
&lt;li&gt;å¦‚æœkeyæ­£åœ¨è¿ç§»ï¼Œè¿”å›aské”™è¯¯ç»™å®¢æˆ·ç«¯&lt;/li&gt;
&lt;li&gt;è‹¥slotæœªè¿ç§»ï¼Œæ£€æŸ¥slotæ˜¯å¦åœ¨å¯¼å…¥ä¸­&lt;/li&gt;
&lt;li&gt;è‹¥slotåœ¨å¯¼å…¥ä¸­ï¼Œä¸”æœ‰askingæ ‡è®°ï¼Œåˆ™ç›´æ¥æ“ä½œ&lt;/li&gt;
&lt;li&gt;å¦åˆ™è¿”å›movedé‡å®šå‘ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;éƒ¨ç½²Redis cluster&lt;a href=&quot;#éƒ¨ç½²redis-cluster&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;clusteré»˜è®¤æ˜¯åŸºäºä¸»ä»å¤åˆ¶çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªæ‹¥æœ‰ä¸‰ä¸ªèŠ‚ç‚¹çš„é›†ç¾¤ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ªä»åº“ã€‚è¿™é‡Œä¸ºæ¯å°è™šæ‹Ÿæœºéƒ¨ç½²ä¸¤ä¸ªredisï¼Œä¸€ä¸»ä¸€ä»ï¼Œä¸»åº“ç«¯å£6379ï¼Œä»åº“6380ã€‚&lt;/p&gt;&lt;section&gt;&lt;h3&gt;ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œå¼€å¯clusteråŠŸèƒ½&lt;a href=&quot;#ä¿®æ”¹é…ç½®æ–‡ä»¶å¼€å¯clusteråŠŸèƒ½&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;ä¸»è¦åŸºäºä»¥ä¸‹ä¸‰ä¸ªå‚æ•°ï¼Œ&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;cluster-enabled&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;yes&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;cluster-config-file&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;cluster-80.conf&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;cluster-node-timeout&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;15000&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;cluster-80.confæ˜¯clusteré›†ç¾¤çš„é…ç½®æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶ä¼šè‡ªåŠ¨ç”Ÿæˆåœ¨dirå£°æ˜çš„è·¯å¾„ä¸‹ï¼Œå†…å®¹æ˜¯é›†ç¾¤çš„èŠ‚ç‚¹å’ŒçŠ¶æ€&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;6ec8824c24f475852a4770ff7bdec2d145a8c3c1&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;:6379@16379&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;myself,master&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;connected&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;9189&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;vars&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;currentEpoch&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;lastVoteEpoch&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;é‡æ–°å¯åŠ¨rediså¹¶æŸ¥çœ‹è¿›ç¨‹ï¼Œå¯ä»¥å‘ç°redisç›®å‰æ˜¯ä»¥é›†ç¾¤çŠ¶æ€è¿è¡Œ&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[root@db-53 /lib/systemd/system]#ps -ef | &lt;/span&gt;&lt;span&gt;grep&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;redis&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;root&lt;/span&gt;&lt;span&gt;       &lt;/span&gt;&lt;span&gt;3021&lt;/span&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;13:43&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;?&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;00:00:00&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/usr/local/bin/redis-server&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;172.16.1.53:6379&lt;/span&gt;&lt;span&gt; [cluster]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;root&lt;/span&gt;&lt;span&gt;       &lt;/span&gt;&lt;span&gt;3022&lt;/span&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;13:43&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;?&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;00:00:00&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/usr/local/bin/redis-server&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;172.16.1.53:6380&lt;/span&gt;&lt;span&gt; [cluster]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;serviceæœåŠ¡è„šæœ¬&lt;a href=&quot;#serviceæœåŠ¡è„šæœ¬&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[Unit]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Description&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Redis&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;cluster&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;master&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;After&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;syslog.target&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;network.target&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;remote-fs.target&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;nss-lookup.target&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[Service]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Type&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;forking&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ExecStart&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;/bin/bash&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-c&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;/usr/local/bin/redis-server /opt/redis/conf/redis.conf&apos;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ExecStop&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;/bin/bash&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-c&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;/usr/local/bin/redis-cli -h $(ifconfig eth1|awk &apos;NR==2{print&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;$2&lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&apos;) -p 6379 shutdown&apos;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Restart&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;always&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;PrivateTmp&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;True&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[Install]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;WantedBy&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;multi-user.target&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;masterå’Œslaveçš„æœåŠ¡è„šæœ¬ï¼Œé™¤äº†ExecStopçš„ç«¯å£å·ï¼Œå…¶ä»–éƒ½ä¸€æ ·ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;èŠ‚ç‚¹æ¡æ‰‹&lt;a href=&quot;#èŠ‚ç‚¹æ¡æ‰‹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;ä¸€ä¸ªmeetæ¶ˆæ¯ï¼Œå°±åƒpingå‘½ä»¤ï¼Œä¸”ä¼šå¼ºåˆ¶æ¥å—è€…ä½œä¸ºé›†ç¾¤çš„ä¸€ä¸ªèŠ‚ç‚¹&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;172.16.1.51:6379&lt;/span&gt;&lt;span&gt;&amp;gt; &lt;/span&gt;&lt;span&gt;cluster&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;meet&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;172.16.1.52&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;6379&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;OK&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;172.16.1.51:6379&lt;/span&gt;&lt;span&gt;&amp;gt; &lt;/span&gt;&lt;span&gt;cluster&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;meet&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;172.16.1.53&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;6379&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;OK&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;172.16.1.51:6379&lt;/span&gt;&lt;span&gt;&amp;gt; &lt;/span&gt;&lt;span&gt;cluster&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;meet&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;172.16.1.51&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;6380&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;OK&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;172.16.1.51:6379&lt;/span&gt;&lt;span&gt;&amp;gt; &lt;/span&gt;&lt;span&gt;cluster&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;meet&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;172.16.1.52&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;6380&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;OK&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;172.16.1.51:6379&lt;/span&gt;&lt;span&gt;&amp;gt; &lt;/span&gt;&lt;span&gt;cluster&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;meet&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;172.16.1.53&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;6380&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;OK&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;æŸ¥çœ‹é›†ç¾¤èŠ‚ç‚¹&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;172.16.1.51:6379&lt;/span&gt;&lt;span&gt;&amp;gt; &lt;/span&gt;&lt;span&gt;cluster&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;nodes&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;760041e23f2c58477989205c05e4f604c1ab6b61&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;172.16.1.52:6379@16379&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;master&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1695874978569&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;connected&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;dd643db1986c6f65f0a9730cc5db7cc0c95c4a4f&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;172.16.1.53:6379@16379&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;master&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1695874976000&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;5&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;connected&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;e6a3067c56e42ac16e0a82f40b215aac5a130489&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;172.16.1.53:6380@16380&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;master&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1695874977000&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;connected&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;8ea2f6efb0ce756497701a920ea0cbe32a5a4814&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;172.16.1.51:6379@16379&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;myself,master&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1695874974000&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;connected&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;2fe100ff72828302cbfd2daf15630c6578112f55&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;172.16.1.51:6380@16380&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;master&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1695874977000&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;3&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;connected&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;2a6f3639b4f114c3be1d5e1853cbb698f5423c9a&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;172.16.1.52:6380@16380&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;master&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1695874977556&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;4&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;connected&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;åˆ†é…æ§½ä½&lt;a href=&quot;#åˆ†é…æ§½ä½&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;è¿™é‡Œè¦æ³¨æ„åˆ†é…æ§½ä½ä¸€å®šè¦å‰åæ•°å­—æ”¶å°¾ç›¸æ¥ï¼Œé—è½ä»»ä½•ä¸€ä¸ªæ§½ä½éƒ½ä¼šå¯¼è‡´åˆ†é…å¤±è´¥ã€‚&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;redis-cli&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-h&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;172.16.1.51&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-p&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;6379&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;cluster&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;addslots&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;{0..5460}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;redis-cli&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-h&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;172.16.1.52&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-p&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;6379&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;cluster&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;addslots&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;{5461..10921}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;redis-cli&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-h&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;172.16.1.53&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-p&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;6379&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;cluster&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;addslots&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;{10922..16383}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;ç„¶åä½¿ç”¨&lt;code&gt;cluster info&lt;/code&gt;å‘½ä»¤æŸ¥çœ‹é›†ç¾¤çŠ¶æ€&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[root@db-51 /lib/systemd/system]#redis-cli -h 172.16.1.51 -p 6379 cluster info&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;cluster_state:ok&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;cluster_slots_assigned:16384&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;cluster_slots_ok:16384&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;cluster_slots_pfail:0&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;cluster_slots_fail:0&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;cluster_known_nodes:6&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;cluster_size:3&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;cluster_current_epoch:5&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;cluster_my_epoch:2&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;cluster_stats_messages_ping_sent:664&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;cluster_stats_messages_pong_sent:675&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;cluster_stats_messages_meet_sent:5&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;cluster_stats_messages_sent:1344&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;cluster_stats_messages_ping_received:675&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;cluster_stats_messages_pong_received:669&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;cluster_stats_messages_received:1344&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;cluster_state&lt;/code&gt;ä¸ºOKå°±æ˜¯åˆ†é…æˆåŠŸäº†&lt;/p&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;ä¸ºslaveèŠ‚ç‚¹æ·»åŠ å¤åˆ¶å…³ç³»&lt;a href=&quot;#ä¸ºslaveèŠ‚ç‚¹æ·»åŠ å¤åˆ¶å…³ç³»&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;è¯­æ³•æ˜¯ï¼š&lt;code&gt;cluster replicate master_id&lt;/code&gt;ï¼Œmaster_idå¯ä»¥ä½¿ç”¨&lt;code&gt;cluster nodes&lt;/code&gt;æŸ¥çœ‹&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[root@db-51 /lib/systemd/system]#redis-cli -h 172.16.1.51 -p 6380 cluster replicate 8ea2f6efb0ce756497701a920ea0cbe32a5a4814&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;OK&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[root@db-51 /lib/systemd/system]#redis-cli -h 172.16.1.52 -p 6380 cluster replicate 760041e23f2c58477989205c05e4f604c1ab6b61&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;OK&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[root@db-51 /lib/systemd/system]#redis-cli -h 172.16.1.53 -p 6380 cluster replicate dd643db1986c6f65f0a9730cc5db7cc0c95c4a4f&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;OK&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;æœ€åå†ç”¨cluster nodesç¡®è®¤ä¸€ä¸‹å¤åˆ¶å…³ç³»æ˜¯å¦æ­£ç¡®
&lt;/p&gt;&lt;figure&gt;&lt;img src=&quot;https://blog.freelytomorrow.com/articles_img/redis-cluster/cluster1.png&quot; alt=&quot;&quot; /&gt;&lt;figcaption&gt;clusterå¤åˆ¶å…³ç³»&lt;/figcaption&gt;&lt;/figure&gt;
å¦‚æœæ˜¯å®é™…ç”Ÿäº§ç¯å¢ƒçš„è¯ï¼Œä¸»ä»åº“å»ºè®®ä¸è¦æ”¾åœ¨åŒä¸€å°æœºå™¨ä¸Šï¼Œè¿™æ ·å¯ä»¥é˜²æ­¢çªå‘çš„æœºå™¨æˆ–ç³»ç»Ÿæ•…éšœå¯¼è‡´ä¸»ä»åº“åŒæ—¶å®•æœº&lt;p&gt;&lt;/p&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;æµ‹è¯•å†™å…¥æ•°æ®&lt;a href=&quot;#æµ‹è¯•å†™å…¥æ•°æ®&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;ä½¿ç”¨ä¸€ä¸ªforå¾ªç¯å†™å…¥2000æ¡æ•°æ®&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;for&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;i&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;in&lt;/span&gt;&lt;span&gt; {&lt;/span&gt;&lt;span&gt;1..2000}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;do&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;redis-cli&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-h&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;172.16.1.51&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-p&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;6379&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;set&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;k_&lt;/span&gt;&lt;span&gt;&lt;span&gt;${&lt;/span&gt;&lt;span&gt;i&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;data_&lt;/span&gt;&lt;span&gt;&lt;span&gt;${&lt;/span&gt;&lt;span&gt;i&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span&gt; &amp;amp;&amp;amp; &lt;/span&gt;&lt;span&gt;echo&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;Writing in key_&lt;/span&gt;&lt;span&gt;&lt;span&gt;${&lt;/span&gt;&lt;span&gt;i&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;done&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;section&gt;&lt;h3&gt;æ³¨æ„ï¼š&lt;a href=&quot;#æ³¨æ„&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;å‘é›†ç¾¤å†™å…¥æ•°æ®å¿…é¡»ä½¿ç”¨-cå‚æ•°ï¼Œå¦åˆ™ä¼šæ˜¾ç¤ºå¤§é‡çš„é‡å®šå‘é”™è¯¯ï¼Œè¿™æ˜¯å› ä¸ºæ ¹æ®CRC16ç®—æ³•å–æ¨¡è®¡ç®—åå¾—å‡ºçš„slotsç¼–å·ä¸åœ¨æœ¬æœºï¼Œå› æ­¤è¢«é‡å®šå‘å†™å…¥åˆ°äº†å…¶ä»–æœºå™¨ä¸Šï¼Œä½†æ˜¯éclusterå®¢æˆ·ç«¯å‘clusteræœåŠ¡ç«¯å†™å…¥æ•°æ®ä¼šå¯¼è‡´æ— æ³•å®Œæˆé‡å®šå‘ï¼Œå› æ­¤ä¼šå¯¼è‡´å¤§é‡çš„æŠ¥é”™å’Œæ•°æ®ä¸¢å¤±ã€‚&lt;/p&gt;&lt;p&gt;ç»“æœ&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[root@db-51 ~]#redis-cli -h 172.16.1.51 -p 6379 dbsize&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;integer&lt;/span&gt;&lt;span&gt;) &lt;/span&gt;&lt;span&gt;677&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[root@db-51 ~]#redis-cli -h 172.16.1.52 -p 6379 dbsize&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;integer&lt;/span&gt;&lt;span&gt;) &lt;/span&gt;&lt;span&gt;655&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[root@db-51 ~]#redis-cli -h 172.16.1.53 -p 6379 dbsize&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;integer&lt;/span&gt;&lt;span&gt;) &lt;/span&gt;&lt;span&gt;668&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;2000ä¸ªkeyåŸºæœ¬ä¸Šæ˜¯è¢«å¹³å‡å†™åˆ°äº†ä¸‰ä¸ªèŠ‚ç‚¹ä¹‹ä¸­ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;Redisåˆ†ç‰‡é›†ç¾¤è‡ªåŠ¨éƒ¨ç½²&lt;a href=&quot;#redisåˆ†ç‰‡é›†ç¾¤è‡ªåŠ¨éƒ¨ç½²&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;Redis 5.0ç‰ˆæœ¬ä»¥å‰&lt;a href=&quot;#redis-50ç‰ˆæœ¬ä»¥å‰&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;5.0ä¹‹å‰çš„ç‰ˆæœ¬éœ€è¦ç”¨åˆ°rediså®˜æ–¹æä¾›çš„ä¸€ä¸ªrubyè„šæœ¬ï¼Œè¿™ä¸ªè„šæœ¬è·¯å¾„åœ¨redisè½¯ä»¶åŒ…çš„/srcè·¯å¾„ä¸‹ã€‚
ç”±äºæ˜¯rubyè„šæœ¬ï¼Œæ‰€ä»¥éœ€è¦é…ç½®rubyç¯å¢ƒæ‰èƒ½é¡ºåˆ©æ‰§è¡Œã€‚&lt;/p&gt;&lt;section&gt;&lt;h4&gt;å®‰è£…rubyç¯å¢ƒ&lt;a href=&quot;#å®‰è£…rubyç¯å¢ƒ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;yum&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;install&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;rubygems&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-y&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;é…ç½®rubyè½¯ä»¶æº&lt;a href=&quot;#é…ç½®rubyè½¯ä»¶æº&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# ç§»é™¤é»˜è®¤è½¯ä»¶æº&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;gem&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;sources&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--remove&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;https://rubygems.org/&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# ä½¿ç”¨è…¾è®¯è½¯ä»¶æº&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;gem&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;sources&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-a&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;https://mirrors.cloud.tencent.com/rubygems/&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;é€šè¿‡rubyåŒ…ç®¡ç†å·¥å…·ï¼Œå®‰è£…æ“ä½œredisçš„æ¨¡å—&lt;a href=&quot;#é€šè¿‡rubyåŒ…ç®¡ç†å·¥å…·å®‰è£…æ“ä½œredisçš„æ¨¡å—&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;gem&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;install&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;redis&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-v&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;3.3.3&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;éƒ¨ç½²redisé›†ç¾¤&lt;a href=&quot;#éƒ¨ç½²redisé›†ç¾¤&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;./redis-trib.rb&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;create&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--replicas&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;172.16.1.51:6379&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;172.16.1.52:6379&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;172.16.1.53:6379&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;172.16.1.51:6380&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;172.16.1.52:6380&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;172.16.1.53:6380&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;è¿™é‡Œå› ä¸ºæˆ‘ä½¿ç”¨çš„æ˜¯5.0.7ç‰ˆæœ¬çš„redisï¼Œæ‰€ä»¥å¤±è´¥äº†ï¼Œæç¤ºè¯¥è„šæœ¬ä»¥ä¸å†å—æ”¯æŒï¼Œæ‰€æœ‰åŠŸèƒ½ä»¥è¢«æ•´åˆåˆ°redis-cliä¸­ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;Redis 5.0ä¹‹åç‰ˆæœ¬&lt;a href=&quot;#redis-50ä¹‹åç‰ˆæœ¬&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;å¦‚ä¹‹å‰æ‰€è¯´çš„ï¼Œredis-trib.rbçš„åŠŸèƒ½å·²ç»è¢«æ•´åˆåˆ°redis-cliä¸­ï¼Œéƒ¨ç½²æ›´åŠ ç®€å•äº†ã€‚&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;./redis-cli&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-h&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;172.16.1.51&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-p&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;6379&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--cluster&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;create&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;172.16.1.51:6379&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;172.16.1.52:6379&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;172.16.1.53:6379&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;172.16.1.51:6380&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;172.16.1.52:6380&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;172.16.1.53:6380&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--cluster-replicas&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;è¿™é‡Œçš„&lt;code&gt;--cluster-replicas 1&lt;/code&gt;è¡¨ç¤ºä¸ºæ¯ä¸ªä¸»åº“åˆ›å»ºä¸€ä¸ªä»åº“ï¼Œå¦‚æœæ˜¯ä¸€ä¸»ä¸¤ä»ï¼Œåé¢çš„å€¼å°±æ˜¯2ï¼›
&lt;code&gt;create&lt;/code&gt;åé¢è·Ÿçš„ipé¡ºåºæ˜¯å…ˆå†™master ipï¼Œå†å†™slave ipã€‚&lt;/p&gt;&lt;section&gt;&lt;h4&gt;ç»“æœ&lt;a href=&quot;#ç»“æœ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;gt;&amp;gt;&amp;gt; Performing hash slots allocation on 6 nodes...&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Master[0] -&amp;gt; Slots 0 - 5460&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Master[1] -&amp;gt; Slots 5461 - 10922&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Master[2] -&amp;gt; Slots 10923 - 16383&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Adding replica 172.16.1.52:6380 to 172.16.1.51:6379&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Adding replica 172.16.1.53:6380 to 172.16.1.52:6379&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Adding replica 172.16.1.51:6380 to 172.16.1.53:6379&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;M: 8ea2f6efb0ce756497701a920ea0cbe32a5a4814 172.16.1.51:6379&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;   &lt;/span&gt;&lt;/span&gt;&lt;span&gt;slots:[0-5460] (5461 slots) master&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;M: 760041e23f2c58477989205c05e4f604c1ab6b61 172.16.1.52:6379&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;   &lt;/span&gt;&lt;/span&gt;&lt;span&gt;slots:[5461-10922] (5462 slots) master&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;M: dd643db1986c6f65f0a9730cc5db7cc0c95c4a4f 172.16.1.53:6379&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;   &lt;/span&gt;&lt;/span&gt;&lt;span&gt;slots:[10923-16383] (5461 slots) master&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;S: 2fe100ff72828302cbfd2daf15630c6578112f55 172.16.1.51:6380&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;   &lt;/span&gt;&lt;/span&gt;&lt;span&gt;replicates dd643db1986c6f65f0a9730cc5db7cc0c95c4a4f&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;S: 2a6f3639b4f114c3be1d5e1853cbb698f5423c9a 172.16.1.52:6380&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;   &lt;/span&gt;&lt;/span&gt;&lt;span&gt;replicates 8ea2f6efb0ce756497701a920ea0cbe32a5a4814&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;S: e6a3067c56e42ac16e0a82f40b215aac5a130489 172.16.1.53:6380&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;   &lt;/span&gt;&lt;/span&gt;&lt;span&gt;replicates 760041e23f2c58477989205c05e4f604c1ab6b61&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Can I set the above configuration? (type &apos;yes&apos; to accept): yes&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;gt;&amp;gt;&amp;gt; Nodes configuration updated&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;gt;&amp;gt;&amp;gt; Assign a different config epoch to each node&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;gt;&amp;gt;&amp;gt; Sending CLUSTER MEET messages to join the cluster&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Waiting for the cluster to join&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;......&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;gt;&amp;gt;&amp;gt; Performing Cluster Check (using node 172.16.1.51:6379)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;27&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;M: 8ea2f6efb0ce756497701a920ea0cbe32a5a4814 172.16.1.51:6379&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;28&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;   &lt;/span&gt;&lt;/span&gt;&lt;span&gt;slots:[0-5460] (5461 slots) master&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;29&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;   &lt;/span&gt;&lt;/span&gt;&lt;span&gt;1 additional replica(s)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;30&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;S: 2fe100ff72828302cbfd2daf15630c6578112f55 172.16.1.51:6380&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;31&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;   &lt;/span&gt;&lt;/span&gt;&lt;span&gt;slots: (0 slots) slave&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;32&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;   &lt;/span&gt;&lt;/span&gt;&lt;span&gt;replicates dd643db1986c6f65f0a9730cc5db7cc0c95c4a4f&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;33&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;S: e6a3067c56e42ac16e0a82f40b215aac5a130489 172.16.1.53:6380&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;34&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;   &lt;/span&gt;&lt;/span&gt;&lt;span&gt;slots: (0 slots) slave&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;35&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;   &lt;/span&gt;&lt;/span&gt;&lt;span&gt;replicates 760041e23f2c58477989205c05e4f604c1ab6b61&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;36&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;M: 760041e23f2c58477989205c05e4f604c1ab6b61 172.16.1.52:6379&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;37&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;   &lt;/span&gt;&lt;/span&gt;&lt;span&gt;slots:[5461-10922] (5462 slots) master&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;38&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;   &lt;/span&gt;&lt;/span&gt;&lt;span&gt;1 additional replica(s)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;39&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;S: 2a6f3639b4f114c3be1d5e1853cbb698f5423c9a 172.16.1.52:6380&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;40&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;   &lt;/span&gt;&lt;/span&gt;&lt;span&gt;slots: (0 slots) slave&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;41&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;   &lt;/span&gt;&lt;/span&gt;&lt;span&gt;replicates 8ea2f6efb0ce756497701a920ea0cbe32a5a4814&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;42&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;M: dd643db1986c6f65f0a9730cc5db7cc0c95c4a4f 172.16.1.53:6379&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;43&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;   &lt;/span&gt;&lt;/span&gt;&lt;span&gt;slots:[10923-16383] (5461 slots) master&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;44&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;   &lt;/span&gt;&lt;/span&gt;&lt;span&gt;1 additional replica(s)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;45&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[OK] All nodes agree about slots configuration.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;46&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;gt;&amp;gt;&amp;gt; Check for open slots...&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;47&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;gt;&amp;gt;&amp;gt; Check slots coverage...&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;48&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[OK] All 16384 slots covered.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;</content:encoded></item><item><title>Rediså“¨å…µæ—¥å¿—å‚æ•°è¯¦è§£</title><link>https://white-festa.net/posts/sentinel-log/</link><guid isPermaLink="true">https://white-festa.net/posts/sentinel-log/</guid><description>åˆ†æä¸€æ¬¡Redisæ•…éšœè½¬ç§»çš„æ—¥å¿—å†…å®¹</description><pubDate>Mon, 19 Jun 2023 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;sentinelçš„æ—¥å¿—ä¸­åŒ…å«äº†å¾ˆå¤šå…³é”®å‚æ•°ï¼Œè¿™äº›å‚æ•°è¯´æ˜äº†sentinelçš„å½“å‰çŠ¶æ€å’Œsentinelå®Œæˆä¸€ä¸ªæ“ä½œ(æ¯”å¦‚æ•…éšœè½¬ç§»)éƒ½åšäº†å“ªäº›äº‹ï¼Œæ˜¯ä»€ä¹ˆæµç¨‹ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªæ•…éšœè½¬ç§»çš„æ—¥å¿—æ›´æ–°å†…å®¹ï¼š&lt;/p&gt;
&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;2938:X 27 Sep 2023 12:19:57.890 # +sdown master redis-master 172.16.1.51 6379&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;2938:X 27 Sep 2023 12:19:57.958 # +odown master redis-master 172.16.1.51 6379 #quorum 2/2&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;2938:X 27 Sep 2023 12:19:57.958 # +new-epoch 1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;2938:X 27 Sep 2023 12:19:57.958 # +try-failover master redis-master 172.16.1.51 6379&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;2938:X 27 Sep 2023 12:19:57.959 # +vote-for-leader 17dcc1eb843c0427d82c56444936dd03da8f78c2 1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;2938:X 27 Sep 2023 12:19:57.960 # e11a84ea040dc465ba9d7ca7f1d2c87eb696c3ae voted for 17dcc1eb843c0427d82c56444936dd03da8f78c2 1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;2938:X 27 Sep 2023 12:19:57.960 # a440f06487c182d52abda18755bd092781a04b7d voted for 17dcc1eb843c0427d82c56444936dd03da8f78c2 1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;2938:X 27 Sep 2023 12:19:58.023 # +elected-leader master redis-master 172.16.1.51 6379&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;2938:X 27 Sep 2023 12:19:58.023 # +failover-state-select-slave master redis-master 172.16.1.51 6379&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;2938:X 27 Sep 2023 12:19:58.086 # +selected-slave slave 172.16.1.52:6379 172.16.1.52 6379 @ redis-master 172.16.1.51 6379&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;2938:X 27 Sep 2023 12:19:58.086 * +failover-state-send-slaveof-noone slave 172.16.1.52:6379 172.16.1.52 6379 @ redis-master 172.16.1.51 6379&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;2938:X 27 Sep 2023 12:19:58.144 * +failover-state-wait-promotion slave 172.16.1.52:6379 172.16.1.52 6379 @ redis-master 172.16.1.51 6379&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;2938:X 27 Sep 2023 12:19:58.379 # +promoted-slave slave 172.16.1.52:6379 172.16.1.52 6379 @ redis-master 172.16.1.51 6379&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;2938:X 27 Sep 2023 12:19:58.379 # +failover-state-reconf-slaves master redis-master 172.16.1.51 6379&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;2938:X 27 Sep 2023 12:19:58.451 * +slave-reconf-sent slave 172.16.1.53:6379 172.16.1.53 6379 @ redis-master 172.16.1.51 6379&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;2938:X 27 Sep 2023 12:19:59.084 # -odown master redis-master 172.16.1.51 6379&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;2938:X 27 Sep 2023 12:19:59.392 * +slave-reconf-inprog slave 172.16.1.53:6379 172.16.1.53 6379 @ redis-master 172.16.1.51 6379&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;2938:X 27 Sep 2023 12:19:59.392 * +slave-reconf-done slave 172.16.1.53:6379 172.16.1.53 6379 @ redis-master 172.16.1.51 6379&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;2938:X 27 Sep 2023 12:19:59.455 # +failover-end master redis-master 172.16.1.51 6379&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;2938:X 27 Sep 2023 12:19:59.455 # +switch-master redis-master 172.16.1.51 6379 172.16.1.52 6379&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;2938:X 27 Sep 2023 12:19:59.455 * +slave slave 172.16.1.53:6379 172.16.1.53 6379 @ redis-master 172.16.1.52 6379&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;2938:X 27 Sep 2023 12:19:59.455 * +slave slave 172.16.1.51:6379 172.16.1.51 6379 @ redis-master 172.16.1.52 6379&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;2938:X 27 Sep 2023 12:20:29.473 # +sdown slave 172.16.1.51:6379 172.16.1.51 6379 @ redis-master 172.16.1.52 6379&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;2938:X 27 Sep 2023 12:28:29.754 # -sdown slave 172.16.1.51:6379 172.16.1.51 6379 @ redis-master 172.16.1.52 6379&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;2938:X 27 Sep 2023 12:28:39.786 * +convert-to-slave slave 172.16.1.51:6379 172.16.1.51 6379 @ redis-master 172.16.1.52 6379&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;
&lt;section&gt;&lt;h2&gt;å‚æ•°è§£é‡Š&lt;a href=&quot;#å‚æ•°è§£é‡Š&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;SDOWN å’Œ ODOWN&lt;a href=&quot;#sdown-å’Œ-odown&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;sentinelæœ‰ä¸¤ç§ä¸åŒçš„åœæœºæ¦‚å¿µï¼Œ ä¸€ç§æ˜¯å®¢è§‚åœæœº(Subjectively Down)ï¼Œä¹Ÿå°±æ˜¯SDOWNï¼Œä¸€ç§æ˜¯ä¸»è§‚åœæœº(Objectively Down)ï¼Œä¹Ÿå°±æ˜¯ODOWN&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;é›†ç¾¤ä¸­çš„sentinelä¼šæ¯ç§’å‘æ¯ä¸ªå·²çŸ¥çš„masterã€slaveå’Œsentinelå‘é€pingè¯·æ±‚ï¼Œå¦‚æœåœ¨æŒ‡å®šçš„é—´éš”æ—¶é—´å†…æ²¡æœ‰æ¥æ”¶åˆ°rediså®ä¾‹çš„pingå›å¤ï¼Œå³è§†ä¸ºä¸»è§‚åœæœºï¼›&lt;/li&gt;
&lt;li&gt;pingå›å¤çš„ç±»å‹ä¸ºï¼š+PONGã€-LOADINGã€-MASTERDOWN&lt;/li&gt;
&lt;li&gt;å¦‚æœmasterç¡®è®¤å¤„äºSDOWNçŠ¶æ€ï¼Œåˆ™æ¯ç§’ä½¿ç”¨&lt;code&gt;SENTINEL is-master-down-by-addr&lt;/code&gt;å‘½ä»¤ï¼Œå‘å…¶ä»–çš„sentinelèŠ‚ç‚¹ç¡®è®¤Masterçš„çŠ¶æ€&lt;/li&gt;
&lt;li&gt;å¦‚æœå…¶ä»–çš„sentinelèŠ‚ç‚¹ï¼Œå¯¹masterçš„çŠ¶æ€è®°å½•ä¹Ÿä¸ºSDOWNï¼Œåˆ™è¿”å›&lt;code&gt;TRUE&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;å½“masterä¸ºSDOWNçŠ¶æ€ï¼Œå¹¶ä¸”æœ‰è¶³å¤Ÿçš„sentinelèŠ‚ç‚¹è¿”å›ä¸ºTrue(è¾¾åˆ°é…ç½®æ–‡ä»¶ä¸­&lt;code&gt;sentinel monitor&lt;/code&gt;å‚æ•°æ‰€æŒ‡å®šçš„æ•°é‡)ï¼Œåˆ™Masterè¢«æ ‡è®°ä¸ºODOWN(å®¢è§‚åœæœº)&lt;/li&gt;
&lt;li&gt;åªæœ‰Masteræ‰æœ‰ODOWNçŠ¶æ€ï¼Œå½“å®Œæˆä¸»ä»åˆ‡æ¢åï¼Œæ—¥å¿—ä¸­ä¼šå‡ºç°&lt;code&gt;-ODOWN&lt;/code&gt;ï¼Œè¿™æ„å‘³è¿™å½“å‰å®ä¾‹å·²ä¸å†æ˜¯masterèº«ä»½ï¼Œå› æ­¤é€€å‡ºODOWNçŠ¶æ€ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;é€‰ä¸¾failoverçš„é¢†å¯¼è€…&lt;a href=&quot;#é€‰ä¸¾failoverçš„é¢†å¯¼è€…&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;vote-for-leaderï¼šsentinelæ­£åœ¨é€‰ä¸¾è´Ÿè´£è¿›è¡Œä¸»ä»åˆ‡æ¢çš„é¢†å¯¼è€…ï¼›&lt;/li&gt;
&lt;li&gt;elected-leaderï¼šæ˜¾ç¤ºè¢«é€‰å‡ºçš„é¢†å¯¼è€…ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;failover-state-select-slave æ•…éšœè½¬ç§»çŠ¶æ€ï¼šæå‡ä¸€ä¸ªslaveä¸ºmaster&lt;a href=&quot;#failover-state-select-slave-æ•…éšœè½¬ç§»çŠ¶æ€æå‡ä¸€ä¸ªslaveä¸ºmaster&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;selected-slave: é€‰ä¸­çš„slave&lt;/li&gt;
&lt;li&gt;failover-state-send-slaveof-noone: ä¸ºé€‰ä¸­çš„slaveæ‰§è¡Œ&lt;code&gt;slaveof noone&lt;/code&gt;ä½¿å…¶è„±ç¦»slaveçŠ¶æ€&lt;/li&gt;
&lt;li&gt;failover-state-wait-promotionï¼šè§’è‰²è½¬æ¢ä¸­&lt;/li&gt;
&lt;li&gt;promoted-slaveï¼šæŠ¥å‘Šleaderä»¥å®Œæˆè§’è‰²è½¬æ¢&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;failover-state-reconf-slaves æ•…éšœè½¬ç§»çŠ¶æ€ï¼šé‡å†™slaveé…ç½®&lt;a href=&quot;#failover-state-reconf-slaves-æ•…éšœè½¬ç§»çŠ¶æ€é‡å†™slaveé…ç½®&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;slave-reconf-sentï¼šå°†REPLICAOFå‘½ä»¤å‘é€åˆ°å®ä¾‹&lt;/li&gt;
&lt;li&gt;slave-reconf-inprogï¼šæ­£åœ¨é…ç½®slaveå¤åˆ¶æ–°çš„ip&lt;/li&gt;
&lt;li&gt;slave-reconf-doneï¼šslaveä»¥ä¸æ–°masterå®ŒæˆåŒæ­¥&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;æ•…éšœè½¬ç§»å®Œæˆ&lt;a href=&quot;#æ•…éšœè½¬ç§»å®Œæˆ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;failover-endï¼šå®Œæˆæ•…éšœè½¬ç§»&lt;/li&gt;
&lt;li&gt;+slaveï¼šæ£€æµ‹åˆ°å¹¶é™„åŠ äº†æ–°çš„slave&lt;/li&gt;
&lt;li&gt;convert-to-slave: æ£€æµ‹åˆ°åŸmatserä¸Šçº¿ï¼Œå°†å…¶è½¬æ¢ä¸ºslaveèº«ä»½å¹¶å’Œæ–°masteråŒæ­¥ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;/section&gt;</content:encoded></item><item><title>Redisä¸»ä»å¤åˆ¶å’Œå“¨å…µ</title><link>https://white-festa.net/posts/redis-replica-sentinel/</link><guid isPermaLink="true">https://white-festa.net/posts/redis-replica-sentinel/</guid><description>é€šè¿‡Redisä¸»ä»å¤åˆ¶å®ç°RedisæœåŠ¡çš„é«˜å¯ç”¨æ€§ã€æ•°æ®å†—ä½™ï¼›ä½¿ç”¨Sentinelå®ç°æ•…éšœæ¢å¤</description><pubDate>Sat, 17 Jun 2023 00:00:00 GMT</pubDate><content:encoded>&lt;section&gt;&lt;h2&gt;Redisä¸»ä»å¤åˆ¶&lt;a href=&quot;#redisä¸»ä»å¤åˆ¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;æ¦‚è¿°&lt;a href=&quot;#æ¦‚è¿°&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;ä¸»ä»å¤åˆ¶çš„ä½œç”¨ä¸»è¦åŒ…æ‹¬&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;æ•°æ®å†—ä½™ï¼šä¸»ä»å¤åˆ¶å®ç°äº†æ•°æ®çš„çƒ­å¤‡ä»½ï¼Œæ˜¯æŒä¹…åŒ–ä¹‹å¤–çš„ä¸€ç§æ•°æ®å†—ä½™æ–¹å¼ã€‚&lt;/li&gt;
&lt;li&gt;æ•…éšœæ¢å¤ï¼šå½“ä¸»èŠ‚ç‚¹å‡ºç°é—®é¢˜æ—¶ï¼Œå¯ä»¥ç”±ä»èŠ‚ç‚¹æä¾›æœåŠ¡ï¼Œå®ç°å¿«é€Ÿçš„æ•…éšœæ¢å¤ï¼›å®é™…ä¸Šæ˜¯ä¸€ç§æœåŠ¡çš„å†—ä½™ã€‚&lt;/li&gt;
&lt;li&gt;è´Ÿè½½å‡è¡¡ï¼šåœ¨ä¸»ä»å¤åˆ¶çš„åŸºç¡€ä¸Šï¼Œé…åˆè¯»å†™åˆ†ç¦»ï¼Œå¯ä»¥ç”±ä¸»èŠ‚ç‚¹æä¾›å†™æœåŠ¡ï¼Œç”±ä»èŠ‚ç‚¹æä¾›è¯»æœåŠ¡ï¼ˆå³å†™Redisæ•°æ®æ—¶åº”ç”¨è¿æ¥ä¸»èŠ‚ç‚¹ï¼Œè¯»Redisæ•°æ®æ—¶åº”ç”¨è¿æ¥ä»èŠ‚ç‚¹ï¼‰ï¼Œåˆ†æ‹…æœåŠ¡å™¨è´Ÿè½½ï¼›
å°¤å…¶æ˜¯åœ¨å†™å°‘è¯»å¤šçš„åœºæ™¯ä¸‹ï¼Œé€šè¿‡å¤šä¸ªä»èŠ‚ç‚¹åˆ†æ‹…è¯»è´Ÿè½½ï¼Œå¯ä»¥å¤§å¤§æé«˜RedisæœåŠ¡å™¨çš„å¹¶å‘é‡ã€‚&lt;/li&gt;
&lt;li&gt;é«˜å¯ç”¨åŸºçŸ³ï¼šé™¤äº†ä¸Šè¿°ä½œç”¨ä»¥å¤–ï¼Œä¸»ä»å¤åˆ¶è¿˜æ˜¯å“¨å…µå’Œé›†ç¾¤èƒ½å¤Ÿå®æ–½çš„åŸºç¡€ï¼Œå› æ­¤è¯´ä¸»ä»å¤åˆ¶æ˜¯Redisé«˜å¯ç”¨çš„åŸºç¡€ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ä¸»ä»åº“ä¹‹é—´é‡‡ç”¨çš„æ˜¯è¯»å†™åˆ†ç¦»çš„æ–¹å¼ã€‚&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;è¯»æ“ä½œï¼šä¸»åº“ã€ä»åº“éƒ½å¯ä»¥æ¥æ”¶&lt;/li&gt;
&lt;li&gt;å†™æ“ä½œï¼šé¦–å…ˆåˆ°ä¸»åº“æ‰§è¡Œï¼Œç„¶åï¼Œä¸»åº“å°†å†™æ“ä½œåŒæ­¥ç»™ä»åº“ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;é…ç½®ä¸»ä»å¤åˆ¶&lt;a href=&quot;#é…ç½®ä¸»ä»å¤åˆ¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®å‚æ•°ï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;replicaof&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&amp;lt;master&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;ip&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&amp;lt;master&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;port&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# åœ¨5.0ä»¥å‰çš„ç‰ˆæœ¬ä¸­ï¼Œä½¿ç”¨slaveofæ›¿æ¢replicaof&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;ä¸»åº“è®¾ç½®å¯†ç æƒ…å†µä¸‹çš„ä¸»ä»å¤åˆ¶ï¼Œä»åº“ä¹Ÿè¦è®¾ç½®å¯¹åº”çš„å¯†ç ï¼Œä½¿ç”¨masterauthå‚æ•°&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;masterauth&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;password&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;# passwordè¦å’Œä¸»åº“é…ç½®æ–‡ä»¶ä¸­çš„requirepassä¸€è‡´&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;&lt;em&gt;æ³¨æ„ï¼šä»åº“å»ºç«‹ä¸»ä»å…³ç³»æ—¶ï¼Œä¼šæ¸…ç©ºè‡ªå·±çš„æ•°æ®ï¼Œæ…é‡åŒæ­¥çš„å¯¹è±¡&lt;/em&gt;&lt;/p&gt;&lt;section&gt;&lt;h4&gt;å–æ¶ˆä»åº“èº«ä»½&lt;a href=&quot;#å–æ¶ˆä»åº“èº«ä»½&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;replicaof no one&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;æŸ¥çœ‹redisä¸»ä»å¤åˆ¶ä¿¡æ¯&lt;a href=&quot;#æŸ¥çœ‹redisä¸»ä»å¤åˆ¶ä¿¡æ¯&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;127.0.0.1:6379&amp;gt; info replication&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# Replication&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;role:master&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;connected_slaves:2&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;slave0:ip=172.16.1.51,port=6379,state=online,offset=182,lag=0&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;slave1:ip=172.16.1.53,port=6379,state=online,offset=182,lag=1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;master_replid:eb03a6c3a470f5e2a66d4b2e6c7b8be4f53bc7eb&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;master_replid2:0000000000000000000000000000000000000000&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;master_repl_offset:182&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;second_repl_offset:-1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;repl_backlog_active:1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;repl_backlog_size:1048576&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;repl_backlog_first_byte_offset:1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;repl_backlog_histlen:182&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;ä¸»ä»æ•…éšœä»‹å…¥&lt;a href=&quot;#ä¸»ä»æ•…éšœä»‹å…¥&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;ä¸»åº“çš„IPåœ°å€&lt;/li&gt;
&lt;li&gt;ä»èŠ‚ç‚¹è¦é‡æ–° REPLICAOF è®¾ç½®å¤åˆ¶è§’è‰²&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;&lt;em&gt;æ³¨æ„ï¼šredisä¸åŒå¤§ç‰ˆæœ¬ä¹‹é—´å­˜åœ¨å…¼å®¹æ€§é—®é¢˜ï¼Œå› æ­¤ä¸»ä»å¤åˆ¶çš„ä¸»åº“å’Œä»åº“å®ä¾‹åº”è¯¥æ‹¥æœ‰ç›¸åŒçš„å¤§ç‰ˆæœ¬ã€‚&lt;/em&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;Redisé«˜å¯ç”¨å“¨å…µ&lt;a href=&quot;#redisé«˜å¯ç”¨å“¨å…µ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;å“¨å…µæœºåˆ¶ï¼ˆRedis Sentinelï¼‰åœ¨Redis 2.8ç‰ˆæœ¬å¼€å§‹å¼•å…¥ï¼Œå…¶æ ¸å¿ƒåŠŸèƒ½æ˜¯ä¸»èŠ‚ç‚¹çš„è‡ªåŠ¨æ•…éšœè½¬ç§»ã€‚&lt;/p&gt;&lt;section&gt;&lt;h3&gt;å“¨å…µçš„åŠŸèƒ½&lt;a href=&quot;#å“¨å…µçš„åŠŸèƒ½&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;ç›‘æ§ï¼ˆMonitoringï¼‰ï¼šå“¨å…µä¼šä¸æ–­åœ°æ£€æŸ¥ä¸»èŠ‚ç‚¹å’Œä»èŠ‚ç‚¹æ˜¯å¦è¿ä½œæ­£å¸¸ã€‚&lt;/li&gt;
&lt;li&gt;è‡ªåŠ¨æ•…éšœè½¬ç§»ï¼ˆAutomatic failoverï¼‰ï¼šå½“ä¸»èŠ‚ç‚¹ä¸èƒ½æ­£å¸¸å·¥ä½œæ—¶ï¼Œå“¨å…µä¼šå¼€å§‹è‡ªåŠ¨æ•…éšœè½¬ç§»æ“ä½œï¼Œå®ƒä¼šå°†å¤±æ•ˆä¸»èŠ‚ç‚¹çš„å…¶ä¸­ä¸€ä¸ªä»èŠ‚ç‚¹å‡çº§ä¸ºæ–°çš„ä¸»èŠ‚ç‚¹ï¼Œå¹¶è®©å…¶ä»–ä»èŠ‚ç‚¹æ”¹ä¸ºå¤åˆ¶æ–°çš„ä¸»èŠ‚ç‚¹ã€‚&lt;/li&gt;
&lt;li&gt;é…ç½®æä¾›è€…ï¼ˆConfiguration providerï¼‰ï¼šå®¢æˆ·ç«¯åœ¨åˆå§‹åŒ–æ—¶ï¼Œé€šè¿‡è¿æ¥å“¨å…µæ¥è·å¾—å½“å‰RedisæœåŠ¡çš„ä¸»èŠ‚ç‚¹åœ°å€ã€‚&lt;/li&gt;
&lt;li&gt;é€šçŸ¥ï¼ˆNotificationï¼‰ï¼šå“¨å…µå¯ä»¥å°†æ•…éšœè½¬ç§»çš„ç»“æœå‘é€ç»™å®¢æˆ·ç«¯ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;å“¨å…µé€šä¿¡(å‘å¸ƒ/è®¢é˜…æœºåˆ¶)&lt;a href=&quot;#å“¨å…µé€šä¿¡å‘å¸ƒè®¢é˜…æœºåˆ¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;å“¨å…µä¹‹é—´å¯ä»¥äº’ç›¸å‘ç°ï¼Œä¸»è¦æ˜¯åŸºäºå‘å¸ƒ/è®¢é˜…æœºåˆ¶ï¼›åœ¨ä¸»ä»é›†ç¾¤ä¸Šï¼Œä¸»åº“æœ‰ä¸€ä¸ª__sentinel__çš„é¢‘é“ï¼Œä¸åŒå“¨å…µå°±æ˜¯é€šè¿‡å®ƒæ¥ç›¸äº’å‘ç°ï¼Œå®ç°äº’ç›¸é€šä¿¡çš„ã€‚&lt;/li&gt;
&lt;li&gt;æ‰‹åŠ¨è¿›è¡Œå‘å¸ƒå’Œè®¢é˜…
&lt;ul&gt;
&lt;li&gt;ä»åº“è®¢é˜…ä¸€ä¸ªé¢‘é“ï¼šSUBSCRIBE channel_1&lt;/li&gt;
&lt;li&gt;ä¸»åº“é€šè¿‡è¯¥é¢‘é“æ¨é€æ¶ˆæ¯ï¼šPUBLISH channel_1 message&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;éƒ¨ç½²å“¨å…µ&lt;a href=&quot;#éƒ¨ç½²å“¨å…µ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;å“¨å…µçš„éƒ¨ç½²æ˜¯ä¸redis-serverç›¸ç‹¬ç«‹çš„è¿›ç¨‹ï¼Œéœ€è¦é¢å¤–å ç”¨ä¸€ä¸ªç«¯å£(é»˜è®¤ä¸º26379)&lt;/li&gt;
&lt;li&gt;éƒ¨ç½²å“¨å…µçš„å…³é”®å‚æ•°
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;sentinel monitor &amp;lt;master_name&amp;gt; &amp;lt;ip&amp;gt; &amp;lt;port&amp;gt; &amp;lt;amount&amp;gt;&lt;/code&gt;ï¼šç›‘æ§çš„ä¸»åº“èŠ‚ç‚¹ï¼Œ&lt;em&gt;amount&lt;/em&gt; ä¸ºéœ€è¦å‡ å°å“¨å…µåŒæ„æ‰èƒ½ä¸‹çº¿&lt;/li&gt;
&lt;li&gt;&lt;code&gt;sentinel down-after-milliseconds &amp;lt;master_name&amp;gt; &amp;lt;time&amp;gt;&lt;/code&gt;ï¼šè¶…è¿‡è®¾å®šæ—¶é—´æ²¡å›å¤è®¤å®šmasterä¸‹çº¿&lt;/li&gt;
&lt;li&gt;&lt;code&gt;sentinel parallel-syncs &amp;lt;master_name&amp;gt; &amp;lt;number&amp;gt;&lt;/code&gt;ï¼šå½“SentinelèŠ‚ç‚¹é›†åˆå¯¹ä¸»èŠ‚ç‚¹æ•…éšœåˆ¤å®šè¾¾æˆä¸€è‡´æ—¶ï¼ŒSentinelé¢†å¯¼è€…èŠ‚ç‚¹ä¼šåšæ•…éšœè½¬ç§»æ“ä½œï¼Œé€‰å‡ºæ–°çš„ä¸»èŠ‚ç‚¹ï¼ŒåŸæ¥çš„ä»èŠ‚ç‚¹ä¼šå‘æ–°çš„ä¸»èŠ‚ç‚¹å‘èµ·å¤åˆ¶æ“ä½œï¼Œé™åˆ¶æ¯æ¬¡å‘æ–°çš„ä¸»èŠ‚ç‚¹å‘èµ·å¤åˆ¶æ“ä½œçš„ä»èŠ‚ç‚¹ä¸ªæ•°ä¸º &lt;em&gt;number&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;sentinel failover-timeout &amp;lt;master_name&amp;gt; &amp;lt;time&amp;gt;&lt;/code&gt;ï¼š æ•…éšœè½¬ç§»è¶…æ—¶æ—¶é—´ä¸ºæŒ‡å®šçš„æ—¶é—´&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ç¡®ä¿ä¸»åº“ä»åº“ä¹‹é—´æˆåŠŸå»ºç«‹çš„å¤åˆ¶å…³ç³»ï¼ŒåŠ¡å¿…åœ¨ä»åº“çš„é…ç½®æ–‡ä»¶ä¸­æŒ‡æ˜&lt;code&gt;replicaof&lt;/code&gt;çš„IP&lt;/li&gt;
&lt;li&gt;ä»¥&lt;code&gt;master-slave-sentinel&lt;/code&gt;çš„é¡ºåºä¾æ¬¡å¼€å¯æœåŠ¡&lt;/li&gt;
&lt;li&gt;å¯ä»¥æ‰‹å†™redis-sentinelå¯åŠ¨è„šæœ¬å¹¶é…ç½®åˆ°systemctlæœåŠ¡ç®¡ç†ä¸­/usr/lib/systemd/system/redis-sentinel.service&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[Unit]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Description&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Redis&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;service&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;by&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;www.yuchaoit.cn&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;After&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;network.target&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;After&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;network-online.target&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Wants&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;network-online.target&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[Service]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ExecStart&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;/usr/local/bin/redis-sentinel&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/opt/sentinel/conf/sentinel.conf&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--supervised&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;systemd&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ExecStop&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;/usr/local/bin/redis-cli&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-h&lt;/span&gt;&lt;span&gt; $(&lt;/span&gt;&lt;span&gt;ifconfig&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;ens33&lt;/span&gt;&lt;span&gt;|&lt;/span&gt;&lt;span&gt;awk&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;NR==2{print $2}&apos;&lt;/span&gt;&lt;span&gt;) &lt;/span&gt;&lt;span&gt;-p&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;26379&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;shutdown&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Type&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;notify&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;User&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;redis&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Group&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;redis&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;RuntimeDirectory&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;redis&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;RuntimeDirectoryMode&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;0755&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[Install]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;WantedBy&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;multi-user.target&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;ç¡®ä¿redisç”¨æˆ·æ‹¥æœ‰rediså’Œredis-sentinelé™„å±æ–‡ä»¶çš„æƒé™ã€‚&lt;/li&gt;
&lt;li&gt;å“¨å…µéœ€è¦éƒ¨ç½²åœ¨ä¸»ä»å¤åˆ¶çš„æ¯ä¸ªèŠ‚ç‚¹ä¸Šã€‚&lt;/li&gt;
&lt;/ol&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;é€‰ä¸¾æ–°Masterçš„ä¾æ®&lt;a href=&quot;#é€‰ä¸¾æ–°masterçš„ä¾æ®&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;è¿‡æ»¤æ‰ä¸å¥åº·çš„ï¼ˆä¸‹çº¿æˆ–æ–­çº¿ï¼‰ï¼Œæ²¡æœ‰å›å¤è¿‡å“¨å…µpingå“åº”çš„ä»èŠ‚ç‚¹&lt;/li&gt;
&lt;li&gt;é€‰æ‹©salve-priorityä»èŠ‚ç‚¹ä¼˜å…ˆçº§æœ€é«˜ï¼ˆredis.confï¼‰çš„&lt;/li&gt;
&lt;li&gt;é€‰æ‹©å¤åˆ¶åç§»é‡æœ€å¤§ï¼Œå¤åˆ¶æœ€å®Œæ•´çš„ä»èŠ‚ç‚¹.&lt;/li&gt;
&lt;/ol&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;å“¨å…µéƒ¨ç½²è„šæœ¬&lt;a href=&quot;#å“¨å…µéƒ¨ç½²è„šæœ¬&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;#!/bin/bash&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;local_ip&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;$(&lt;/span&gt;&lt;/span&gt;&lt;span&gt;ifconfig&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;eth1&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;grep&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;inet&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;grep&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-v&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;127.0.0.1&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;grep&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-v&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;inet6&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;awk&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;{print $2}&apos;&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;tr&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-d&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;addr:&quot;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;deploySentinel&lt;/span&gt;&lt;span&gt;(){&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;mkdir&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-p&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/opt/sentinel/{conf,pid,logs,data}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;cat&lt;/span&gt;&lt;span&gt; &amp;gt; &lt;/span&gt;&lt;span&gt;/opt/sentinel/conf/sentinel.conf&lt;/span&gt;&lt;span&gt; &amp;lt;&amp;lt;&lt;/span&gt;&lt;span&gt;EOF&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;bind &lt;/span&gt;&lt;span&gt;&lt;span&gt;${&lt;/span&gt;&lt;span&gt;local_ip&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;port 26379&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;daemonize yes&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;logfile /opt/sentinel/logs/sentinel.log&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;dir /opt/sentinel/data&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;sentinel monitor redis-master 172.16.1.51 6379 2&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;sentinel down-after-milliseconds  redis-master 30000&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;sentinel parallel-syncs redis-master 1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;sentinel failover-timeout redis-master 180000&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;EOF&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;changeOwner&lt;/span&gt;&lt;span&gt;(){&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;chown&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-R&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;redis.redis&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/opt/sentinel/&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;systemdScript&lt;/span&gt;&lt;span&gt;(){&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;touch&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/lib/systemd/system/sentinel.service&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;cat&lt;/span&gt;&lt;span&gt; &amp;gt; &lt;/span&gt;&lt;span&gt;/lib/systemd/system/sentinel.service&lt;/span&gt;&lt;span&gt; &amp;lt;&amp;lt;&lt;/span&gt;&lt;span&gt;EOF&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;[Unit]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Description=Redis-sentinel service&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;27&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;After=network.target&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;28&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;After=network-online.target&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;29&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Wants=network-online.target&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;30&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;31&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;[Service]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;32&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;ExecStart=/usr/local/bin/redis-sentinel /opt/sentinel/conf/sentinel.conf --supervised systemd&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;33&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;ExecStop=/usr/local/bin/redis-cli -h &lt;/span&gt;&lt;span&gt;&lt;span&gt;${&lt;/span&gt;&lt;span&gt;local_ip&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span&gt; -p 26379 shutdown&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;34&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Type=notify&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;35&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;User=redis&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;36&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Group=redis&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;37&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;RuntimeDirectory=redis&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;38&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;RuntimeDirectoryMode=0755&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;39&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;40&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;[Install]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;41&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;WantedBy=multi-user.target&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;42&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;EOF&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;43&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;44&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;systemctl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;daemon-reload&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;45&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;systemctl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;start&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;sentinel&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;46&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;47&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;sentinelInfo&lt;/span&gt;&lt;span&gt;(){&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;48&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;redis-cli&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-h&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&lt;span&gt;${&lt;/span&gt;&lt;span&gt;local_ip&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-p&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;26379&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;info&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;sentinel&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;49&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;50&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;51&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;deploySentinel&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;52&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;changeOwner&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;53&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;systemdScript&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;54&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;sentinelInfo&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;æŸ¥çœ‹sentinelä¿¡æ¯&lt;a href=&quot;#æŸ¥çœ‹sentinelä¿¡æ¯&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# Sentinel&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;sentinel_masters:1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;sentinel_tilt:0&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;sentinel_running_scripts:0&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;sentinel_scripts_queue_length:0&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;sentinel_simulate_failure_flags:0&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;master0:name&lt;/span&gt;&lt;span&gt;=redis-master,status=ok,address=172.16.1.51:6379,slaves=2,sentinels=3&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;å½“ststus=okæ—¶å“¨å…µå°±å·²ç»æˆåŠŸçš„éƒ¨ç½²äº†ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;å“¨å…µçš„é…ç½®é‡å†™åŠŸèƒ½&lt;a href=&quot;#å“¨å…µçš„é…ç½®é‡å†™åŠŸèƒ½&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;å“¨å…µåœ¨æˆåŠŸéƒ¨ç½²åä¼šè‡ªåŠ¨æ¥ç®¡ç»´æŠ¤è‡ªå·±çš„é…ç½®æ–‡ä»¶ï¼Œå½“ä¸»ä»å…³ç³»å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå“¨å…µä¼šè‡ªåŠ¨é‡å†™é…ç½®æ–‡ä»¶ã€‚
é‡å†™åçš„é…ç½®æ–‡ä»¶ï¼š&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;bind&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;172.16.1.52&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;port&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;26379&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;daemonize&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;yes&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;logfile&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;/opt/sentinel/logs/sentinel.log&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;dir&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;/opt/sentinel/data&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;sentinel&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;myid&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;a440f06487c182d52abda18755bd092781a04b7d&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;sentinel&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;deny-scripts-reconfig&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;yes&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;sentinel&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;monitor&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;redis-master&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;172.16.1.51&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;6379&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;sentinel&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;config-epoch&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;redis-master&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# Generated by CONFIG REWRITE&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;maxclients&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;4064&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;protected-mode&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;no&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;supervised&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;systemd&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;sentinel&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;leader-epoch&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;redis-master&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;sentinel&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;known-replica&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;redis-master&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;172.16.1.53&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;6379&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;sentinel&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;known-replica&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;redis-master&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;172.16.1.52&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;6379&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;sentinel&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;known-sentinel&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;redis-master&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;172.16.1.51&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;26379&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;17dcc1eb843c0427d82c56444936dd03da8f78c2&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;sentinel&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;known-sentinel&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;redis-master&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;172.16.1.53&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;26379&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;e11a84ea040dc465ba9d7ca7f1d2c87eb696c3ae&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;sentinel&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;current-epoch&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;æµ‹è¯•ä¸»ä»æ•…éšœçš„è‡ªåŠ¨åŒ–è½¬ç§»&lt;a href=&quot;#æµ‹è¯•ä¸»ä»æ•…éšœçš„è‡ªåŠ¨åŒ–è½¬ç§»&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;section&gt;&lt;h4&gt;æ¨¡æ‹Ÿæ•…éšœï¼Œshutdownå½“å‰ä¸»åº“&lt;a href=&quot;#æ¨¡æ‹Ÿæ•…éšœshutdownå½“å‰ä¸»åº“&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;&lt;/p&gt;&lt;figure&gt;&lt;img src=&quot;https://blog.freelytomorrow.com/articles_img/redis-replica-sentinel/failure1.png&quot; alt=&quot;&quot; /&gt;&lt;figcaption&gt;ä¸»ä»åˆ‡æ¢&lt;/figcaption&gt;&lt;/figure&gt;
172.16.1.52æœºå™¨æˆä¸ºäº†master&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;ä¸»ä»é…ç½®æ›´æ–°&lt;a href=&quot;#ä¸»ä»é…ç½®æ›´æ–°&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;sentinelè‡ªåŠ¨ä¸ºdb-53æœºå™¨ä¿®æ”¹äº†é…ç½®æ–‡ä»¶
&lt;/p&gt;&lt;figure&gt;&lt;img src=&quot;https://blog.freelytomorrow.com/articles_img/redis-replica-sentinel/failure2.png&quot; alt=&quot;&quot; /&gt;&lt;figcaption&gt;redisé…ç½®æ›´æ–°&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;Sentinelé…ç½®æ›´æ–°&lt;a href=&quot;#sentinelé…ç½®æ›´æ–°&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;&lt;/p&gt;&lt;figure&gt;&lt;img src=&quot;https://blog.freelytomorrow.com/articles_img/redis-replica-sentinel/failure3.png&quot; alt=&quot;&quot; /&gt;&lt;figcaption&gt;sentinelé…ç½®æ›´æ–°&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;é‡æ–°ä¸Šçº¿db-51&lt;a href=&quot;#é‡æ–°ä¸Šçº¿db-51&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;&lt;/p&gt;&lt;figure&gt;&lt;img src=&quot;https://blog.freelytomorrow.com/articles_img/redis-replica-sentinel/failure4.png&quot; alt=&quot;&quot; /&gt;&lt;figcaption&gt;db51èº«ä»½&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;æŸ¥çœ‹sentinelæ—¥å¿—&lt;a href=&quot;#æŸ¥çœ‹sentinelæ—¥å¿—&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;&lt;/p&gt;&lt;figure&gt;&lt;img src=&quot;https://blog.freelytomorrow.com/articles_img/redis-replica-sentinel/sentinel-log.png&quot; alt=&quot;&quot; /&gt;&lt;figcaption&gt;sentinelæ—¥å¿—&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;</content:encoded></item><item><title>Redisæ•°æ®æŒä¹…åŒ–</title><link>https://white-festa.net/posts/redis-persistence/</link><guid isPermaLink="true">https://white-festa.net/posts/redis-persistence/</guid><description>å…³äºRedisçš„æ•°æ®æŒä¹…åŒ–æ–¹æ¡ˆçš„ç®€å•ä»‹ç» - ä¸»è¦æ˜¯RDBå’ŒAOF</description><pubDate>Sun, 21 May 2023 00:00:00 GMT</pubDate><content:encoded>&lt;section&gt;&lt;h2&gt;ä¸€ã€Redisçš„å››ç§æ•°æ®æŒä¹…åŒ–æ–¹æ¡ˆ&lt;a href=&quot;#ä¸€redisçš„å››ç§æ•°æ®æŒä¹…åŒ–æ–¹æ¡ˆ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;RDB&lt;a href=&quot;#rdb&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;å¿«ç…§/å†…å­˜å¿«ç…§ï¼Œæ ¹æ®ä¸€å®šçš„æ—¶é—´é—´éš”å°†å…¨éƒ¨æ•°æ®å†™å…¥ç£ç›˜ï¼›&lt;br /&gt;
ä¼˜ç‚¹ï¼š&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;RDBæ–‡ä»¶æ˜¯æŸä¸ªæ—¶é—´èŠ‚ç‚¹çš„å¿«ç…§ï¼Œé»˜è®¤ä½¿ç”¨LZFç®—æ³•è¿›è¡Œå‹ç¼©ï¼Œå‹ç¼©åçš„æ–‡ä»¶ä½“ç§¯è¿œè¿œå°äºå†…å­˜å¤§å°ï¼Œé€‚ç”¨äºå¤‡ä»½ã€å…¨é‡å¤åˆ¶ç­‰åœºæ™¯&lt;/li&gt;
&lt;li&gt;RedisåŠ è½½RDBæ–‡ä»¶æ¢å¤æ•°æ®è¦è¿œè¿œå¿«äºAOFæ–¹å¼ï¼›&lt;br /&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ç¼ºç‚¹:&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;RDBæ–¹å¼å®æ—¶æ€§ä¸å¤Ÿï¼Œæ— æ³•åšåˆ°ç§’çº§çš„æŒä¹…åŒ–ï¼›&lt;/li&gt;
&lt;li&gt;æ¯æ¬¡è°ƒç”¨bgsaveéƒ½éœ€è¦forkå­è¿›ç¨‹ï¼Œforkå­è¿›ç¨‹å±äºé‡é‡çº§æ“ä½œï¼Œé¢‘ç¹æ‰§è¡Œæˆæœ¬è¾ƒé«˜ï¼›&lt;/li&gt;
&lt;li&gt;RDBæ–‡ä»¶æ˜¯äºŒè¿›åˆ¶çš„ï¼Œæ²¡æœ‰å¯è¯»æ€§ï¼ŒAOFæ–‡ä»¶åœ¨äº†è§£å…¶ç»“æ„çš„æƒ…å†µä¸‹å¯ä»¥æ‰‹åŠ¨ä¿®æ”¹æˆ–è€…è¡¥å…¨ï¼›&lt;/li&gt;
&lt;li&gt;ç‰ˆæœ¬å…¼å®¹RDBæ–‡ä»¶é—®é¢˜&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;AOF&lt;a href=&quot;#aof&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;ç±»ä¼¼MySQLçš„BINLOGï¼Œä»¥æ—¥å¿—å½¢å¼è®°å½•äº†å¯¹æ•°æ®çš„å¢å‡å’Œä¿®æ”¹æ“ä½œï¼Œå¯ä»¥é€šè¿‡æ—¥å¿—è¿˜åŸæ•°æ®ï¼›&lt;/p&gt;&lt;p&gt;ä¼˜ç‚¹ï¼šæ—¥å¿—æœ‰å¯è¯»æ€§ï¼Œå®‰å…¨æ€§é«˜ï¼›
ç¼ºç‚¹ï¼šæ–‡ä»¶è¾ƒå¤§ï¼ŒéäºŒè¿›åˆ¶æ•°æ®æ¢å¤é€Ÿåº¦è¾ƒæ…¢ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;è™šæ‹Ÿå†…å­˜(VM)&lt;a href=&quot;#è™šæ‹Ÿå†…å­˜vm&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;ä»2.4ç‰ˆæœ¬å¼€å§‹Rediså®˜æ–¹æ˜ç¡®è¡¨ç¤ºä¸å»ºè®®ä½¿ç”¨VMæŒä¹…åŒ–æ–¹æ¡ˆï¼Œä»3.2ç‰ˆæœ¬å¼€å§‹ä¸å†æä¾›VMæŒä¹…åŒ–æ–¹æ¡ˆçš„èŒƒä¾‹&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;DISKSTORE&lt;a href=&quot;#diskstore&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;DISKSTOREæ˜¯åœ¨2.8ç‰ˆæœ¬æå‡ºçš„ä¸€ä¸ªæŠ€æœ¯è®¾æƒ³ï¼Œç›®å‰æ²¡æœ‰ä»»ä½•LTSç‰ˆæœ¬æ˜ç¡®å»ºè®®ä½¿ç”¨æ­¤æ–¹æ¡ˆï¼ŒåŒæ—¶ä¹Ÿæ²¡æœ‰ç›¸å…³çš„æŠ€æœ¯æ”¯æŒã€‚&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;äºŒã€RDBæ•°æ®å¿«ç…§&lt;a href=&quot;#äºŒrdbæ•°æ®å¿«ç…§&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;RDBæ•°æ®å¿«ç…§åŸºäºä¸¤ä¸ªå‘½ä»¤ï¼š&lt;code&gt;SAVE&lt;/code&gt;å’Œ&lt;code&gt;BGSAVE&lt;/code&gt;&lt;/p&gt;&lt;section&gt;&lt;h3&gt;SAVE&lt;a href=&quot;#save&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;ç”±äºRedisæ˜¯å•çº¿ç¨‹çš„ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸‹æ•°æ®é‡å¯èƒ½å¾ˆå¤§ï¼Œä½¿ç”¨SAVEä¼šåœ¨ä¸€å®šæ—¶é—´å†…é˜»å¡å…¶ä»–å‘½ä»¤çš„æ‰§è¡Œã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;BGSAVE&lt;a href=&quot;#bgsave&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;å³åå°å­˜å‚¨ï¼Œredisä¸»è¿›ç¨‹ä¼šæ‰§è¡Œforkæ“ä½œåˆ›é€ ä¸€ä¸ªå­è¿›ç¨‹ï¼ŒRDBæ“ä½œç”±è¿™ä¸ªå­è¿›ç¨‹è´Ÿè´£ï¼Œå®Œæˆåè¿›ç¨‹è‡ªåŠ¨ç»ˆæ­¢ï¼›åœ¨forkæ—¶ä¼šå‘ç”Ÿé˜»å¡ï¼Œä½†æŒç»­æ—¶é—´å¾ˆçŸ­ã€‚&lt;br /&gt;
å…·ä½“æµç¨‹å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;rediså®¢æˆ·ç«¯æ‰§è¡Œbgsaveå‘½ä»¤æˆ–è€…è‡ªåŠ¨è§¦å‘bgsaveå‘½ä»¤ï¼›&lt;/li&gt;
&lt;li&gt;ä¸»è¿›ç¨‹åˆ¤æ–­å½“å‰æ˜¯å¦å·²ç»å­˜åœ¨æ­£åœ¨æ‰§è¡Œçš„å­è¿›ç¨‹ï¼Œå¦‚æœå­˜åœ¨ï¼Œé‚£ä¹ˆä¸»è¿›ç¨‹ç›´æ¥è¿”å›ï¼›&lt;/li&gt;
&lt;li&gt;å¦‚æœä¸å­˜åœ¨æ­£åœ¨æ‰§è¡Œçš„å­è¿›ç¨‹ï¼Œé‚£ä¹ˆå°±forkä¸€ä¸ªæ–°çš„å­è¿›ç¨‹è¿›è¡ŒæŒä¹…åŒ–æ•°æ®ï¼Œforkè¿‡ç¨‹æ˜¯é˜»å¡çš„ï¼Œforkæ“ä½œå®Œæˆåä¸»è¿›ç¨‹å³å¯æ‰§è¡Œå…¶ä»–æ“ä½œï¼›&lt;/li&gt;
&lt;li&gt;å­è¿›ç¨‹å…ˆå°†æ•°æ®å†™å…¥åˆ°ä¸´æ—¶çš„rdbæ–‡ä»¶ä¸­ï¼Œå¾…å¿«ç…§æ•°æ®å†™å…¥å®Œæˆåå†åŸå­æ›¿æ¢æ—§çš„rdbæ–‡ä»¶ï¼›&lt;/li&gt;
&lt;li&gt;åŒæ—¶å‘é€ä¿¡å·ç»™ä¸»è¿›ç¨‹ï¼Œé€šçŸ¥ä¸»è¿›ç¨‹rdbæŒä¹…åŒ–å®Œæˆï¼Œä¸»è¿›ç¨‹æ›´æ–°ç›¸å…³çš„ç»Ÿè®¡ä¿¡æ¯ï¼ˆinfo Persistenceä¸‹çš„rdb_*ç›¸å…³é€‰é¡¹ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;section&gt;&lt;h4&gt;æ‰‹å·¥è§¦å‘BGSAVE&lt;a href=&quot;#æ‰‹å·¥è§¦å‘bgsave&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;éœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šæŒä¹…åŒ–æ•°æ®æ–‡ä»¶çš„ä¿å­˜è·¯å¾„ï¼š&lt;code&gt;dir /path&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;éœ€è¦ç¡®ä¿redisæœ‰æƒé™è®¿é—®æ­¤ç›®å½•&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨redis-cli bgsave&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;è‡ªåŠ¨è§¦å‘æŒä¹…åŒ–&lt;a href=&quot;#è‡ªåŠ¨è§¦å‘æŒä¹…åŒ–&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;section&gt;&lt;h5&gt;è§¦å‘æŒä¹…åŒ–çš„å››ç§æƒ…å†µ&lt;a href=&quot;#è§¦å‘æŒä¹…åŒ–çš„å››ç§æƒ…å†µ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h5&gt;&lt;ul&gt;
&lt;li&gt;é…ç½®æ–‡ä»¶ä¸­é…ç½®äº†è‡ªåŠ¨è§¦å‘æŒä¹…åŒ–å‚æ•°ï¼›&lt;/li&gt;
&lt;li&gt;ä¸»ä»å¤åˆ¶æ—¶ï¼Œä»èŠ‚ç‚¹è¦ä»ä¸»èŠ‚ç‚¹è¿›è¡Œå…¨é‡å¤åˆ¶æ—¶ä¹Ÿä¼šè§¦å‘bgsaveæ“ä½œï¼Œç”Ÿæˆå½“æ—¶çš„å¿«ç…§å‘é€åˆ°ä»èŠ‚ç‚¹ï¼›&lt;/li&gt;
&lt;li&gt;æ‰§è¡Œdebug reloadå‘½ä»¤é‡æ–°åŠ è½½redisæ—¶ä¹Ÿä¼šè§¦å‘bgsaveæ“ä½œï¼›&lt;/li&gt;
&lt;li&gt;é»˜è®¤æƒ…å†µä¸‹æ‰§è¡Œshutdownå‘½ä»¤æ—¶ï¼Œå¦‚æœæ²¡æœ‰å¼€å¯aofæŒä¹…åŒ–ï¼Œé‚£ä¹ˆä¹Ÿä¼šè§¦å‘bgsaveæ“ä½œï¼›&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h5&gt;ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ è‡ªåŠ¨è§¦å‘æŒä¹…åŒ–å‚æ•°&lt;a href=&quot;#ä¿®æ”¹é…ç½®æ–‡ä»¶æ·»åŠ è‡ªåŠ¨è§¦å‘æŒä¹…åŒ–å‚æ•°&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h5&gt;&lt;ul&gt;
&lt;li&gt;æ‰§è¡ŒBGSAVEçš„æ—¶é—´é¢‘ç‡&lt;br /&gt;
&lt;code&gt;save M-seconds N-changes&lt;/code&gt;: åœ¨Mç§’å†…æœ‰Næ¬¡ä¿®æ”¹æ—¶ï¼Œè§¦å‘æŒä¹…åŒ–æ“ä½œ&lt;/li&gt;
&lt;li&gt;æŒä¹…åŒ–å‡ºé”™ï¼Œä¸»è¿›ç¨‹æ˜¯å¦åœæ­¢å†™å…¥: &lt;code&gt;stop-writes-on-bgsave-error yes/no&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;æ˜¯å¦å‹ç¼©æ•°æ®: &lt;code&gt;rdbcompression yes/no&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;å¯¼å…¥æ—¶æ˜¯å¦æ£€æŸ¥: &lt;code&gt;rdbchecksum yes/no&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;RDBæ–‡ä»¶åœ¨ç£ç›˜ä¸Šçš„åç§°: &lt;code&gt;dbfilename&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;RDBæ•°æ®æ¢å¤&lt;a href=&quot;#rdbæ•°æ®æ¢å¤&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;åªè¦å°†rdbæ–‡ä»¶æ”¾å…¥é…ç½®æ–‡ä»¶ä¸­å£°æ˜çš„dirè·¯å¾„å³å¯å®ç°æ•°æ®æ¢å¤ã€‚&lt;/li&gt;
&lt;li&gt;rdbæ–‡ä»¶åä¸€å®šè¦å’Œé…ç½®æ–‡ä»¶ä¸­çš„ä¸€è‡´ï¼Œå¦‚æœé…ç½®æ–‡ä»¶ä¸­æ²¡æœ‰æŒ‡å®šdbfilenameï¼Œåˆ™å¿…é¡»æ˜¯é»˜è®¤çš„æ–‡ä»¶ådump.rdbã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;RDBä¸åŒæƒ…å†µä¸‹çš„è¿›ç¨‹ç»ˆæ­¢è§¦å‘æŒä¹…åŒ–çš„é—®é¢˜&lt;a href=&quot;#rdbä¸åŒæƒ…å†µä¸‹çš„è¿›ç¨‹ç»ˆæ­¢è§¦å‘æŒä¹…åŒ–çš„é—®é¢˜&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;section&gt;&lt;h5&gt;æ²¡é…ç½®saveå‚æ•°&lt;a href=&quot;#æ²¡é…ç½®saveå‚æ•°&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h5&gt;&lt;ul&gt;
&lt;li&gt;shutdown/pkill/kill éƒ½ä¸ä¼šæŒä¹…åŒ–æ•°æ®&lt;/li&gt;
&lt;li&gt;å¯ä»¥æ‰‹åŠ¨æ‰§è¡Œbgsave&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h5&gt;é…ç½®äº†saveå‚æ•°&lt;a href=&quot;#é…ç½®äº†saveå‚æ•°&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h5&gt;&lt;ul&gt;
&lt;li&gt;shutdown/pkill/kill éƒ½ä¼šè‡ªåŠ¨è§¦å‘bgsaveæŒä¹…åŒ–&lt;/li&gt;
&lt;li&gt;ä½†æ˜¯pkill -9 redis ä¸ä¼šæŒä¹…åŒ–ï¼Œå› ä¸ºé€šå¸¸çš„killä¿¡å·ä¸º15ï¼Œæ˜¯æ­£å¸¸é€€å‡ºï¼Œè¿›ç¨‹ç»ˆæ­¢å‰ä¼šè¿›è¡ŒæŒä¹…åŒ–æ“ä½œï¼›kill -9ä¸ºå¼ºåˆ¶ç»ˆæ­¢ï¼Œä¸ä¼šè§¦å‘æŒä¹…åŒ–æ“ä½œ(å› ä¸ºè¿›ç¨‹ç›´æ¥æ²¡äº†)&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;RDBæ€»ç»“&lt;a href=&quot;#rdbæ€»ç»“&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;RDBæŒä¹…åŒ–çš„ä¼˜ç‚¹&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;RDBæ–‡ä»¶æ˜¯æŸä¸ªæ—¶é—´èŠ‚ç‚¹çš„å¿«ç…§ï¼Œé»˜è®¤ä½¿ç”¨LZFç®—æ³•è¿›è¡Œå‹ç¼©ï¼Œå‹ç¼©åçš„æ–‡ä»¶ä½“ç§¯è¿œè¿œå°äºå†…å­˜å¤§å°ï¼Œé€‚ç”¨äºå¤‡ä»½ã€å…¨é‡å¤åˆ¶ç­‰åœºæ™¯ï¼›&lt;/li&gt;
&lt;li&gt;RedisåŠ è½½RDBæ–‡ä»¶æ¢å¤æ•°æ®è¦è¿œè¿œå¿«äºAOFæ–¹å¼ï¼›&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ç¼ºç‚¹&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;RDBæ–¹å¼å®æ—¶æ€§ä¸å¤Ÿï¼Œæ— æ³•åšåˆ°ç§’çº§çš„æŒä¹…åŒ–ï¼›&lt;/li&gt;
&lt;li&gt;æ¯æ¬¡è°ƒç”¨bgsaveéƒ½éœ€è¦forkå­è¿›ç¨‹ï¼Œforkå­è¿›ç¨‹å±äºé‡é‡çº§æ“ä½œï¼Œé¢‘ç¹æ‰§è¡Œæˆæœ¬è¾ƒé«˜ï¼›&lt;/li&gt;
&lt;li&gt;RDBæ–‡ä»¶æ˜¯äºŒè¿›åˆ¶çš„ï¼Œæ²¡æœ‰å¯è¯»æ€§ï¼ŒAOFæ–‡ä»¶åœ¨äº†è§£å…¶ç»“æ„çš„æƒ…å†µä¸‹å¯ä»¥æ‰‹åŠ¨ä¿®æ”¹æˆ–è€…è¡¥å…¨ï¼›&lt;/li&gt;
&lt;li&gt;ç‰ˆæœ¬å…¼å®¹RDBæ–‡ä»¶é—®é¢˜ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;ä¸‰ã€AOFæ—¥å¿—&lt;a href=&quot;#ä¸‰aofæ—¥å¿—&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Redisæ˜¯â€œå†™åâ€æ—¥å¿—ï¼ŒRediså…ˆæ‰§è¡Œå‘½ä»¤ï¼ŒæŠŠæ•°æ®å†™å…¥å†…å­˜ï¼Œç„¶åæ‰è®°å½•æ—¥å¿—ã€‚æ—¥å¿—é‡Œè®°å½•çš„æ˜¯Redisæ”¶åˆ°çš„æ¯ä¸€æ¡å‘½ä»¤ï¼Œè¿™äº›å‘½ä»¤æ˜¯ä»¥æ–‡æœ¬å½¢å¼ä¿å­˜ã€‚&lt;/p&gt;&lt;section&gt;&lt;h3&gt;AOFæ—¥å¿—è®°å½•çš„æ­¥éª¤&lt;a href=&quot;#aofæ—¥å¿—è®°å½•çš„æ­¥éª¤&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;å‘½ä»¤è¿½åŠ (Append)ï¼šæœåŠ¡å™¨åœ¨æ‰§è¡Œå®Œä¸€ä¸ªå†™å‘½ä»¤ä¹‹åï¼Œä¼šä»¥åè®®æ ¼å¼å°†è¢«æ‰§è¡Œçš„å†™å‘½ä»¤è¿½åŠ åˆ°æœåŠ¡å™¨çš„ aof_buf ç¼“å†²åŒºã€‚&lt;/li&gt;
&lt;li&gt;æ–‡ä»¶å†™å…¥(write)å’Œæ–‡ä»¶åŒæ­¥(sync)&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;æ—¥å¿—å†™å…¥ç­–ç•¥&lt;a href=&quot;#æ—¥å¿—å†™å…¥ç­–ç•¥&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;åŸºäºä¸‰ç§å†™å…¥ç­–ç•¥å°†AOF_Bufferç¼“å†²åŒºå†…çš„æ•°æ®å†™å…¥åˆ°æ—¥å¿—ä¸­&lt;/p&gt;&lt;section&gt;&lt;h4&gt;Always&lt;a href=&quot;#always&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;æ¯ä¸ªå‘½ä»¤æ‰§è¡Œå®Œæ¯•ï¼Œç«‹å³åŒæ­¥å†™å…¥æ—¥å¿—åˆ°ç£ç›˜&lt;/p&gt;&lt;p&gt;ä¼˜ç‚¹ï¼šå¯é æ€§å¼ºï¼Œæ•°æ®åŸºæœ¬ä¸ä¸¢
ç¼ºç‚¹ï¼š&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;æ¯ä¸ªå‘½ä»¤éƒ½è¦å†™å…¥æ—¥å¿—ç£ç›˜ï¼Œredisæ€§èƒ½å½±å“å¾ˆå¤§ï¼›&lt;/li&gt;
&lt;li&gt;æŒç»­å†™å…¥é›¶æ•£çš„æ•°æ®åˆ°ç£ç›˜å¯¹ç£ç›˜çš„å‹åŠ›å¾ˆå¤§ï¼Œç”±äºç£å¤´é•¿æœŸé¢‘ç¹çš„è¿›è¡Œå¯»å€ï¼Œæ›´å®¹æ˜“é€ æˆç£ç›˜è€åŒ–ï¼›&lt;/li&gt;
&lt;li&gt;ç£ç›˜ä¸å†…å­˜ä¸­å­˜åœ¨å·¨å¤§çš„è¯»å†™é€Ÿåº¦å·®å¼‚ï¼Œä½¿ç”¨ç¼“å†²åŒºå¯ä»¥ä¸€æ¬¡æ€§å°†å¤§é‡æ•°æ®å†™å…¥ï¼Œé™ä½ç£ç›˜è´Ÿè·ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;Everysec&lt;a href=&quot;#everysec&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;æ¯ä¸ªå‘½ä»¤æ‰§è¡Œå®Œæ¯•ï¼Œæ—¥å¿—åªä¼šå†™å…¥AOFæ–‡ä»¶çš„å†…å­˜ç¼“å†²åŒºï¼Œæ¯éš”ä¸€ç§’æŠŠç¼“å†²åŒºçš„æ—¥å¿—å†™å…¥åˆ°ç£ç›˜ã€‚
ä¼˜ç‚¹ï¼šæ€§èƒ½å’Œå®‰å…¨æ€§å¹³è¡¡
ç¼ºç‚¹ï¼šå®•æœºä¼šä¸¢å¤±1ç§’å†…çš„æ•°æ®&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;No&lt;a href=&quot;#no&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;æ¯ä¸ªå‘½ä»¤å†™å®Œï¼Œæ—¥å¿—åªå†™å…¥AOFæ–‡ä»¶çš„å†…å­˜ç¼“å†²åŒºï¼Œæ“ä½œç³»ç»Ÿè‡ªç”±è°ƒåº¦ï¼ŒæŒä¹…åŒ–åˆ°ç£ç›˜ã€‚
ä¼˜ç‚¹ï¼šæ€§èƒ½è¶³å¤Ÿå¥½
ç¼ºç‚¹ï¼šå®•æœºæ—¶ï¼Œä¸ç¡®å®šä¸¢å¤±çš„æ•°æ®&lt;/p&gt;&lt;p&gt;&lt;em&gt;ä»¥ä¸Šä¸‰ç§å†™å…¥ç­–ç•¥æœ¬è´¨ä¸Šæ˜¯åœ¨å¯é æ€§å’Œæ€§èƒ½ä¹‹é—´åšå–èˆ&lt;/em&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;å¼€å¯AOFåŠŸèƒ½&lt;a href=&quot;#å¼€å¯aofåŠŸèƒ½&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;æ·»åŠ AOFå‚æ•°åˆ°é…ç½®æ–‡ä»¶&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;å¼€å¯AOFåŠŸèƒ½ï¼š&lt;code&gt;appendonly yes/no&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;æŒ‡å®šAOFæ–‡ä»¶å: &lt;code&gt;appendfilename &quot;redis_appendonly.aof&quot;&lt;/code&gt;ï¼ˆå…·ä½“è·¯å¾„ä»¥dirå‚æ•°ä¸ºå‡†ï¼‰&lt;/li&gt;
&lt;li&gt;æŒ‡å®šbufferå†™å…¥æ–¹å¼: &lt;code&gt;appendfsync always/everysec/no&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;å››ã€RDBå’ŒAOFæ··åˆæŒä¹…åŒ–&lt;a href=&quot;#å››rdbå’Œaofæ··åˆæŒä¹…åŒ–&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;æ··åˆæŒä¹…åŒ–å°±æ˜¯æ—¥å¿—é‡å†™çš„ä¸€ä¸ªæ­¥éª¤ï¼Œä¸»è¦é€šè¿‡åº•å±‚bgrewriteaofé‡å†™æ—¥å¿—ï¼Œä»¥åŠé€šè¿‡&lt;code&gt;aof-use-rdb-preamble yes/no&lt;/code&gt;å‚æ•°å¼€å¯æ··åˆæŒä¹…åŒ–åŠŸèƒ½ã€‚&lt;/li&gt;
&lt;li&gt;æ··åˆæŒä¹…åŒ–åçš„æ—¥å¿—ï¼Œéƒ¨åˆ†æ˜¯rdbçš„äºŒè¿›åˆ¶æ•°æ®ï¼Œéƒ¨åˆ†æ˜¯aofçš„å¯è¯»æ•°æ®&lt;/li&gt;
&lt;/ol&gt;&lt;section&gt;&lt;h3&gt;æ—¥å¿—é‡å†™&lt;a href=&quot;#æ—¥å¿—é‡å†™&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;åœ¨redisä¸­ä½¿ç”¨BGREWRITEAOFå‘½ä»¤é‡å†™AOFæ—¥å¿—ï¼›é‡å†™åç”Ÿæˆçš„AOFæ—¥å¿—å°†å‰”é™¤å¯è¯»æ“ä½œï¼Œå°†ç°æœ‰æ•°æ®å†™ä¸ºäºŒè¿›åˆ¶RDBæ•°æ®ï¼›
å½“å†æœ‰æ–°æ•°æ®å†™å…¥æ—¶ï¼Œä¼šè‡ªåŠ¨åœ¨RDBæ•°æ®ä¸‹é¢å†™å…¥AOFæ—¥å¿—ï¼Œç›´åˆ°å†æ¬¡é€šè¿‡BGREWRITEAOFå‘½ä»¤ï¼Œå°†ä¸Šä¸‹ä¸¤ä¸ªéƒ¨åˆ†åˆå¹¶ä¸ºä¸€æ®µRDBæ•°æ®ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;è‡ªåŠ¨è¿›è¡Œæ—¥å¿—é‡å†™çš„å‚æ•°&lt;a href=&quot;#è‡ªåŠ¨è¿›è¡Œæ—¥å¿—é‡å†™çš„å‚æ•°&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;section&gt;&lt;h4&gt;auto-aof-rewrite-percentage&lt;a href=&quot;#auto-aof-rewrite-percentage&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;å½“æ–°å†™å…¥çš„æ•°æ®å¤§å°ç›¸å½“äºå‰ä¸€æ¬¡å†™å…¥çš„ä¸€å®šç™¾åˆ†æ¯”æ—¶ï¼Œæ‰§è¡Œæ—¥å¿—é‡å†™ï¼Œéœ€è¦ç»“åˆauto-aof-rewrite-min-sizeï¼Œè®¾å®šä¸€ä¸ªè¿›è¡Œé‡å†™çš„æ—¥å¿—æœ€å°å€¼&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;auto-aof-rewrite-percentage&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;50&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;auto-aof-rewrite-min-size&lt;a href=&quot;#auto-aof-rewrite-min-size&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;å¯ç”¨æ—¥å¿—é‡å†™çš„æœ€å°å€¼ï¼Œå¦‚æœæ—¥å¿—æ²¡æœ‰è¾¾åˆ°è¿™ä¸ªå¤§å°ï¼Œé‚£ä¹ˆå³ä½¿æ»¡è¶³äº†auto-aof-rewrite-percentageçš„è®¾å®šä¹Ÿä¸ä¼šé‡å†™ã€‚&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;auto-aof-rewrite-min-size&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;2mb&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;</content:encoded></item><item><title>Rediså…¥é—¨</title><link>https://white-festa.net/posts/redis-basic/</link><guid isPermaLink="true">https://white-festa.net/posts/redis-basic/</guid><description>Redisæ•°æ®åº“çš„å®‰è£…ã€åŸºæœ¬å‘½ä»¤å’Œæ•°æ®ç±»å‹</description><pubDate>Wed, 17 May 2023 00:00:00 GMT</pubDate><content:encoded>&lt;section&gt;&lt;h2&gt;ä»€ä¹ˆæ˜¯redis&lt;a href=&quot;#ä»€ä¹ˆæ˜¯redis&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Rediså³è¿œç¨‹å­—å…¸æœåŠ¡ï¼Œæ˜¯ä¸€ä¸ªå¼€æºçš„ä½¿ç”¨ANSI Cè¯­è¨€ç¼–å†™ã€æ”¯æŒç½‘ç»œã€å¯åŸºäºå†…å­˜äº¦å¯æŒä¹…åŒ–çš„æ—¥å¿—å‹ã€&lt;code&gt;Key-Value&lt;/code&gt;æ•°æ®åº“ï¼Œå¹¶æä¾›å¤šç§è¯­è¨€çš„APIï¼›redisä¼šå‘¨æœŸæ€§çš„æŠŠæ›´æ–°çš„æ•°æ®å†™å…¥ç£ç›˜æˆ–è€…æŠŠä¿®æ”¹æ“ä½œå†™å…¥è¿½åŠ çš„è®°å½•æ–‡ä»¶ã€‚&lt;/p&gt;&lt;section&gt;&lt;h4&gt;ä¸ºä»€ä¹ˆä½¿ç”¨Redis&lt;a href=&quot;#ä¸ºä»€ä¹ˆä½¿ç”¨redis&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;Redisæ˜¯ä¸€ç§æ”¯æŒkey-valueç­‰å¤šç§æ•°æ®ç»“æ„çš„å­˜å‚¨ç³»ç»Ÿï¼Œæ˜¯åŸºäºå†…å­˜çš„ï¼Œè¯»å†™é€Ÿåº¦å¾ˆå¿«ï¼Œé€šå¸¸ç”¨äºå°†æŸ¥è¯¢æˆæœ¬æ¯”è¾ƒé«˜çš„æ•°æ®å°†æ…¢ä»‹è´¨(ç£ç›˜)å­˜å‚¨åˆ°å¿«ä»‹è´¨(å†…å­˜)ä¸­ï¼Œè¾¾åˆ°å¿«é€Ÿå“åº”çš„æ•ˆæœï¼›ä¸€äº›é¢‘ç¹è¢«è®¿é—®çš„æ•°æ®ï¼Œç»å¸¸è¢«è®¿é—®çš„æ•°æ®å¦‚æœæ”¾åœ¨å…³ç³»å‹æ•°æ®åº“ï¼Œæ¯æ¬¡æŸ¥è¯¢çš„å¼€é”€éƒ½ä¼šå¾ˆå¤§ï¼Œè€Œæ”¾åœ¨redisä¸­ï¼Œå› ä¸ºredis æ˜¯æ”¾åœ¨å†…å­˜ä¸­çš„å¯ä»¥å¾ˆé«˜æ•ˆçš„è®¿é—®ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;Redisäº¤äº’å¼å®‰è£…è„šæœ¬&lt;a href=&quot;#redisäº¤äº’å¼å®‰è£…è„šæœ¬&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;/bin/bash&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;exec_dir&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;create_dir&lt;/span&gt;&lt;span&gt;(){&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;mkdir&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-p&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/opt/redis/{conf,logs,pid,data}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;depandencies&lt;/span&gt;&lt;span&gt;(){&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;yum&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;install&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;gcc&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;make&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-y&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;install&lt;/span&gt;&lt;span&gt;(){&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;read&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-p&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;$&apos;è½¯ä»¶æºUrl: &lt;/span&gt;&lt;span&gt;\n&lt;/span&gt;&lt;span&gt;&apos;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;donwload_link&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;wget&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&lt;span&gt;${&lt;/span&gt;&lt;span&gt;donwload_link&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;tar&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-zxf&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;redis&lt;/span&gt;&lt;span&gt;*&lt;/span&gt;&lt;span&gt;.tar.gz&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-C&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/opt&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;read&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-p&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;$&apos;Rediså¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„: &lt;/span&gt;&lt;span&gt;\n&lt;/span&gt;&lt;span&gt;&apos;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;exec_dir&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt;&lt;span&gt; [ &lt;/span&gt;&lt;span&gt;-z&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;$exec_dir&lt;/span&gt;&lt;span&gt; ]; &lt;/span&gt;&lt;span&gt;then&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;cd&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/opt/redis-&lt;/span&gt;&lt;span&gt;*&lt;/span&gt;&lt;span&gt; &amp;amp;&amp;amp; &lt;/span&gt;&lt;span&gt;make&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;MALLOC=libc&lt;/span&gt;&lt;span&gt; &amp;amp;&amp;amp; &lt;/span&gt;&lt;span&gt;make&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;install&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;cd&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/opt/redis-&lt;/span&gt;&lt;span&gt;*&lt;/span&gt;&lt;span&gt; &amp;amp;&amp;amp; &lt;/span&gt;&lt;span&gt;make&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;MALLOC=libc&lt;/span&gt;&lt;span&gt; &amp;amp;&amp;amp; &lt;/span&gt;&lt;span&gt;make&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;PREFIX=&lt;/span&gt;&lt;span&gt;&lt;span&gt;${&lt;/span&gt;&lt;span&gt;exec_dir&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;install&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;fi&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;make_conf&lt;/span&gt;&lt;span&gt;(){&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;touch&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/opt/redis/conf/redis.conf&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;read&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-p&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;$&apos;Redisè¿è¡Œç«¯å£: &lt;/span&gt;&lt;span&gt;\n&lt;/span&gt;&lt;span&gt;&apos;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;redis_port&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;local&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;local_ip&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;$(&lt;/span&gt;&lt;/span&gt;&lt;span&gt;ifconfig&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;eth1&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;grep&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;inet&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;grep&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-v&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;127.0.0.1&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;grep&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-v&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;inet6&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;awk&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;{print $2}&apos;&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;tr&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-d&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;addr:&quot;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;27&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;local&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;public_ip&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;$(&lt;/span&gt;&lt;/span&gt;&lt;span&gt;ifconfig&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;eth0&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;grep&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;inet&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;grep&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-v&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;127.0.0.1&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;grep&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-v&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;inet6&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;awk&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;{print $2}&apos;&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;tr&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-d&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;addr:&quot;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;28&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# Reidsé…ç½®æ–‡ä»¶&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;29&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;cat&lt;/span&gt;&lt;span&gt; &amp;gt; &lt;/span&gt;&lt;span&gt;/opt/redis/conf/redis.conf&lt;/span&gt;&lt;span&gt; &amp;lt;&amp;lt; &lt;/span&gt;&lt;span&gt;EOF&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;30&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;daemonize yes&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;31&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;bind 127.0.0.1 &lt;/span&gt;&lt;span&gt;&lt;span&gt;${&lt;/span&gt;&lt;span&gt;local_ip&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&lt;span&gt;${&lt;/span&gt;&lt;span&gt;public_ip&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;32&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;port &lt;/span&gt;&lt;span&gt;&lt;span&gt;${&lt;/span&gt;&lt;span&gt;redis_port&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;33&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;pidfile /opt/redis/pid/redis.pid&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;34&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;logfile /opt/redis/logs/redis.log&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;35&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;dir /opt/redis/data/&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;36&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;save 60 1000&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;37&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;EOF&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;38&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;39&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;create_user&lt;/span&gt;&lt;span&gt;(){&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;40&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;read&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-p&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;$&apos;Redis GID: &lt;/span&gt;&lt;span&gt;\n&lt;/span&gt;&lt;span&gt;&apos;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;redis_gid&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;41&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;read&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-p&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;$&apos;Redis UID: &lt;/span&gt;&lt;span&gt;\n&lt;/span&gt;&lt;span&gt;&apos;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;redis_uid&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;42&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;groupadd&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;redis&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-g&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&lt;span&gt;${&lt;/span&gt;&lt;span&gt;redis_gid&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;43&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;useradd&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;redis&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-s&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/sbin/nologin&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-M&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-u&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&lt;span&gt;${&lt;/span&gt;&lt;span&gt;redis_uid&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-g&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&lt;span&gt;${&lt;/span&gt;&lt;span&gt;redis_gid&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;44&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;45&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;chown&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-R&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;redis.redis&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/opt/redis&lt;/span&gt;&lt;span&gt;*&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;46&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;47&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;systemd_script&lt;/span&gt;&lt;span&gt;(){&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;48&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;# Redisçš„æœåŠ¡æ§åˆ¶è„šæœ¬&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;49&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt;&lt;span&gt; [ &lt;/span&gt;&lt;span&gt;-z&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;${&lt;/span&gt;&lt;span&gt;exec_dir&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span&gt; ]; &lt;/span&gt;&lt;span&gt;then&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;50&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;exec_dir&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&quot;/usr/local/bin&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;51&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;fi&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;52&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;touch&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/lib/systemd/system/redis.service&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;53&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;cat&lt;/span&gt;&lt;span&gt; &amp;gt; &lt;/span&gt;&lt;span&gt;/lib/systemd/system/redis.service&lt;/span&gt;&lt;span&gt; &amp;lt;&amp;lt; &lt;/span&gt;&lt;span&gt;EOF&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;54&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[Unit]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;55&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Description=Redis data server&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;56&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;After=syslog.target network.target remote-fs.target nss-lookup.target&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;57&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;58&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[Service]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;59&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Type=forking&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;60&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ExecStart=/bin/bash -c &apos;&lt;/span&gt;&lt;span&gt;&lt;span&gt;${&lt;/span&gt;&lt;span&gt;exec_dir&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span&gt;/redis-server /opt/redis/conf/redis.conf&apos;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;61&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ExecStop=/bin/bash -c &apos;&lt;/span&gt;&lt;span&gt;&lt;span&gt;${&lt;/span&gt;&lt;span&gt;exec_dir&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span&gt;/redis-cli shutdown&apos;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;62&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Restart=always&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;63&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;PrivateTmp=True&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;64&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;65&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[Install]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;66&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;WantedBy=multi-user.target&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;67&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;EOF&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;68&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;systemctl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;daemon-reload&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;69&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;70&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;create_dir&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;71&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;depandencies&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;72&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;install&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;73&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;make_conf&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;74&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;create_user&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;75&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;systemd_script&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;76&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;77&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;systemctl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;start&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;redis&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;78&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;redis-cli&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;info&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;server&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;RedisåŸºæœ¬å‘½ä»¤&lt;a href=&quot;#redisåŸºæœ¬å‘½ä»¤&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;Rediså¯åŠ¨å’Œå…³é—­&lt;a href=&quot;#rediså¯åŠ¨å’Œå…³é—­&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;å¯åŠ¨Redis&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;redis-server&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/é…ç½®æ–‡ä»¶&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;Rediså®¢æˆ·ç«¯ç™»å…¥&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;redis-cli&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-h&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;ip_addr&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-p&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;port&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;å…³é—­Redis server&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# åœ¨Redisäº¤äº’ç•Œé¢ä¸­&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;shutdown&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;save&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;# å…³é—­å¹¶ä¿å­˜æ•°æ®&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;shutdown&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;nosave&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;# å…³é—­å¹¶ä¸ä¿å­˜æ•°æ®&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# ä¹Ÿå¯ä»¥å…äº¤äº’æ“ä½œ&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;redis-cli&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-h&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;ip_addr&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-p&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;port&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;shutdown&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;save&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;infoå‘½ä»¤&lt;a href=&quot;#infoå‘½ä»¤&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;infoå‘½ä»¤ç”¨äºæŸ¥çœ‹Redisçš„åŒºå—ä¿¡æ¯&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;127.0.0.1:6379&lt;/span&gt;&lt;span&gt;&amp;gt; &lt;/span&gt;&lt;span&gt;info&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;cpu&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# CPU&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;used_cpu_sys:2.348677&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;used_cpu_user:2.014707&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;used_cpu_sys_children:0.000000&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;used_cpu_user_children:0.000000&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;åˆ‡æ¢åº“&lt;a href=&quot;#åˆ‡æ¢åº“&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Redisé»˜è®¤æœ‰16ä¸ªæ•°æ®åº“ï¼Œç¼–å·ä»0åˆ°15ï¼Œé»˜è®¤æ•°æ®åº“ä¸º0å·åº“ã€‚
ä½¿ç”¨SELECT INDEXåˆ‡æ¢æ•°æ®åº“&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;127.0.0.1:6379&lt;/span&gt;&lt;span&gt;&amp;gt; &lt;/span&gt;&lt;span&gt;SELECT&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;OK&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;127.0.0.1:6379[1]&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;åˆ åº“&lt;a href=&quot;#åˆ åº“&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;æ¸…ç©ºå½“å‰æ‰€åœ¨çš„åº“&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;FLUSHDB&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;æ¸…ç©ºRedisçš„å…¨éƒ¨æ•°æ®åº“&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;FLUSHALL&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;Redisäº”å¤§æ•°æ®ç±»å‹&lt;a href=&quot;#redisäº”å¤§æ•°æ®ç±»å‹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;åˆ†åˆ«æ˜¯ï¼šå­—ç¬¦ä¸²ç±»å‹ã€åˆ—è¡¨List(é“¾è¡¨)ã€é›†åˆSETã€å“ˆå¸ŒHASHå’ŒZsetæœ‰åºé›†åˆ&lt;/p&gt;&lt;section&gt;&lt;h3&gt;å­—ç¬¦ä¸²ç±»å‹&lt;a href=&quot;#å­—ç¬¦ä¸²ç±»å‹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;section&gt;&lt;h4&gt;å‘½ä»¤&lt;a href=&quot;#å‘½ä»¤&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;get,mget&lt;/li&gt;
&lt;li&gt;set,mset&lt;/li&gt;
&lt;li&gt;del&lt;/li&gt;
&lt;li&gt;incr:å°†é”®å­˜å‚¨çš„å€¼åŠ 1&lt;/li&gt;
&lt;li&gt;decr:å°†é”®å­˜å‚¨çš„å€¼å‡1&lt;/li&gt;
&lt;li&gt;incrbyï¼šå°†é”®å­˜å‚¨çš„å€¼åŠ ä¸ŠæŒ‡å®šæ•´æ•°&lt;/li&gt;
&lt;li&gt;decrbyï¼šå°†é”®å­˜å‚¨çš„å€¼å‡å»æŒ‡å®šæ•´æ•°&lt;/li&gt;
&lt;/ol&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;å­—ç¬¦ä¸²ç±»å‹çš„å¸¸è§ç”¨æ³•&lt;a href=&quot;#å­—ç¬¦ä¸²ç±»å‹çš„å¸¸è§ç”¨æ³•&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;æ•°æ®ç¼“å­˜ï¼š
æŠŠç»å¸¸è¯»å–çš„urlã€å­—ç¬¦ä¸²ã€éŸ³è§†é¢‘å­—ç¬¦ä¸²ç­‰å­˜å‚¨åˆ°rediså†…ã€‚redisä½œä¸ºç¼“å­˜å±‚ï¼Œèƒ½å¤ŸåŠ é€Ÿæ•°æ®è¯»å–ï¼›åŒæ—¶å°†MySQLä½œä¸ºæ•°æ®æŒä¹…åŒ–å±‚ï¼Œé™ä½mysqlçš„è®¿é—®å‹åŠ›ã€‚
è§†é¢‘ç±»urlä¸€èˆ¬æŠŠè§†é¢‘æ–‡ä»¶å­˜å‚¨åˆ°è¿œç«¯CDNæœåŠ¡å™¨ï¼Œå¹¶å°†é“¾æ¥è½¬å­˜åœ¨MySQLé‡Œï¼Œåœ¨ç”¨æˆ·è¯»å–è§†é¢‘æ—¶ï¼Œé€šè¿‡å‰ç«¯JSåŠ å¯†å¤„ç†è®©ç”¨æˆ·å¾—åˆ°ä¸€ä¸ªåŠ å¯†åçš„urlï¼Œæ— æ³•é€šè¿‡æ­¤urlç›´æ¥è·å¾—æºæ–‡ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;è®¡æ•°å™¨ï¼š
åˆ©ç”¨INCR/DECRå®ç°å¢åŠ ç‚¹èµæ•°ã€è½¬å‘æ•°ç­‰åŠŸèƒ½ï¼›
ç”±äºredisæ˜¯å•çº¿ç¨‹æ¨¡å¼ï¼Œå‘½ä»¤éƒ½æ˜¯æœ‰åºæ‰§è¡Œçš„ï¼Œå› æ­¤èƒ½å¤Ÿç¡®ä¿æ•°æ®æ­£ç¡®æ€§ã€‚&lt;/li&gt;
&lt;li&gt;å­˜å‚¨ç½‘ç«™ç”¨æˆ·çš„ç™»å½•ä¼šè¯sessionæˆ–token&lt;/li&gt;
&lt;/ol&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;åˆ—è¡¨List(é“¾è¡¨)&lt;a href=&quot;#åˆ—è¡¨listé“¾è¡¨&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;section&gt;&lt;h4&gt;Listç›¸å…³å‘½ä»¤&lt;a href=&quot;#listç›¸å…³å‘½ä»¤&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;LPUSH/RPUSH:å°†å€¼ä»åˆ—è¡¨å·¦/å³ç«¯æ¨å…¥&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;LPUSH/RPUSH&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;key&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;LPOP/RPOP:ä»åˆ—è¡¨å·¦ç«¯/å³ç«¯å¼¹å‡ºä¸€ä¸ªå€¼&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;LPOP/RPOP&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;key&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;LRANGE:è·å–ç»™å®šèŒƒå›´å†…çš„åˆ—è¡¨çš„å€¼&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;LRANGE&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;key&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;index1&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;index2&lt;/span&gt;&lt;span&gt; (èŒƒå›´ä»0åˆ°-1æ˜¾ç¤ºåˆ—è¡¨å†…çš„æ‰€æœ‰å€¼)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;LINDEX:è·å¾—æŒ‡å®šç´¢å¼•çš„å€¼&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;LINDEX&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;key&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;index&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;å…¶ä¸­indexä¸ºè´Ÿæ—¶ä»£è¡¨å€’æ•°çš„indexã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;å¸¸è§ç”¨æ³•&lt;a href=&quot;#å¸¸è§ç”¨æ³•&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;ç”Ÿäº§-æ¶ˆè´¹è€…æ¨¡å‹ï¼š
é€šè¿‡LPUSHå‘æ¶ˆæ¯é˜Ÿåˆ—ä¸­å‹å…¥è®¢å•ï¼Œé€šè¿‡RPOPå¼¹å‡ºæœ€è€çš„è®¢å•å¹¶å¤„ç†&lt;/li&gt;
&lt;li&gt;æ—¶é—´è½´&lt;/li&gt;
&lt;/ol&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;é›†åˆSET&lt;a href=&quot;#é›†åˆset&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;section&gt;&lt;h4&gt;ç‰¹ç‚¹&lt;a href=&quot;#ç‰¹ç‚¹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;é›†åˆå†…çš„æ‰€æœ‰å…ƒç´ å”¯ä¸€ï¼Œå¤©ç„¶å»é‡&lt;/li&gt;
&lt;li&gt;é›†åˆæ˜¯æ— åºçš„&lt;/li&gt;
&lt;/ol&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;ç›¸å…³å‘½ä»¤&lt;a href=&quot;#ç›¸å…³å‘½ä»¤&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;SADD:å‘é›†åˆå†…æ·»åŠ æˆå‘˜&lt;/li&gt;
&lt;li&gt;SCARD:è·å–é›†åˆå†…çš„æˆå‘˜æ•°&lt;/li&gt;
&lt;li&gt;SMEMBERS:è¿”å›é›†åˆå†…çš„æ‰€æœ‰æˆå‘˜(å¦‚æœé›†åˆå†…æˆå‘˜å¤ªå¤šï¼Œå­˜åœ¨é˜»å¡çš„å¯èƒ½)&lt;/li&gt;
&lt;li&gt;SISMEMBERS:åˆ¤æ–­memberå…ƒç´ æ˜¯å¦ä¸ºé›†åˆçš„æˆå‘˜&lt;/li&gt;
&lt;li&gt;SUNION:ä¸¤ä¸ªé›†åˆçš„å¹¶é›†
å¹¶é›†ï¼šå°†ä¸¤ä¸ªé›†åˆåˆå¹¶ä¸ºä¸€ä¸ªé›†åˆå¹¶å»é‡&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;SUNION&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;key1&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;key2&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;...&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;SINTER:ä¸¤ä¸ªé›†åˆçš„äº¤é›†
äº¤é›†ï¼šä¸¤ä¸ªå…ƒç´ å…±æœ‰çš„å…ƒç´ &lt;/li&gt;
&lt;li&gt;SDIFF:åå›ç¬¬ä¸€ä¸ªé›†åˆä¸­ç‹¬æœ‰çš„å…ƒç´ &lt;/li&gt;
&lt;/ol&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;å¸¸è§ç”¨æ³•&lt;a href=&quot;#å¸¸è§ç”¨æ³•-1&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;åˆ©ç”¨äº¤é›†åŠŸèƒ½å®ç°æç¤ºå¤šä¸ªç”¨æˆ·çš„å…±åŒå…³æ³¨&lt;/li&gt;
&lt;li&gt;åˆ©ç”¨å»é‡åŠŸèƒ½å®ç°ä¸ä¼šå¯¹å†…å®¹é‡å¤æ”¶è—ã€å…³æ³¨&lt;/li&gt;
&lt;/ol&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;å“ˆå¸ŒHASH&lt;a href=&quot;#å“ˆå¸Œhash&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Redis Hashæ˜¯ä¸€ä¸ªstringç±»å‹çš„fieldå’Œvalueçš„æ˜ å°„è¡¨ï¼ŒHashé€‚åˆå­˜å‚¨å¯¹è±¡&lt;/p&gt;&lt;section&gt;&lt;h4&gt;ç›¸å…³å‘½ä»¤&lt;a href=&quot;#ç›¸å…³å‘½ä»¤-1&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;HSETï¼šæ·»åŠ é”®å€¼å¯¹&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;HSET&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;hash_key&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;filed1&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;value1&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;filed2&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;value2&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;...&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;HGET: è·å–æŒ‡å®šæ•£åˆ—é”®çš„å€¼&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;HGET&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;hash_key&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;filed_key&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;HMGET: ä¸€æ¬¡æ€§æŸ¥è¯¢å¤šä¸ªkey-value&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;HGET&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;hash_key&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;filed_key1&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;filed_key2&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;HGETALL: è·å–æ•£åˆ—ä¸­åŒ…å«çš„æ‰€æœ‰é”®å€¼å¯¹&lt;br /&gt;
HDEL: å¦‚æœç»™å®šé”®å­˜åœ¨äºæ•£åˆ—ä¸­ï¼Œé‚£ä¹ˆå°±ç§»é™¤è¿™ä¸ªé”®&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;HDEL&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;hash_key&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;filed_key1&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;filed_key2&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;HMSET: ä¸€æ¬¡æ€§æ·»åŠ å¤šä¸ªé”®å€¼å¯¹&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;HMSET&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;hash_key&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;filed1&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;value1&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;filed2&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;value2&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;...&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;Zsetæœ‰åºé›†åˆ&lt;a href=&quot;#zsetæœ‰åºé›†åˆ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Redis æœ‰åºé›†åˆå’Œé›†åˆä¸€æ ·ä¹Ÿæ˜¯ string ç±»å‹å…ƒç´ çš„é›†åˆ,ä¸”ä¸å…è®¸é‡å¤çš„æˆå‘˜ã€‚ä¸åŒçš„æ˜¯æ¯ä¸ªå…ƒç´ éƒ½ä¼šå…³è”ä¸€ä¸ª double ç±»å‹çš„åˆ†æ•°ã€‚redis æ­£æ˜¯é€šè¿‡åˆ†æ•°æ¥ä¸ºé›†åˆä¸­çš„æˆå‘˜è¿›è¡Œä»å°åˆ°å¤§çš„æ’åºã€‚&lt;/p&gt;&lt;section&gt;&lt;h4&gt;ç›¸å…³å‘½ä»¤&lt;a href=&quot;#ç›¸å…³å‘½ä»¤-2&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;ZADD: å°†ä¸€ä¸ªå¸¦æœ‰ç»™å®šåˆ†å€¼çš„æˆå‘˜æ·»åŠ åˆ°æœ‰åºé›†åˆé‡Œé¢&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ZADD&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;key&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;score&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;member&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;ZRANGE: æ ¹æ®å…ƒç´ åœ¨æœ‰åºé›†åˆä¸­æ‰€å¤„çš„ä½ç½®ï¼Œä»æœ‰åºé›†åˆä¸­è·å–å¤šä¸ªå…ƒç´ (ç±»ä¼¼Liståˆ—è¡¨çš„LRANGE)&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ZRANGE&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;key&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;start&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;stop&lt;/span&gt;&lt;span&gt; (ä»0åˆ°-1ä¸ºæ˜¾ç¤ºå…¨éƒ¨å…ƒç´ )&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;ä½¿ç”¨WITHSCORESæºå¸¦åˆ†æ•°æ˜¾ç¤º
ZREM: å¦‚æœç»™å®šå…ƒç´ æˆå‘˜å­˜åœ¨äºæœ‰åºé›†åˆä¸­ï¼Œé‚£ä¹ˆå°±ç§»é™¤è¿™ä¸ªå…ƒç´ &lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ZREM&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;key&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;member&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;ZREVRANGE: é€†åºæ˜¾ç¤ºé›†åˆå…ƒç´ &lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ZREVRANGE&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;key&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;start&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;stop&lt;/span&gt;&lt;span&gt; (ä»0åˆ°-1ä¸ºæ˜¾ç¤ºå…¨éƒ¨å…ƒç´ )&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;ZINCRBY: ä¸ºæŸä¸ªå…ƒç´ å¢åŠ æŒ‡å®šçš„åˆ†æ•°(score)&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ZINCRBY&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;key&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;score&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;member&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;ZRANK: æ˜¾ç¤ºæŸä¸ªå…ƒç´ çš„åºå·&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ZRANK&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;key&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;member&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;Rediså®‰å…¨æ§åˆ¶&lt;a href=&quot;#rediså®‰å…¨æ§åˆ¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Redisä½œä¸ºç¼“å­˜ä¸­é—´ä»¶ï¼Œå®¹æ˜“å—åˆ°ååºåˆ—åŒ–æ”»å‡»ï¼Œå› æ­¤ï¼Œå¦‚æœRedisæœåŠ¡å™¨è¦æš´éœ²åœ¨å…¬ç½‘ï¼Œå¿…é¡»å¯ç”¨å®‰å…¨æ¨¡å¼ï¼Œç¡®ä¿å®‰å…¨æ€§ã€‚&lt;/p&gt;&lt;section&gt;&lt;h3&gt;å¼€å¯å®‰å…¨æ¨¡å¼&lt;a href=&quot;#å¼€å¯å®‰å…¨æ¨¡å¼&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;åœ¨é…ç½®æ–‡ä»¶ä¸­å¢åŠ å®‰å…¨é…ç½®&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# å¯ç”¨å®‰å…¨æ¨¡å¼&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;protected-mode&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;yes&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# è®¾ç½®å¯†ç &lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;requirepass&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;password&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;ç™»å½•æ—¶ä½¿ç”¨-aå‚æ•°è¾“å…¥å¯†ç æˆ–ä½¿ç”¨redis-cliè¿›å…¥äº¤äº’åä½¿ç”¨auth passwordè¾“å…¥å¯†ç ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;ä»¥érootç”¨æˆ·è¿è¡Œredis&lt;a href=&quot;#ä»¥érootç”¨æˆ·è¿è¡Œredis&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;ä¿®æ”¹æœåŠ¡æ§åˆ¶è„šæœ¬&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[Service]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;User&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;redis&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Group&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;redis&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Type&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;forking&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ExecStart&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;/bin/bash&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-c&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;/usr/local/bin/redis-server /opt/redis/conf/redis.conf&apos;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ExecStop&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;/bin/bash&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-c&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;/usr/local/bin/redis-cli shutdown&apos;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Restart&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;always&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;PrivateTmp&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;True&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;ç¦ç”¨å±é™©å‘½ä»¤&lt;a href=&quot;#ç¦ç”¨å±é™©å‘½ä»¤&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œä½¿ç”¨rename-commandæŒ‡ä»¤å…³é—­å±é™©å‘½ä»¤&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;rename-command&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;FLUSHALL&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;shdikahdka&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;å…¶å®å°±æ˜¯å°†å±é™©å‘½ä»¤ä¿®æ”¹ä¸ºå¤æ‚å­—ç¬¦ä¸²ï¼Œé˜²æ­¢è¯¯æ“ä½œã€‚&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;</content:encoded></item><item><title>Zookeeper</title><link>https://white-festa.net/posts/zookeeper/</link><guid isPermaLink="true">https://white-festa.net/posts/zookeeper/</guid><description>Zookeeperå®‰è£…éƒ¨ç½²å’ŒåŸºç¡€ä½¿ç”¨</description><pubDate>Mon, 01 May 2023 00:00:00 GMT</pubDate><content:encoded>&lt;section&gt;&lt;h2&gt;Zookeeperç®€ä»‹&lt;a href=&quot;#zookeeperç®€ä»‹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Zookeeperæ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼ååŒæœåŠ¡ç³»ç»Ÿï¼Œä¸€èˆ¬åœ¨æœåŠ¡å™¨é›†ç¾¤ä¸­ç”¨ä½œé…ç½®ä¸­å¿ƒæˆ–è€…æ³¨å†Œä¸­å¿ƒï¼ŒåŸºäºzookeeperçš„äº‹ä»¶watcherç³»ç»Ÿï¼Œå½“æœåŠ¡å™¨é…ç½®å‘ç”Ÿæ”¹å˜æ—¶å¯ä»¥ç¬¬ä¸€æ—¶é—´é€šçŸ¥æ‰€æœ‰è®¢é˜…è¯¥èŠ‚ç‚¹çš„é¢‘é“&lt;/p&gt;&lt;section&gt;&lt;h3&gt;é…ç½®ä¸­å¿ƒ&lt;a href=&quot;#é…ç½®ä¸­å¿ƒ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;ä¸¾ä¸ªä¾‹å­ï¼Œå‡å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ªjavaåº”ç”¨éœ€è¦å®ç°åŸºæœ¬çš„å¢åˆ æ”¹æŸ¥åŠŸèƒ½ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥å°†æ•°æ®åº“çš„ipï¼Œç”¨æˆ·åå’Œå¯†ç ç­‰ä¿¡æ¯å­˜å‚¨åœ¨zookeeperçš„æŸä¸ªèŠ‚ç‚¹ä¸­ï¼Œå¹¶ä¸”è®©javaåº”ç”¨è®¢é˜…è¿™ä¸ªèŠ‚ç‚¹ï¼›å½“é…ç½®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œjavaåº”ç”¨å°±èƒ½é€šè¿‡watcherç›‘å¬å™¨æ•è·åˆ°è¿™ä¸ªæ•°æ®å‘ç”Ÿçš„å˜åŒ–ï¼Œå¹¶é‡æ–°æ¥é…ç½®ä¸­å¿ƒè¯»å–æ•°æ®ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;æ³¨å†Œä¸­å¿ƒ&lt;a href=&quot;#æ³¨å†Œä¸­å¿ƒ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;æ³¨å†Œä¸­å¿ƒæœ‰ä¸‰ç§è§’è‰²ï¼š&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;æœåŠ¡æä¾›è€…ï¼ˆRPC Serverï¼‰ï¼šåœ¨å¯åŠ¨æ—¶ï¼Œå‘ Registry æ³¨å†Œè‡ªèº«æœåŠ¡ï¼Œå¹¶å‘ Registry å®šæœŸå‘é€å¿ƒè·³æ±‡æŠ¥å­˜æ´»çŠ¶æ€ã€‚&lt;/li&gt;
&lt;li&gt;æœåŠ¡æ¶ˆè´¹è€…ï¼ˆRPC Clientï¼‰ï¼šåœ¨å¯åŠ¨æ—¶ï¼Œå‘ Registry è®¢é˜…æœåŠ¡ï¼ŒæŠŠ Registry è¿”å›çš„æœåŠ¡èŠ‚ç‚¹åˆ—è¡¨ç¼“å­˜åœ¨æœ¬åœ°å†…å­˜ä¸­ï¼Œå¹¶ä¸ RPC Sever å»ºç«‹è¿æ¥ã€‚&lt;/li&gt;
&lt;li&gt;æœåŠ¡æ³¨å†Œä¸­å¿ƒï¼ˆRegistryï¼‰ï¼šç”¨äºä¿å­˜ RPC Server çš„æ³¨å†Œä¿¡æ¯ï¼Œå½“ RPC Server èŠ‚ç‚¹å‘ç”Ÿå˜æ›´æ—¶ï¼ŒRegistry ä¼šåŒæ­¥å˜æ›´ï¼ŒRPC Client æ„ŸçŸ¥åä¼šåˆ·æ–°æœ¬åœ° å†…å­˜ä¸­ç¼“å­˜çš„æœåŠ¡èŠ‚ç‚¹åˆ—è¡¨ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;æœ€åï¼ŒRPC Client ä»æœ¬åœ°ç¼“å­˜çš„æœåŠ¡èŠ‚ç‚¹åˆ—è¡¨ä¸­ï¼ŒåŸºäºè´Ÿè½½å‡è¡¡ç®—æ³•é€‰æ‹©ä¸€å° RPC Sever å‘èµ·è°ƒç”¨ã€‚&lt;/p&gt;&lt;p&gt;ä¸¾ä¸ªä¾‹å­ï¼Œmysqlä¸»ä»å¤åˆ¶ä¸­æœ‰masterå’Œslaveçš„è§’è‰²ä¹‹åˆ†ï¼Œmasterè´Ÿè´£å†™æ“ä½œï¼Œslaveè´Ÿè´£è¯»æ“ä½œï¼Œé‚£ä¹ˆå¦‚ä½•è®©å…¶ä»–çš„åº”ç”¨çŸ¥é“è°æ˜¯masterï¼Œè°æ˜¯slaveå‘¢ï¼Ÿè¿™å°±æ˜¯æ³¨å†Œä¸­å¿ƒçš„ä½œç”¨äº†ã€‚&lt;br /&gt;
Zookeeperå……å½“ä¸€ä¸ªæœåŠ¡æ³¨å†Œè¡¨ï¼ˆService Registryï¼‰ï¼Œè®©å¤šä¸ªæœåŠ¡æä¾›è€…å½¢æˆä¸€ä¸ªé›†ç¾¤ï¼Œè®©æœåŠ¡æ¶ˆè´¹è€…é€šè¿‡æœåŠ¡æ³¨å†Œè¡¨è·å–å…·ä½“çš„æœåŠ¡è®¿é—®åœ°å€ï¼ˆIp+ç«¯å£ï¼‰å»è®¿é—®å…·ä½“çš„æœåŠ¡æä¾›è€…ã€‚&lt;br /&gt;
å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
&lt;/p&gt;&lt;figure&gt;&lt;img src=&quot;https://blog.freelytomorrow.com/articles_img/zookeeper/zoo-registry.png&quot; alt=&quot;&quot; /&gt;&lt;figcaption&gt;zoo-registry&lt;/figcaption&gt;&lt;/figure&gt;&lt;br /&gt;
æ¯å½“ä¸€ä¸ªæœåŠ¡æä¾›è€…éƒ¨ç½²åéƒ½è¦å°†è‡ªå·±çš„æœåŠ¡æ³¨å†Œåˆ°zookeeperçš„æŸä¸€è·¯å¾„ä¸Šï¼Œå¦‚: /{service}/{version}/{ip}, æ¯”å¦‚æˆ‘ä»¬æœ‰ä¸¤ä¸ªæœåŠ¡profileå’Œcartä»£è¡¨äº†ç”¨æˆ·ä¸ªäººä¿¡æ¯åŠŸèƒ½å’Œè´­ç‰©ç§°åŠŸèƒ½ï¼Œä»–ä»¬è¢«åˆ†åˆ«éƒ¨ç½²åˆ°ä¸¤å°æœºå™¨ä¸Šï¼Œé‚£ä¹ˆZookeeperä¸Šå°±ä¼šåˆ›å»ºä¸¤æ¡ç›®å½•ï¼šåˆ†åˆ«ä¸º/profile/1.0.0/100.19.20.01:16888 å’Œ /cart/1.0.0/100.19.20.02:16888ã€‚
ZooKeeperæ˜¯ä¸€ä¸ªæ ‘çŠ¶çš„å­˜å‚¨ç»“æ„ï¼Œä¸‹é¢è¿™å¼ å›¾æ›´ç›´è§‚çš„è¡¨ç°äº†æ³¨å†Œä¸­å¿ƒå¤§æ¦‚å¾—æ ·å­ï¼š
&lt;figure&gt;&lt;img src=&quot;https://blog.freelytomorrow.com/articles_img/zookeeper/zoo-tree.png&quot; alt=&quot;&quot; /&gt;&lt;figcaption&gt;zoo-tree&lt;/figcaption&gt;&lt;/figure&gt;&lt;br /&gt;
åœ¨Zookeeperä¸­ï¼Œè¿›è¡ŒæœåŠ¡æ³¨å†Œï¼Œå®é™…ä¸Šå°±æ˜¯åœ¨Zookeeperä¸­åˆ›å»ºäº†ä¸€ä¸ªZnodeèŠ‚ç‚¹ï¼Œè¯¥èŠ‚ç‚¹å­˜å‚¨äº†è¯¥æœåŠ¡çš„IPã€ç«¯å£ã€è°ƒç”¨æ–¹å¼(åè®®ã€åºåˆ—åŒ–æ–¹å¼)ç­‰ã€‚&lt;br /&gt;
è¯¥èŠ‚ç‚¹æ‰¿æ‹…ç€æœ€é‡è¦çš„èŒè´£ï¼Œå®ƒç”±æœåŠ¡æä¾›è€…(å‘å¸ƒæœåŠ¡æ—¶)åˆ›å»ºï¼Œä»¥ä¾›æœåŠ¡æ¶ˆè´¹è€…è·å–èŠ‚ç‚¹ä¸­çš„ä¿¡æ¯ï¼Œä»è€Œå®šä½åˆ°æœåŠ¡æä¾›è€…çœŸæ­£IPï¼Œå‘èµ·è°ƒç”¨ã€‚&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;å®‰è£…zookeeper&lt;a href=&quot;#å®‰è£…zookeeper&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;å®‰è£…JDK&lt;a href=&quot;#å®‰è£…jdk&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;å¯ä»¥çœ‹è¿™ç¯‡æ–‡ç«  &lt;a href=&quot;https://blog.freelytomorrow.com/2023/03/29/tomcat/&quot;&gt;https://blog.freelytomorrow.com/2023/03/29/tomcat/&lt;/a&gt;&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;å®‰è£…zookeeper&lt;a href=&quot;#å®‰è£…zookeeper-1&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;section&gt;&lt;h4&gt;ä¸‹è½½zookeeperå‹ç¼©åŒ…&lt;a href=&quot;#ä¸‹è½½zookeeperå‹ç¼©åŒ…&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;wget&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;https://archive.apache.org/dist/zookeeper/zookeeper-3.5.6/apache-zookeeper-3.5.6-bin.tar.gz&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;è§£å‹ç¼©&lt;a href=&quot;#è§£å‹ç¼©&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;tar&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-xf&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;apache-zookeeper-3.5.6-bin.tar.gz&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;åˆ›å»ºè½¯è¿æ¥&lt;a href=&quot;#åˆ›å»ºè½¯è¿æ¥&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ln&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-s&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/opt/apache-zookeeper-3.5.6-bin&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/opt/zookeeper&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;åˆ›å»ºzookeeperæ•°æ®ç›®å½•&lt;a href=&quot;#åˆ›å»ºzookeeperæ•°æ®ç›®å½•&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;mkdir&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/opt/zookeeper/data&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;åˆ›å»ºå¹¶ä¿®æ”¹zookeeperé…ç½®æ–‡ä»¶&lt;a href=&quot;#åˆ›å»ºå¹¶ä¿®æ”¹zookeeperé…ç½®æ–‡ä»¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;åœ¨&lt;code&gt;conf/&lt;/code&gt;ç›®å½•ä¸‹æä¾›äº†æ¨¡æ¿é…ç½®æ–‡ä»¶&lt;code&gt;zoo_sample.cfg&lt;/code&gt;ï¼Œå°†å…¶å¤åˆ¶ä½&lt;code&gt;zoo.cfg&lt;/code&gt;å³å¯ã€‚&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;cp&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;zoo_sample.cfg&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;zoo.zfg&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;ä¿®æ”¹ç›®å½•è·¯å¾„&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;dataDir&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;/opt/zookeeper/data&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;å¯åŠ¨zookeeper&lt;a href=&quot;#å¯åŠ¨zookeeper&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[root@zk-90 /opt/zookeeper/conf]#/opt/zookeeper/bin/zkServer.sh start&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ZooKeeper JMX enabled by default&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Using config: /opt/zookeeper/bin/../conf/zoo.cfg&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Starting zookeeper ... STARTED&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;éƒ¨ç½²zookeeperé›†ç¾¤&lt;a href=&quot;#éƒ¨ç½²zookeeperé›†ç¾¤&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;åœ¨å®‰è£…å•æœºzookeeperçš„åŸºç¡€ä¸Šï¼Œè¿˜è¦æ‰§è¡Œä»¥ä¸‹æ­¥éª¤&lt;/p&gt;&lt;section&gt;&lt;h3&gt;ä¸ºä¸‰ä¸ªzookeeperå®ä¾‹åˆ›å»ºæœåŠ¡å™¨ç¼–å·&lt;a href=&quot;#ä¸ºä¸‰ä¸ªzookeeperå®ä¾‹åˆ›å»ºæœåŠ¡å™¨ç¼–å·&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;è¦æ±‚å­˜å‚¨ç¼–å·çš„æ–‡ä»¶åä¸ºmyidï¼Œä¸”å­˜æ”¾åœ¨æ•°æ®ç›®å½•ä¸­:&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;echo&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;1&apos;&lt;/span&gt;&lt;span&gt; &amp;gt; &lt;/span&gt;&lt;span&gt;/opt/zookeeper/data/myid&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;echo&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;2&apos;&lt;/span&gt;&lt;span&gt; &amp;gt; &lt;/span&gt;&lt;span&gt;/opt/zookeeper/data/myid&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;echo&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;3&apos;&lt;/span&gt;&lt;span&gt; &amp;gt; &lt;/span&gt;&lt;span&gt;/opt/zookeeper/data/myid&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;å¯åŠ¨zookeeper&lt;a href=&quot;#å¯åŠ¨zookeeper-1&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;/opt/zookeeper/bin/zkServer.sh&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;start&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;å¯åŠ¨ååº”è¯¥å¯ä»¥å‘ç°ç³»ç»Ÿåœ¨æ•°æ®ç›®å½•ä¸‹è‡ªåŠ¨ç”Ÿæˆäº†å‡ ä¸ªæ–‡ä»¶&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ é›†ç¾¤ä¿¡æ¯&lt;a href=&quot;#ä¿®æ”¹é…ç½®æ–‡ä»¶æ·»åŠ é›†ç¾¤ä¿¡æ¯&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;ä¸ºæ¯ä¸ªzookeeperå®ä¾‹çš„é…ç½®æ–‡ä»¶æ·»åŠ å¦‚ä¸‹å†…å®¹&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;server.1&lt;/span&gt;&lt;span&gt;=10.0.0.90:2888:3888&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;server.2&lt;/span&gt;&lt;span&gt;=10.0.0.91:2888:3888&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;server.3&lt;/span&gt;&lt;span&gt;=10.0.0.92:2888:3888&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;æ ¼å¼ï¼šserver.èŠ‚ç‚¹ID=ip:æ•°æ®åŒæ­¥ç«¯å£:é€‰ä¸¾ç«¯å£&lt;br /&gt;
é€‰ä¸¾ç«¯å£ï¼šä¸»èŠ‚ç‚¹æŒ‚äº†ï¼Œé€‰ä¸¾æ–°çš„ä¸»èŠ‚ç‚¹çš„é€šä¿¡ç«¯å£ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;ä½¿ç”¨ansible-playbookä¸€é”®éƒ¨ç½²zookeeperé›†ç¾¤&lt;a href=&quot;#ä½¿ç”¨ansible-playbookä¸€é”®éƒ¨ç½²zookeeperé›†ç¾¤&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;section&gt;&lt;h4&gt;ansible hostsé…ç½®ï¼š&lt;a href=&quot;#ansible-hostsé…ç½®&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[zoo]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;10.0.0.90&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;myid=&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;10.0.0.91&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;myid=&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;10.0.0.92&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;myid=&lt;/span&gt;&lt;span&gt;3&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;ansible-playbook:&lt;a href=&quot;#ansible-playbook&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;---&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;deploy zookeeper cluster&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;hosts&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;zoo&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;tasks&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;01 - copy jdk package&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;copy&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;src&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/opt/jdk-8u221-linux-x64.tar.gz&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;dest&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/opt/&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;02 - unarchive jdk package&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;unarchive&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;src&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/opt/jdk-8u221-linux-x64.tar.gz&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;dest&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/opt/&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;remote_src&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;03 - create soft link for jdk&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;file&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;state&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;link&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;src&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/opt/jdk1.8.0_221/&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;dest&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/opt/jdk8&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;04 - configure PATH&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;lineinfile&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;dest&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/etc/profile&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;line&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;{{ item }}&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;loop&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;export JAVA_HOME=/opt/jdk8&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;export PATH=$JAVA_HOME/bin:$JAVA_HOME/jre/bin:$PATH&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;export CLASSPATH=.$CLASSPATH:$JAVA_HOME/lib:$JAVA_HOME/jre/lib:$JAVA_HOME/lib/tools.jar&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;27&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;05 - download zookeeper&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;28&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;get_url&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;29&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;url&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;https://archive.apache.org/dist/zookeeper/zookeeper-3.5.6/apache-zookeeper-3.5.6-bin.tar.gz&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;30&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;dest&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/opt/&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;31&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;06 - unarchive zookeeper package&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;32&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;unarchive&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;33&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;src&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/opt/apache-zookeeper-3.5.6-bin.tar.gz&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;34&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;dest&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/opt/&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;35&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;remote_src&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;36&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;07 - create soft link for zookeeper&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;37&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;file&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;38&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;state&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;link&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;39&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;src&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/opt/apache-zookeeper-3.5.6-bin/&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;40&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;dest&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/opt/zookeeper&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;41&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;08 - create zookeeper data directory&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;42&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;file&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;43&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;state&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;directory&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;44&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;path&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/opt/zookeeper/data&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;45&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;09 - create zookeeper config file&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;46&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;shell&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;47&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;cmd&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;cp /opt/zookeeper/conf/zoo_sample.cfg /opt/zookeeper/conf/zoo.cfg&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;48&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;10 - modify zookeeper config file&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;49&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;shell&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;50&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;cmd&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;sed -i &apos;/^dataDir/c dataDir=/opt/zookeeper/data&apos; /opt/zookeeper/conf/zoo.cfg&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;51&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;11 - create serverid file&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;52&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;file&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;53&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;state&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;touch&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;54&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;path&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/opt/zookeeper/data/myid&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;55&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;12 - set server id&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;56&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;shell&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;57&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;cmd&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;echo {{ myid }} &amp;gt; /opt/zookeeper/data/myid&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;58&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;13 - add cluster info&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;59&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;lineinfile&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;60&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;dest&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/opt/zookeeper/conf/zoo.cfg&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;61&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;line&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;{{ item }}&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;62&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;loop&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;63&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;server.1=10.0.0.90:2888:3888&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;64&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;server.2=10.0.0.91:2888:3888&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;65&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;server.3=10.0.0.92:2888:3888&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;zookeeperé›†ç¾¤ä¸­çš„è§’è‰²&lt;a href=&quot;#zookeeperé›†ç¾¤ä¸­çš„è§’è‰²&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;zookeeperé›†ç¾¤ä¸­æœ‰ä¸‰ç§è§’è‰²ï¼Œåˆ†åˆ«æ˜¯ï¼š&lt;/p&gt;&lt;section&gt;&lt;h3&gt;Leader(é¢†å¯¼è€…)&lt;a href=&quot;#leaderé¢†å¯¼è€…&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;ç›¸å½“äºä¸»åº“ï¼Œåœ¨é›†ç¾¤ä¸­åªèƒ½æœ‰ä¸€ä¸ªLeaderï¼Œå…¶ä¸»è¦ä½œç”¨æ˜¯ï¼š&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;å‘èµ·ä¸æäº¤å†™è¯·æ±‚ï¼š
æ‰€æœ‰çš„è·Ÿéšè€…Followerä¸è§‚å¯Ÿè€…ObserverèŠ‚ç‚¹çš„å†™è¯·æ±‚éƒ½ä¼šè½¬äº¤ç»™é¢†å¯¼è€…Leaderæ‰§è¡Œã€‚Leaderæ¥å—åˆ°ä¸€ä¸ªå†™è¯·æ±‚åï¼Œé¦–å…ˆä¼šå‘é€ç»™æ‰€æœ‰çš„Followerï¼Œç»Ÿè®¡Followerå†™å…¥æˆåŠŸçš„æ•°é‡ã€‚å½“æœ‰è¶…è¿‡åŠæ•°çš„Followerå†™å…¥æˆåŠŸåï¼ŒLeaderå°±ä¼šè®¤ä¸ºè¿™ä¸ªå†™è¯·æ±‚æäº¤æˆåŠŸï¼Œé€šçŸ¥æ‰€æœ‰çš„Follower commitè¿™ä¸ªå†™æ“ä½œï¼Œä¿è¯äº‹åå“ªæ€•æ˜¯é›†ç¾¤å´©æºƒæ¢å¤æˆ–è€…é‡å¯ï¼Œè¿™ä¸ªå†™æ“ä½œä¹Ÿä¸ä¼šä¸¢å¤±ã€‚&lt;/li&gt;
&lt;li&gt;ä¸learnerä¿æŒå¿ƒè·³&lt;/li&gt;
&lt;li&gt;å´©æºƒæ¢å¤æ—¶è´Ÿè´£æ¢å¤æ•°æ®ä»¥åŠåŒæ­¥æ•°æ®åˆ°Learner&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;Follower(è¿½éšè€…)&lt;a href=&quot;#followerè¿½éšè€…&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Followeråœ¨é›†ç¾¤ä¸­å¯ä»¥æœ‰å¤šä¸ªï¼Œå…¶ä¸»è¦ä½œç”¨æ˜¯ï¼š&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;ä¸Leaderä¿æŒå¿ƒè·³è¿æ¥&lt;/li&gt;
&lt;li&gt;å½“LeaderæŒ‚äº†çš„æ—¶å€™ï¼Œç»è¿‡æŠ•ç¥¨åæˆä¸ºæ–°çš„leaderã€‚leaderçš„é‡æ–°é€‰ä¸¾æ˜¯ç”±Followerä»¬å†…éƒ¨æŠ•ç¥¨å†³å®šçš„ã€‚&lt;/li&gt;
&lt;li&gt;å‘leaderå‘é€æ¶ˆæ¯ä¸è¯·æ±‚&lt;/li&gt;
&lt;li&gt;å¤„ç†leaderå‘æ¥çš„æ¶ˆæ¯ä¸è¯·æ±‚&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;#Observer(è§‚å¯Ÿè€…)&lt;a href=&quot;#observerè§‚å¯Ÿè€…&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Observeræ˜¯zookeeperé›†ç¾¤ä¸­æœ€è¾¹ç¼˜çš„å­˜åœ¨ã€‚Observerçš„ä¸»è¦ä½œç”¨æ˜¯æé«˜zookeeperé›†ç¾¤çš„è¯»æ€§èƒ½ã€‚é€šè¿‡leaderçš„ä»‹ç»æˆ‘ä»¬å¯ä»¥zookeeperçš„ä¸€ä¸ªå†™æ“ä½œæ˜¯è¦ç»è¿‡åŠæ•°ä»¥ä¸Šçš„Followerç¡®è®¤æ‰èƒ½å¤Ÿå†™æˆåŠŸçš„ã€‚é‚£ä¹ˆå½“zookeeperé›†ç¾¤ä¸­çš„èŠ‚ç‚¹è¶Šå¤šæ—¶ï¼Œzookeeperçš„å†™æ€§èƒ½å°± è¶Šå·®ã€‚ä¸ºäº†åœ¨æé«˜zookeeperè¯»æ€§èƒ½ï¼ˆä¹Ÿå°±æ˜¯æ”¯æŒæ›´å¤šçš„å®¢æˆ·ç«¯è¿æ¥ï¼‰çš„åŒæ—¶åˆä¸å½±å“zookeeperçš„å†™æ€§èƒ½ï¼Œzookeeperé›†ç¾¤å¤šäº†ä¸€ä¸ªå„¿å­Observerï¼Œåªè´Ÿè´£ï¼š&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;ä¸leaderåŒæ­¥æ•°æ®&lt;/li&gt;
&lt;li&gt;ä¸å‚ä¸leaderé€‰ä¸¾ï¼Œæ²¡æœ‰æŠ•ç¥¨æƒã€‚ä¹Ÿä¸å‚ä¸å†™æ“ä½œçš„æè®®è¿‡ç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;æ•°æ®æ²¡æœ‰äº‹åŠ¡åŒ–åˆ°ç¡¬ç›˜ã€‚å³Observeråªä¼šæŠŠæ•°æ®åŠ è½½åˆ°å†…å­˜ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;zookeeperé€‰ä¸¾æœºåˆ¶&lt;a href=&quot;#zookeeperé€‰ä¸¾æœºåˆ¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;zookeeperçš„é€‰ä¸¾æœºåˆ¶è¦æ±‚ä»»ä½•ä¸€å°ä¸»æœºè‡³å°‘è·å¾—ä¸‰ç¥¨æ‰èƒ½æˆä¸ºleaderï¼Œä¹Ÿå› ä¸ºå¦‚æ­¤ï¼Œzookeeperé›†ç¾¤çš„æœ€å°ä¸»æœºæ•°é‡æ˜¯3ã€‚&lt;/li&gt;
&lt;li&gt;zookeeperçš„é€‰ä¸¾ç¥¨æ•°æ˜¯åŸºäºmyidçš„ï¼Œmyidçš„æ•°å€¼è¶Šå¤§è·å¾—çš„ç¥¨æ•°è¶Šå¤šï¼Œå› æ­¤åœ¨åˆå§‹åŒ–é€‰ä¸¾æ—¶ï¼Œæœ€å¥½ç»™ç›®æ ‡Leaderè®¾å®šä¸€ä¸ªæœ€å¤§çš„myidã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;zookeeperå®¢æˆ·ç«¯è¿æ¥æœåŠ¡ç«¯&lt;a href=&quot;#zookeeperå®¢æˆ·ç«¯è¿æ¥æœåŠ¡ç«¯&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;ä½¿ç”¨æä¾›çš„å®¢æˆ·ç«¯è„šæœ¬&lt;code&gt;zkCli.sh&lt;/code&gt;&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;./zkCli.sh&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-server&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;10.0.0.92&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;znodeç®¡ç†å‘½ä»¤&lt;a href=&quot;#znodeç®¡ç†å‘½ä»¤&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;statæŸ¥çœ‹ç»“ç‚¹çŠ¶æ€&lt;/li&gt;
&lt;li&gt;lsæŸ¥çœ‹ä¸€ä¸ªèŠ‚ç‚¹ä¸‹çš„å­èŠ‚ç‚¹
&lt;ul&gt;
&lt;li&gt;-s æŸ¥çœ‹èŠ‚ç‚¹çŠ¶æ€ï¼Œç­‰åŒäºstat&lt;/li&gt;
&lt;li&gt;-R é€’å½’æŸ¥è¯¢æŸä¸ªèŠ‚ç‚¹ä¸‹çš„æ‰€æœ‰å­èŠ‚ç‚¹&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;create åˆ›å»ºç»“ç‚¹
&lt;ul&gt;
&lt;li&gt;-e åˆ›å»ºä¸´æ—¶ç»“ç‚¹(é€€å‡ºå®¢æˆ·ç«¯é“¾æ¥åèŠ‚ç‚¹æ¶ˆå¤±)&lt;/li&gt;
&lt;li&gt;-s åˆ›å»ºæœ‰åºèŠ‚ç‚¹ï¼šèŠ‚ç‚¹çš„keyåé¢ä¼šè‡ªåŠ¨åŠ ä¸Šåºå·&lt;/li&gt;
&lt;li&gt;-t åˆ›å»ºæœ‰å­˜æ´»æ—¶é—´é™åˆ¶çš„èŠ‚ç‚¹&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;get è·å¾—èŠ‚ç‚¹çš„å€¼
&lt;ul&gt;
&lt;li&gt;-s ç­‰åŒä¸stat&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;set ç»™èŠ‚ç‚¹è®¾ç½®ä¸€ä¸ªå€¼&lt;/li&gt;
&lt;li&gt;delete åˆ é™¤èŠ‚ç‚¹(å‰ææ˜¯è¢«åˆ é™¤çš„ç»“ç‚¹æ²¡æœ‰å­èŠ‚ç‚¹)&lt;/li&gt;
&lt;li&gt;deleteall é€’å½’åˆ é™¤èŠ‚ç‚¹&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;èŠ‚ç‚¹äº‹ä»¶watcher&lt;a href=&quot;#èŠ‚ç‚¹äº‹ä»¶watcher&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;watcheræ˜¯ä¸€æ¬¡æ€§çš„ï¼Œè§¦å‘åå°±ä¼šæ¶ˆå¤±&lt;/li&gt;
&lt;li&gt;é€šè¿‡stat -wç»™èŠ‚ç‚¹åŠ ä¸Šwatcher&lt;/li&gt;
&lt;li&gt;çˆ¶ç»“ç‚¹watcheräº‹ä»¶
&lt;ul&gt;
&lt;li&gt;åˆ›å»ºçˆ¶ç»“ç‚¹ï¼Œè§¦å‘NodeCreated&lt;/li&gt;
&lt;li&gt;åˆ›å»ºçˆ¶èŠ‚ç‚¹æ•°æ®ï¼Œè§¦å‘NodeDataChanged&lt;/li&gt;
&lt;li&gt;åˆ é™¤çˆ¶èŠ‚ç‚¹ï¼Œè§¦å‘ï¼ŒNodeDeleted&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å­èŠ‚ç‚¹äº‹ä»¶
&lt;ul&gt;
&lt;li&gt;çˆ¶èŠ‚ç‚¹è®¾ç½®watcherï¼Œåˆ›å»ºå­èŠ‚ç‚¹ï¼Œè§¦å‘NodeChildrenChanged&lt;/li&gt;
&lt;li&gt;çˆ¶èŠ‚ç‚¹è®¾ç½®watcherï¼Œåˆ é™¤å­èŠ‚ç‚¹ï¼Œè§¦å‘NodeChildrenChanged&lt;/li&gt;
&lt;li&gt;çˆ¶èŠ‚ç‚¹è®¾ç½®watcherï¼Œä¿®æ”¹å­èŠ‚ç‚¹ï¼Œæ— äº‹ä»¶&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;zookeeperæƒé™æ§åˆ¶&lt;a href=&quot;#zookeeperæƒé™æ§åˆ¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;ä¸»è¦æ˜¯åŸºäº&lt;code&gt;setAcl&lt;/code&gt;å‘½ä»¤ã€‚&lt;br /&gt;
æœ‰ä»¥ä¸‹å‡ ç§æƒé™ï¼š&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;c: create - å…è®¸åˆ›å»ºå­èŠ‚ç‚¹&lt;/li&gt;
&lt;li&gt;wï¼šwrite - å…è®¸è®¾ç½®èŠ‚ç‚¹çš„value&lt;/li&gt;
&lt;li&gt;rï¼šread - å…è®¸è·å–å­èŠ‚ç‚¹ã€è·å–èŠ‚ç‚¹value&lt;/li&gt;
&lt;li&gt;dï¼šdelete - å¯ä»¥åˆ é™¤å­èŠ‚ç‚¹&lt;/li&gt;
&lt;li&gt;aï¼šadmin - ç®¡ç†å‘˜æƒé™&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;æƒé™å¯ä»¥åƒchmodå‘½ä»¤ä¸€æ ·ç»„åˆä½¿ç”¨ã€‚&lt;/p&gt;&lt;section&gt;&lt;h3&gt;worldæƒé™ç±»å‹&lt;a href=&quot;#worldæƒé™ç±»å‹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;worldæƒé™ç±»å‹æ˜¯å…è®¸ä»»ä½•ç”¨æˆ·å¯¹èŠ‚ç‚¹æ‰§è¡Œç¬¦åˆæƒé™é™åˆ¶çš„æ“ä½œ(crwda)ã€‚
è¯­æ³•ï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# setAcl /node world:anyone:æƒé™ä½&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# ä¾‹å¦‚ï¼š&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;setAcl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/acl-node&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;world:anyone:rw&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;è®¾ç½®åæ‰€æœ‰ç”¨æˆ·å¯¹è¯¥èŠ‚ç‚¹åªèƒ½æ‰§è¡Œreadå’Œwriteæ“ä½œã€‚&lt;/p&gt;&lt;section&gt;&lt;h4&gt;å¯¹deleteæƒé™çš„å®éªŒ&lt;a href=&quot;#å¯¹deleteæƒé™çš„å®éªŒ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;åˆ›å»ºä¸€ä¸ªä¸‰çº§ç»“ç‚¹&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;create&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/acl-node2/test1/t1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# è®¾ç½®æƒé™&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;setAcl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/alc-node2&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;world:anyone:rw&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;å°è¯•åˆ é™¤çˆ¶ç»“ç‚¹&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[zk: 10.0.0.92(CONNECTED) 63] deleteall /alc-node2&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Authentication is not valid : /alc-node2/test1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;å¤±è´¥äº†ï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰åˆ é™¤è¿™ä¸ªèŠ‚ç‚¹çš„æƒé™ï¼›
å°è¯•åˆ é™¤è¯¥èŠ‚ç‚¹çš„å­èŠ‚ç‚¹&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[zk: 10.0.0.92(&lt;/span&gt;&lt;span&gt;CONNECTED&lt;/span&gt;&lt;span&gt;) 66] delete /alc-node2/test1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Authentication&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;is&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;not&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;valid&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/alc-node2/test1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# çœ‹ä¼¼å¤±è´¥äº†ï¼Œå…¶å®æ²¡æœ‰&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[zk: 10.0.0.92(&lt;/span&gt;&lt;span&gt;CONNECTED&lt;/span&gt;&lt;span&gt;) 68] ls -R /alc-node2&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;/alc-node2&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;/alc-node2/test1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;å¯ä»¥å‘ç°æˆ‘ä»¬æ²¡èƒ½åˆ é™¤test1è¿™ä¸ªäºŒçº§ç»“ç‚¹ï¼Œä½†æ˜¯t1è¿™ä¸ªä¸‰çº§ç»“ç‚¹å´æ¶ˆå¤±äº†ï¼Œè¿™æ˜¯å› ä¸ºäºŒçº§ç»“ç‚¹test1å—çˆ¶ç»“ç‚¹çš„æƒé™é™åˆ¶æ— æ³•è¢«åˆ é™¤ï¼Œä½†æ˜¯äºŒçº§ç»“ç‚¹æœ¬èº«å´æ˜¯é»˜è®¤æƒé™ï¼Œå³:&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[zk: 10.0.0.92(&lt;/span&gt;&lt;span&gt;CONNECTED&lt;/span&gt;&lt;span&gt;) 69] getAcl /alc-node2/test1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&apos;world,&apos;&lt;/span&gt;&lt;span&gt;anyone&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;cdrwa&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;å› æ­¤ä¸‰çº§ä¸å—çˆ¶ç»“ç‚¹çš„æƒé™å½±å“ï¼Œæ˜¯å¯ä»¥è¢«åˆ é™¤çš„ã€‚&lt;br /&gt;
æ‰€ä»¥å¯ä»¥å¾—å‡ºç»“è®ºï¼š&lt;code&gt;æ¯ä¸€ä¸ªèŠ‚ç‚¹çš„æƒé™é™åˆ¶æœ€å¤šå½±å“åˆ°è‡ªå·±ä¸‹ä¸€çº§çš„å­èŠ‚ç‚¹ï¼Œè€Œä¸ä¼šå½±å“ä¸‹ä¸‹çº§çš„å­èŠ‚ç‚¹ã€‚&lt;/code&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;Authæƒé™ç±»å‹&lt;a href=&quot;#authæƒé™ç±»å‹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Authå°±æ˜¯ä¸ºèŠ‚ç‚¹æŒ‡å®šé‚£ä¸ªç”¨æˆ·æ‰èƒ½æ‰§è¡Œæ“ä½œã€‚
è¯­æ³•ï¼š&lt;code&gt;setAcl /node auth:username:password:æƒé™ä½&lt;/code&gt;&lt;/p&gt;&lt;section&gt;&lt;h4&gt;å®è·µ&lt;a href=&quot;#å®è·µ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;åˆ›å»ºä¸€ä¸ªç”¨äºå®éªŒçš„èŠ‚ç‚¹&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[zk: 10.0.0.92(&lt;/span&gt;&lt;span&gt;CONNECTED&lt;/span&gt;&lt;span&gt;) 70] create /auth-node 123456&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Created&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/auth-node&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[zk: 10.0.0.92(&lt;/span&gt;&lt;span&gt;CONNECTED&lt;/span&gt;&lt;span&gt;) 71] get /auth-node&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;123456&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;æ³¨å†Œç”¨æˆ·&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;addauth&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;digest&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;mike:123456&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;è®¾ç½®Authæƒé™&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;#ä¸ºè¿™ä¸ªç”¨æˆ·è®¾ç½®çš„auth-nodeèŠ‚ç‚¹çš„rwcdæƒé™&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;setAcl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/auth-node&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;auth:mike:123456:rwcd&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;éœ€è¦é‡æ–°å¯åŠ¨å®¢æˆ·ç«¯æ‰èƒ½ç”Ÿæ•ˆè®¾ç½®&lt;br /&gt;
å°è¯•è·å¾—è¿™ä¸ªèŠ‚ç‚¹çš„value&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[zk: 10.0.0.92(&lt;/span&gt;&lt;span&gt;CONNECTED&lt;/span&gt;&lt;span&gt;) 1] get /auth-node&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;org.apache.zookeeper.KeeperException$NoAuthException:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;KeeperErrorCode&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;NoAuth&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;for&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/auth-node&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;è¢«æ‹’ç»äº†ï¼Œå› ä¸ºæ²¡æœ‰è¿›è¡Œæƒé™éªŒè¯ï¼ŒéªŒè¯çš„æ–¹å¼å’Œæ³¨å†Œç”¨æˆ·æ˜¯ä¸€æ ·çš„æ–¹æ³•ï¼Œéƒ½æ˜¯é€šè¿‡&lt;code&gt;addauth&lt;/code&gt;å‘½ä»¤ã€‚&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[zk: 10.0.0.92(&lt;/span&gt;&lt;span&gt;CONNECTED&lt;/span&gt;&lt;span&gt;) 2] addauth digest mike:123456&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[zk: 10.0.0.92(&lt;/span&gt;&lt;span&gt;CONNECTED&lt;/span&gt;&lt;span&gt;) 3] get /auth-node&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;123456&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;ipæƒé™ç±»å‹&lt;a href=&quot;#ipæƒé™ç±»å‹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;å¾ˆæ˜æ˜¾ï¼Œè¿™ä¸ªæ–¹æ³•å°±æ˜¯é™å®šåªå…è®¸ç‰¹å®šipå¯¹èŠ‚ç‚¹è¿›è¡Œæ“ä½œã€‚&lt;br /&gt;
è¯­æ³•ï¼š&lt;code&gt;setAcl /node ip:ip_address:æƒé™ä½&lt;/code&gt;&lt;/p&gt;&lt;section&gt;&lt;h4&gt;å®è·µ&lt;a href=&quot;#å®è·µ-1&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;åˆ›å»ºèŠ‚ç‚¹å¹¶è®¾ç½®ip&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[zk: 10.0.0.92(&lt;/span&gt;&lt;span&gt;CONNECTED&lt;/span&gt;&lt;span&gt;) 4] create /ip-node&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Created&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/ip-node&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# åªå…è®¸ipä¸º10.0.0.90çš„å®¢æˆ·ç«¯æ“ä½œè¿™ä¸ªèŠ‚ç‚¹&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[zk: 10.0.0.92(&lt;/span&gt;&lt;span&gt;CONNECTED&lt;/span&gt;&lt;span&gt;) 5] setAcl /ip-node ip:10.0.0.90:rwcd&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;ä½¿ç”¨å¦ä¸€å°æœºå™¨è¿›è¡Œæ“ä½œ&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[zk: localhost:2181(CONNECTED) 3] get /ip-node&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;org.apache.zookeeper.KeeperException$NoAuthException: KeeperErrorCode = NoAuth for /ip-node&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;æ— æƒé™&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;</content:encoded></item><item><title>TCPåè®®ç®€è¿°</title><link>https://white-festa.net/posts/tcp-protocol/</link><guid isPermaLink="true">https://white-festa.net/posts/tcp-protocol/</guid><description>å…³äºTCPä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹çš„ç®€å•æè¿°</description><pubDate>Thu, 13 Apr 2023 00:00:00 GMT</pubDate><content:encoded>&lt;section&gt;&lt;h2&gt;TCPä¸‰æ¬¡æ¡æ‰‹&lt;a href=&quot;#tcpä¸‰æ¬¡æ¡æ‰‹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;TCPæ˜¯&lt;strong&gt;é¢å‘å­—èŠ‚æµ&lt;/strong&gt;çš„å¯é çš„æ•°æ®ä¼ è¾“åè®®ï¼Œé‡‡ç”¨ä¸‰æ¬¡æ¡æ‰‹æœºåˆ¶å»ºç«‹ä¸€ä¸ªç‚¹å¯¹ç‚¹çš„é“¾æ¥ã€‚&lt;/p&gt;&lt;section&gt;&lt;h3&gt;ä¸‰æ¬¡æ¡æ‰‹çš„æµç¨‹&lt;a href=&quot;#ä¸‰æ¬¡æ¡æ‰‹çš„æµç¨‹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼šClientå°†æ ‡å¿—ä½SYNç½®ä¸º1ï¼Œéšæœºäº§ç”Ÿä¸€ä¸ªå€¼seq=Jï¼Œå¹¶å°†è¯¥æ•°æ®åŒ…å‘é€ç»™Serverï¼ŒClientè¿›å…¥SYN_SENTçŠ¶æ€ï¼Œç­‰å¾…Serverç¡®è®¤ã€‚&lt;/li&gt;
&lt;li&gt;ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼šServeræ”¶åˆ°æ•°æ®åŒ…åç”±æ ‡å¿—ä½SYN=1çŸ¥é“Clientè¯·æ±‚å»ºç«‹è¿æ¥ï¼ŒServerå°†æ ‡å¿—ä½SYNå’ŒACKéƒ½ç½®ä¸º1ï¼Œack=J+1ï¼Œéšæœºäº§ç”Ÿä¸€ä¸ªå€¼seq=Kï¼Œå¹¶å°†è¯¥æ•°æ®åŒ…å‘é€ç»™Clientä»¥ç¡®è®¤è¿æ¥è¯·æ±‚ï¼ŒServerè¿›å…¥SYN_RCVDçŠ¶æ€ã€‚&lt;/li&gt;
&lt;li&gt;ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼šClientæ”¶åˆ°ç¡®è®¤åï¼Œæ£€æŸ¥ackæ˜¯å¦ä¸ºJ+1ï¼ŒACKæ˜¯å¦ä¸º1ï¼Œå¦‚æœæ­£ç¡®åˆ™å°†æ ‡å¿—ä½ACKç½®ä¸º1ï¼Œack=K+1ï¼Œå¹¶å°†è¯¥æ•°æ®åŒ…å‘é€ç»™Serverï¼ŒServeræ£€æŸ¥ackæ˜¯å¦ä¸ºK+1ï¼ŒACKæ˜¯å¦ä¸º1ï¼Œå¦‚æœæ­£ç¡®åˆ™è¿æ¥å»ºç«‹æˆåŠŸï¼ŒClientå’ŒServerè¿›å…¥ESTABLISHEDçŠ¶æ€ï¼Œå®Œæˆä¸‰æ¬¡æ¡æ‰‹ï¼ŒéšåClientä¸Serverä¹‹é—´å¯ä»¥å¼€å§‹ä¼ è¾“æ•°æ®äº†ã€‚
&lt;figure&gt;&lt;img src=&quot;https://blog.freelytomorrow.com/articles_img/tcp-protocol/3handshake1.png&quot; alt=&quot;&quot; /&gt;&lt;figcaption&gt;ä¸‰æ¬¡æ¡æ‰‹&lt;/figcaption&gt;&lt;/figure&gt;&lt;br /&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;TCPæŠ¥æ–‡å’Œæ ‡å¿—ä½å«ä¹‰&lt;a href=&quot;#tcpæŠ¥æ–‡å’Œæ ‡å¿—ä½å«ä¹‰&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;TCPæŠ¥æ–‡ï¼š
&lt;/p&gt;&lt;figure&gt;&lt;img src=&quot;https://blog.freelytomorrow.com/articles_img/tcp-protocol/tcp-header.png&quot; alt=&quot;&quot; /&gt;&lt;figcaption&gt;tcpæŠ¥æ–‡&lt;/figcaption&gt;&lt;/figure&gt;&lt;br /&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;h4&gt;seqåºå·&lt;a href=&quot;#seqåºå·&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;å 32ä½ã€‚åœ¨ä¸€ä¸ªTCPè¿æ¥ä¸­ä¼ é€çš„å­—èŠ‚æµä¸­çš„æ¯ä¸€ä¸ªå­—èŠ‚éƒ½æŒ‰é¡ºåºç¼–å·ã€‚æ•´ä¸ªè¦ä¼ é€çš„å­—èŠ‚æµçš„èµ·å§‹åºå·å¿…é¡»åœ¨è¿æ¥å»ºç«‹æ—¶è®¾ç½®ã€‚é¦–éƒ¨ä¸­çš„åºå·å­—æ®µå€¼åˆ™æ˜¯æŒ‡çš„æ˜¯æœ¬æŠ¥æ–‡æ®µæ‰€å‘é€çš„æ•°æ®çš„ç¬¬ä¸€ä¸ªå­—èŠ‚çš„åºå·ã€‚é•¿åº¦ä¸º4å­—èŠ‚ï¼Œåºå·æ˜¯32bitçš„æ— ç¬¦å·æ•°,åºå·åˆ°è¾¾ &lt;em&gt;2çš„32æ¬¡æ–¹-1&lt;/em&gt; ååˆä»0å¼€å§‹ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;#Ackç¡®è®¤å·&lt;a href=&quot;#ackç¡®è®¤å·&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;å 32ä½ï¼Œå½“ACKæ ‡å¿—ä½ä¸º1æ—¶ï¼Œè¯¥Ackå€¼æœ‰æ•ˆï¼›Ack=seq+1ï¼Œä¹Ÿå°±æ˜¯è¯´Ackå·æ˜¯å‘é€ç¡®è®¤çš„ä¸€ç«¯æ‰€æœŸæœ›æ”¶åˆ°çš„ä¸‹ä¸€ä¸ªåºå·ã€‚&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;å‘é€ç¡®è®¤ç«¯ï¼šå‘å‡ºç¡®è®¤ä¿¡å·çš„ä¸€ç«¯ï¼Œæ¯”å¦‚åœ¨TCPä¸‰æ¬¡æ¡æ‰‹ä¸­ï¼Œç¬¬äºŒè½®æ¡æ‰‹çš„Serverç«¯å°±æ˜¯å‘é€ç¡®è®¤ç«¯ï¼Œè€Œç¬¬ä¸‰è½®æ¡æ‰‹ä¸­çš„Clientä¹Ÿæ˜¯å‘é€ç¡®è®¤ç«¯ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;section&gt;&lt;h4&gt;æ•°æ®åç§»&lt;a href=&quot;#æ•°æ®åç§»&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;ä¹Ÿå«é¦–éƒ¨é•¿åº¦ï¼Œå 4ä¸ªbit,å®ƒæŒ‡å‡ºTCPæŠ¥æ–‡æ®µçš„æ•°æ®èµ·å§‹å¤„è·ç¦»TCPæŠ¥æ–‡æ®µçš„èµ·å§‹å¤„æœ‰å¤šè¿œã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;ä¿ç•™ä½&lt;a href=&quot;#ä¿ç•™ä½&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;å 6ä½ï¼Œä¿ç•™ä¸ºä»Šåä½¿ç”¨ï¼Œä¸ä½¿ç”¨æ—¶åº”ç½®ä¸º0ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;æ ‡å¿—ä½&lt;a href=&quot;#æ ‡å¿—ä½&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;å…±6ä¸ªï¼Œå³URGã€ACKã€PSHã€RSTã€SYNã€FIN&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;URG&lt;a href=&quot;#urg&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;ç´§æ€¥æŒ‡é’ˆï¼ˆurgent pointerï¼‰ï¼Œå½“URG=1æ—¶ï¼Œè¡¨æ˜ç´§æ€¥æŒ‡é’ˆå­—æ®µæœ‰æ•ˆã€‚å®ƒå‘Šè¯‰ç³»ç»Ÿæ­¤æŠ¥æ–‡æ®µä¸­æœ‰ç´§æ€¥æ•°æ®ï¼Œåº”å°½å¿«å‘é€ï¼ˆç›¸å½“äºé«˜ä¼˜å…ˆçº§çš„æ•°æ®ï¼‰ï¼Œè€Œä¸è¦æŒ‰åŸæ¥çš„æ’é˜Ÿé¡ºåºæ¥ä¼ é€&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;ACK&lt;a href=&quot;#ack&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;ä»…å½“ACK = 1æ—¶ç¡®è®¤å·å­—æ®µæ‰æœ‰æ•ˆï¼Œå½“ACK = 0æ—¶ç¡®è®¤å·æ— æ•ˆã€‚TCPè§„å®šï¼Œåœ¨è¿æ¥å»ºç«‹åæ‰€æœ‰çš„ä¼ é€çš„æŠ¥æ–‡æ®µéƒ½å¿…é¡»æŠŠACKç½®ä¸º1ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;PSH&lt;a href=&quot;#psh&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;å½“ä¸¤ä¸ªåº”ç”¨è¿›ç¨‹è¿›è¡Œäº¤äº’å¼çš„é€šä¿¡æ—¶ï¼Œæœ‰æ—¶åœ¨ä¸€ç«¯çš„åº”ç”¨è¿›ç¨‹å¸Œæœ›åœ¨é”®å…¥ä¸€ä¸ªå‘½ä»¤åç«‹å³å°±èƒ½æ”¶åˆ°å¯¹æ–¹çš„å“åº”ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒTCPå°±å¯ä»¥ä½¿ç”¨æ¨é€ï¼ˆpushï¼‰æ“ä½œã€‚å‘é€æ–¹TCPæŠŠPSHç½®ä¸º1ï¼Œå¹¶ç«‹å³åˆ›å»ºä¸€ä¸ªæŠ¥æ–‡æ®µå‘é€å‡ºå»ã€‚æ¥æ”¶æ–¹TCPæ”¶åˆ°PSH=1çš„æŠ¥æ–‡æ®µï¼Œå°±å°½å¿«åœ°å‘å‰äº¤ä»˜æ¥æ”¶åº”ç”¨è¿›ç¨‹ã€‚è€Œä¸ç”¨å†ç­‰åˆ°æ•´ä¸ªç¼“å­˜éƒ½å¡«æ»¡äº†åå†å‘ä¸Šäº¤ä»˜ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;RST&lt;a href=&quot;#rst&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;é‡ç½®è¿æ¥ã€‚å½“RST=1æ—¶ï¼Œè¡¨æ˜TCPè¿æ¥ä¸­å‡ºç°äº†ä¸¥é‡é”™è¯¯ï¼ˆå¦‚ç”±äºä¸»æœºå´©æºƒæˆ–å…¶ä»–åŸå› ï¼‰ï¼Œå¿…é¡»é‡Šæ”¾è¿æ¥ï¼Œç„¶åå†é‡æ–°å»ºç«‹ä¼ è¾“è¿æ¥ã€‚RSTç½®ä¸º1è¿˜ç”¨æ¥æ‹’ç»ä¸€ä¸ªéæ³•çš„æŠ¥æ–‡æ®µæˆ–æ‹’ç»æ‰“å¼€ä¸€ä¸ªè¿æ¥ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;SYN&lt;a href=&quot;#syn&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;åœ¨è¿æ¥å»ºç«‹æ—¶ç”¨æ¥åŒæ­¥åºå·ã€‚å½“SYN=1è€ŒACK=0æ—¶ï¼Œè¡¨æ˜è¿™æ˜¯ä¸€ä¸ªè¿æ¥è¯·æ±‚æŠ¥æ–‡æ®µã€‚å¯¹æ–¹è‹¥åŒæ„å»ºç«‹è¿æ¥ï¼Œåˆ™åº”åœ¨å“åº”çš„æŠ¥æ–‡æ®µä¸­ä½¿SYN=1å’ŒACK=1ã€‚
å› æ­¤SYN=1å°±è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªè¿æ¥è¯·æ±‚æˆ–è¿æ¥æ¥å—æŠ¥æ–‡ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;FIN&lt;a href=&quot;#fin&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;é‡Šæ”¾(ç»ˆæ­¢)ä¸€ä¸ªè¿æ¥ã€‚å½“FIN=1æ—¶ï¼Œè¡¨æ˜æ­¤æŠ¥æ–‡æ®µçš„å‘é€å‘çš„æ•°æ®å·²å‘é€å®Œæ¯•ï¼Œå¹¶è¦æ±‚é‡Šæ”¾è¿è¾“è¿æ¥ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;ä¸ºä»€ä¹ˆTCPä¸‰æ¬¡æ¡æ‰‹æ˜¯ä¸‰æ¬¡è€Œä¸æ˜¯ä¸¤æ¬¡æˆ–æ›´å¤šæ¬¡ï¼Ÿ&lt;a href=&quot;#ä¸ºä»€ä¹ˆtcpä¸‰æ¬¡æ¡æ‰‹æ˜¯ä¸‰æ¬¡è€Œä¸æ˜¯ä¸¤æ¬¡æˆ–æ›´å¤šæ¬¡&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;ä¸‰æ¬¡æ¡æ‰‹æœ¬è´¨ä¸Šæ˜¯ä¸ºäº†ç¡®ä¿TCPé“¾æ¥å¯é æ€§è¿›è¡Œçš„ç¡®è®¤åŠ¨ä½œï¼Œæ”¶å‘åŒæ–¹é€šè¿‡ä¸‰æ¬¡æ¡æ‰‹ç¡®è®¤äº†è‡ªå·±å’Œå¯¹æ–¹çš„æ”¶å‘èƒ½åŠ›éƒ½æ­£å¸¸ä¹‹åï¼Œæ‰ä¼šå»ºç«‹é“¾æ¥ã€‚&lt;/p&gt;&lt;p&gt;ä»¥ä¸€ä¸ªå®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯å»ºç«‹é“¾æ¥ä¸ºä¾‹ï¼š
&lt;/p&gt;&lt;figure&gt;&lt;img src=&quot;https://blog.freelytomorrow.com/articles_img/tcp-protocol/3handshake2.png&quot; alt=&quot;&quot; /&gt;&lt;figcaption&gt;ç¡®è®¤æ”¶å‘&lt;/figcaption&gt;&lt;/figure&gt;
åœ¨ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹é“¾æ¥çš„è¿‡ç¨‹ä¸­ï¼ŒæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯éƒ½é€šè¿‡æ•°æ®åŒ…çš„æ”¶å‘ç¡®è®¤äº†è‡ªå·±å’Œå¯¹æ–¹çš„æ”¶å‘èƒ½åŠ›æ­£å¸¸ï¼Œå› æ­¤æ‰å»ºç«‹äº†é“¾æ¥ã€‚&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;TCPå››æ¬¡æŒ¥æ‰‹&lt;a href=&quot;#tcpå››æ¬¡æŒ¥æ‰‹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;TCPå››æ¬¡æŒ¥æ‰‹å³å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯åœ¨ç»ˆæ­¢é“¾æ¥å‰è¿›è¡Œçš„ä¸€ç³»åˆ—æ“ä½œï¼Œå…¶æœ¬è´¨æ˜¯ä¸ºäº†ç¡®è®¤åŒæ–¹éƒ½æ­£å¸¸å‘é€å’Œæ¥æ”¶åˆ°äº†é¢„æœŸå†…å®¹ï¼Œä¸ä¼šå› ä¸ºé“¾æ¥çªç„¶ç»ˆæ­¢å¯¼è‡´æ•°æ®ä¸¢å¤±ã€‚&lt;/p&gt;&lt;p&gt;ç”±äºTCPè¿æ¥æ—¶å…¨åŒå·¥çš„ï¼Œå› æ­¤ï¼Œæ¯ä¸ªæ–¹å‘éƒ½å¿…é¡»è¦å•ç‹¬è¿›è¡Œå…³é—­ï¼Œè¿™ä¸€åŸåˆ™æ˜¯å½“ä¸€æ–¹å®Œæˆæ•°æ®å‘é€ä»»åŠ¡åï¼Œå‘é€ä¸€ä¸ªFINæ¥ç»ˆæ­¢è¿™ä¸€æ–¹å‘çš„è¿æ¥ï¼Œæ”¶åˆ°ä¸€ä¸ªFINåªæ˜¯æ„å‘³ç€è¿™ä¸€æ–¹å‘ä¸Šæ²¡æœ‰æ•°æ®æµåŠ¨äº†ï¼Œå³ä¸ä¼šå†æ”¶åˆ°æ•°æ®äº†ï¼Œä½†æ˜¯åœ¨è¿™ä¸ªTCPè¿æ¥ä¸Šä»ç„¶èƒ½å¤Ÿå‘é€æ•°æ®ï¼Œç›´åˆ°ä»¤ä¸€æ–¹å‘ä¹Ÿå‘é€äº†FINã€‚é¦–å…ˆè¿›è¡Œå…³é—­çš„ä¸€æ–¹å°†æ‰§è¡Œä¸»åŠ¨å…³é—­ï¼Œè€Œå¦ä¸€æ–¹åˆ™æ‰§è¡Œè¢«åŠ¨å…³é—­&lt;/p&gt;&lt;section&gt;&lt;h3&gt;å››æ¬¡æŒ¥æ‰‹æµç¨‹&lt;a href=&quot;#å››æ¬¡æŒ¥æ‰‹æµç¨‹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;ç¬¬ä¸€æ¬¡æŒ¥æ‰‹ï¼šClientå‘é€ä¸€ä¸ªFINï¼Œç”¨æ¥å…³é—­Clientåˆ°Serverçš„æ•°æ®ä¼ é€ï¼ŒClientè¿›å…¥FIN_WAIT_1çŠ¶æ€ã€‚&lt;/li&gt;
&lt;li&gt;ç¬¬äºŒæ¬¡æŒ¥æ‰‹ï¼šServeræ”¶åˆ°FINåï¼Œå‘é€ä¸€ä¸ªACKç»™Clientï¼Œç¡®è®¤åºå·ä¸ºæ”¶åˆ°åºå·+1ï¼ˆä¸SYNç›¸åŒï¼Œä¸€ä¸ªFINå ç”¨ä¸€ä¸ªåºå·ï¼‰ï¼ŒServerè¿›å…¥CLOSE_WAITçŠ¶æ€ã€‚&lt;/li&gt;
&lt;li&gt;ç¬¬ä¸‰æ¬¡æŒ¥æ‰‹ï¼šServerå‘é€ä¸€ä¸ªFINï¼Œç”¨æ¥å…³é—­Serveråˆ°Clientçš„æ•°æ®ä¼ é€ï¼ŒServerè¿›å…¥LAST_ACKçŠ¶æ€ã€‚&lt;/li&gt;
&lt;li&gt;ç¬¬å››æ¬¡æŒ¥æ‰‹ï¼šClientæ”¶åˆ°FINåï¼ŒClientè¿›å…¥TIME_WAITçŠ¶æ€ï¼Œæ¥ç€å‘é€ä¸€ä¸ªACKç»™Serverï¼Œç¡®è®¤åºå·ä¸ºæ”¶åˆ°åºå·+1ï¼ŒServerè¿›å…¥CLOSEDçŠ¶æ€ï¼Œå®Œæˆå››æ¬¡æŒ¥æ‰‹ã€‚
&lt;figure&gt;&lt;img src=&quot;https://blog.freelytomorrow.com/articles_img/tcp-protocol/4wavehands.png&quot; alt=&quot;&quot; /&gt;&lt;figcaption&gt;å››æ¬¡æŒ¥æ‰‹&lt;/figcaption&gt;&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;TIME-WAIT çŠ¶æ€ä¸ºä»€ä¹ˆéœ€è¦ç­‰å¾… 2MSL&lt;a href=&quot;#time-wait-çŠ¶æ€ä¸ºä»€ä¹ˆéœ€è¦ç­‰å¾…-2msl&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;1ä¸ª MSL ä¿è¯å››æ¬¡æŒ¥æ‰‹ä¸­ä¸»åŠ¨å…³é—­æ–¹æœ€åçš„ ACK æŠ¥æ–‡èƒ½æœ€ç»ˆåˆ°è¾¾å¯¹ç«¯&lt;/li&gt;
&lt;li&gt;1ä¸ª MSL ä¿è¯å¯¹ç«¯æ²¡æœ‰æ”¶åˆ° ACK é‚£ä¹ˆè¿›è¡Œé‡ä¼ çš„ FIN æŠ¥æ–‡èƒ½å¤Ÿåˆ°è¾¾&lt;/li&gt;
&lt;/ol&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;ä¸ºä»€ä¹ˆå»ºç«‹è¿æ¥æ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Œè€Œå…³é—­è¿æ¥å´æ˜¯å››æ¬¡æŒ¥æ‰‹?&lt;a href=&quot;#ä¸ºä»€ä¹ˆå»ºç«‹è¿æ¥æ˜¯ä¸‰æ¬¡æ¡æ‰‹è€Œå…³é—­è¿æ¥å´æ˜¯å››æ¬¡æŒ¥æ‰‹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;è¿™æ˜¯å› ä¸ºæœåŠ¡ç«¯åœ¨LISTENçŠ¶æ€ä¸‹ï¼Œæ”¶åˆ°å»ºç«‹è¿æ¥è¯·æ±‚çš„SYNæŠ¥æ–‡åï¼ŒæŠŠACKå’ŒSYNæ”¾åœ¨ä¸€ä¸ªæŠ¥æ–‡é‡Œå‘é€ç»™å®¢æˆ·ç«¯ã€‚è€Œå…³é—­è¿æ¥æ—¶ï¼Œå½“æ”¶åˆ°å¯¹æ–¹çš„FINæŠ¥æ–‡æ—¶ï¼Œä»…ä»…è¡¨ç¤ºå¯¹æ–¹ä¸å†å‘é€æ•°æ®äº†ä½†æ˜¯è¿˜èƒ½æ¥æ”¶æ•°æ®ï¼Œå·±æ–¹ä¹Ÿæœªå¿…å…¨éƒ¨æ•°æ®éƒ½å‘é€ç»™å¯¹æ–¹äº†ï¼Œæ‰€ä»¥å·±æ–¹å¯ä»¥ç«‹å³closeï¼Œä¹Ÿå¯ä»¥å‘é€ä¸€äº›æ•°æ®ç»™å¯¹æ–¹åï¼Œå†å‘é€FINæŠ¥æ–‡ç»™å¯¹æ–¹æ¥è¡¨ç¤ºåŒæ„ç°åœ¨å…³é—­è¿æ¥ï¼Œå› æ­¤ï¼Œå·±æ–¹ACKå’ŒFINä¸€èˆ¬éƒ½ä¼šåˆ†å¼€å‘é€ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;</content:encoded></item><item><title>Tomcatç»“åˆNginxå®ç°è´Ÿè½½å‡è¡¡ä¸åŠ¨é™æ€åˆ†ç¦»</title><link>https://white-festa.net/posts/load-balancing-tomcat/</link><guid isPermaLink="true">https://white-festa.net/posts/load-balancing-tomcat/</guid><description>ä»0åˆ°1å®ç°Tomcatçš„è´Ÿè½½å‡è¡¡ä¸NginxåŠ¨é™æ€èµ„æºåˆ†ç¦»ï¼Œé…åˆansible playbookåšè½¯ä»¶å®‰è£…</description><pubDate>Sun, 09 Apr 2023 00:00:00 GMT</pubDate><content:encoded>&lt;section&gt;&lt;h2&gt;ä»€ä¹ˆæ˜¯åŠ¨é™æ€åˆ†ç¦»&lt;a href=&quot;#ä»€ä¹ˆæ˜¯åŠ¨é™æ€åˆ†ç¦»&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;æˆ‘ä»¬éƒ½çŸ¥é“ä¸€ä¸ªç½‘ç«™ä¸­åŒ…å«å„ç§æ–‡ä»¶ï¼Œå¦‚cssæ–‡ä»¶ï¼Œæˆ–è€…æ˜¯åª’ä½“æ–‡ä»¶å¦‚jpgï¼Œpngç­‰ï¼›ä¸åŒçš„webæœåŠ¡å™¨æ“…é•¿çš„é¢†åŸŸä¸åŒï¼Œæ¯”å¦‚Nginxå°±æ˜¯å“åº”é™æ€èµ„æºè¯·æ±‚çš„ç‹è€…ï¼Œè€ŒTomcatæ˜¯ä¸“é—¨ç”¨æ¥å¤„ç†Javaåº”ç”¨çš„webæœåŠ¡å™¨ï¼Œè™½ç„¶Tomcatä¸€æ ·å¯ä»¥è§£æé™æ€èµ„æºè¯·æ±‚ï¼Œä½†åœ¨æ•ˆç‡ä¸Šå°±æ²¡æ³•å’ŒNginxç›¸æ¯”äº†ï¼›&lt;br /&gt;
å› æ­¤ï¼ŒåŠ¨é™æ€åˆ†ç¦»å°±æ˜¯åˆ©ç”¨Nginxçš„è½¬å‘æŠ€æœ¯ï¼Œå½“ç”¨æˆ·è¯·æ±‚äº†servlet,jspç­‰æ–‡ä»¶æ—¶ï¼Œå°†è¯·æ±‚è½¬å‘ç»™TomcatæœåŠ¡å™¨ï¼Œå½“ç”¨æˆ·è¯·æ±‚çš„æ˜¯å…¶ä»–çš„é™æ€èµ„æºæ—¶ï¼Œè®©Nginxä»£ç†æœåŠ¡å™¨ç›´æ¥è¿›è¡Œè§£æå’Œå“åº”ï¼Œä»¥æ­¤æå‡æ•´ä½“çš„å“åº”æ•ˆç‡ã€‚&lt;/p&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;åŠ¨é™æ€åˆ†ç¦»æ¶æ„å›¾&lt;a href=&quot;#åŠ¨é™æ€åˆ†ç¦»æ¶æ„å›¾&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;&lt;/p&gt;&lt;figure&gt;&lt;img src=&quot;https://blog.freelytomorrow.com/articles_img/load-balancing-tomcat/structure.png&quot; alt=&quot;&quot; /&gt;&lt;figcaption&gt;structure&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;éƒ¨ç½²è´Ÿè½½å‡è¡¡ä¸åŠ¨é™æ€åˆ†ç¦»&lt;a href=&quot;#éƒ¨ç½²è´Ÿè½½å‡è¡¡ä¸åŠ¨é™æ€åˆ†ç¦»&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;æœºå™¨ç¯å¢ƒï¼š&lt;/p&gt;








































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Hostname&lt;/th&gt;&lt;th&gt;å…¬ç½‘IP&lt;/th&gt;&lt;th&gt;å†…ç½‘IP&lt;/th&gt;&lt;th&gt;ä½œç”¨&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;lb-6&lt;/td&gt;&lt;td&gt;10.0.0.6&lt;/td&gt;&lt;td&gt;172.16.1.6&lt;/td&gt;&lt;td&gt;Nginxè´Ÿè½½å‡è¡¡&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;web-7&lt;/td&gt;&lt;td&gt;10.0.0.7&lt;/td&gt;&lt;td&gt;172.16.1.7&lt;/td&gt;&lt;td&gt;Tomcat&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;web-9&lt;/td&gt;&lt;td&gt;10.0.0.9&lt;/td&gt;&lt;td&gt;172.16.1.9&lt;/td&gt;&lt;td&gt;Tomcat&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;master-61&lt;/td&gt;&lt;td&gt;10.0.0.61&lt;/td&gt;&lt;td&gt;172.16.1.61&lt;/td&gt;&lt;td&gt;Ansible&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;nfs-31&lt;/td&gt;&lt;td&gt;10.0.0.31&lt;/td&gt;&lt;td&gt;172.16.1.31&lt;/td&gt;&lt;td&gt;NFS&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;section&gt;&lt;h3&gt;ä½¿ç”¨Ansibleéƒ¨ç½²Tomcat&lt;a href=&quot;#ä½¿ç”¨ansibleéƒ¨ç½²tomcat&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;setup JDK and Tomcat&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;hosts&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;tasks&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;01 - copy jdk package&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;copy&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;src&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/opt/jdk-8u221-linux-x64.tar.gz&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;dest&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/opt/&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;02 - unarchive jdk package&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;unarchive&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;src&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/opt/jdk-8u221-linux-x64.tar.gz&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;dest&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/opt/&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;remote_src&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;03 - create soft link for jdk&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;file&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;state&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;link&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;src&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/opt/jdk1.8.0_221/&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;dest&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/opt/jdk8&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;04 - configure PATH variable&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;lineinfile&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;dest&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/etc/profile&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;line&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;{{ item }}&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;loop&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;export JAVA_HOME=/opt/jdk8&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;export PATH=$JAVA_HOME/bin:$JAVA_HOME/jre/bin:$PATH&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;export CLASSPATH=.$CLASSPATH:$JAVA_HOME/lib:$JAVA_HOME/jre/lib:$JAVA_HOME/lib/tools.jar&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;05 - download tomcat&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;27&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;get_url&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;28&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;url&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;https://archive.apache.org/dist/tomcat/tomcat-8/v8.0.27/bin/apache-tomcat-8.0.27.tar.gz&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;29&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;dest&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/opt/&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;30&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;06 - unarchive tomcat&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;31&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;unarchive&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;32&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;src&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/opt/apache-tomcat-8.0.27.tar.gz&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;33&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;dest&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/opt/&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;34&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;remote_src&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;35&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;07 - create soft link for tomcat&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;36&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;file&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;37&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;src&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/opt/apache-tomcat-8.0.27&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;38&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;dest&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/opt/tomcat8&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;39&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;state&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;link&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;æ‰§è¡Œå®Œå‰§æœ¬å,è¿˜éœ€è¦æ‰‹åŠ¨ä½¿é…ç½®çš„&lt;code&gt;JAVA_HOME&lt;/code&gt;ç­‰å˜é‡ç”Ÿæ•ˆ&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;source&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/etc/profile&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;è¿™æ˜¯å› ä¸ºansibleè¿œç¨‹æ‰§è¡Œçš„æ˜¯non-login shellï¼Œä¸ä¼šåŠ è½½&lt;code&gt;profile&lt;/code&gt;å’Œ&lt;code&gt;bash_profile&lt;/code&gt;ä¸‹çš„å˜é‡ï¼Œå› æ­¤éœ€è¦æ‰‹åŠ¨ç™»å½•æ‰§è¡Œsourceï¼›æˆ–è€…ä¹Ÿå¯ä»¥å†™å…¥&lt;code&gt;~/.bashrc&lt;/code&gt;ä¸­ï¼Œç„¶åsourceä¸€ä¸‹&lt;code&gt;~/.bash_profile&lt;/code&gt;ä½¿å…¶ç”Ÿæ•ˆã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;éƒ¨ç½²NFSæœåŠ¡ç«¯&lt;a href=&quot;#éƒ¨ç½²nfsæœåŠ¡ç«¯&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;section&gt;&lt;h4&gt;å®‰è£…nfs-utilså’Œrpcbindå·¥å…·åŒ…&lt;a href=&quot;#å®‰è£…nfs-utilså’Œrpcbindå·¥å…·åŒ…&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;yum&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;install&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;nfs-utils&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;rpcbind&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-y&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;åˆ›å»ºå­˜æ”¾java appsçš„æ–‡ä»¶å¤¹&lt;a href=&quot;#åˆ›å»ºå­˜æ”¾java-appsçš„æ–‡ä»¶å¤¹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;mkdir /opt/jpress&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;ä¿®æ”¹æŒ‚è½½é…ç½®&lt;a href=&quot;#ä¿®æ”¹æŒ‚è½½é…ç½®&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;echo&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;/opt/jpress 172.16.1.0/24(rw,sync,all_squash) &apos;&lt;/span&gt;&lt;span&gt; &amp;gt;&amp;gt; &lt;/span&gt;&lt;span&gt;/etc/exports&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;ä¿®æ”¹æŒ‚è½½ç›®å½•çš„å±ä¸»å±ç»„&lt;a href=&quot;#ä¿®æ”¹æŒ‚è½½ç›®å½•çš„å±ä¸»å±ç»„&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;chown -R nfsnobody.nfsnobody /opt/jpress&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;ä¸‹è½½java appåˆ°æŒ‚è½½ç›®å½•&lt;a href=&quot;#ä¸‹è½½java-appåˆ°æŒ‚è½½ç›®å½•&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;è¿™é‡Œä½¿ç”¨çš„æ˜¯jpressåšå®éªŒï¼Œä¸‹è½½åœ°å€ï¼š&lt;a href=&quot;https://www.jpress.cn/club/post/116&quot;&gt;https://www.jpress.cn/club/post/116&lt;/a&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;éƒ¨ç½²NFSå®¢æˆ·ç«¯(åœ¨webæœåŠ¡å™¨ä¸Š)&lt;a href=&quot;#éƒ¨ç½²nfså®¢æˆ·ç«¯åœ¨webæœåŠ¡å™¨ä¸Š&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;section&gt;&lt;h4&gt;åœ¨ä¸¤å°æœºå™¨ä¸Šå®‰è£…nfs-utils&lt;a href=&quot;#åœ¨ä¸¤å°æœºå™¨ä¸Šå®‰è£…nfs-utils&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;yum&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;install&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;nfs-utils&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-y&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;åœ¨tomcatçš„webappsç›®å½•ä¸‹åˆ›å»ºjpressæ–‡ä»¶å¤¹&lt;a href=&quot;#åœ¨tomcatçš„webappsç›®å½•ä¸‹åˆ›å»ºjpressæ–‡ä»¶å¤¹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;mkdir&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/opt/tomcat8/webapps/jpress&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;å°†nfsç›®å½•æŒ‚è½½åˆ°jpressç›®å½•ä¸‹&lt;a href=&quot;#å°†nfsç›®å½•æŒ‚è½½åˆ°jpressç›®å½•ä¸‹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;mount -t nfs 172.16.1.31:/opt/jpress /opt/tomcat8/webapps/jpress&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;è§£å‹jpress.war&lt;a href=&quot;#è§£å‹jpresswar&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;tomcaté»˜è®¤ä¼šå¯¹webappsç›®å½•ä¸‹çš„.waræˆ–.jaråŒ…è¿›è¡Œè‡ªåŠ¨è§£å‹ï¼Œä½†å› ä¸ºæˆ‘ä»¬æ˜¯é€šè¿‡è¿œç¨‹æŒ‚è½½çš„æ–¹å¼æ‰§è¡Œçš„ï¼ŒwaråŒ…åœ¨è‡ªåˆ›çš„ç›®å½•ä¸‹ï¼Œtomcatè¯†åˆ«ä¸åˆ°ï¼Œå› æ­¤éœ€è¦æ‰‹åŠ¨è§£å‹ï¼Œä½¿ç”¨&lt;code&gt;jar&lt;/code&gt;å‘½ä»¤ï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;jar&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-xvf&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/opt/tomcat8/webapps/jpress/jpress.war&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;ç„¶åå¯ä»¥å°†waråŒ…åˆ æ‰äº†ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;éƒ¨ç½²Nginxè´Ÿè½½å‡è¡¡&lt;a href=&quot;#éƒ¨ç½²nginxè´Ÿè½½å‡è¡¡&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;å®‰è£…å¥½Nginxï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶&lt;code&gt;nginx.conf&lt;/code&gt;&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;upstream&lt;/span&gt;&lt;span&gt; tomcat_pool {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;server&lt;/span&gt;&lt;span&gt; 172.16.1.9:8080;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;server&lt;/span&gt;&lt;span&gt; 172.16.1.7:8080;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;server&lt;/span&gt;&lt;span&gt; {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;     &lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;listen &lt;/span&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;80&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;     &lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;listen &lt;/span&gt;&lt;span&gt;      [::]:80;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;     &lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;server_name &lt;/span&gt;&lt;span&gt; _;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;location&lt;/span&gt;&lt;span&gt; / {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;     &lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;proxy_pass &lt;/span&gt;&lt;span&gt;http://tomcat_pool;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;     &lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;include &lt;/span&gt;&lt;span&gt;/etc/nginx/proxy_params.conf;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;è½¬å‘å‚æ•°ï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;proxy_set_header &lt;/span&gt;&lt;span&gt;Host $&lt;/span&gt;&lt;span&gt;http_host&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;proxy_set_header &lt;/span&gt;&lt;span&gt;X-Forwarded-For $&lt;/span&gt;&lt;span&gt;proxy_add_x_forwarded_for&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;proxy_connect_timeout &lt;/span&gt;&lt;span&gt;30&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;proxy_send_timeout &lt;/span&gt;&lt;span&gt;60&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;proxy_read_timeout &lt;/span&gt;&lt;span&gt;60&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;proxy_buffering &lt;/span&gt;&lt;span&gt;on&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;proxy_buffer_size &lt;/span&gt;&lt;span&gt;32k&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;span&gt; proxy_buffers &lt;/span&gt;&lt;span&gt;4&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;128k&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;åˆ°æ­¤ä¸ºæ­¢è´Ÿè½½å‡è¡¡çš„é…ç½®å°±åŸºæœ¬å®Œæ¯•äº†ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;å®ç°åŠ¨é™æ€åˆ†ç¦»&lt;a href=&quot;#å®ç°åŠ¨é™æ€åˆ†ç¦»&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶ç”¨äºæµ‹è¯•ï¼›
è¿™é‡Œç”¨å¾—æ˜¯ä¸€ä¸ªèƒ½å¤Ÿç”Ÿæˆéšæœºæ•°çš„jspæ–‡ä»¶ä½œä¸ºåŠ¨æ€èµ„æºï¼Œå’Œä¸€å¼ jpgå›¾ç‰‡ä½œä¸ºé™æ€èµ„æºï¼ŒåŠ¨é™æ€åˆ†ç¦»ä¸»è¦è¿˜æ˜¯åŸºäºnginxçš„locationåŒ¹é…è§„åˆ™ã€‚&lt;br /&gt;
æœ‰ä¸¤ç§åŒ¹é…æ–¹å¼ï¼š&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;åŸºäºæ–‡ä»¶åç¼€åŒ¹é…&lt;/li&gt;
&lt;li&gt;åŸºäºæ–‡ä»¶è·¯å¾„åŒ¹é…&lt;/li&gt;
&lt;/ul&gt;&lt;section&gt;&lt;h4&gt;åŸºäºæ–‡ä»¶åç¼€åŒ¹é…&lt;a href=&quot;#åŸºäºæ–‡ä»¶åç¼€åŒ¹é…&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;ä¸€ä¸ªå…¸å‹çš„ä¾‹å­å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;location&lt;/span&gt;&lt;span&gt; ~ &lt;/span&gt;&lt;span&gt;.*\.(jpg|png|html)&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;       &lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;root &lt;/span&gt;&lt;span&gt;/opt/static/;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;       &lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;expires &lt;/span&gt;&lt;span&gt;5d&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;å½“ç”¨æˆ·è¯·æ±‚çš„æ–‡ä»¶åç¼€å’Œè§„åˆ™å‘åŒ¹é…æ—¶ï¼Œåå‘ä»£ç†æœåŠ¡å™¨ä¼šè‡ªåŠ¨åœ¨æœ¬æœºçš„å¯¹åº”ç›®å½•(é€šè¿‡nfsæŒ‚è½½çš„ç›®å½•)ä¸­æœç´¢å†…å®¹å¹¶è¿”å›ï¼›
å½“ç„¶ï¼Œæœ€å¥½çš„æ–¹æ³•è¿˜æ˜¯å†å¢è®¾ä¸€ä¸ªNginxé™æ€è¯·æ±‚è§£ææœåŠ¡å™¨ï¼Œè´Ÿè½½å‡è¡¡æœåŠ¡å™¨åªç”¨ä½œè¯·æ±‚è½¬å‘ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;åŸºäºæ–‡ä»¶è·¯å¾„åŒ¹é…&lt;a href=&quot;#åŸºäºæ–‡ä»¶è·¯å¾„åŒ¹é…&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;è¿™ç§æ–¹å¼éœ€è¦è¿ç»´æˆ–å¼€å‘è€…é¢„å…ˆè®¾å®šå¥½ç”¨äºä¸“é—¨å­˜æ”¾é™æ€æ–‡ä»¶å†…å®¹çš„ç›®å½•ï¼›
ä¾‹å­ï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;location&lt;/span&gt;&lt;span&gt; /static {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;   &lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;alias &lt;/span&gt;&lt;span&gt;  /usr/share/nginx/staticrs;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;   &lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;index &lt;/span&gt;&lt;span&gt; index.html;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;ç”Ÿæˆéšæœºæ•°çš„jspæ–‡ä»¶&lt;a href=&quot;#ç”Ÿæˆéšæœºæ•°çš„jspæ–‡ä»¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;&amp;lt;%&lt;/span&gt;&lt;span&gt;@&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;page&lt;/span&gt;&lt;span&gt;&lt;span&gt; language&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&quot;java&quot;&lt;/span&gt;&lt;span&gt;&lt;span&gt; contentType&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&quot;text/html; charset=UTF-8&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;pageEncoding&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&quot;UTF-8&quot;&lt;/span&gt;&lt;span&gt;%&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;!&lt;/span&gt;&lt;span&gt;DOCTYPE&lt;/span&gt;&lt;span&gt;&lt;span&gt; html&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;html&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;head&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;meta charset&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&quot;UTF-8&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;title&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;éšæœºæ•°ç”Ÿæˆå™¨&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;title&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;head&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;body&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;h1&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;éšæœºæ•°ç”Ÿæˆå™¨&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;h1&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&amp;lt;%&lt;/span&gt;&lt;span&gt;--&lt;/span&gt;&lt;span&gt; ä½¿ç”¨Javaä»£ç ç”Ÿæˆéšæœºæ•° &lt;/span&gt;&lt;span&gt;--&lt;/span&gt;&lt;span&gt;%&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&amp;lt;%&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;java&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;util&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;Random&lt;/span&gt;&lt;span&gt; random &lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;new&lt;/span&gt;&lt;span&gt;&lt;span&gt; java&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;util&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;Random&lt;/span&gt;&lt;span&gt;();&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;int&lt;/span&gt;&lt;span&gt; randomNumber &lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;random&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;nextInt&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;100&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;out&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;println&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&quot;&amp;lt;p&amp;gt;éšæœºæ•°ï¼š&quot;&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;+&lt;/span&gt;&lt;span&gt; randomNumber &lt;/span&gt;&lt;span&gt;+&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&quot;&amp;lt;/p&amp;gt;&quot;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;%&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;body&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;html&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;</content:encoded></item><item><title>Tomcatå®‰è£…å’Œé…ç½®</title><link>https://white-festa.net/posts/tomcat/</link><guid isPermaLink="true">https://white-festa.net/posts/tomcat/</guid><pubDate>Wed, 29 Mar 2023 00:00:00 GMT</pubDate><content:encoded>&lt;section&gt;&lt;h2&gt;é€šè¿‡yumæºå®‰è£…&lt;a href=&quot;#é€šè¿‡yumæºå®‰è£…&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;å®‰è£…JDK&lt;a href=&quot;#å®‰è£…jdk&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;å¯ä»¥é€šè¿‡yum listæ¥æŸ¥çœ‹å¯ç”¨çš„jdkåŒ…&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;yum&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;list&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;java&lt;/span&gt;&lt;span&gt;*&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;è¿™ç§åŒ…åä¸­å¸¦æœ‰develçš„éƒ½æ˜¯jdkåŒ…ï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;java-1.6.0-openjdk-devel.x86_64&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;java-1.7.0-openjdk-devel.x86_64&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;java-1.8.0-openjdk-devel.x86_64&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;å®‰è£…tomcat&lt;a href=&quot;#å®‰è£…tomcat&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;yum&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;install&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;tomcat&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;tomcat-webapps&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;tomcat-admin-webapps&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-y&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;æŸ¥çœ‹tomcatç‰ˆæœ¬&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[root@tomcat-85 ~]#tomcat version&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Server&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;version:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Apache&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Tomcat/7.0.76&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Server&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;built:&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;Nov&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;16&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;2020&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;16:51:26&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;UTC&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Server&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;number:&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;7.0.76.0&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;OS&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Name:&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;Linux&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;OS&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Version:&lt;/span&gt;&lt;span&gt;     &lt;/span&gt;&lt;span&gt;3.10.0-1160.el7.x86_64&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Architecture:&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;amd64&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;JVM&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Version:&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;1.8.0_382-b05&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;JVM&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Vendor:&lt;/span&gt;&lt;span&gt;     &lt;/span&gt;&lt;span&gt;Red&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Hat,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Inc.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;é€šè¿‡å‹ç¼©åŒ…å®‰è£…&lt;a href=&quot;#é€šè¿‡å‹ç¼©åŒ…å®‰è£…&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;å®‰è£…JDK&lt;a href=&quot;#å®‰è£…jdk-1&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;section&gt;&lt;h4&gt;é€šè¿‡Oracleå®˜æ–¹ä¸‹è½½JDK&lt;a href=&quot;#é€šè¿‡oracleå®˜æ–¹ä¸‹è½½jdk&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;&lt;a href=&quot;https://www.oracle.com/java/technologies/javase/javase8u211-later-archive-downloads.html&quot;&gt;https://www.oracle.com/java/technologies/javase/javase8u211-later-archive-downloads.html&lt;/a&gt;&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;è§£å‹ç¼©&lt;a href=&quot;#è§£å‹ç¼©&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;tar&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-xf&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;jdk-8u221-linux-x64.tar.gz&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-C&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/opt/jdk&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;è®¾ç½®è½¯è¿æ¥&lt;a href=&quot;#è®¾ç½®è½¯è¿æ¥&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ln&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-s&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/opt/jdk/jdk1.8.0_221/&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/opt/jdk8&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;é…ç½®PATHå˜é‡&lt;a href=&quot;#é…ç½®pathå˜é‡&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;åœ¨&lt;code&gt;/etc/profile&lt;/code&gt;æ–‡ä»¶ä¸­åŠ å…¥ï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;export&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;JAVA_HOME&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;/&lt;/span&gt;&lt;/span&gt;&lt;span&gt;opt&lt;/span&gt;&lt;span&gt;/&lt;/span&gt;&lt;span&gt;jdk8&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;export&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;PATH&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;$JAVA_HOME&lt;/span&gt;&lt;span&gt;/&lt;/span&gt;&lt;span&gt;bin&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;$JAVA_HOME&lt;/span&gt;&lt;span&gt;/&lt;/span&gt;&lt;span&gt;jre&lt;/span&gt;&lt;span&gt;/&lt;/span&gt;&lt;span&gt;bin&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;$PATH&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;export&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;CLASSPATH&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;$CLASSPATH&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;$JAVA_HOME&lt;/span&gt;&lt;span&gt;/&lt;/span&gt;&lt;span&gt;lib&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;$JAVA_HOME&lt;/span&gt;&lt;span&gt;/&lt;/span&gt;&lt;span&gt;jre&lt;/span&gt;&lt;span&gt;/&lt;/span&gt;&lt;span&gt;lib&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;$JAVA_HOME&lt;/span&gt;&lt;span&gt;/&lt;/span&gt;&lt;span&gt;lib&lt;/span&gt;&lt;span&gt;/&lt;/span&gt;&lt;span&gt;tools&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;jar&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# ç«‹å³ç”Ÿæ•ˆé…ç½®&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;source&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/etc/profile&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;æŸ¥çœ‹javaç‰ˆæœ¬&lt;a href=&quot;#æŸ¥çœ‹javaç‰ˆæœ¬&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[root@tomcat-85 /opt]#java -version&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;java&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;version&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;1.8.0_221&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Java(TM&lt;/span&gt;&lt;span&gt;) SE Runtime Environment (&lt;/span&gt;&lt;span&gt;build&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1.8.0_221-b11&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Java&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;HotSpot&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;TM&lt;/span&gt;&lt;span&gt;) &lt;/span&gt;&lt;span&gt;64-Bit&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Server&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;VM&lt;/span&gt;&lt;span&gt; (build &lt;/span&gt;&lt;span&gt;25.221-b11,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;mixed&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;mode&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;å®‰è£…Tomcat&lt;a href=&quot;#å®‰è£…tomcat-1&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;section&gt;&lt;h4&gt;ä¸‹è½½tomcat&lt;a href=&quot;#ä¸‹è½½tomcat&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;wget&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;https://archive.apache.org/dist/tomcat/tomcat-8/v8.0.27/bin/apache-tomcat-8.0.27.tar.gz&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;è§£å‹ç¼©&lt;a href=&quot;#è§£å‹ç¼©-1&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;tar&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-xf&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;apache-tomcat-8.0.27.tar.gz&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;è®¾ç½®è½¯è¿æ¥&lt;a href=&quot;#è®¾ç½®è½¯è¿æ¥-1&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ln&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-s&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;apache-tomcat-8.0.27&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/opt/tomcat8&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;æ£€æŸ¥tomcatæ˜¯å¦è¯†åˆ«äº†jdk&lt;a href=&quot;#æ£€æŸ¥tomcatæ˜¯å¦è¯†åˆ«äº†jdk&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[root@tomcat-85 /opt/tomcat8]#/opt/tomcat8/bin/version.sh&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Using&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;CATALINA_BASE:&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;/opt/tomcat8&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Using&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;CATALINA_HOME:&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;/opt/tomcat8&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Using&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;CATALINA_TMPDIR:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/opt/tomcat8/temp&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Using&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;JRE_HOME:&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;/opt/jdk8&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Using&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;CLASSPATH:&lt;/span&gt;&lt;span&gt;       &lt;/span&gt;&lt;span&gt;/opt/tomcat8/bin/bootstrap.jar:/opt/tomcat8/bin/tomcat-juli.jar&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Server&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;version:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Apache&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Tomcat/8.0.27&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Server&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;built:&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;Sep&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;28&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;2015&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;08:17:25&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;UTC&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Server&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;number:&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;8.0.27.0&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;OS&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Name:&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;Linux&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;OS&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Version:&lt;/span&gt;&lt;span&gt;     &lt;/span&gt;&lt;span&gt;3.10.0-1160.el7.x86_64&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Architecture:&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;amd64&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;JVM&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Version:&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;1.8.0_221-b11&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;JVM&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Vendor:&lt;/span&gt;&lt;span&gt;     &lt;/span&gt;&lt;span&gt;Oracle&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Corporation&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;Tomcaté…ç½®æ–‡ä»¶&lt;a href=&quot;#tomcaté…ç½®æ–‡ä»¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;tomcatæœ‰ä¸¤ä¸ªé‡è¦çš„é…ç½®æ–‡ä»¶ï¼Œä¸€ä¸ªæ˜¯&lt;code&gt;server.xml&lt;/code&gt;è¯¥æ–‡ä»¶æ˜¯tomcatçš„ä¸»é…ç½®æ–‡ä»¶ï¼Œç”¨äºé…ç½®ç«¯å£å·ç­‰ï¼›å¦ä¸€ä¸ªæ˜¯&lt;code&gt;tomcat-users.xml&lt;/code&gt;ï¼Œè¯¥æ–‡ä»¶ç”¨äºé…ç½®tomcatçš„ç®¡ç†å‘˜è´¦æˆ·ã€‚&lt;/p&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;Tomcatç®¡ç†&lt;a href=&quot;#tomcatç®¡ç†&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;å¯¹äºé€šè¿‡yumæºå®‰è£…çš„tomcatï¼Œæ­£å¸¸ä½¿ç”¨systemctlæœåŠ¡ç®¡ç†å‘½ä»¤å³å¯ï¼›å¯¹äºé€šè¿‡å‹ç¼©åŒ…å®‰è£…çš„ï¼Œtomcatæä¾›äº†ç¨‹åºç®¡ç†è„šæœ¬ï¼Œéƒ½åœ¨&lt;code&gt;bin/&lt;/code&gt;ç›®å½•ä¸‹ã€‚
å¯åŠ¨tomcat:&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[root@tomcat-85 /opt/tomcat8]#/opt/tomcat8/bin/startup.sh&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Using&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;CATALINA_BASE:&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;/opt/tomcat8&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Using&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;CATALINA_HOME:&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;/opt/tomcat8&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Using&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;CATALINA_TMPDIR:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/opt/tomcat8/temp&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Using&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;JRE_HOME:&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;/opt/jdk8&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Using&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;CLASSPATH:&lt;/span&gt;&lt;span&gt;       &lt;/span&gt;&lt;span&gt;/opt/tomcat8/bin/bootstrap.jar:/opt/tomcat8/bin/tomcat-juli.jar&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tomcat&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;started.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;åœæ­¢tomcatæœåŠ¡ï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[root@tomcat-85 /opt/tomcat8]#/opt/tomcat8/bin/shutdown.sh&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Using&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;CATALINA_BASE:&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;/opt/tomcat8&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Using&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;CATALINA_HOME:&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;/opt/tomcat8&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Using&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;CATALINA_TMPDIR:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/opt/tomcat8/temp&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Using&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;JRE_HOME:&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;/opt/jdk8&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Using&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;CLASSPATH:&lt;/span&gt;&lt;span&gt;       &lt;/span&gt;&lt;span&gt;/opt/tomcat8/bin/bootstrap.jar:/opt/tomcat8/bin/tomcat-juli.jar&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;å¯åŠ¨åå¯ä»¥çœ‹åˆ°Tomcatçš„åå°ç®¡ç†é¡µé¢&lt;br /&gt;
&lt;/p&gt;&lt;figure&gt;&lt;img src=&quot;https://blog.freelytomorrow.com/articles_img/tomcat-start/tomcat-backend.png&quot; alt=&quot;&quot; /&gt;&lt;figcaption&gt;tomcat-backend&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;h3&gt;é…ç½®ç®¡ç†å‘˜è´¦æˆ·&lt;a href=&quot;#é…ç½®ç®¡ç†å‘˜è´¦æˆ·&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;ä¸Šé¢çš„é¡µé¢æ˜¯tomcatçš„åå°ç®¡ç†è´¦æˆ·ï¼Œå³ä¸Šè§’çš„å‡ ä¸ªé€‰é¡¹æä¾›äº†æ£€æŸ¥æœåŠ¡å™¨çŠ¶æ€ï¼Œç®¡ç†java appsç­‰åŠŸèƒ½ï¼Œè¿™äº›åŠŸèƒ½éœ€è¦é€šè¿‡ç®¡ç†å‘˜è´¦æˆ·æ¥ä½¿ç”¨ï¼›
Tomcaté»˜è®¤æ²¡æœ‰ç®¡ç†å‘˜è´¦æˆ·ï¼Œç‚¹å‡»ä¸Šé¢çš„ä»»æ„é€‰é¡¹ä¼šæç¤ºç™»å½•ï¼Œç‚¹å‡»å–æ¶ˆåä¼šå‡ºç°è¿™æ ·çš„æç¤ºä¿¡æ¯ï¼š&lt;br /&gt;
&lt;/p&gt;&lt;figure&gt;&lt;img src=&quot;https://blog.freelytomorrow.com/articles_img/tomcat-start/tomcat-hint.png&quot; alt=&quot;&quot; /&gt;&lt;figcaption&gt;tomcat-hint&lt;/figcaption&gt;&lt;/figure&gt;&lt;br /&gt;
æŒ‰ç…§æç¤ºè¿›è¡Œé…ç½®å³å¯&lt;p&gt;&lt;/p&gt;&lt;p&gt;ä¿®æ”¹&lt;code&gt;tomcat-users.xml&lt;/code&gt;æ–‡ä»¶å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;?&lt;/span&gt;&lt;span&gt;xml&lt;/span&gt;&lt;span&gt; version&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&apos;1.0&apos;&lt;/span&gt;&lt;span&gt; encoding&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&apos;utf-8&apos;&lt;/span&gt;&lt;span&gt;?&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;tomcat-users&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;role&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;rolename&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&quot;manager-gui&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;role&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;rolename&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&quot;admin-gui&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;user&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;username&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&quot;tomcat&quot;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;password&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&quot;abc123&quot;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;roles&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&quot;manager-gui,admin-gui&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;tomcat-users&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;ç„¶åé‡å¯tomcatä»¥åŠ è½½é…ç½®&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;éƒ¨ç½²javaåº”ç”¨&lt;a href=&quot;#éƒ¨ç½²javaåº”ç”¨&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;tomcatéƒ¨ç½²javaåº”ç”¨çš„æ–¹å¼éå¸¸ç®€å•ï¼Œåªè¦å°†æ‰“åŒ…çš„.jaræˆ–.waråŒ…ç§»åŠ¨åˆ°&lt;code&gt;webapps/&lt;/code&gt;ç›®å½•ä¸‹ï¼Œå°±ä¼šè‡ªåŠ¨å®ŒæˆåŠ å‹å’Œéƒ¨ç½²ç­‰æ“ä½œï¼›&lt;br /&gt;&lt;/p&gt;&lt;p&gt;ä»¥jpressä¸ºä¾‹ï¼š&lt;br /&gt;
åœ¨è¿™é‡Œä¸‹è½½ï¼š&lt;a href=&quot;https://www.jpress.cn/club/post/116&quot;&gt;https://www.jpress.cn/club/post/116&lt;/a&gt;&lt;/p&gt;&lt;p&gt;ç§»åŠ¨jpress.waråˆ°webappsç›®å½•ä¸‹&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;mv&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;jpress.war&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/usr/share/tomcat/webapps&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;ç™»å…¥tomcatåå°ç®¡ç†ç•Œé¢ï¼Œç‚¹å‡»Manager APPé€‰é¡¹ï¼Œå¯ä»¥å‘ç°tomcatå·²ç»æ£€æµ‹åˆ°äº†jpressåº”ç”¨&lt;br /&gt;
&lt;/p&gt;&lt;figure&gt;&lt;img src=&quot;https://blog.freelytomorrow.com/articles_img/tomcat-start/management-jpress.png&quot; alt=&quot;&quot; /&gt;&lt;figcaption&gt;management-jpress&lt;/figcaption&gt;&lt;/figure&gt;&lt;br /&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;è®¿é—®jpress
ç›´æ¥è®¿é—®è·¯å¾„å°±å¯ä»¥ï¼šip/jpress
å®‰è£…ç•Œé¢æ­£å¸¸æ˜¾ç¤º&lt;br /&gt;
&lt;/p&gt;&lt;figure&gt;&lt;img src=&quot;https://blog.freelytomorrow.com/articles_img/tomcat-start/jpress-install.png&quot; alt=&quot;&quot; /&gt;&lt;figcaption&gt;jpress-install&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;</content:encoded></item><item><title>MySQL MHAé«˜å¯ç”¨</title><link>https://white-festa.net/posts/mysql-mha/</link><guid isPermaLink="true">https://white-festa.net/posts/mysql-mha/</guid><description>ä½¿ç”¨MySQL MHAå®ç°ä¸€ä¸»å¤šä»çš„æ•°æ®åº“æ¶æ„ï¼Œç¡®ä¿MySQLæœåŠ¡çš„é«˜å¯ç”¨æ€§</description><pubDate>Tue, 07 Feb 2023 00:00:00 GMT</pubDate><content:encoded>&lt;section&gt;&lt;h2&gt;ä»€ä¹ˆæ˜¯MHA&lt;a href=&quot;#ä»€ä¹ˆæ˜¯mha&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;MHAï¼ˆMaster High Availabilityï¼‰æ˜¯ç”¨äºæé«˜æ•°æ®åº“é›†ç¾¤å¯ç”¨æ€§çš„æ–¹æ¡ˆï¼ŒåŸºäºè™šæ‹ŸIPæŠ€æœ¯ï¼Œå¯ä»¥å®ç°åœ¨Masteræ•…éšœæ—¶ï¼Œåœ¨30så†…å®ç°æ•…éšœè½¬ç§»å¹¶ç¡®ä¿æ•°æ®ä¸€è‡´æ€§ã€‚å¯ä»¥ç†è§£ä¸ºMHAå°±æ˜¯ä½œç”¨äºæ•°æ®åº“é›†ç¾¤çš„KeepAlivedã€‚&lt;/p&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;MHAå·¥ä½œåŸç†&lt;a href=&quot;#mhaå·¥ä½œåŸç†&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;MHAçš„ç»„æˆ&lt;a href=&quot;#mhaçš„ç»„æˆ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;MHAç”±MHA Managerå’ŒMHA Nodeç»„æˆï¼Œå…¶ä¸­Managerç›¸å½“äºæœåŠ¡ç«¯ï¼ŒNodeç›¸å½“äºå®¢æˆ·ç«¯ï¼›&lt;br /&gt;
Managerå¯ä»¥éƒ¨ç½²åœ¨Masteræˆ–Slaveæœºå™¨ä¸Šï¼Œä¹Ÿå¯ä»¥å•ç‹¬çš„éƒ¨ç½²åœ¨ä¸€å°æœºå™¨ä¸Šï¼›ä¸€èˆ¬å»ºè®®éƒ¨ç½²åœ¨ä¸€å°å•ç‹¬çš„æœºå™¨ä¸Šï¼Œå› ä¸ºManageræ˜¯ç”¨äºæ¢æµ‹æ•°æ®åº“å®ä¾‹æ˜¯å¦åœ¨çº¿å’Œè¿›è¡Œæ•…éšœè½¬ç§»çš„æ ¸å¿ƒç¨‹åºï¼Œå¦‚æœéƒ¨ç½²åœ¨Masterä¸Šï¼Œä¸€æ—¦Masteræœºå™¨æŠ¥é”€ï¼Œæ•´ä¸ªæ•°æ®åº“é›†ç¾¤çš„ä¸å†å¯ä»¥ï¼›å¦å¤–ï¼Œå¦‚æœéƒ¨ç½²åœ¨Slaveæœºå™¨ä¸Šï¼Œé‚£ä¹ˆè¿™å°æœºå™¨å°±ä¸èƒ½å¤Ÿè¢«æå‡ä¸ºMasterã€‚&lt;br /&gt;
Nodeéœ€è¦éƒ¨ç½²åœ¨æ‰€æœ‰MySQLæ•°æ®åº“å®ä¾‹çš„æœºå™¨ä¸Šã€‚&lt;br /&gt;
&lt;/p&gt;&lt;figure&gt;&lt;img src=&quot;https://blog.freelytomorrow.com/articles_img/mysql-mha/structure.png&quot; alt=&quot;&quot; /&gt;&lt;figcaption&gt;MHAé›†ç¾¤&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;MHAæ•…éšœè½¬ç§»æµç¨‹&lt;a href=&quot;#mhaæ•…éšœè½¬ç§»æµç¨‹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;Managerä¼šæ¯éš”ä¸€æ®µæ—¶é—´(å¯ä»¥ç”±ç”¨æˆ·åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®š)å¯¹ä¸»åº“è¿›è¡Œä¸€æ¬¡æ¢æµ‹ï¼›&lt;/li&gt;
&lt;li&gt;å¦‚æœManageræ£€æµ‹åˆ°Masteræ•…éšœï¼Œä¼šæ‰§è¡Œï¼š&lt;br /&gt;
&lt;ol&gt;
&lt;li&gt;å°è¯•ä»å…¶ä»–Nodeå‘èµ·sshé“¾æ¥ï¼›&lt;/li&gt;
&lt;li&gt;å°è¯•ä»å…¶ä»–Nodeå‘èµ·mysqlé“¾æ¥ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;å¦‚æœä¸¤ç§é“¾æ¥çš†å¤±è´¥ï¼Œåˆ™å¼€å§‹è¿›è¡Œæ•…éšœè½¬ç§»ï¼š&lt;br /&gt;
&lt;ol&gt;
&lt;li&gt;é€šè¿‡å¯¹æ¯”relay logï¼Œæ‰¾åˆ°æ‹¥æœ‰æœ€æ–°æ•°æ®çš„ä»åº“ï¼›&lt;/li&gt;
&lt;li&gt;å°†æœ€æ–°çš„ä»åº“ä¸­çš„æ–°æ•°æ®åŒæ­¥åˆ°å…¶ä»–ä»åº“ä¸­ï¼›&lt;/li&gt;
&lt;li&gt;æå‡ä»åº“ä¸ºæ–°çš„ä¸»åº“(å¦‚æœæ²¡æœ‰é¢„å…ˆæŒ‡å®šï¼Œåˆ™æå‡æ‹¥æœ‰æœ€æ–°æ•°æ®çš„ä»åº“ä¸ºæ–°ä¸»åº“)ï¼›&lt;/li&gt;
&lt;li&gt;é€šè¿‡åŸä¸»åº“çš„binlogè¡¥å…¨æ–°ä¸»åº“çš„æ•°æ®ï¼›&lt;/li&gt;
&lt;li&gt;å…¶ä»–ä»åº“CHANGE MASTER TOæ–°çš„ä¸»åº“ï¼Œå¹¶è¿›è¡Œæ•°æ®åŒæ­¥ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;éƒ¨ç½²MHA&lt;a href=&quot;#éƒ¨ç½²mha&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;ç¯å¢ƒå‡†å¤‡&lt;a href=&quot;#ç¯å¢ƒå‡†å¤‡&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;ä½¿ç”¨ä¸‰å°æœºå™¨ï¼Œå…¶ä¸­MySQLä¸€ä¸»ä¸€ä»ï¼ŒManagerå•ç‹¬å¸ƒç½®åœ¨ä¸€å°ç®¡ç†æœºå™¨ä¸Šã€‚&lt;/p&gt;




































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;èº«ä»½&lt;/th&gt;&lt;th&gt;ä¸»æœºå&lt;/th&gt;&lt;th&gt;å…¬ç½‘ip&lt;/th&gt;&lt;th&gt;å†…ç½‘ip&lt;/th&gt;&lt;th&gt;å¼€å¯binlog&lt;/th&gt;&lt;th&gt;å¼€å¯GTID&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;Master&lt;/td&gt;&lt;td&gt;db-51&lt;/td&gt;&lt;td&gt;10.0.0.51&lt;/td&gt;&lt;td&gt;172.16.1.51&lt;/td&gt;&lt;td&gt;yes&lt;/td&gt;&lt;td&gt;yes&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Slave&lt;/td&gt;&lt;td&gt;db-52&lt;/td&gt;&lt;td&gt;10.0.0.52&lt;/td&gt;&lt;td&gt;172.16.1.52&lt;/td&gt;&lt;td&gt;yes&lt;/td&gt;&lt;td&gt;yes&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Manager&lt;/td&gt;&lt;td&gt;master-61&lt;/td&gt;&lt;td&gt;10.0.0.61&lt;/td&gt;&lt;td&gt;172.16.1.61&lt;/td&gt;&lt;td&gt;-&lt;/td&gt;&lt;td&gt;-&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;é…ç½®æ–‡ä»¶&lt;a href=&quot;#é…ç½®æ–‡ä»¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[mysqld]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;port=3306&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;user=mysql&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;basedir=/opt/mysql&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;datadir=/mysql_data/mysql_3306&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;socket=/tmp/mysql.sock&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;server_id=51&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;log_bin=/mysql_data/binlog/mysql-bin&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;autocommit=0&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;binlog_format=row&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;gtid-mode=on&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;enforce-gtid-consistency=true&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;log-slave-updates=1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[mysql]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;socket=/tmp/mysql.sock&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;&lt;em&gt;é™¤äº†server_idå…¶ä»–éƒ½ä¸€æ ·&lt;/em&gt;&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;é…ç½®ä¸»ä»å¤åˆ¶&lt;a href=&quot;#é…ç½®ä¸»ä»å¤åˆ¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;åˆ›å»ºå¤åˆ¶è´¦å·&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;--åœ¨masteræœºå™¨ä¸Šæ‰§è¡Œ--&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;grant&lt;/span&gt;&lt;span&gt; replication slave &lt;/span&gt;&lt;span&gt;on&lt;/span&gt;&lt;span&gt;*.* &lt;/span&gt;&lt;span&gt;to&lt;/span&gt;&lt;span&gt; repl@&lt;/span&gt;&lt;span&gt;&apos;172.16.1.%&apos;&lt;/span&gt;&lt;span&gt; identified &lt;/span&gt;&lt;span&gt;by&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;123456&apos;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;ä»åº“è¿›è¡Œè¿æ¥&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;change &lt;/span&gt;&lt;span&gt;master&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;to&lt;/span&gt;&lt;span&gt;&lt;span&gt; master_host&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&apos;172.16.1.51&apos;&lt;/span&gt;&lt;span&gt;&lt;span&gt;, master_user&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&apos;repl&apos;&lt;/span&gt;&lt;span&gt;&lt;span&gt;, master_password&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&apos;123456&apos;&lt;/span&gt;&lt;span&gt;&lt;span&gt; , MASTER_AUTO_POSITION&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;start&lt;/span&gt;&lt;span&gt; slave;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;ä½¿ä¸‰ä¸ªèŠ‚ç‚¹ä¹‹é—´äº’ç›¸å…å¯†ç™»å½•ï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ssh-keygen&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ssh-copy-id&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;root@172.16.1.51&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ssh-keygen&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ssh-copy-id&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;root@172.16.1.52&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ssh-keygen&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ssh-copy-id&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;root@172.16.1.61&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;å®‰è£…MHA&lt;a href=&quot;#å®‰è£…mha&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;ä¸ºæ‰€æœ‰èŠ‚ç‚¹å®‰è£…ç¯å¢ƒä¾èµ–&lt;a href=&quot;#ä¸ºæ‰€æœ‰èŠ‚ç‚¹å®‰è£…ç¯å¢ƒä¾èµ–&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;yum install -y perl-DBD-MySQL perl-Config-Tiny perl-Log-Dispatch perl-Parallel-ForkManager perl-ExtUtils-CBuilder perl-ExtUtils-MakeMaker perl-CPAN perl-Time-HiRes&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;ä¸‰ä¸ªèŠ‚ç‚¹éƒ½å®‰è£…MHA Node&lt;a href=&quot;#ä¸‰ä¸ªèŠ‚ç‚¹éƒ½å®‰è£…mha-node&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/yoshinorim/mha4mysql-node&quot;&gt;MHA Node Githubä»“åº“&lt;/a&gt;&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# è·å¾—è½¯ä»¶æº&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;wget&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;https://github.com/yoshinorim/mha4mysql-node/releases/download/v0.58/mha4mysql-node-0.58-0.el7.centos.noarch.rpm&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# å®‰è£…&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;yum&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;localinstall&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-y&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;mha4mysql-node-0.58-0.el7.centos.noarch.rpm&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;å®‰è£…MHA Manager&lt;a href=&quot;#å®‰è£…mha-manager&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/yoshinorim/mha4mysql-manager&quot;&gt;MHA Manager Githubä»“åº“&lt;/a&gt;&lt;br /&gt;
è¿™é‡Œç”±äºåªç”¨äº†ä¸¤å°æœºå™¨ï¼Œå› æ­¤Managerå¿…é¡»è£…åœ¨å¦å¤–å•ç‹¬çš„ä¸€å°ä¸»æœºä¸Šï¼Œå¦åˆ™å¯¹äºä¸€ä¸»ä¸€ä»é…ç½®æ¥è¯´ï¼Œè£…åœ¨ä¸»åº“ä¸Šï¼ŒæŒ‚æ‰åä¼šå¯¼è‡´MHAå¤±æ•ˆï¼›è£…åœ¨ä»åº“ä¸Šï¼Œä¼šå¯¼è‡´æ— æ³•æå‡ä¸ºä¸»åº“ï¼›&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# è·å–è½¯ä»¶æº&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;wget&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;https://github.com/yoshinorim/mha4mysql-manager/releases/download/v0.58/mha4mysql-manager-0.58-0.el7.centos.noarch.rpm&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# å®‰è£…&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;yum&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;localinstall&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-y&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;mha4mysql-manager-0.58-0.el7.centos.noarch.rpm&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;é…ç½®MHA&lt;a href=&quot;#é…ç½®mha&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;ä¸ºæ‰€æœ‰èŠ‚ç‚¹åˆ›å»ºMHAç”¨æˆ·&lt;a href=&quot;#ä¸ºæ‰€æœ‰èŠ‚ç‚¹åˆ›å»ºmhaç”¨æˆ·&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;å› ä¸ºç›®å‰å·²ç»é…ç½®å¥½äº†ä¸»ä»å¤åˆ¶ï¼Œæ‰€ä»¥åœ¨ä¸»åº“ä¸Šåˆ›å»ºå°±å¯ä»¥äº†ï¼Œä¼šè‡ªåŠ¨åŒæ­¥åˆ°ä»åº“ã€‚&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;grant&lt;/span&gt;&lt;span&gt; all privileges &lt;/span&gt;&lt;span&gt;on&lt;/span&gt;&lt;span&gt; *.* &lt;/span&gt;&lt;span&gt;to&lt;/span&gt;&lt;span&gt; mha@&lt;/span&gt;&lt;span&gt;&apos;%&apos;&lt;/span&gt;&lt;span&gt; identified &lt;/span&gt;&lt;span&gt;by&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;123456&apos;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;åˆ›å»ºMHA Manageré…ç½®æ–‡ä»¶&lt;a href=&quot;#åˆ›å»ºmha-manageré…ç½®æ–‡ä»¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;åˆ›å»ºç›®å½•&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;mkdir&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-p&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/etc/mha&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;mkdir&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-p&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/var/log/mha/app1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;é…ç½®æ–‡ä»¶&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[server default]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;manager_log=/var/log/mha/app1/manager.log&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;manager_workdir=/var/log/mha/app1.log&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;master_binlog_dir=/mysql_binlog/&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# è¿™é‡Œæ¶‰åŠåˆ°vipåç§»è„šæœ¬ï¼Œåœ¨åé¢&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# master_ip_failover_script=/usr/local/bin/master_ip_failover&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;user=mha&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;password=123456&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ping_interval=5&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;repl_user=repl&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;repl_password=123456&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ssh_user=root&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[server1]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;hostname=172.16.1.51&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;port=3306&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[server2]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;hostname=172.16.1.52&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;port=3306&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;æ£€æŸ¥ç¯å¢ƒé…ç½®&lt;a href=&quot;#æ£€æŸ¥ç¯å¢ƒé…ç½®&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# æ£€æŸ¥sshå…å¯†ç™»å½•&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;masterha_check_ssh&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--conf=/etc/mha/app1.cnf&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# æ£€æŸ¥ä¸»ä»å¤åˆ¶&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;masterha_check_repl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--conf=/etc/mha/app1.cnf&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;å¼€å‘Virtual IPæ¼‚ç§»è„šæœ¬&lt;a href=&quot;#å¼€å‘virtual-ipæ¼‚ç§»è„šæœ¬&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;è„šæœ¬è·¯å¾„ï¼š&lt;code&gt;/usr/local/bin/master_ip_failover&lt;/code&gt;&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;#!/usr/bin/env perl&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;use&lt;/span&gt;&lt;span&gt; strict;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;use&lt;/span&gt;&lt;span&gt; warnings &lt;/span&gt;&lt;span&gt;FATAL&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&apos;all&apos;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;use&lt;/span&gt;&lt;span&gt; Getopt::Long;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;my&lt;/span&gt;&lt;span&gt; (&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;$command&lt;/span&gt;&lt;span&gt;,          &lt;/span&gt;&lt;span&gt;$ssh_user&lt;/span&gt;&lt;span&gt;,        &lt;/span&gt;&lt;span&gt;$orig_master_host&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;$orig_master_ip&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;$orig_master_port&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;$new_master_host&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;$new_master_ip&lt;/span&gt;&lt;span&gt;,    &lt;/span&gt;&lt;span&gt;$new_master_port&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;my&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;$vip&lt;/span&gt;&lt;span&gt; = &lt;/span&gt;&lt;span&gt;&apos;172.16.1.55/24&apos;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;my&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;$key&lt;/span&gt;&lt;span&gt; = &lt;/span&gt;&lt;span&gt;&apos;1&apos;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;my&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;$ssh_start_vip&lt;/span&gt;&lt;span&gt; = &lt;/span&gt;&lt;span&gt;&lt;span&gt;&quot;/sbin/ifconfig eth1:&lt;/span&gt;&lt;span&gt;$&lt;/span&gt;&lt;/span&gt;&lt;span&gt;key&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;$&lt;/span&gt;&lt;/span&gt;&lt;span&gt;vip&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;my&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;$ssh_stop_vip&lt;/span&gt;&lt;span&gt; = &lt;/span&gt;&lt;span&gt;&lt;span&gt;&quot;/sbin/ifconfig eth1:&lt;/span&gt;&lt;span&gt;$&lt;/span&gt;&lt;/span&gt;&lt;span&gt;key&lt;/span&gt;&lt;span&gt; down&quot;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;my&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;$ssh_Bcast_arp&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&quot;/sbin/arping -I eth1 -c 3 -A 10.0.0.55&quot;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;GetOptions(&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;&apos;command=s&apos;&lt;/span&gt;&lt;span&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;=&amp;gt;&lt;/span&gt;&lt;span&gt; \&lt;/span&gt;&lt;/span&gt;&lt;span&gt;$command&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;&apos;ssh_user=s&apos;&lt;/span&gt;&lt;span&gt;&lt;span&gt;         &lt;/span&gt;&lt;span&gt;=&amp;gt;&lt;/span&gt;&lt;span&gt; \&lt;/span&gt;&lt;/span&gt;&lt;span&gt;$ssh_user&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;&apos;orig_master_host=s&apos;&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&amp;gt;&lt;/span&gt;&lt;span&gt; \&lt;/span&gt;&lt;/span&gt;&lt;span&gt;$orig_master_host&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;&apos;orig_master_ip=s&apos;&lt;/span&gt;&lt;span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;=&amp;gt;&lt;/span&gt;&lt;span&gt; \&lt;/span&gt;&lt;/span&gt;&lt;span&gt;$orig_master_ip&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;&apos;orig_master_port=i&apos;&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&amp;gt;&lt;/span&gt;&lt;span&gt; \&lt;/span&gt;&lt;/span&gt;&lt;span&gt;$orig_master_port&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;&apos;new_master_host=s&apos;&lt;/span&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;=&amp;gt;&lt;/span&gt;&lt;span&gt; \&lt;/span&gt;&lt;/span&gt;&lt;span&gt;$new_master_host&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;&apos;new_master_ip=s&apos;&lt;/span&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;=&amp;gt;&lt;/span&gt;&lt;span&gt; \&lt;/span&gt;&lt;/span&gt;&lt;span&gt;$new_master_ip&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;27&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;&apos;new_master_port=i&apos;&lt;/span&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;=&amp;gt;&lt;/span&gt;&lt;span&gt; \&lt;/span&gt;&lt;/span&gt;&lt;span&gt;$new_master_port&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;28&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;29&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;30&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;exit&lt;/span&gt;&lt;span&gt; &amp;amp;main();&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;31&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;32&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;sub&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;main&lt;/span&gt;&lt;span&gt; {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;33&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;34&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;print&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;\n\n&lt;/span&gt;&lt;span&gt;&lt;span&gt;IN SCRIPT TEST====&lt;/span&gt;&lt;span&gt;$&lt;/span&gt;&lt;/span&gt;&lt;span&gt;ssh_stop_vip&lt;/span&gt;&lt;span&gt;&lt;span&gt;==&lt;/span&gt;&lt;span&gt;$&lt;/span&gt;&lt;/span&gt;&lt;span&gt;ssh_start_vip&lt;/span&gt;&lt;span&gt;===&lt;/span&gt;&lt;span&gt;\n\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;35&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;36&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; ( &lt;/span&gt;&lt;span&gt;$command&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;eq&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;stop&quot;&lt;/span&gt;&lt;span&gt; || &lt;/span&gt;&lt;span&gt;$command&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;eq&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;stopssh&quot;&lt;/span&gt;&lt;span&gt; ) {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;37&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;38&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;my&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;$exit_code&lt;/span&gt;&lt;span&gt; = 1;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;39&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;eval&lt;/span&gt;&lt;span&gt; {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;40&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;print&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&lt;span&gt;&quot;Disabling the VIP on old master: &lt;/span&gt;&lt;span&gt;$&lt;/span&gt;&lt;/span&gt;&lt;span&gt;orig_master_host&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;41&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&amp;amp;stop_vip();&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;42&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;$exit_code&lt;/span&gt;&lt;span&gt; = 0;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;43&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;};&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;44&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; (&lt;/span&gt;&lt;span&gt;$@&lt;/span&gt;&lt;span&gt;) {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;45&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;warn&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&lt;span&gt;&quot;Got Error: &lt;/span&gt;&lt;span&gt;$&lt;/span&gt;&lt;/span&gt;&lt;span&gt;@&lt;/span&gt;&lt;span&gt;\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;46&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;exit&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;$exit_code&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;47&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;48&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;exit&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;$exit_code&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;49&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;50&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;elsif&lt;/span&gt;&lt;span&gt; ( &lt;/span&gt;&lt;span&gt;$command&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;eq&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;start&quot;&lt;/span&gt;&lt;span&gt; ) {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;51&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;52&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;my&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;$exit_code&lt;/span&gt;&lt;span&gt; = 10;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;53&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;eval&lt;/span&gt;&lt;span&gt; {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;54&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;print&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&lt;span&gt;&quot;Enabling the VIP - &lt;/span&gt;&lt;span&gt;$&lt;/span&gt;&lt;/span&gt;&lt;span&gt;vip&lt;/span&gt;&lt;span&gt;&lt;span&gt; on the new master - &lt;/span&gt;&lt;span&gt;$&lt;/span&gt;&lt;/span&gt;&lt;span&gt;new_master_host&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;55&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&amp;amp;start_vip();&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;56&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;$exit_code&lt;/span&gt;&lt;span&gt; = 0;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;57&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;};&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;58&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; (&lt;/span&gt;&lt;span&gt;$@&lt;/span&gt;&lt;span&gt;) {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;59&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;warn&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;$@&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;60&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;exit&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;$exit_code&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;61&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;62&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;exit&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;$exit_code&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;63&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;64&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;elsif&lt;/span&gt;&lt;span&gt; ( &lt;/span&gt;&lt;span&gt;$command&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;eq&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;status&quot;&lt;/span&gt;&lt;span&gt; ) {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;65&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;print&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;Checking the Status of the script.. OK &lt;/span&gt;&lt;span&gt;\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;66&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;exit&lt;/span&gt;&lt;span&gt; 0;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;67&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;68&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt; {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;69&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&amp;amp;usage();&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;70&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;exit&lt;/span&gt;&lt;span&gt; 1;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;71&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;72&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;73&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;74&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;sub&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;start_vip&lt;/span&gt;&lt;span&gt;() {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;75&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;`ssh &lt;/span&gt;&lt;span&gt;$ssh_user&lt;/span&gt;&lt;span&gt;\@&lt;/span&gt;&lt;span&gt;$new_master_host&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;\&quot;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;$ssh_start_vip&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;\&quot;&lt;/span&gt;&lt;span&gt;`&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;76&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;77&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;sub&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;stop_vip&lt;/span&gt;&lt;span&gt;() {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;78&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;     &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; 0  &lt;/span&gt;&lt;span&gt;unless&lt;/span&gt;&lt;span&gt;  (&lt;/span&gt;&lt;span&gt;$ssh_user&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;79&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;`ssh &lt;/span&gt;&lt;span&gt;$ssh_user&lt;/span&gt;&lt;span&gt;\@&lt;/span&gt;&lt;span&gt;$orig_master_host&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;\&quot;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;$ssh_stop_vip&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;\&quot;&lt;/span&gt;&lt;span&gt;`&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;80&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;81&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;82&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;sub&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;usage&lt;/span&gt;&lt;span&gt; {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;83&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;print&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;84&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;&quot;Usage: master_ip_failover --command=start|stop|stopssh|status --orig_master_host=host --orig_master_ip=ip --orig_master_port=port --new_master_host=host --new_master_ip=ip --new_master_port=port&lt;/span&gt;&lt;span&gt;\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;85&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;å¢åŠ å¯æ‰§è¡Œæƒé™ï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;chmod&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;+x&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/usr/local/bin/master_ip_failover&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;å°†è„šæœ¬è·¯å¾„åŠ å…¥åˆ°é…ç½®æ–‡ä»¶ä¸­ï¼š&lt;br /&gt;
&lt;code&gt;master_ip_failover_script=/usr/local/bin/master_ip_failover&lt;/code&gt;&lt;/p&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;é…ç½®è™šæ‹ŸIP&lt;a href=&quot;#é…ç½®è™šæ‹Ÿip&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;åœ¨db-51æœºå™¨ä¸Šåˆ›å»ºè™šæ‹ŸIP&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# è¿™é‡Œçš„è™šæ‹ŸIPå¿…é¡»æ˜¯å’Œperlè„šæœ¬ä¸Šçš„ä¸€è‡´ï¼Œå¹¶ä¸”è™šæ‹Ÿipå¿…é¡»æ˜¯ç½‘æ®µå†…æœªè¢«å ç”¨çš„IP&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ifconfig&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;eth1:1&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;172.16.1.55/24&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;é‡å¯MHA&lt;a href=&quot;#é‡å¯mha&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# åœæ­¢MHA&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;masterha_stop&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--conf=/etc/mha/app1.cnf&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# å¯åŠ¨MHA(åå°è¿è¡Œ)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;nohup&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;masterha_manager&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--conf=/etc/mha/app1.cnf&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;--remove_dead_master_conf&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;--ignore_last_failover&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/var/log/mha/app1/manager.log&lt;/span&gt;&lt;span&gt; 2&amp;gt;&amp;amp;1 &amp;amp;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# æ£€æŸ¥MHAè¿è¡ŒçŠ¶æ€&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;masterha_check_status&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--conf=/etc/mha/app1.cnf&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;app1&lt;/span&gt;&lt;span&gt; (pid:2220) is running(&lt;/span&gt;&lt;span&gt;0:PING_OK&lt;/span&gt;&lt;span&gt;), master:172.16.1.51&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;æ­¤æ—¶MHAå°±å·²ç»éƒ¨ç½²å®Œæ¯•äº†ã€‚&lt;/p&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;æ¨¡æ‹Ÿæ•…éšœ&lt;a href=&quot;#æ¨¡æ‹Ÿæ•…éšœ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;å®æ—¶æŸ¥çœ‹manageræ—¥å¿—ï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;tail&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-f&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/var/log/mha/app1/manager.log&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;åœæ­¢å½“å‰mysqlä¸»åº“&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;systemctl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;stop&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;mysqld&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;æ­¤æ—¶æŸ¥çœ‹æ—¥å¿—ï¼Œå¯ä»¥å‘ç°managerå°è¯•å¤šæ¬¡è¿æ¥mysqlä¸»åº“å¤±è´¥ï¼Œmanagerè¿›è¡Œäº†ä¸»åº“èº«ä»½è½¬ç§»ã€‚&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:07 2023 - [warning] Got error on MySQL select ping: 2006 (MySQL server has gone away)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:07 2023 - [info] Executing SSH check script: exit 0&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:07 2023 - [info] HealthCheck: SSH to 172.16.1.51 is reachable.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:12 2023 - [warning] Got error on MySQL connect: 2003 (Can&apos;t connect to MySQL server on &apos;172.16.1.51&apos; (111))&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:12 2023 - [warning] Connection failed 2 time(s)..&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:17 2023 - [warning] Got error on MySQL connect: 2003 (Can&apos;t connect to MySQL server on &apos;172.16.1.51&apos; (111))&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:17 2023 - [warning] Connection failed 3 time(s)..&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:22 2023 - [warning] Got error on MySQL connect: 2003 (Can&apos;t connect to MySQL server on &apos;172.16.1.51&apos; (111))&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:22 2023 - [warning] Connection failed 4 time(s)..&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:22 2023 - [warning] Master is not reachable from health checker!&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:22 2023 - [warning] Master 172.16.1.51(172.16.1.51:3306) is not reachable!&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:22 2023 - [warning] SSH is reachable.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:22 2023 - [info] Connecting to a master server failed. Reading configuration file /etc/masterha_default.cnf and /etc/mha/app1.cnf again, and trying to connect to all servers to check server status..&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:22 2023 - [warning] Global configuration file /etc/masterha_default.cnf not found. Skipping.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:22 2023 - [info] Reading application default configuration from /etc/mha/app1.cnf..&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:22 2023 - [info] Reading server configuration from /etc/mha/app1.cnf..&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:23 2023 - [info] GTID failover mode = 1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:23 2023 - [info] Dead Servers:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:23 2023 - [info]   172.16.1.51(172.16.1.51:3306)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:23 2023 - [info] Alive Servers:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:23 2023 - [info]   172.16.1.52(172.16.1.52:3306)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:23 2023 - [info] Alive Slaves:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:23 2023 - [info]   172.16.1.52(172.16.1.52:3306)  Version=5.7.28-log (oldest major version between slaves) log-bin:enabled&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:23 2023 - [info]     GTID ON&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:23 2023 - [info]     Replicating from 172.16.1.51(172.16.1.51:3306)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:23 2023 - [info] Checking slave configurations..&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;27&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:23 2023 - [info]  read_only=1 is not set on slave 172.16.1.52(172.16.1.52:3306).&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;28&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:23 2023 - [info] Checking replication filtering settings..&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;29&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:23 2023 - [info]  Replication filtering check ok.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;30&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:23 2023 - [info] Master is down!&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;31&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:23 2023 - [info] Terminating monitoring script.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;32&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:23 2023 - [info] Got exit code 20 (Master dead).&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;33&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:23 2023 - [info] MHA::MasterFailover version 0.58.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;34&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:23 2023 - [info] Starting master failover.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;35&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:23 2023 - [info]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;36&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:23 2023 - [info] * Phase 1: Configuration Check Phase..&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;37&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:23 2023 - [info]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;38&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:24 2023 - [info] GTID failover mode = 1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;39&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:24 2023 - [info] Dead Servers:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;40&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:24 2023 - [info]   172.16.1.51(172.16.1.51:3306)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;41&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:24 2023 - [info] Checking master reachability via MySQL(double check)...&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;42&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:24 2023 - [info]  ok.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;43&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:24 2023 - [info] Alive Servers:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;44&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:24 2023 - [info]   172.16.1.52(172.16.1.52:3306)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;45&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:24 2023 - [info] Alive Slaves:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;46&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:24 2023 - [info]   172.16.1.52(172.16.1.52:3306)  Version=5.7.28-log (oldest major version between slaves) log-bin:enabled&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;47&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:24 2023 - [info]     GTID ON&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;48&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:24 2023 - [info]     Replicating from 172.16.1.51(172.16.1.51:3306)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;49&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:24 2023 - [info] Starting GTID based failover.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;50&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:24 2023 - [info]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;51&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:24 2023 - [info] ** Phase 1: Configuration Check Phase completed.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;52&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:24 2023 - [info]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;53&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:24 2023 - [info] * Phase 2: Dead Master Shutdown Phase..&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;54&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:24 2023 - [info]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;55&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:24 2023 - [info] Forcing shutdown so that applications never connect to the current master..&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;56&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:24 2023 - [warning] master_ip_failover_script is not set. Skipping invalidating dead master IP address.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;57&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:24 2023 - [warning] shutdown_script is not set. Skipping explicit shutting down of the dead master.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;58&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:25 2023 - [info] * Phase 2: Dead Master Shutdown Phase completed.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;59&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:25 2023 - [info]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;60&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:25 2023 - [info] * Phase 3: Master Recovery Phase..&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;61&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:25 2023 - [info]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;62&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:25 2023 - [info] * Phase 3.1: Getting Latest Slaves Phase..&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;63&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:25 2023 - [info]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;64&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:25 2023 - [info] The latest binary log file/position on all slaves is mysql-bin.000002:725&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;65&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:25 2023 - [info] Retrieved Gtid Set: 06fdc979-3cb2-11ee-8345-000c29948844:1-2&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;66&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:25 2023 - [info] Latest slaves (Slaves that received relay log files to the latest):&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;67&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:25 2023 - [info]   172.16.1.52(172.16.1.52:3306)  Version=5.7.28-log (oldest major version between slaves) log-bin:enabled&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;68&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:25 2023 - [info]     GTID ON&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;69&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:25 2023 - [info]     Replicating from 172.16.1.51(172.16.1.51:3306)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;70&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:25 2023 - [info] The oldest binary log file/position on all slaves is mysql-bin.000002:725&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;71&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:25 2023 - [info] Retrieved Gtid Set: 06fdc979-3cb2-11ee-8345-000c29948844:1-2&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;72&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:25 2023 - [info] Oldest slaves:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;73&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:25 2023 - [info]   172.16.1.52(172.16.1.52:3306)  Version=5.7.28-log (oldest major version between slaves) log-bin:enabled&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;74&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:25 2023 - [info]     GTID ON&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;75&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:25 2023 - [info]     Replicating from 172.16.1.51(172.16.1.51:3306)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;76&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:25 2023 - [info]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;77&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:25 2023 - [info] * Phase 3.3: Determining New Master Phase..&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;78&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:25 2023 - [info]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;79&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:25 2023 - [info] Searching new master from slaves..&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;80&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:25 2023 - [info]  Candidate masters from the configuration file:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;81&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:25 2023 - [info]  Non-candidate masters:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;82&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:25 2023 - [info] New master is 172.16.1.52(172.16.1.52:3306)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;83&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:25 2023 - [info] Starting master failover..&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;84&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:25 2023 - [info]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;85&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;From:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;86&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;172.16.1.51(172.16.1.51:3306) (current master)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;87&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;+--172.16.1.52(172.16.1.52:3306)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;88&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;89&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;To:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;90&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;172.16.1.52(172.16.1.52:3306) (new master)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;91&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:25 2023 - [info]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;92&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:25 2023 - [info] * Phase 3.3: New Master Recovery Phase..&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;93&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:25 2023 - [info]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;94&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:25 2023 - [info]  Waiting all logs to be applied..&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;95&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:25 2023 - [info]   done.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;96&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:25 2023 - [info] Getting new master&apos;s binlog name and position..&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;97&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:25 2023 - [info]  mysql-bin.000001:725&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;98&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:25 2023 - [info]  All other slaves should start replication from here. Statement should be: CHANGE MASTER TO MASTER_HOST=&apos;172.16.1.52&apos;, MASTER_PORT=3306, MASTER_AUTO_POSITION=1, MASTER_USER=&apos;repl&apos;, MASTER_PASSWORD=&apos;xxx&apos;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;99&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:25 2023 - [info] Master Recovery succeeded. File:Pos:Exec_Gtid_Set: mysql-bin.000001, 725, 06fdc979-3cb2-11ee-8345-000c29948844:1-2&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;100&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:25 2023 - [warning] master_ip_failover_script is not set. Skipping taking over new master IP address.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;101&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:25 2023 - [info] ** Finished master recovery successfully.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;102&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:25 2023 - [info] * Phase 3: Master Recovery Phase completed.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;103&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:25 2023 - [info]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;104&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:25 2023 - [info] * Phase 4: Slaves Recovery Phase..&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;105&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:25 2023 - [info]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;106&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:25 2023 - [info]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;107&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:25 2023 - [info] * Phase 4.1: Starting Slaves in parallel..&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;108&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:25 2023 - [info]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;109&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:25 2023 - [info] All new slave servers recovered successfully.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;110&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:25 2023 - [info]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;111&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:25 2023 - [info] * Phase 5: New master cleanup phase..&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;112&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:25 2023 - [info]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;113&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:25 2023 - [info] Resetting slave info on the new master..&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;114&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:25 2023 - [info]  172.16.1.52: Resetting slave info succeeded.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;115&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:25 2023 - [info] Master failover to 172.16.1.52(172.16.1.52:3306) completed successfully.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;116&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:25 2023 - [info] Deleted server1 entry from /etc/mha/app1.cnf .&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;117&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Tue Aug 22 15:56:25 2023 - [info]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;ç»“æœæŠ¥å‘Šï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;----- Failover Report -----&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;app1: MySQL Master failover 172.16.1.51(172.16.1.51:3306) to 172.16.1.52(172.16.1.52:3306) succeeded&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Master 172.16.1.51(172.16.1.51:3306) is down!&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Check MHA Manager logs at master-61:/var/log/mha/app1/manager.log for details.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Started automated(non-interactive) failover.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Selected 172.16.1.52(172.16.1.52:3306) as a new master.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;172.16.1.52(172.16.1.52:3306): OK: Applying all logs succeeded.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;172.16.1.52(172.16.1.52:3306): Resetting slave info succeeded.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Master failover to 172.16.1.52(172.16.1.52:3306) completed successfully.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;åœ¨å®Œæˆæ•…éšœè½¬ç§»åï¼Œå¯ä»¥çœ‹åˆ°ç°åœ¨çš„masteræ˜¯db-52ï¼›åŒæ—¶ï¼Œmanagerè¿˜ä¿®æ”¹äº†è‡ªå·±çš„é…ç½®æ–‡ä»¶ï¼ŒæŒ‚æ‰çš„åŸmasterè¢«åˆ é™¤&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[server default]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;manager_log=/var/log/mha/app1/manager.log&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;manager_workdir=/var/log/mha/app1.log&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;master_binlog_dir=/mysql_binlog/&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;password=123456&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ping_interval=5&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;repl_password=123456&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;repl_user=repl&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ssh_user=root&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;user=mha&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[server2]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;hostname=172.16.1.52&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;port=3306&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;é™¤æ­¤ä¹‹å¤–ï¼Œé€šè¿‡&lt;code&gt;masterha_check_status&lt;/code&gt;å‘½ä»¤è¿˜å¯ä»¥çŸ¥é“ï¼Œä¸€æ—¦mhaå®Œæˆä¸»ä»åˆ‡æ¢ï¼Œmanagerç®¡ç†è¿›ç¨‹å°±ä¼šè‡ªåŠ¨ç»ˆæ­¢ã€‚&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[root@master-61 ~]#masterha_check_status --conf=/etc/mha/app1.cnf&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;app1 is stopped(2:NOT_RUNNING).&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;MHAæ•…éšœä¿®å¤&lt;a href=&quot;#mhaæ•…éšœä¿®å¤&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;æ–¹æ³•æ¯”è¾ƒç®€å•&lt;/p&gt;&lt;ol&gt;
&lt;li&gt;é‡å¯æŒ‚æ‰çš„mysqlæ•°æ®åº“&lt;/li&gt;
&lt;li&gt;é€šè¿‡&lt;code&gt;CHANGE MASTER TO&lt;/code&gt;ä½¿å…¶æˆä¸ºæ–°çš„ä¸»åº“çš„ä»åº“ã€‚&lt;/li&gt;
&lt;li&gt;ä¿®å¤MHA Managerçš„é…ç½®æ–‡ä»¶&lt;/li&gt;
&lt;/ol&gt;&lt;section&gt;&lt;h3&gt;db-51é‡æ–°åŠ å…¥ä¸»ä»å¤åˆ¶&lt;a href=&quot;#db-51é‡æ–°åŠ å…¥ä¸»ä»å¤åˆ¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;systemctl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;start&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;mysqld&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;change&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;master&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;to&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;master_host=&apos;172.16.1.52&apos;,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;master_user=&apos;repl&apos;,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;master_password=&apos;123456&apos;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;MASTER_AUTO_POSITION=&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;start&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;slave&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;å¯ä»¥åœ¨db-52ä¸Šè¿›è¡Œç¡®è®¤ï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;mysql&amp;gt; show slave hosts;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;+-----------+------+------+-----------+--------------------------------------+&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;| Server_id | Host | Port | Master_id | Slave_UUID                           |&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;+-----------+------+------+-----------+--------------------------------------+&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;|        51 |      | 3306 |        52 | 06fdc979-3cb2-11ee-8345-000c29948844 |&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;+-----------+------+------+-----------+--------------------------------------+&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;1 row in set (0.00 sec)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;ä¿®å¤MHA Manageré…ç½®æ–‡ä»¶&lt;a href=&quot;#ä¿®å¤mha-manageré…ç½®æ–‡ä»¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[server default]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;manager_log=/var/log/mha/app1/manager.log&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;manager_workdir=/var/log/mha/app1.log&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;master_binlog_dir=/mysql_binlog/&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;password=123456&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ping_interval=5&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;repl_password=123456&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;repl_user=repl&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ssh_user=root&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;user=mha&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[server1]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;hostname=172.16.1.51&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;port=3306&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[server2]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;hostname=172.16.1.52&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;port=3306&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;å†æ¬¡ç¡®è®¤sshé“¾æ¥å’Œreplä¸»ä»å¤åˆ¶çŠ¶æ€åï¼Œé‡æ–°å¯åŠ¨MHAå°±å¯ä»¥äº†ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;</content:encoded></item><item><title>LNMPå•æœºæ‹†åˆ†ä¸ºé›†ç¾¤å¹¶å¯¹wordpresså®ç°è´Ÿè½½å‡è¡¡</title><link>https://white-festa.net/posts/load-balancing-wordpress/</link><guid isPermaLink="true">https://white-festa.net/posts/load-balancing-wordpress/</guid><description>ä»0åˆ°1å®ç°Tomcatçš„è´Ÿè½½å‡è¡¡ä¸NginxåŠ¨é™æ€èµ„æºåˆ†ç¦»ï¼Œé…åˆansible playbookåšè½¯ä»¶å®‰è£…</description><pubDate>Mon, 23 Jan 2023 00:00:00 GMT</pubDate><content:encoded>&lt;section&gt;&lt;h2&gt;ä¸€ã€é›†ç¾¤æ¶æ„&lt;a href=&quot;#ä¸€é›†ç¾¤æ¶æ„&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;å½“ç½‘ç«™æµé‡è¾¾åˆ°ä¸€å®šç¨‹åº¦æ—¶ï¼Œå•é å•æœºéƒ¨ç½²çš„æ¨¡å¼å°±ä¸èƒ½æ»¡è¶³å¤§æµé‡æ‰€éœ€æ±‚çš„æ€§èƒ½äº†ã€‚å› æ­¤ï¼Œå°†å•æœºæ¨¡å¼æ‹†åˆ†ä¸ºè´Ÿè½½å‡è¡¡é›†ç¾¤æ˜¯å¾ˆæœ‰å¿…è¦ï¼Œè´Ÿè½½å‡è¡¡é›†ç¾¤éœ€è¦è‡³å°‘äº”å°æœåŠ¡å™¨ï¼Œå…¶æ¶æ„æ¨¡å‹å¦‚ä¸‹
&lt;/p&gt;&lt;figure&gt;&lt;img src=&quot;https://blog.freelytomorrow.com/articles_img/load-balancing-wordpress/structure.png&quot; alt=&quot;&quot; /&gt;&lt;figcaption&gt;è´Ÿè½½å‡è¡¡é›†ç¾¤&lt;/figcaption&gt;&lt;/figure&gt;&lt;br /&gt;&lt;p&gt;&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;lb-5ï¼šè´Ÿè½½å‡è¡¡å™¨ï¼Œè¯¥æœåŠ¡å™¨ä½œä¸ºåå‘ä»£ç†æœåŠ¡å™¨ï¼Œè´Ÿè´£å°†ç”¨æˆ·çš„httpè¯·æ±‚åŸºäºç‰¹å®šç®—æ³•è½¬å‘ç»™webæœåŠ¡å™¨è¿›è¡Œè§£æå’Œå¤„ç†ï¼›éƒ¨ç½²nginxã€‚&lt;/li&gt;
&lt;li&gt;web-7å’Œweb-8ï¼šä¸¤å°webæœåŠ¡å™¨ï¼Œéƒ¨ç½²äº†nginxå’Œphp-fpmï¼Œè´Ÿè´£è§£æé™æ€å’ŒåŠ¨æ€è¯·æ±‚ï¼›&lt;/li&gt;
&lt;li&gt;nfs-31ï¼šé™æ€èµ„æºæœåŠ¡å™¨ï¼Œè´Ÿè´£å­˜æ”¾é™æ€æ–‡ä»¶èµ„æºï¼Œä»¥wordpressä¸¾ä¾‹ï¼Œä¸€ä¸ªwordpressç«™ç‚¹åŒ…å«äº†å¤§é‡å›¾ç‰‡å’ŒéŸ³è§†é¢‘èµ„æºï¼Œå·²ç»phpè„šæœ¬ï¼Œå¦‚æœåˆ†åˆ«éƒ¨ç½²åœ¨ä¸¤å°webæœåŠ¡å™¨ä¸Šï¼Œé‚£ä¹ˆä¸€å®šæ˜¯è¡Œä¸é€šçš„ï¼Œå› ä¸ºæˆ‘ä»¬å¾ˆéš¾ç¡®ä¿ä¸¤å°ä¸»æœºä¸Šçš„æ•°æ®ä¸€è‡´æ€§ï¼Œä¹Ÿä¸å¯èƒ½æ¯æ¬¡æ›´æ–°ç«™ç‚¹å†…å®¹æ—¶éƒ½é‡å¤ä¸€éç›¸åŒçš„æ“ä½œï¼Œä½¿ç”¨nfsæœåŠ¡å™¨ï¼ŒåŸºäºè¿œç¨‹æŒ‚è½½æ“ä½œï¼Œå¯ä»¥è®©ä¸¤å°webæœåŠ¡å™¨æ“ä½œç›¸åŒçš„æ–‡ä»¶å†…å®¹ï¼›&lt;/li&gt;
&lt;li&gt;db-51ï¼šæ•°æ®åº“æœåŠ¡å™¨&lt;/li&gt;
&lt;li&gt;rsync-31ï¼šå¤‡ä»½æœåŠ¡å™¨ï¼Œè¯¥æœåŠ¡å™¨å¹¶éå¿…è¦çš„ï¼ŒrsyncæœåŠ¡å™¨ä¸»è¦æ˜¯å¯¹æ¶‰åŠåˆ°äº¤æ˜“ç­‰æœ‰é«˜å®‰å…¨æ€§å’Œé«˜æ•°æ®å¯é æ€§éœ€æ±‚çš„ç«™ç‚¹æ‰æœ‰é‡è¦ä½œç”¨ã€‚
&lt;br /&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;br /&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;äºŒã€æ‹†åˆ†LNMPå•æœºä¸ºé›†ç¾¤&lt;a href=&quot;#äºŒæ‹†åˆ†lnmpå•æœºä¸ºé›†ç¾¤&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;éƒ¨ç½²wordpressæºä»£ç åˆ°nfs-31æœåŠ¡å™¨&lt;br /&gt;&lt;a href=&quot;#éƒ¨ç½²wordpressæºä»£ç åˆ°nfs-31æœåŠ¡å™¨&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;ç”±äºè¿™é‡Œä½¿ç”¨çš„æ˜¯è™šæ‹Ÿæœºè¿›è¡Œè¯•éªŒï¼Œå› æ­¤å¹¶æ²¡æœ‰wordpressæºä»£ç ï¼Œæ­£å¸¸æƒ…å†µä¸‹è¿›è¡Œæ‹†åˆ†éœ€è¦å…ˆå°†wordpressä»£ç è¿›è¡Œæ‰“åŒ…ï¼Œå¹¶å‘é€åˆ°nfsæœåŠ¡å™¨ä¸Šã€‚&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;mkdir&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/www&lt;/span&gt;&lt;span&gt;; &lt;/span&gt;&lt;span&gt;cd&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/www&lt;/span&gt;&lt;span&gt;; &lt;/span&gt;&lt;span&gt;wget&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;https://cn.wordpress.org/latest-zh_CN.zip&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;éƒ¨ç½²NFSæœåŠ¡ç«¯&lt;a href=&quot;#éƒ¨ç½²nfsæœåŠ¡ç«¯&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;åœ¨nfsæœåŠ¡å™¨ä¸Šå®‰è£…nfs-utilså’ŒrpcbindåŒ…å¹¶è¿è¡Œ&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;yum&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;install&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;nfs-utils&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;rpcbind&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-y&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;systemctl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;start&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;rpcbind&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;systemctl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;enable&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;rpcbind&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;åˆ›å»ºnfsé…ç½®æ–‡ä»¶&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;cat&lt;/span&gt;&lt;span&gt; &amp;gt; &lt;/span&gt;&lt;span&gt;/etc/exports&lt;/span&gt;&lt;span&gt; &amp;lt;&amp;lt; &lt;/span&gt;&lt;span&gt;EOF&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;/www/wordpress 172.16.1.0/24(rw,sync,all_squash)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;#rw - å¯è¯»å¯å†™ æƒé™å¼€æ”¾ç»™172.16.1ç½‘æ®µçš„æ‰€æœ‰ip å°†nfsç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶çš„å±ä¸»é‡å†™ä¸ºnfsnobody(å³ä½¿æ˜¯rootåˆ›å»ºçš„)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;EOF&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;ä¿®æ”¹nfsç›®å½•å±ä¸»&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;chown&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-R&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;nfsnobody.nfsnobody&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/www/wordpress/&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;å¯åŠ¨nfsæœåŠ¡å¹¶è®¾ä¸ºå¼€æœºè‡ªå¯&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;systemctl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;start&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;nfs&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;systemctl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;enable&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;nfs&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;å¯ä»¥ä½¿ç”¨showmountå‘½ä»¤æŸ¥çœ‹æ˜¯å¦é…ç½®æˆåŠŸ&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;showmount&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-e&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;172.16.1.31&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;åœ¨ä¸¤å°webæœåŠ¡å™¨ä¸Šéƒ¨ç½²NFSå®¢æˆ·ç«¯(æŒ‚è½½)&lt;a href=&quot;#åœ¨ä¸¤å°webæœåŠ¡å™¨ä¸Šéƒ¨ç½²nfså®¢æˆ·ç«¯æŒ‚è½½&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;å®‰è£…nfs-utilså·¥å…·åŒ…&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;yum&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;install&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;nfs-utils&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-y&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;é‡å¯rpcbind&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;systemctl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;restart&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;rpcbind&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;è¿™é‡Œçš„rpcbindåº”è¯¥é»˜è®¤æ˜¯è®¾ä¸ºå¼€æœºè‡ªå¯çš„ï¼Œå¯ä»¥ç”¨is-enabledæŸ¥çœ‹ä¸€ä¸‹ï¼Œå¦‚æœä¸æ˜¯å°±è®¾æˆè‡ªå¯åŠ¨ã€‚&lt;br /&gt;
ç”¨showmountå‘½ä»¤æŸ¥çœ‹nfsæœåŠ¡å™¨ä¿¡æ¯&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;showmount&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-e&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;172.16.1.31&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;å¦‚æœä¸€åˆ‡æ­£å¸¸ä¼šæ˜¾ç¤ºä¹‹å‰åœ¨/etc/exportsä¸­é…ç½®çš„ä¿¡æ¯ã€‚&lt;br /&gt;
åˆ›å»ºè¦æŒ‚è½½çš„ç›®æ ‡ç›®å½•å¹¶è¿›è¡ŒæŒ‚è½½ï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;mkdir&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/www&lt;/span&gt;&lt;span&gt;; &lt;/span&gt;&lt;span&gt;mount&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-t&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;nfs&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;172.16.1.31:/www/wordpress&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/www&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;ç„¶åæŸ¥çœ‹wwwç›®å½•ï¼Œåº”è¯¥å‘ç°é‡Œé¢éƒ½æ˜¯wordpressçš„æ–‡ä»¶&lt;br /&gt;
æœ€åä¸€æ­¥ï¼Œé…ç½®å¼€æœºè‡ªåŠ¨æŒ‚è½½&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;echo&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;172.16.1.31:/www/wordpress /wwwÂ  nfs default 0 0&apos;&lt;/span&gt;&lt;span&gt; &amp;gt;&amp;gt; &lt;/span&gt;&lt;span&gt;/etc/fstab&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;å®‰è£…WordPress&lt;a href=&quot;#å®‰è£…wordpress&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;åœ¨webæœåŠ¡å™¨ä¸Šè¿è¡Œphp-fpmæœåŠ¡åï¼Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥webæœåŠ¡å™¨çš„IPåœ°å€ï¼Œåº”è¯¥å¯ä»¥çœ‹åˆ°wordpresså®‰è£…ç•Œé¢ã€‚&lt;br /&gt;
è¿™å°±è¯´æ˜å·²ç»æŒ‚è½½æˆåŠŸäº†ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;ä¸ºMySQLæ•°æ®åº“åˆ›å»ºè¿œç¨‹è¿æ¥ç”¨æˆ·å’Œwordpressæ•°æ®åº“&lt;a href=&quot;#ä¸ºmysqlæ•°æ®åº“åˆ›å»ºè¿œç¨‹è¿æ¥ç”¨æˆ·å’Œwordpressæ•°æ®åº“&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;æˆ‘ä»¬å¸Œæœ›ä¸¤å°webæœåŠ¡å™¨å‘åŒä¸€ä¸ªæ•°æ®åº“å†…å­˜å‚¨å†…å®¹ï¼Œå› æ­¤å¿…é¡»å°†MySQLæ•°æ®åº“æ‹†åˆ†å‡ºæ¥ã€‚&lt;br /&gt;
ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤åˆ›å»ºä¸€ä¸ªè¿œç¨‹è¿æ¥ç”¨æˆ·&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;mysql&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-uroot&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-p123456&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-e&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;grant all privileges on *.* to username@&apos;%&apos; identified by &apos;123456&apos;&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;-eå‚æ•°è®©æˆ‘ä»¬å¯ä»¥åœ¨ä¸ç™»å…¥æœåŠ¡å™¨äº¤äº’ç•Œé¢çš„æƒ…å†µä¸‹æ‰§è¡Œè¯­å¥ï¼Œè¿™æ¡å‘½ä»¤çš„å«ä¹‰æ˜¯ï¼šæˆæƒä¸€ä¸ªç”¨äºè¿œç¨‹è¿æ¥çš„ç”¨æˆ·åusernameï¼Œå¯†ç æ˜¯123456ï¼Œå…è®¸å…¶åœ¨ä»»ä½•æœºå™¨ä¸Šè¿œç¨‹ç™»å½•åˆ°æ•°æ®åº“å¹¶è®¿é—®å…·æœ‰è®¿é—®æ‰€æœ‰æ•°æ®åº“å’Œè¡¨çš„æƒé™&lt;br /&gt;
ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤åˆ›å»ºæ•°æ®åº“&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;mysql&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-uroot&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-p123456&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-e&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;create database my_blog&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;æ¥ä¸‹æ¥å¡«å…¥ä¿¡æ¯&lt;br /&gt;
ç”¨æˆ·åå’Œå¯†ç å¡«åˆšæ‰åˆ›å»ºçš„è¿œç¨‹è¿æ¥ç”¨æˆ·ï¼›æ•°æ®åº“ä¸»æœºè¿™æ¬¡å°±ä¸å†æ˜¯localhostäº†ï¼Œå› ä¸ºå®ƒæ˜¯è¿œç¨‹éƒ¨ç½²çš„ï¼Œè¾“å…¥ip:3306ï¼Œ3306æ˜¯mysqlé»˜è®¤å ç”¨çš„ç«¯å£å·ã€‚&lt;br /&gt;
åˆ°æ­¤ä¸ºæ­¢ï¼Œæˆ‘ä»¬çš„wordpressæœåŠ¡å·²ç»ç®—æ˜¯éƒ¨ç½²åœ¨äº†é›†ç¾¤æ¨¡å¼ä¸Šäº†ï¼Œä¸‹ä¸€æ­¥æ˜¯éƒ¨ç½²åå‘ä»£ç†æœåŠ¡å™¨ï¼Œè®©ç”¨æˆ·è®¿é—®è¿™å°ä»£ç†æœåŠ¡å™¨ï¼Œå¹¶ç”±å®ƒå°†è¯·æ±‚è½¬å‘ç»™webæœåŠ¡å™¨ã€‚&lt;br /&gt;
&lt;br /&gt;
&lt;br /&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;ä¸‰ã€éƒ¨ç½²åå‘ä»£ç†æœåŠ¡å™¨&lt;a href=&quot;#ä¸‰éƒ¨ç½²åå‘ä»£ç†æœåŠ¡å™¨&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;ä»€ä¹ˆæ˜¯åå‘ä»£ç†&lt;a href=&quot;#ä»€ä¹ˆæ˜¯åå‘ä»£ç†&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;æœ‰åå‘ä»£ç†å½“ç„¶å°±æœ‰æ­£å‘ä»£ç†ï¼›æ­£å‘ä»£ç†æ˜¯æŒ‡æœåŠ¡å™¨ä»£ç†å®¢æˆ·ç«¯å¯¹æœåŠ¡ç«¯è¿›è¡Œè®¿é—®ï¼Œåœ¨æœåŠ¡ç«¯çš„ä¸¥é‡ï¼Œä»£ç†æœåŠ¡å™¨å°±æ˜¯å®¢æˆ·ç«¯ï¼Œæ­£å‘ä»£ç†çš„ä¸€ä¸ªå…¸å‹åº”ç”¨æ˜¯VPNï¼Œé€šè¿‡æ­£å‘ä»£ç†ï¼Œç”¨æˆ·å¯ä»¥ç»•è¿‡IPé™åˆ¶ç­‰æŠ€æœ¯æ‰‹æ®µå¯¹ç›®æ ‡æœåŠ¡å™¨è¿›è¡Œè®¿é—®ï¼ŒåŒæ—¶éšè—å®¢æˆ·ç«¯æœ¬èº«çš„ä¿¡æ¯ï¼›&lt;br /&gt;
åå‘ä»£ç†åˆ™ç›¸åï¼Œä»£ç†æœåŠ¡å™¨ä»£ç†æœåŠ¡ç«¯æ¥æ”¶å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œå¯¹äºå®¢æˆ·ç«¯æ¥è¯´ï¼Œä»£ç†æœåŠ¡å™¨å°±æ˜¯æœåŠ¡ç«¯ï¼Œè´Ÿè½½å‡è¡¡å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„åº”ç”¨ï¼›ç”¨æˆ·å°†è¯·æ±‚å‘é€ç»™ä»£ç†æœåŠ¡å™¨ï¼Œå¹¶ç”±ä»£ç†æœåŠ¡å™¨å°†è¯·æ±‚è½¬å‘ç»™webæœåŠ¡å™¨è¿›è¡Œå¤„ç†ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;éƒ¨ç½²æœåŠ¡å™¨&lt;a href=&quot;#éƒ¨ç½²æœåŠ¡å™¨&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;section&gt;&lt;h4&gt;å®‰è£…Nginx&lt;a href=&quot;#å®‰è£…nginx&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;yum&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;install&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;nginx&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-y&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;ä¿®æ”¹é…ç½®æ–‡ä»¶/etc/nginx/nginx.conf&lt;a href=&quot;#ä¿®æ”¹é…ç½®æ–‡ä»¶etcnginxnginxconf&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;é…ç½®å¦‚ä¸‹ï¼š&lt;br /&gt;&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;load_module &lt;/span&gt;&lt;span&gt;/usr/lib64/nginx/modules/ngx_stream_module.so; &lt;/span&gt;&lt;span&gt;#ä½¿ç”¨ä¸ƒå±‚è´Ÿè½½å‡è¡¡upstreamå…³é”®å­—éœ€è¦å¼•å…¥æ­¤æ¨¡å—&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;user &lt;/span&gt;&lt;span&gt;nginx;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;worker_processes &lt;/span&gt;&lt;span&gt;auto;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;user &lt;/span&gt;&lt;span&gt;nginx;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;worker_processes &lt;/span&gt;&lt;span&gt;auto;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;events{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;   &lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;worker_connections &lt;/span&gt;&lt;span&gt;1024&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;http{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;upstream&lt;/span&gt;&lt;span&gt; pool_web{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;server&lt;/span&gt;&lt;span&gt;&lt;span&gt; 172.16.1.7:80 &lt;/span&gt;&lt;span&gt;weight&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;server 172.16.1.9:80 &lt;/span&gt;&lt;span&gt;weight&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;4&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;server {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;listen &lt;/span&gt;&lt;span&gt;80&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;       &lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;server_name &lt;/span&gt;&lt;span&gt;_;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;location&lt;/span&gt;&lt;span&gt; / {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;           &lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;proxy_pass &lt;/span&gt;&lt;span&gt;http://pool_web; &lt;/span&gt;&lt;span&gt;#å°†è¯·æ±‚è½¬å‘ç»™æœåŠ¡å™¨æ± ä¸­çš„ä¸»æœº(é»˜è®¤åŸºäºè½®è¯¢ç®—æ³•)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;           &lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;include &lt;/span&gt;&lt;span&gt;/etc/nginx/proxy_params.conf; &lt;/span&gt;&lt;span&gt;#å¼•å…¥åå‘ä»£ç†å‚æ•°&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;é…ç½®åå‘ä»£ç†å‚æ•°&lt;a href=&quot;#é…ç½®åå‘ä»£ç†å‚æ•°&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;proxy_set_header &lt;/span&gt;&lt;span&gt;Host $&lt;/span&gt;&lt;span&gt;http_host&lt;/span&gt;&lt;span&gt;; &lt;/span&gt;&lt;span&gt;#æœåŠ¡å™¨å°†ç”¨æˆ·è®¿é—®ç½‘ç«™çš„hostsä¿¡æ¯è½¬å‘ç»™åç«¯èŠ‚ç‚¹&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;proxy_set_header &lt;/span&gt;&lt;span&gt;X-Forwarded-For $&lt;/span&gt;&lt;span&gt;proxy_add_x_forwarded_for&lt;/span&gt;&lt;span&gt;; &lt;/span&gt;&lt;span&gt;#å°†ç”¨æˆ·çœŸå®çš„ipä¼ é€’ç»™åç«¯çš„èŠ‚ç‚¹&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;proxy_connect_timeout &lt;/span&gt;&lt;span&gt;30&lt;/span&gt;&lt;span&gt;; &lt;/span&gt;&lt;span&gt;#proxyå’Œserverçš„è¿æ¥è¶…æ—¶ï¼Œè¦æ±‚ä¸è¶…è¿‡30sï¼›&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;proxy_send_timeout &lt;/span&gt;&lt;span&gt;60&lt;/span&gt;&lt;span&gt;; &lt;/span&gt;&lt;span&gt;#proxyç­‰å¾…serverå›ä¼ æ•°æ®çš„è¶…æ—¶æ—¶é—´&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;proxy_read_timeout &lt;/span&gt;&lt;span&gt;60&lt;/span&gt;&lt;span&gt;; &lt;/span&gt;&lt;span&gt;#proxyç­‰å¾…serverå“åº”çš„è¶…æ—¶;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;proxy_buffering &lt;/span&gt;&lt;span&gt;on&lt;/span&gt;&lt;span&gt;; &lt;/span&gt;&lt;span&gt;#æŠŠserverè¿”å›çš„æ•°æ®å…ˆæ”¾å…¥ç¼“å†²åŒºï¼Œç„¶åå†è¿”å›ç»™clientï¼Œä¸€è¾¹æ”¶æ•°æ®ï¼Œä¸€è¾¹ä¼ é€’ï¼Œè€Œä¸æ˜¯å…¨éƒ¨æ¥æ”¶å®Œå†ä¼ é€’&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;proxy_buffer_size &lt;/span&gt;&lt;span&gt;32k&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;span&gt; proxy_buffers &lt;/span&gt;&lt;span&gt;4&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;128k&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;é‡è½½nginxé…ç½®&lt;a href=&quot;#é‡è½½nginxé…ç½®&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;nginx&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-s&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;reload&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;br /&gt;
&lt;br /&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;å››ã€è´Ÿè½½å‡è¡¡ç®—æ³•&lt;a href=&quot;#å››è´Ÿè½½å‡è¡¡ç®—æ³•&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;è½®è¯¢ç®—æ³•&lt;a href=&quot;#è½®è¯¢ç®—æ³•&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;é»˜è®¤çš„ç®—æ³•ï¼Œä»£ç†æœåŠ¡å™¨å°†è¯·æ±‚è½®æµå‘é€çš„æœåŠ¡å™¨æ± ä¸­çš„æœåŠ¡å™¨&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;æƒé‡è½®è¯¢ç®—æ³•&lt;a href=&quot;#æƒé‡è½®è¯¢ç®—æ³•&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;é€šè¿‡æŒ‡å®šæœåŠ¡å™¨æ± ä¸­çš„æœåŠ¡å™¨æƒé‡ï¼Œè¯·æ±‚ä¼šä¼˜å…ˆå‘é€åˆ°æƒé‡é«˜çš„æœåŠ¡å™¨ä¸Šã€‚é€‚ç”¨ç”¨åœ¨å¤šå°é…ç½®ä¸ä¸€çš„æœåŠ¡å™¨ä¸Šï¼Œå°†é«˜é…ç½®çš„æœåŠ¡å™¨è®¾ä¸ºé«˜æƒé‡ã€‚&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;upstream&lt;/span&gt;&lt;span&gt; web_pool {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;server&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;172.16.1.7&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;weight&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;server &lt;/span&gt;&lt;span&gt;172.16.1.9&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;weight&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;ip_hashç®—æ³•&lt;a href=&quot;#ip_hashç®—æ³•&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;å½“æ–°çš„è¯·æ±‚åˆ°è¾¾æ—¶ï¼Œä¸ºå®¢æˆ·ç«¯IPåœ°å€ç”Ÿæˆå“ˆå¸Œå€¼ï¼Œæ­¤åè¯¥IPå‘æ¥çš„æ‰€æœ‰è¯·æ±‚éƒ½ä¼šè¢«è½¬å‘åˆ°ä¸€å°æœåŠ¡å™¨ä¸Šã€‚&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;upstream&lt;/span&gt;&lt;span&gt; web_pool {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;ip_hash&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;server&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;172.16.1.7&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;server&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;172.16.1.9&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;æ³¨æ„ï¼š&lt;/strong&gt;&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;ip_hashç®—æ³•ä¸weightå’Œbackupå‚æ•°å­˜åœ¨å†²çªã€‚&lt;/li&gt;
&lt;li&gt;ç§»é™¤æœåŠ¡å™¨æ± ä¸­çš„ä¸»æœºæ—¶ï¼Œä¸èƒ½ç›´æ¥åˆ é™¤è®°å½•ï¼Œè€Œæ˜¯å¿…é¡»é€šè¿‡downå‚æ•°æ¥ç§»é™¤æœåŠ¡å™¨ï¼›ç›´æ¥åˆ é™¤é…ç½®ä¼šå¯¼è‡´ç®—æ³•å‘ç”Ÿæ›´æ”¹ï¼Œåç»­æ‰€æœ‰çš„è¯·æ±‚éƒ½ä¼šæ··ä¹±ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;url_hashç®—æ³•&lt;a href=&quot;#url_hashç®—æ³•&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;ä¸ºè®¿é—®urlç”Ÿæˆå“ˆå¸Œå€¼ï¼Œæ‰€æœ‰è¯¥urlçš„è¯·æ±‚éƒ½ä¼šè¢«è½¬å‘åˆ°åŒä¸€å°æœåŠ¡å™¨ä¸Šã€‚&lt;br /&gt;
Nginxæœ¬èº«ä¸æ”¯æŒurl_hashç®—æ³•ï¼Œä½¿ç”¨æ­¤ç®—æ³•éœ€è¦å®‰è£…ç¬¬ä¸‰æ–¹æ¨¡å—ngx_http_upstream_hash_module&lt;br /&gt;&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;upstream&lt;/span&gt;&lt;span&gt; web_pool{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;   &lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;hash &lt;/span&gt;&lt;span&gt;$&lt;/span&gt;&lt;span&gt;request_uri&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;hash_method&lt;/span&gt;&lt;span&gt; crc32;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;server&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;172.16.1.7&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;server&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;172.16.1.9&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;&lt;em&gt;æ³¨ï¼š&lt;br /&gt;
å…¶å®ip_hashå’Œurl_hashå‡ ä¹å¾ˆå°‘ç”¨åˆ°ï¼Œå› ä¸ºæˆ‘ä»¬é…ç½®è´Ÿè½½å‡è¡¡çš„æœ¬æ„å°±æ˜¯ä¸ºäº†å¢å¼ºæœåŠ¡çš„å¯ç”¨æ€§ï¼Œé˜²æ­¢å› nginxå®•æœºå¯¼è‡´æ— æ³•æä¾›æœåŠ¡ï¼Œè¿™ä¸¤ä¸ªhashç®—æ³•å°†å›ºå®šçš„é“¾æ¥æˆ–ipéƒ½å¼•å…¥åˆ°ä¸€å°nginxä¸»æœºï¼Œå¦‚æœè¿™å°nginxå®•æœºçš„è¯è¿™äº›ipæˆ–è€…é“¾æ¥éƒ½ä¸å†èƒ½å¤Ÿé“¾æ¥åˆ°æœåŠ¡ï¼Œæœ‰ç‚¹æœ¬æœ«å€’ç½®äº†ã€‚&lt;/em&gt;&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;æœ€å°é“¾æ¥æ•°ç®—æ³•&lt;a href=&quot;#æœ€å°é“¾æ¥æ•°ç®—æ³•&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;è¯·æ±‚å°†è¢«è½¬å‘ç»™æœåŠ¡å™¨æ± ä¸­é“¾æ¥æ•°æœ€å°‘çš„æœåŠ¡å™¨ä¸Šï¼Œä½¿ç”¨æ–¹æ³•åŒip_hashï¼Œå…³é”®å­—æ›¿æ¢ä¸ºleast_connï¼›
&lt;br /&gt;
&lt;br /&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;äº”ã€ä¸ºå¤šå°è´Ÿè½½å‡è¡¡å™¨éƒ¨ç½²keepalivedå¿ƒè·³æ£€æµ‹&lt;a href=&quot;#äº”ä¸ºå¤šå°è´Ÿè½½å‡è¡¡å™¨éƒ¨ç½²keepalivedå¿ƒè·³æ£€æµ‹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;ç›®å‰æœåŠ¡å™¨é›†ç¾¤ä¸­çš„è–„å¼±ç‚¹æ˜¯è´Ÿè½½å‡è¡¡æœåŠ¡å™¨ï¼Œå› ä¸ºè´Ÿè½½å‡è¡¡æœåŠ¡å™¨åªæœ‰ä¸€å°ï¼Œè€Œä¸”æ˜¯å†…ç½‘ç¯å¢ƒä¸­æ‰€æœ‰ä¸»æœºçš„æµé‡å…¥å£ï¼Œä¸€æ—¦è¯¥ä¸»æœºæ— æ³•æ­£å¸¸æä¾›æœåŠ¡ï¼Œç›¸å½“äºæ•´ä¸ªé›†ç¾¤éƒ½æ— æ³•å·¥ä½œï¼Œå› æ­¤ï¼Œå°†è´Ÿè½½å‡è¡¡å™¨è¿›è¡Œé›†ç¾¤åŒ–ä¹Ÿæ˜¯ä¿è¯é«˜å¯ç”¨æ€§çš„é‡è¦æ‰‹æ®µï¼Œè€Œkeepalivedå¿ƒè·³æ£€æµ‹åˆ™æ˜¯è´Ÿè½½å‡è¡¡é›†ç¾¤çš„æ ¸å¿ƒæœåŠ¡ã€‚&lt;br /&gt;&lt;/p&gt;&lt;section&gt;&lt;h3&gt;ä»€ä¹ˆæ˜¯keepalived&lt;a href=&quot;#ä»€ä¹ˆæ˜¯keepalived&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Keepalived ä½¿ç”¨ VRRP åè®®æ¥å®ç°é«˜å¯ç”¨æ€§ã€‚VRRP æ˜¯ä¸€ç§ç”¨äºè·¯ç”±å™¨æ•…éšœè½¬ç§»çš„åè®®ï¼Œå®ƒå…è®¸å¤šä¸ªè·¯ç”±å™¨å…±äº«åŒä¸€ä¸ªè™šæ‹Ÿ IP åœ°å€ï¼Œå¹¶ä¸”åœ¨ä¸»è·¯ç”±å™¨æ•…éšœæ—¶è‡ªåŠ¨åˆ‡æ¢åˆ°å¤‡ç”¨è·¯ç”±å™¨ä¸Šï¼Œä»è€Œå®ç°æ•…éšœè½¬ç§»å’Œè´Ÿè½½å‡è¡¡ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;VRRPåè®®åŸç†&lt;a href=&quot;#vrrpåè®®åŸç†&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;VRRP åè®®é€šè¿‡å°†å¤šä¸ªè·¯ç”±å™¨ç»„åˆæˆä¸€ä¸ªè™šæ‹Ÿè·¯ç”±å™¨ï¼Œå®ç°å¯¹å¤–æä¾›é«˜å¯ç”¨æ€§çš„è·¯ç”±æœåŠ¡ã€‚å®ƒé€šè¿‡ç‰¹å®šçš„ VRRP æŠ¥æ–‡è¿›è¡Œé€šä¿¡ï¼Œä½¿ç”¨ä¼˜å…ˆçº§å’ŒçŠ¶æ€æœºåˆ¶ç¡®å®šè·¯ç”±å™¨åœ¨è™šæ‹Ÿè·¯ç”±å™¨ä¸­çš„åœ°ä½ï¼Œå®ç°äº†è·¯ç”±å™¨æ•…éšœè½¬ç§»çš„è‡ªåŠ¨åŒ–ã€‚&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;è™šæ‹Ÿè·¯ç”±å™¨
VRRP åè®®å¯ä»¥å°†å¤šä¸ªè·¯ç”±å™¨ç»„åˆæˆä¸€ä¸ªè™šæ‹Ÿè·¯ç”±å™¨ï¼Œè¿™ä¸ªè™šæ‹Ÿè·¯ç”±å™¨æœ‰ä¸€ä¸ªè™šæ‹Ÿ IP åœ°å€å’Œä¸€ä¸ªè™šæ‹Ÿ MAC åœ°å€ï¼Œå¯¹å¤–æä¾›è·¯ç”±æœåŠ¡ã€‚è™šæ‹Ÿè·¯ç”±å™¨å¯ä»¥ç”±ä¸€å°è·¯ç”±å™¨ä½œä¸ºä¸»è·¯ç”±å™¨ï¼Œå…¶ä»–è·¯ç”±å™¨ä½œä¸ºå¤‡ç”¨è·¯ç”±å™¨ç»„æˆã€‚&lt;/li&gt;
&lt;li&gt;VRRP æŠ¥æ–‡
VRRP åè®®ä½¿ç”¨ç‰¹å®šçš„ VRRP æŠ¥æ–‡è¿›è¡Œé€šä¿¡ï¼Œä¸»è¦åŒ…æ‹¬ Advertisementã€Requestã€Master Down å’Œ Election æŠ¥æ–‡ã€‚å…¶ä¸­ï¼ŒAdvertisement æŠ¥æ–‡æ˜¯ä¸»è¦çš„é€šä¿¡æŠ¥æ–‡ï¼Œä¸»è·¯ç”±å™¨å®šæœŸå‘ç½‘ç»œå‘é€ Advertisement æŠ¥æ–‡ï¼Œå¹¿å‘Šè‡ªå·±æ˜¯å½“å‰çš„ä¸»è·¯ç”±å™¨ï¼Œå¤‡ç”¨è·¯ç”±å™¨åˆ™ç­‰å¾… Advertisement æŠ¥æ–‡ï¼Œä»¥ç¡®å®šä¸»è·¯ç”±å™¨æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚&lt;/li&gt;
&lt;li&gt;ä¼˜å…ˆçº§
æ¯ä¸ªè·¯ç”±å™¨éƒ½æœ‰ä¸€ä¸ªä¼˜å…ˆçº§å€¼ï¼Œç”¨äºç¡®å®šè·¯ç”±å™¨åœ¨ VRRP ä¸­çš„åœ°ä½ï¼Œä¼˜å…ˆçº§é«˜çš„è·¯ç”±å™¨ä¼šä¼˜å…ˆæˆä¸ºä¸»è·¯ç”±å™¨ã€‚å¦‚æœä¸»è·¯ç”±å™¨æ•…éšœï¼Œåˆ™å¤‡ç”¨è·¯ç”±å™¨ä¸­ä¼˜å…ˆçº§æœ€é«˜çš„è·¯ç”±å™¨å°†è‡ªåŠ¨æˆä¸ºä¸»è·¯ç”±å™¨ï¼Œå¹¶æ¥ç®¡è™šæ‹Ÿ IP åœ°å€å’Œè™šæ‹Ÿ MAC åœ°å€ã€‚&lt;/li&gt;
&lt;li&gt;è·¯ç”±å™¨çŠ¶æ€
VRRP åè®®ä¸­ï¼Œè·¯ç”±å™¨æœ‰ä¸‰ç§çŠ¶æ€ï¼Œåˆ†åˆ«æ˜¯åˆå§‹åŒ–çŠ¶æ€ã€å¤‡ç”¨çŠ¶æ€å’Œä¸»çŠ¶æ€ã€‚å½“è·¯ç”±å™¨å¯åŠ¨æ—¶ï¼Œå®ƒä¼šè¿›å…¥åˆå§‹åŒ–çŠ¶æ€ï¼Œç„¶åç­‰å¾…ä¸»è·¯ç”±å™¨çš„ Advertisement æŠ¥æ–‡ï¼Œç¡®å®šå½“å‰çš„çŠ¶æ€ã€‚å¦‚æœå½“å‰æ˜¯å¤‡ç”¨çŠ¶æ€ï¼Œè·¯ç”±å™¨ä¼šå®šæœŸå‘é€ Advertisement æŠ¥æ–‡ï¼Œä»¥å‘ŠçŸ¥ç½‘ç»œè‡ªå·±æ˜¯å¤‡ç”¨è·¯ç”±å™¨ã€‚å¦‚æœå½“å‰æ˜¯ä¸»çŠ¶æ€ï¼Œè·¯ç”±å™¨åˆ™ä¼šè´Ÿè´£è½¬å‘ç½‘ç»œæ•°æ®åŒ…ï¼Œå¹¶å®šæœŸå‘é€ Advertisement æŠ¥æ–‡ã€‚&lt;/li&gt;
&lt;li&gt;æ•…éšœè½¬ç§»
å½“ä¸»è·¯ç”±å™¨å‡ºç°æ•…éšœæ—¶ï¼Œå¤‡ç”¨è·¯ç”±å™¨ä¼šè‡ªåŠ¨åˆ‡æ¢åˆ°ä¸»è·¯ç”±å™¨çš„è™šæ‹Ÿ IP åœ°å€ï¼Œå¹¶æ¥ç®¡è™šæ‹Ÿ MAC åœ°å€ï¼Œä»è€Œç»§ç»­æä¾›å¯¹å¤–çš„è·¯ç”±æœåŠ¡ã€‚æ­¤æ—¶ï¼Œå¤‡ç”¨è·¯ç”±å™¨ä¼šæˆä¸ºæ–°çš„ä¸»è·¯ç”±å™¨ï¼Œå…¶ä»–å¤‡ç”¨è·¯ç”±å™¨åˆ™ç»§ç»­ä¿æŒå¤‡ç”¨çŠ¶æ€ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;éƒ¨ç½²keepalived&lt;a href=&quot;#éƒ¨ç½²keepalived&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;section&gt;&lt;h4&gt;å®‰è£…&lt;a href=&quot;#å®‰è£…&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;yum&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;install&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;keepalived&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-y&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;ä¿®æ”¹é…ç½®æ–‡ä»¶&lt;a href=&quot;#ä¿®æ”¹é…ç½®æ–‡ä»¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;é…ç½®æ–‡ä»¶è·¯å¾„ï¼š/etc/keepalived/keepalived.conf&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;global_defs {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;router_id lb-5&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;vrrp_instance VIP_1 {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;state MASTER&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;interface eth0&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;virtual_router_id 50&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;priority 150&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;advert_int 1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;authentication {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;auth_type PASS&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;auth_pass 1111&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;virtual_ipaddress {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;10.0.0.3/24&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;å‚æ•°è§£é‡Šï¼š&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;router_id lb-5ï¼šè·¯ç”±å™¨IDï¼Œæ¯ä¸ªæœºå™¨éƒ½ä¸ä¸€æ ·&lt;/li&gt;
&lt;li&gt;vrrp_instance VIP_1ï¼šVRRPè·¯ç”±å™¨ç»„ç»„åï¼ŒåŒå±ä¸€ä¸ªç»„çš„åå­—ç›¸åŒ&lt;/li&gt;
&lt;li&gt;state MASTER è§’è‰²ï¼šåˆ†ä¸ºMASTERå’ŒBACKUPä¸¤ç§ï¼Œå³ä¸»è·¯ç”±å™¨å’Œå¤‡ç”¨è·¯ç”±å™¨ï¼›MASTERåªèƒ½æœ‰ä¸€ä¸ªï¼ŒBACKUPå¯ä»¥æœ‰å¤šä¸ª&lt;/li&gt;
&lt;li&gt;interface eth0 VIPç»‘å®šçš„ç½‘å¡&lt;/li&gt;
&lt;li&gt;virtual_router_id 50 è™šæ‹Ÿè·¯ç”±IDï¼Œ åŒä¸€ç»„çš„éƒ½ç›¸åŒ&lt;/li&gt;
&lt;li&gt;priority 150 ä¼˜å…ˆçº§ï¼šä¼˜å…ˆçº§é«˜çš„è·¯ç”±å™¨ä¼˜å…ˆæˆä¸ºä¸»è·¯ç”±å™¨ï¼ŒMASTERçš„ä¼˜å…ˆçº§å¿…é¡»é«˜äºå…¶ä»–ä»»ä½•ä¸€ä¸ªè·¯ç”±å™¨çš„ä¼˜å…ˆçº§&lt;/li&gt;
&lt;li&gt;advert_int 1 advertisementï¼šæŠ¥æ–‡å‘é€é—´éš”&lt;/li&gt;
&lt;li&gt;authentication ï¼šè®¤è¯å½¢å¼&lt;/li&gt;
&lt;li&gt;auth_type PASSï¼šå¯†ç è®¤è¯&lt;/li&gt;
&lt;li&gt;auth_pass 1111ï¼šæŒ‡å®šå¯†ç ä¸ºæ˜æ–‡1111 â€“ åœ¨å†…ç½‘ç¯å¢ƒä¸‹ï¼Œåªè¦æœ‰æœ€åŸºæœ¬çš„è®¤è¯ç¯èŠ‚å°±å¯ä»¥&lt;/li&gt;
&lt;li&gt;virtual_ipaddressï¼šæŒ‡å®šè™šæ‹ŸIPåœ°å€ï¼Œè¯¥IPå¿…é¡»æ˜¯æ²¡è¢«ä»»ä½•æœºå™¨å ç”¨çš„
&lt;br /&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;å¦‚æ­¤ä¸€æ¥ï¼Œå½“æˆ‘ä»¬çš„å…¶ä¸­ä¸€å°è´Ÿè½½å‡è¡¡å™¨æŒ‚æ‰åï¼ŒBACKUPå¤‡ç”¨æœåŠ¡å™¨ç»„ä¸­ä¼˜å…ˆçº§æœ€é«˜çš„æœåŠ¡å™¨å°†è‡ªåŠ¨æ¥ç®¡è™šæ‹ŸIPå’Œè™šæ‹ŸMACï¼Œç¡®ä¿ä»ç„¶èƒ½å¤Ÿæ­£å¸¸æä¾›æœåŠ¡ã€‚&lt;/p&gt;&lt;p&gt;å¦‚æœæƒ³è¦ä¸ºwordpressç«™ç‚¹æä¾›é«˜å¯ç”¨è´Ÿè½½å‡è¡¡æœåŠ¡ï¼Œåˆ«å¿˜äº†å°†åŸŸåè§£æåˆ°è¯¥è™šæ‹Ÿåœ°å€ï¼›åœ¨é˜¿é‡Œäº‘ä¸Šå¯ä»¥ç›´æ¥è´­ä¹°è´Ÿè½½å‡è¡¡æœåŠ¡ï¼Œé˜¿é‡Œäº‘ä¼šæä¾›ä¸€ä¸ªæœåŠ¡IPï¼Œå°†åŸŸåAè®°å½•è§£æåˆ°è¿™ä¸ªæœåŠ¡IPä¸Šå°±å¯ä»¥äº†ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;</content:encoded></item><item><title>MySQLä¸»ä»å¤åˆ¶(åŸºäºbinlogå’ŒGTID)</title><link>https://white-festa.net/posts/mysql-replica-mha/</link><guid isPermaLink="true">https://white-festa.net/posts/mysql-replica-mha/</guid><description>ä½¿ç”¨MySQL MHAç»“åˆBinlogæˆ–GTIDå®ç°MySQLæ•°æ®åº“é›†ç¾¤çš„æ•°æ®åŒæ­¥</description><pubDate>Thu, 05 Jan 2023 00:00:00 GMT</pubDate><content:encoded>&lt;section&gt;&lt;h2&gt;MySQLä¸»ä»å¤åˆ¶&lt;a href=&quot;#mysqlä¸»ä»å¤åˆ¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;MySQLçš„ä¸»ä»å¤åˆ¶æ˜¯é€»è¾‘å¤åˆ¶æ¨¡å¼ï¼Œä»åº“å°†ä¸»åº“çš„binlogè®°å½•å¤åˆ¶åˆ°æœ¬æœºå¹¶æ‰§è¡Œï¼Œä»¥æ­¤ä¿æŒæ•°æ®ä¸€è‡´æ€§ã€‚&lt;br /&gt;&lt;/p&gt;&lt;p&gt;ä¸»ä»æœåŠ¡å™¨æ¶æ„çš„è®¾è®¡ï¼Œå¯ä»¥å¤§å¤§åŠ å¼ºMySQLæ•°æ®åº“æ¶æ„çš„å¥å£®æ€§ã€‚ä¾‹å¦‚ï¼Œå½“ä¸»æœåŠ¡å™¨å‡ºç°é—®é¢˜æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥äººå·¥åˆ‡æ¢æˆ–è®¾ç½®æˆè‡ªåŠ¨åˆ‡æ¢åˆ°ä»æœåŠ¡å™¨ç»§ç»­æä¾›æœåŠ¡ï¼Œæ­¤æ—¶ä»æœåŠ¡å™¨çš„æ•°æ®å’Œå®•æœºæ—¶çš„ä¸»æ•°æ®åº“å‡ ä¹æ˜¯ä¸€è‡´çš„ã€‚&lt;/p&gt;&lt;section&gt;&lt;h3&gt;ä¸€ã€å¸¸è§ä¸»ä»å¤åˆ¶æ¨¡å¼&lt;a href=&quot;#ä¸€å¸¸è§ä¸»ä»å¤åˆ¶æ¨¡å¼&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;ä¸€ä¸»ä¸€ä»/ä¸€ä¸»å¤šä»&lt;/li&gt;
&lt;li&gt;å¤šä¸»ä¸€ä»
åªæ”¯æŒMySQL5.7ä»¥åçš„ç‰ˆæœ¬ï¼›å°†å¤šä¸ªåº“çš„æ•°æ®å¤‡ä»½åˆ°å•ä¸ªåº“ä¸­å­˜å‚¨ã€‚&lt;/li&gt;
&lt;li&gt;åŒä¸»åº“å¤åˆ¶
ä¸¤ä¸ªæ•°æ®åº“æœåŠ¡å™¨äº’ç›¸åšå¯¹æ–¹çš„ä¸»ä»ï¼›ä»»ä½•ä¸€æ–¹çš„æ•°æ®æœ‰æ›´æ”¹ï¼Œå¦ä¸€æ–¹éƒ½ä¼šå°†å…¶å¤åˆ¶åˆ°è‡ªå·±çš„æ•°æ®åº“ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;å±‚çº§å¤åˆ¶
é€‚ç”¨äºä»åº“æ•°é‡è¾ƒå¤šçš„åœºæ™¯ï¼›æ­£å¸¸æƒ…å†µä¸‹ï¼Œå¦‚æœå¤šä¸ªä»åº“é“¾æ¥ä¸»åº“å¯¹ä¸»åº“æœåŠ¡å™¨çš„å‹åŠ›æ¯”è¾ƒå¤§ï¼Œå› æ­¤å¼•å‡ºå¤šçº§å¤åˆ¶çš„æ¦‚å¿µï¼Œæœ€é«˜çº§çš„è‡ªç„¶æ˜¯ä¸»åº“ï¼Œç„¶åä»¥æ ‘çŠ¶å›¾çš„æ¨¡å¼åˆ†å‡ºå¤šçº§ä»åº“è¿›è¡Œå¤åˆ¶ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;äºŒã€ä¸»ä»å¤åˆ¶åŸç†&lt;a href=&quot;#äºŒä¸»ä»å¤åˆ¶åŸç†&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;ä¸»ä»å¤åˆ¶ä¾é ä¸‰ä¸ªçº¿ç¨‹å®ç°ã€‚&lt;br /&gt;
ä¸»åº“ï¼šlog dump - ç”¨äºç»™ä»åº“I/Oçº¿ç¨‹ä¼ è¾“binlogæ•°æ®&lt;br /&gt;
ä»åº“ï¼šI/Oçº¿ç¨‹å’ŒSQLçº¿ç¨‹&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;I/Oçº¿ç¨‹ï¼šè¯·æ±‚ä¸»åº“çš„binlogï¼Œå¹¶å°†å¾—åˆ°çš„binlogå†™å…¥è‡ªå·±çš„delay logä¸­ã€‚&lt;/li&gt;
&lt;li&gt;SQLçº¿ç¨‹ï¼šè¯»å–delay logä¸­çš„æ•°æ®ï¼Œè§£æä¸ºSQLå¹¶æ‰§è¡Œ(å†™å…¥æ•°æ®)&lt;/li&gt;
&lt;/ul&gt;&lt;section&gt;&lt;h4&gt;1. ä¸»åº“log dumpçº¿ç¨‹&lt;a href=&quot;#1-ä¸»åº“log-dumpçº¿ç¨‹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;ä¸»èŠ‚ç‚¹ä¼šä¸ºæ¯ä¸ªä»èŠ‚ç‚¹åˆ›å»ºä¸€ä¸ªlog dumpçº¿ç¨‹ï¼Œå…¶ä½œç”¨æ˜¯è¯»å–å’Œå‘é€binlogå†…å®¹ï¼Œåœ¨è¯»å–binlogæ—¥å¿—æ—¶ï¼Œè¯¥çº¿ç¨‹ä¼šå¯¹binlogåŠ é”ï¼Œå½“å®Œæˆè¯»å–å‘é€ç»™ä»èŠ‚ç‚¹ä¹‹å‰ï¼Œä¼šé‡Šæ”¾é”ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;2. ä»åº“ I/Oçº¿ç¨‹å’ŒSQLçº¿ç¨‹&lt;a href=&quot;#2-ä»åº“-ioçº¿ç¨‹å’Œsqlçº¿ç¨‹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;section&gt;&lt;h5&gt;I/Oçº¿ç¨‹&lt;a href=&quot;#ioçº¿ç¨‹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h5&gt;&lt;p&gt;å½“ä»åº“èŠ‚ç‚¹æ‰§è¡Œstart slaveå‘½ä»¤åï¼Œä»èŠ‚ç‚¹ä¼šåˆ›å»ºä¸€ä¸ªI/Oçº¿ç¨‹æ¥é“¾æ¥ä¸»åº“èŠ‚ç‚¹ï¼Œè¯·æ±‚ä¸»åº“æ›´æ–°çš„binlogï¼Œåœ¨æ¥æ”¶åˆ°ä¸»åº“å‘æ¥çš„binlogè®°å½•åï¼Œå°†å…¶ä¿å­˜åœ¨æœ¬åœ°çš„delay logä¸­ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h5&gt;SQLçº¿ç¨‹&lt;a href=&quot;#sqlçº¿ç¨‹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h5&gt;&lt;p&gt;SQlçº¿ç¨‹è´Ÿè´£è¯»å–delay logçš„è®°å½•ï¼Œå¹¶å°†å…¶è§£æä¸ºSQLè¯­å¥ï¼Œæœ€ç»ˆæ‰§è¡Œè¿™äº›SQLè¯­å¥æ¥ç¡®å®åœ°å†™å…¥æ•°æ®ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;3. ä»€ä¹ˆæ˜¯Delay log&lt;a href=&quot;#3-ä»€ä¹ˆæ˜¯delay-log&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;Delay logä¸€èˆ¬ç¿»è¯‘æˆä¸­ç»§æ—¥å¿—ï¼Œå¯ä»¥ç®€å•çš„ç†è§£ä¸ºä¸»ä»å¤åˆ¶ä¸­æš‚å­˜binlogè®°å½•çš„ç¼“å­˜åŒºï¼›å› ä¸ºä¸­ç»§æ—¥å¿—çš„å­˜åœ¨ï¼Œåœ¨ä¸»åº“å­˜åœ¨é¢‘ç¹çš„å†™å…¥æ“ä½œæ—¶ï¼Œä¸»èŠ‚ç‚¹ä¸å¿…ç­‰å¾…ä»èŠ‚ç‚¹æ‰§è¡Œå®Œä¸Šä¸€æ¡SQLè®°å½•åæ‰èƒ½è¿›è¡Œä¼ è¾“ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;4. ä¸»ä»å¤åˆ¶æµç¨‹&lt;a href=&quot;#4-ä¸»ä»å¤åˆ¶æµç¨‹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;ä»èŠ‚ç‚¹æ‰§è¡Œ&lt;code&gt;slave start&lt;/code&gt;å¼€å¯ä¸»ä»å¤åˆ¶ã€‚ä»èŠ‚ç‚¹çš„I/Oçº¿ç¨‹é“¾æ¥ä¸»èŠ‚ç‚¹ï¼Œå¹¶è¯·æ±‚ä»æŒ‡å®šæ—¥å¿—æ–‡ä»¶çš„æŒ‡å®šä½ç½®(æˆ–è€…ä»æœ€å¼€å¯çš„æ—¥å¿—)ä¹‹åçš„æ—¥å¿—å†…å®¹ã€‚&lt;/li&gt;
&lt;li&gt;ä¸»èŠ‚ç‚¹æ”¶åˆ°ä»èŠ‚ç‚¹I/Oçº¿ç¨‹çš„è¯·æ±‚åï¼Œç”±log dumpçº¿ç¨‹å°†ä»èŠ‚ç‚¹è¯·æ±‚çš„æ—¥å¿—å†…å®¹è¿”å›ç»™ä»èŠ‚ç‚¹ï¼›è¿”å›çš„ä¿¡æ¯ä¸­é™¤äº†è®°å½•æœ¬èº«ï¼Œè¿˜åŒ…æ‹¬æœ¬æ¬¡è¯·æ±‚çš„binlogæ–‡ä»¶åå’Œbinlog position(Stop position,ä¹Ÿå°±æ˜¯ä¸‹ä¸€ä¸ªè¦è¯»å–çš„è®°å½•çš„start position)ã€‚&lt;/li&gt;
&lt;li&gt;ä»èŠ‚ç‚¹çš„I/Oçº¿ç¨‹æ¥æ”¶åˆ°è®°å½•å’Œä¿¡æ¯åï¼Œå°†binlogè®°å½•æ›´æ–°åˆ°æœ¬æœºdelay logçš„æœ€æœ«ç«¯ï¼›å°†binlogæ–‡ä»¶åå’Œposå€¼ä¿å­˜åˆ°&lt;code&gt;master-info&lt;/code&gt;æ–‡ä»¶ä¸­ï¼Œåé¢ä»èŠ‚ç‚¹å°†æ ¹æ®è¿™ä¸ªæ–‡ä»¶å†…çš„ä¿¡æ¯å‘ä¸»èŠ‚ç‚¹å‘èµ·æ–°çš„è¯·æ±‚ã€‚&lt;/li&gt;
&lt;li&gt;ä»èŠ‚ç‚¹ä¸Šçš„SQLçº¿ç¨‹æ£€æµ‹åˆ°delay logæ›´æ–°åï¼Œä¼šé€æ¡å°†æœ€æ–°çš„è®°å½•è§£æä¸ºSQLè¯­å¥å¹¶æ‰§è¡Œï¼Œå¹¶åœ¨&lt;code&gt;relay-log.info&lt;/code&gt;æ–‡ä»¶ä¸­è®°å½•æ‰§è¡Œdelay logçš„æ–‡ä»¶åå’Œæœ€æ–°posã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;ä¸‰ã€é…ç½®MySQLä¸»ä»å¤åˆ¶&lt;a href=&quot;#ä¸‰é…ç½®mysqlä¸»ä»å¤åˆ¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;section&gt;&lt;h4&gt;1. ç¯å¢ƒå‡†å¤‡&lt;a href=&quot;#1-ç¯å¢ƒå‡†å¤‡&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;section&gt;&lt;h5&gt;ä¸»åº“&lt;a href=&quot;#ä¸»åº“&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h5&gt;
















&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;ä¸»æœºå&lt;/th&gt;&lt;th&gt;å…¬ç½‘ip&lt;/th&gt;&lt;th&gt;å†…ç½‘ip&lt;/th&gt;&lt;th&gt;å¼€å¯binlog&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;db-51&lt;/td&gt;&lt;td&gt;10.0.0.51&lt;/td&gt;&lt;td&gt;172.16.1.51&lt;/td&gt;&lt;td&gt;yes&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;é…ç½®ï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[mysqld]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;port&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;3306&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;user&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;mysql&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;basedir&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;/opt/mysql&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;datadir&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;/mysql_data/mysql_3306&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;server_id&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;51&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;log_bin&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;/mysql_data/binlog/db51-bin&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;socket&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;/tmp/mysql.sock&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[mysql]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;socket&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;/tmp/mysql.sock&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h5&gt;ä»åº“&lt;a href=&quot;#ä»åº“&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h5&gt;
















&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;ä¸»æœºå&lt;/th&gt;&lt;th&gt;å…¬ç½‘ip&lt;/th&gt;&lt;th&gt;å†…ç½‘ip&lt;/th&gt;&lt;th&gt;å¼€å¯binlog&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;db-52&lt;/td&gt;&lt;td&gt;10.0.0.52&lt;/td&gt;&lt;td&gt;172.16.1.52&lt;/td&gt;&lt;td&gt;no&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;é…ç½®ï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[mysqld]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;port&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;3306&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;user&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;mysql&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;basedir&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;/opt/mysql&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;datadir&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;/mysql_data/mysql_3306&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;socket&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;/tmp/mysql.sock&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[mysql]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;socket&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;/tmp/mysql.sock&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;2. ä¸ºä»èŠ‚ç‚¹åˆ›å»ºé“¾æ¥ä¸»åº“çš„è´¦å·&lt;a href=&quot;#2-ä¸ºä»èŠ‚ç‚¹åˆ›å»ºé“¾æ¥ä¸»åº“çš„è´¦å·&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;åœ¨masteræœºå™¨ä¸Šæ“ä½œï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;grant&lt;/span&gt;&lt;span&gt; replication slave &lt;/span&gt;&lt;span&gt;on&lt;/span&gt;&lt;span&gt; *.* &lt;/span&gt;&lt;span&gt;to&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;repl&apos;&lt;/span&gt;&lt;span&gt;@&lt;/span&gt;&lt;span&gt;&apos;172.16.1.%&apos;&lt;/span&gt;&lt;span&gt; identified &lt;/span&gt;&lt;span&gt;by&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;123456&apos;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;æŸ¥çœ‹ç”¨æˆ·ï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;mysql&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;select&lt;/span&gt;&lt;span&gt; user,host,plugin &lt;/span&gt;&lt;span&gt;from&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;mysql&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;user&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;+&lt;/span&gt;&lt;span&gt;---------------+------------+-----------------------+&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;| user          | host       | plugin                |&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;+&lt;/span&gt;&lt;span&gt;---------------+------------+-----------------------+&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;| &lt;/span&gt;&lt;span&gt;root&lt;/span&gt;&lt;span&gt;          | localhost  | mysql_native_password |&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;| &lt;/span&gt;&lt;span&gt;mysql&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;session&lt;/span&gt;&lt;span&gt; | localhost  | mysql_native_password |&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;| &lt;/span&gt;&lt;span&gt;mysql&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;sys&lt;/span&gt;&lt;span&gt;     | localhost  | mysql_native_password |&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;| repl          | &lt;/span&gt;&lt;span&gt;172&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;16&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;.% | mysql_native_password |&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;+&lt;/span&gt;&lt;span&gt;---------------+------------+-----------------------+&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;4&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;rows&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;in&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;set&lt;/span&gt;&lt;span&gt; (&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;00&lt;/span&gt;&lt;span&gt; sec)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;æŸ¥çœ‹ç”¨æˆ·æƒé™ï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;mysql&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt; show grants &lt;/span&gt;&lt;/span&gt;&lt;span&gt;for&lt;/span&gt;&lt;span&gt; repl@&lt;/span&gt;&lt;span&gt;&apos;172.16.1.%&apos;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;+&lt;/span&gt;&lt;span&gt;-------------------------------------------------------+&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;| Grants &lt;/span&gt;&lt;span&gt;for&lt;/span&gt;&lt;span&gt;&lt;span&gt; repl&lt;/span&gt;&lt;span&gt;@172&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;16&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;.%                            |&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;+&lt;/span&gt;&lt;span&gt;-------------------------------------------------------+&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;| &lt;/span&gt;&lt;span&gt;GRANT&lt;/span&gt;&lt;span&gt; REPLICATION SLAVE &lt;/span&gt;&lt;span&gt;ON&lt;/span&gt;&lt;span&gt; *.* &lt;/span&gt;&lt;span&gt;TO&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;repl&apos;&lt;/span&gt;&lt;span&gt;@&lt;/span&gt;&lt;span&gt;&apos;172.16.1.%&apos;&lt;/span&gt;&lt;span&gt; |&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;+&lt;/span&gt;&lt;span&gt;-------------------------------------------------------+&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;row&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;in&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;set&lt;/span&gt;&lt;span&gt; (&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;00&lt;/span&gt;&lt;span&gt; sec)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;3. å¤‡ä»½ä¸»åº“çš„ç°æœ‰æ•°æ®å¹¶å‘é€åˆ°ä»åº“ä¸Š&lt;a href=&quot;#3-å¤‡ä»½ä¸»åº“çš„ç°æœ‰æ•°æ®å¹¶å‘é€åˆ°ä»åº“ä¸Š&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;è¿™æ­¥æ˜¯ä¸ºäº†è®©ä¸»ä»åº“çš„èµ·å§‹æ•°æ®ä¸€è‡´ã€‚&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;mysqldump&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-uroot&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-pabc123&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-A&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--master-data=2&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--single-transaction&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-R&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-E&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--triggers&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--max_allowed_packet=64M&lt;/span&gt;&lt;span&gt; &amp;gt; &lt;/span&gt;&lt;span&gt;/root/db51-data.sql&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;scp&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/root/db51-data.sql&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;root@172.16.1.52:/root&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;4. slaveæœºå™¨å¯¼å…¥æ•°æ®&lt;a href=&quot;#4-slaveæœºå™¨å¯¼å…¥æ•°æ®&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;mysql&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-uroot&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-pabc123&lt;/span&gt;&lt;span&gt; &amp;lt; &lt;/span&gt;&lt;span&gt;db51-data.sql&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;5. å¼€å¯ä¸»ä»å¤åˆ¶&lt;a href=&quot;#5-å¼€å¯ä¸»ä»å¤åˆ¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;ä¸ºslaveæœºå™¨æŒ‡å®šè¦è¯»å–çš„masteræœºå™¨ä¿¡æ¯ï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;mysql&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt; change &lt;/span&gt;&lt;/span&gt;&lt;span&gt;master&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;to&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;-&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt; master_host&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&apos;172.16.1.51&apos;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;-&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt; master_port&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;3306&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;-&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt; master_user&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&apos;repl&apos;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;-&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt; master_password&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&apos;123456&apos;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;-&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt; master_log_file&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&apos;db51-bin.000001&apos;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;-&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt; master_log_pos&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;2349&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;-&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt; master_connect_retry&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;10&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Query OK, &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;rows&lt;/span&gt;&lt;span&gt; affected, &lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt; warnings (&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;01&lt;/span&gt;&lt;span&gt; sec)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;å‚æ•°ï¼š&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;master_hostï¼šä¸»èŠ‚ç‚¹ipï¼Œéœ€è¦å’Œä¹‹å‰ä¸ºä»åº“åˆ›å»ºçš„å¤åˆ¶è´¦æˆ·å¤„åœ¨ç›¸åŒç½‘æ®µï¼Œå› ä¸ºè´¦æˆ·æ˜¯é’ˆå¯¹å†…ç½‘ç½‘æ®µæˆæƒçš„ï¼Œå¦‚æœé“¾æ¥çš„æ˜¯å…¬ç½‘IPï¼Œæ²¡æœ‰å¤åˆ¶çš„æƒé™ã€‚&lt;/li&gt;
&lt;li&gt;master_portï¼šä¸»èŠ‚ç‚¹ç«¯å£å·&lt;/li&gt;
&lt;li&gt;master_userå’Œmaster_passwordï¼šç”¨äºå¤åˆ¶çš„è´¦æˆ·å’Œå¯†ç &lt;/li&gt;
&lt;li&gt;master_log_fileï¼šä¸»èŠ‚ç‚¹çš„logfileæ–‡ä»¶åï¼Œç¡®ä¿å’Œå¤‡ä»½ä¸»åº“æ—¶æ­£åœ¨ç”¨çš„æ—¥å¿—ä¸€è‡´å°±å¯ä»¥ã€‚&lt;/li&gt;
&lt;li&gt;master_log_posï¼šbinlogæ—¥å¿—çš„æœ€æ–°ä½ç½®&lt;/li&gt;
&lt;li&gt;master_connect_retryï¼šé‡è¿æ¬¡æ•°&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ç„¶åå¼€å¯ä¸»ä»å¤åˆ¶&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;mysql&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;start&lt;/span&gt;&lt;span&gt; slave;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;é€šè¿‡ä¸€æ¡å‘½ä»¤æŸ¥çœ‹ä¸»ä»å¤åˆ¶çŠ¶æ€&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;mysql&amp;gt; show slave status \G&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;*&lt;/span&gt;&lt;span&gt;**************************&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1. row ***************************&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;               &lt;/span&gt;&lt;span&gt;Slave_IO_State&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Waiting for master to send event&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;                  &lt;/span&gt;&lt;span&gt;Master_Host&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;172.16.1.51&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;                  &lt;/span&gt;&lt;span&gt;Master_User&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;repl&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;                  &lt;/span&gt;&lt;span&gt;Master_Port&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;3306&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;                &lt;/span&gt;&lt;span&gt;Connect_Retry&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;10&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;Master_Log_File&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;db51-bin.000001&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;Read_Master_Log_Pos&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;2349&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;               &lt;/span&gt;&lt;span&gt;Relay_Log_File&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;db-52-relay-bin.000002&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;                &lt;/span&gt;&lt;span&gt;Relay_Log_Pos&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;319&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;Relay_Master_Log_File&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;db51-bin.000001&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;             &lt;/span&gt;&lt;span&gt;Slave_IO_Running&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Yes&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;Slave_SQL_Running&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Yes&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;Replicate_Do_DB&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;Replicate_Ignore_DB&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;           &lt;/span&gt;&lt;span&gt;Replicate_Do_Table&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;       &lt;/span&gt;&lt;span&gt;Replicate_Ignore_Table&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;Replicate_Wild_Do_Table&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;Replicate_Wild_Ignore_Table&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;                   &lt;/span&gt;&lt;span&gt;Last_Errno&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;                   &lt;/span&gt;&lt;span&gt;Last_Error&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;                 &lt;/span&gt;&lt;span&gt;Skip_Counter&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;Exec_Master_Log_Pos&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;2349&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;Relay_Log_Space&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;526&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;Until_Condition&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;None&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;27&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;               &lt;/span&gt;&lt;span&gt;Until_Log_File&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;28&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;                &lt;/span&gt;&lt;span&gt;Until_Log_Pos&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;29&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;           &lt;/span&gt;&lt;span&gt;Master_SSL_Allowed&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;No&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;30&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;           &lt;/span&gt;&lt;span&gt;Master_SSL_CA_File&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;31&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;           &lt;/span&gt;&lt;span&gt;Master_SSL_CA_Path&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;32&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;Master_SSL_Cert&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;33&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;Master_SSL_Cipher&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;34&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;               &lt;/span&gt;&lt;span&gt;Master_SSL_Key&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;35&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;Seconds_Behind_Master&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;36&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Master_SSL_Verify_Server_Cert&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;No&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;37&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;                &lt;/span&gt;&lt;span&gt;Last_IO_Errno&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;38&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;                &lt;/span&gt;&lt;span&gt;Last_IO_Error&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;39&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;               &lt;/span&gt;&lt;span&gt;Last_SQL_Errno&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;40&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;               &lt;/span&gt;&lt;span&gt;Last_SQL_Error&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;41&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;Replicate_Ignore_Server_Ids&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;42&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;             &lt;/span&gt;&lt;span&gt;Master_Server_Id&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;51&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;43&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;                  &lt;/span&gt;&lt;span&gt;Master_UUID&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;06fdc979-3cb2-11ee-8345-000c29948844&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;44&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;             &lt;/span&gt;&lt;span&gt;Master_Info_File&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/mysql_data/mysql_3306/master.info&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;45&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;                    &lt;/span&gt;&lt;span&gt;SQL_Delay&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;46&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;SQL_Remaining_Delay&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;NULL&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;47&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;Slave_SQL_Running_State&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Slave has read all relay log; waiting for more updates&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;48&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;           &lt;/span&gt;&lt;span&gt;Master_Retry_Count&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;86400&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;49&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;                  &lt;/span&gt;&lt;span&gt;Master_Bind&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;50&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;Last_IO_Error_Timestamp&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;51&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;     &lt;/span&gt;&lt;span&gt;Last_SQL_Error_Timestamp&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;52&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;               &lt;/span&gt;&lt;span&gt;Master_SSL_Crl&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;53&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;           &lt;/span&gt;&lt;span&gt;Master_SSL_Crlpath&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;54&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;           &lt;/span&gt;&lt;span&gt;Retrieved_Gtid_Set&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;55&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;Executed_Gtid_Set&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;56&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;                &lt;/span&gt;&lt;span&gt;Auto_Position&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;57&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;         &lt;/span&gt;&lt;span&gt;Replicate_Rewrite_DB&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;58&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;                 &lt;/span&gt;&lt;span&gt;Channel_Name&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;59&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;           &lt;/span&gt;&lt;span&gt;Master_TLS_Version&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;60&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;1 row in set (0.00 sec)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;å…¶ä¸­ï¼Œ&lt;code&gt;Slave_IO_Running&lt;/code&gt;å’Œ&lt;code&gt;Slave_SQL_Running&lt;/code&gt;ä¸¤ä¸ªé€‰é¡¹ä»£è¡¨ç€ä»åº“çš„I/Oçº¿ç¨‹å’ŒSQLçº¿ç¨‹ï¼Œè¿™ä¸¤ä¸ªçš„å€¼æ˜¯yesï¼Œè¯´æ˜ç›®å‰å·²ç»æˆåŠŸçš„å»ºç«‹äº†é“¾æ¥ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;6. æµ‹è¯•ä¸»ä»å¤åˆ¶æ•ˆæœ&lt;a href=&quot;#6-æµ‹è¯•ä¸»ä»å¤åˆ¶æ•ˆæœ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;åœ¨ä¸»åº“ä¸­æ–°å»ºä¸€ä¸ªæ•°æ®åº“ test_db2&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;CREATE&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;DATABASE&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;test_db2&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;åœ¨ä»åº“ä¸­æŸ¥çœ‹&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;mysql&amp;gt; show databases;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;+--------------------+&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;| Database           |&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;+--------------------+&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;| information_schema |&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;| mysql              |&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;| performance_schema |&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;| sys                |&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;| test_db            |&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;| test_db2           |&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;+--------------------+&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;6 rows in set (0.00 sec)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;å¯ä»¥å‘ç°ä»åº“ç«‹åˆ»è¿›è¡Œäº†å¤åˆ¶ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;7. æŸ¥çœ‹ä¸»ä»åº“ä¸Šçš„çº¿ç¨‹&lt;a href=&quot;#7-æŸ¥çœ‹ä¸»ä»åº“ä¸Šçš„çº¿ç¨‹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;show processlist;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;section&gt;&lt;h5&gt;ä¸»åº“&lt;a href=&quot;#ä¸»åº“-1&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h5&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;mysql&amp;gt; mysql&amp;gt; show processlist;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;+----+------+-------------------+------+-------------+------+---------------------------------------------------------------+------------------+&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;| Id | User | Host              | db   | Command     | Time | State                                                         | Info             |&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;+----+------+-------------------+------+-------------+------+---------------------------------------------------------------+------------------+&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;|  7 | repl | 172.16.1.52:53338 | NULL | Binlog Dump |  555 | Master has sent all binlog to slave; waiting for more updates | NULL             |&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;|  8 | root | localhost         | NULL | Query       |    0 | starting                                                      | show processlist |&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;+----+------+-------------------+------+-------------+------+---------------------------------------------------------------+------------------+&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;2 rows in set (0.00 sec)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h5&gt;ä»åº“&lt;a href=&quot;#ä»åº“-1&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h5&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;mysql&amp;gt; show processlist;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;+----+-------------+-----------+------+---------+------+--------------------------------------------------------+------------------+&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;| Id | User        | Host      | db   | Command | Time | State                                                  | Info             |&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;+----+-------------+-----------+------+---------+------+--------------------------------------------------------+------------------+&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;|  2 | root        | localhost | NULL | Query   |    0 | starting                                               | show processlist |&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;|  3 | system user |           | NULL | Connect |  584 | Waiting for master to send event                       | NULL             |&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;|  4 | system user |           | NULL | Connect |  135 | Slave has read all relay log; waiting for more updates | NULL             |&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;+----+-------------+-----------+------+---------+------+--------------------------------------------------------+------------------+&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;3 rows in set (0.00 sec)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;ä¸»ä»å¤åˆ¶ä¹‹è¿‡æ»¤å¤åˆ¶&lt;a href=&quot;#ä¸»ä»å¤åˆ¶ä¹‹è¿‡æ»¤å¤åˆ¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;å½“ä¸»åº“ä¸Šå­˜åœ¨å¤šä¸ªdatabaseï¼Œä½†ä»åº“åªéœ€è¦åŒæ­¥ä¸€éƒ¨åˆ†çš„è¯å°±éœ€è¦ç”¨åˆ°MySQLçš„å¤åˆ¶è¿‡æ»¤åŠŸèƒ½ã€‚&lt;br /&gt;
æ¯”å¦‚ä¸€ä¸ªä¸»åº“æ‰¿è½½å¤šä¸ªä¸šåŠ¡æ•°æ®åº“ï¼Œéœ€è¦å°†ä¸åŒä¸šåŠ¡æ•°æ®åº“å¤åˆ¶åˆ°ä¸åŒçš„ä»åº“è¿›è¡ŒæŸ¥è¯¢ä»¥åšåˆ°ä¸šåŠ¡éš”ç¦»çš„åœºæ™¯ã€‚&lt;br /&gt;
é€šè¿‡è¿‡æ»¤å¤åˆ¶å¯ä»¥çµæ´»çš„æŒ‡å®šå“ªäº›åº“å’Œè¡¨éœ€è¦å¤åˆ¶ï¼Œå“ªäº›åº“ä¸éœ€è¦åŒæ­¥ã€‚&lt;br /&gt;
é€šå¸¸åœ¨ä»æœåŠ¡å™¨ä¸Šé…ç½®è¿‡æ»¤å¤åˆ¶ï¼Œå¯ä»¥å‡è½»ä¸»åº“çš„è´Ÿè½½ã€‚&lt;/p&gt;&lt;section&gt;&lt;h3&gt;å¦‚ä½•é…ç½®è¿‡æ»¤å¤åˆ¶&lt;a href=&quot;#å¦‚ä½•é…ç½®è¿‡æ»¤å¤åˆ¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;ä¿®æ”¹slaveå®ä¾‹é…ç½®ï¼Œä½¿ç”¨å¦‚ä¸‹å‚æ•°ï¼š&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;replicate_do_dbï¼šæ•°æ®åº“ç™½åå•åˆ—è¡¨ï¼Œå¤šä¸ªæ•°æ®åº“ç”¨é€—å·åˆ†éš”ï¼Œè¯¥é€‰é¡¹æŒ‡å®šçš„æ•°æ®åº“ä¼šæ‰§è¡Œä¸»ä»å¤åˆ¶æ“ä½œ&lt;/li&gt;
&lt;li&gt;replicate_ignore_dbï¼šæ•°æ®åº“é»‘åå•åˆ—è¡¨ï¼Œè¯¥é€‰é¡¹æŒ‡å®šçš„æ•°æ®åº“å°†ä¸ä¼šè¢«å¤åˆ¶&lt;/li&gt;
&lt;li&gt;replicate_do_tableï¼šè¡¨çº§åˆ«çš„ç™½åå•&lt;/li&gt;
&lt;li&gt;replicate_ignore_tableï¼šè¡¨çº§åˆ«çš„é»‘åå•&lt;/li&gt;
&lt;li&gt;replicate_wild_do_tableï¼šå¯ä»¥ä½¿ç”¨é€šé…ç¬¦è¿›è¡ŒæŒ‡å®šç™½åå•è¡¨ï¼Œå¦‚%ä»£è¡¨æ‰€æœ‰&lt;/li&gt;
&lt;li&gt;replicate_wild_ignore_tableï¼šå¯ä»¥ä½¿ç”¨é€šé…ç¬¦è¿›è¡ŒæŒ‡å®šé»‘åå•è¡¨ï¼Œå¦‚%ä»£è¡¨æ‰€æœ‰&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;é€šè¿‡ä¿®æ”¹é…ç½®æ–‡ä»¶&lt;a href=&quot;#é€šè¿‡ä¿®æ”¹é…ç½®æ–‡ä»¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[mysqld]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;port=3306&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;user=mysql&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;basedir=/opt/mysql&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;datadir=/mysql_data/mysql_3306&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;socket=/tmp/mysql.sock&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;server_id=52&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;replicate_do_db=test_db&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[mysql]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;socket=/tmp/mysql.sock&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;çƒ­é…ç½®&lt;a href=&quot;#çƒ­é…ç½®&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;mysql &lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;stop&lt;/span&gt;&lt;span&gt; slave sql_thread;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;mysql &lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt; change replication &lt;/span&gt;&lt;/span&gt;&lt;span&gt;filter&lt;/span&gt;&lt;span&gt;&lt;span&gt; replicate_do_db&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;(test_db)&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;mysql &lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;start&lt;/span&gt;&lt;span&gt; slave sql_thread;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;æ£€æŸ¥ä»åº“çŠ¶æ€&lt;a href=&quot;#æ£€æŸ¥ä»åº“çŠ¶æ€&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;mysql&amp;gt; show slave status\G;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;*&lt;/span&gt;&lt;span&gt;**************************&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1. row ***************************&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;               &lt;/span&gt;&lt;span&gt;Slave_IO_State&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Waiting for master to send event&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;                  &lt;/span&gt;&lt;span&gt;Master_Host&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;172.16.1.51&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;                  &lt;/span&gt;&lt;span&gt;Master_User&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;repl&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;                  &lt;/span&gt;&lt;span&gt;Master_Port&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;3306&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;                &lt;/span&gt;&lt;span&gt;Connect_Retry&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;10&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;Master_Log_File&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;db51-bin.000001&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;Read_Master_Log_Pos&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;3748&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;               &lt;/span&gt;&lt;span&gt;Relay_Log_File&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;db-52-relay-bin.000005&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;                &lt;/span&gt;&lt;span&gt;Relay_Log_Pos&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;841&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;Relay_Master_Log_File&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;db51-bin.000001&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;             &lt;/span&gt;&lt;span&gt;Slave_IO_Running&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Yes&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;Slave_SQL_Running&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;Yes&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;Replicate_Do_DB&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;test_db&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;Replicate_Ignore_DB&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;           &lt;/span&gt;&lt;span&gt;Replicate_Do_Table&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;       &lt;/span&gt;&lt;span&gt;Replicate_Ignore_Table&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;Replicate_Wild_Do_Table&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;Replicate_Wild_Ignore_Table&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;                   &lt;/span&gt;&lt;span&gt;Last_Errno&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;                   &lt;/span&gt;&lt;span&gt;Last_Error&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;                 &lt;/span&gt;&lt;span&gt;Skip_Counter&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;Exec_Master_Log_Pos&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;3748&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;å¯ä»¥å‘ç°åœ¨Replicate_Do_DBå­—æ®µä¸­æŒ‡å®šäº†è¦å¤åˆ¶çš„æ•°æ®åº“ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;åŸºäºGTIDçš„ä¸»ä»å¤åˆ¶&lt;a href=&quot;#åŸºäºgtidçš„ä¸»ä»å¤åˆ¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;GTIDå¤åˆ¶åŸç†æµç¨‹&lt;a href=&quot;#gtidå¤åˆ¶åŸç†æµç¨‹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;masterè¿›è¡Œæ•°æ®æ›´æ–°æ—¶ï¼Œåœ¨äº‹åŠ¡å‰äº§ç”ŸGTIDå·ï¼Œä¸€èµ·è®°å½•åˆ°binlogæ—¥å¿—ã€‚&lt;/li&gt;
&lt;li&gt;slaveçš„I/Oçº¿ç¨‹å°†å˜æ›´çš„binlogæ•°æ®ï¼Œå†™å…¥åˆ°æœ¬åœ°ä¸­ç»§æ—¥å¿—relay_log&lt;/li&gt;
&lt;li&gt;slaveçš„SQLçº¿ç¨‹ä»ä¸­ç»§æ—¥å¿—ä¸­è·å–GTIDå·ï¼Œå’Œæœ¬åœ°çš„binlogå¯¹æ¯”æŸ¥çœ‹æ˜¯å¦æœ‰è®°å½•ï¼Œå¦‚æœæœ‰è®°å½•ï¼Œè¯´æ˜è¯¥GTIDäº‹åŠ¡å·²æ‰§è¡Œï¼Œslaveæ•°æ®åº“ä¼šå¿½ç•¥ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœæ²¡æœ‰è®°å½•ï¼Œslaveæ•°æ®åº“ä»relay_logä¸­ç»§æ—¥å¿—ä¸­è·å–æ•°æ®ï¼Œä¸”æ‰§è¡Œè¯¥GTIDçš„äº‹åŠ¡ï¼Œè®°å½•åˆ°binlogä¸­&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;å€ŸåŠ©GTIDï¼Œåœ¨å‘ç”Ÿä¸»å¤‡åˆ‡æ¢çš„æƒ…å†µä¸‹ï¼ŒMySQLçš„å…¶å®ƒä»åº“å¯ä»¥è‡ªåŠ¨åœ¨æ–°ä¸»åº“ä¸Šæ‰¾åˆ°æ­£ç¡®çš„å¤åˆ¶ä½ç½®ï¼Œè¿™å¤§å¤§ç®€åŒ–äº†å¤æ‚é›†ç¾¤çš„ç»´æŠ¤ï¼Œä¹Ÿå‡å°‘äº†äººä¸ºè®¾ç½®å¤åˆ¶ä½ç½®å‘ç”Ÿè¯¯æ“ä½œçš„é£é™©ã€‚&lt;br /&gt;
å¦å¤–ï¼ŒåŸºäºGTIDçš„å¤åˆ¶å¯ä»¥å¿½ç•¥å·²ç»æ‰§è¡Œè¿‡çš„äº‹åŠ¡ï¼Œå‡å°‘äº†æ•°æ®å‘ç”Ÿä¸ä¸€è‡´çš„é£é™©ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;é…ç½®GTIDä¸»ä»å¤åˆ¶&lt;a href=&quot;#é…ç½®gtidä¸»ä»å¤åˆ¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;æ³¨æ„ï¼šå¦‚æœè¦ä½¿ç”¨åŸºäºGTIDçš„ä¸»ä»å¤åˆ¶ï¼Œåˆ™æœåŠ¡å™¨é›†ç¾¤ä¸­çš„æ‰€æœ‰ä¸»æœºéƒ½è¦å¼€å¯GTIDï¼Œä¸èƒ½æ··ç”¨ã€‚&lt;/p&gt;&lt;section&gt;&lt;h4&gt;ä¿®æ”¹é…ç½®æ–‡ä»¶&lt;a href=&quot;#ä¿®æ”¹é…ç½®æ–‡ä»¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;masteré…ç½®æ–‡ä»¶ï¼š&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[mysqld]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;port&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;3306&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;user&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;mysql&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;basedir&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;/opt/mysql&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;datadir&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;/mysql_data/mysql_3306&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;server_id&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;51&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;log_bin&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;/mysql_data/binlog/db51-bin&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;socket&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;/tmp/mysql.sock&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;autocommit&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;binlog_format&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;row&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;gtid-mode&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;on&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;enforce-gtid-consistency&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;log-slave-updates&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[mysql]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;socket&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;/tmp/mysql.sock&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;slaveé…ç½®æ–‡ä»¶&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[mysqld]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;port&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;3306&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;user&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;mysql&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;basedir&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;/opt/mysql&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;datadir&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;/mysql_data/mysql_3306&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;socket&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;/tmp/mysql.sock&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;server_id&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;52&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;autocommit&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;gtid-mode&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;on&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;enforce-gtid-consistency&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;log-slave-updates&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[mysql]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;socket&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;/tmp/mysql.sock&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;å¼€å¯åŸºäºGTIDçš„ä¸»ä»å¤åˆ¶ï¼š&lt;a href=&quot;#å¼€å¯åŸºäºgtidçš„ä¸»ä»å¤åˆ¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;åœ¨slaveä¸Šï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;change &lt;/span&gt;&lt;span&gt;master&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;to&lt;/span&gt;&lt;span&gt;&lt;span&gt; master_host&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&apos;172.16.1.51&apos;&lt;/span&gt;&lt;span&gt;&lt;span&gt;, master_user&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&apos;repl&apos;&lt;/span&gt;&lt;span&gt;&lt;span&gt;, master_password&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&apos;123456&apos;&lt;/span&gt;&lt;span&gt;&lt;span&gt;, MASTER_AUTO_POSITION&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;æŸ¥çœ‹å¤åˆ¶æ˜¯å¦ä¸€è‡´&lt;a href=&quot;#æŸ¥çœ‹å¤åˆ¶æ˜¯å¦ä¸€è‡´&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;masterçŠ¶æ€ï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;mysql&amp;gt; show master status;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;+-----------------+----------+--------------+------------------+------------------------------------------+&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;| File            | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set                        |&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;+-----------------+----------+--------------+------------------+------------------------------------------+&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;| db51-bin.000002 |     2726 |              |                  | 3ecf8cda-3f30-11ee-b128-000c29948844:1-8 |&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;+-----------------+----------+--------------+------------------+------------------------------------------+&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;1 row in set (0.00 sec)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;slaveçŠ¶æ€ï¼š&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;mysql&amp;gt; show slave status \G;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;*************************** 1. row ***************************&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;               &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Slave_IO_State: Waiting for master to send event&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;                  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Master_Host: 172.16.1.51&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;                  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Master_User: repl&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;                  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Master_Port: 3306&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;                &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Connect_Retry: 60&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;              &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Master_Log_File: db51-bin.000002&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;          &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Read_Master_Log_Pos: 2726&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;               &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Relay_Log_File: db-52-relay-bin.000003&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;                &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Relay_Log_Pos: 1090&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Relay_Master_Log_File: db51-bin.000002&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;             &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Slave_IO_Running: Yes&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Slave_SQL_Running: Yes&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;              &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Replicate_Do_DB:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;          &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Replicate_Ignore_DB:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;           &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Replicate_Do_Table:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;       &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Replicate_Ignore_Table:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Replicate_Wild_Do_Table:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Replicate_Wild_Ignore_Table:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;                   &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Last_Errno: 0&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;                   &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Last_Error:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;                 &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Skip_Counter: 0&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;          &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Exec_Master_Log_Pos: 2726&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;              &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Relay_Log_Space: 3441&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;              &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Until_Condition: None&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;27&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;               &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Until_Log_File:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;28&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;                &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Until_Log_Pos: 0&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;29&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;           &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Master_SSL_Allowed: No&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;30&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;           &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Master_SSL_CA_File:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;31&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;           &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Master_SSL_CA_Path:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;32&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;              &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Master_SSL_Cert:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;33&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Master_SSL_Cipher:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;34&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;               &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Master_SSL_Key:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;35&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Seconds_Behind_Master: 0&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;36&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Master_SSL_Verify_Server_Cert: No&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;37&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;                &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Last_IO_Errno: 0&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;38&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;                &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Last_IO_Error:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;39&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;               &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Last_SQL_Errno: 0&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;40&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;               &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Last_SQL_Error:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;41&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Replicate_Ignore_Server_Ids:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;42&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;             &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Master_Server_Id: 51&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;43&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;                  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Master_UUID: 3ecf8cda-3f30-11ee-b128-000c29948844&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;44&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;             &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Master_Info_File: /mysql_data/mysql_3306/master.info&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;45&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;                    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;SQL_Delay: 0&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;46&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;          &lt;/span&gt;&lt;/span&gt;&lt;span&gt;SQL_Remaining_Delay: NULL&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;47&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Slave_SQL_Running_State: Slave has read all relay log; waiting for more updates&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;48&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;           &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Master_Retry_Count: 86400&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;49&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;                  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Master_Bind:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;50&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Last_IO_Error_Timestamp:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;51&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;     &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Last_SQL_Error_Timestamp:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;52&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;               &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Master_SSL_Crl:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;53&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;           &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Master_SSL_Crlpath:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;54&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;           &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Retrieved_Gtid_Set: 3ecf8cda-3f30-11ee-b128-000c29948844:1-8&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;55&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Executed_Gtid_Set: 3ecf8cda-3f30-11ee-b128-000c29948844:1-8&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;56&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;                &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Auto_Position: 1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;57&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;         &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Replicate_Rewrite_DB:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;58&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;                 &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Channel_Name:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;59&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;           &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Master_TLS_Version:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;60&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;1 row in set (0.00 sec)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;å¯ä»¥çœ‹åˆ°ç›®å‰æ¥æ”¶åˆ°çš„å’Œå·²ç»æ‰§è¡Œäº†çš„GTIDäº‹åŠ¡è®°å½•ï¼Œå¹¶ä¸”ä¸»ä»åº“çš„gtidæ˜¯ä¸€è‡´çš„ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥åˆ¤å®šä¸¤è€…çš„æ•°æ®æ˜¯åŒæ­¥çš„ã€‚&lt;/p&gt;&lt;p&gt;&lt;strong&gt;æ³¨æ„&lt;/strong&gt;&lt;br /&gt;
ç”±äºåœ¨é…ç½®æ–‡ä»¶ä¸­å…³é—­äº†è‡ªåŠ¨æäº¤ï¼Œå› æ­¤éƒ¨åˆ†æ“ä½œ(æ¯”å¦‚å‘è¡¨ä¸­æ’å…¥æ•°æ®)å¿…é¡»è¦ä½¿ç”¨æ˜¾ç¤ºäº‹åŠ¡æäº¤çš„æ–¹å¼æ‰å¯ä»¥è®©gtidè®°å½•æ­£å¸¸å¢é•¿ï¼›&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;</content:encoded></item><item><title>MySQLå¤‡ä»½</title><link>https://white-festa.net/posts/mysql-backups/</link><guid isPermaLink="true">https://white-festa.net/posts/mysql-backups/</guid><description>å¦‚ä½•é€šè¿‡Binlogå’ŒGTIDå®ç°æ•°æ®å¤‡ä»½å’Œè¿˜åŸ</description><pubDate>Wed, 21 Dec 2022 00:00:00 GMT</pubDate><content:encoded>&lt;section&gt;&lt;h2&gt;Binlogæ—¥å¿—&lt;a href=&quot;#binlogæ—¥å¿—&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Binlogæ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶æ ¼å¼çš„æ–‡ä»¶ï¼Œç”¨äºè®°å½•ç”¨æˆ·å¯¹æ•°æ®åº“æ›´æ–°çš„SQLè¯­å¥ä¿¡æ¯ã€‚&lt;br /&gt;
ä¾‹å¦‚,æ›´æ”¹æ•°æ®åº“åº“è¡¨å’Œæ›´æ”¹è¡¨å†…å®¹çš„SQLè¯­å¥éƒ½ä¼šè®°å½•åˆ°binlogé‡Œï¼Œä½†æ˜¯å¯¹åº“è¡¨ç­‰å†…å®¹çš„æŸ¥è¯¢åˆ™ä¸ä¼šè®°å½•åˆ°æ—¥å¿—ä¸­ã€‚&lt;br /&gt;
Binlogè®°å½•çš„è¯­å¥ç±»å‹ï¼š&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;DMLï¼šinsert update delete&lt;/li&gt;
&lt;li&gt;DDLï¼šcreate drop alter    truncate&lt;/li&gt;
&lt;li&gt;DCLï¼šgrant revoke&lt;/li&gt;
&lt;/ul&gt;&lt;section&gt;&lt;h3&gt;æŸ¥çœ‹MySQLæ˜¯å¦å¼€å¯çš„BinlogåŠŸèƒ½&lt;a href=&quot;#æŸ¥çœ‹mysqlæ˜¯å¦å¼€å¯çš„binlogåŠŸèƒ½&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;ç™»å½•æ•°æ®åº“åï¼ŒæŸ¥çœ‹binlogç›¸å…³å‚æ•°ï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;mysql&amp;gt; show variables like &apos;%log_bin%&apos;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;+---------------------------------+-------+&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;| Variable_name                   | Value |&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;+---------------------------------+-------+&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;| log_bin                         | OFF   |&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;| log_bin_basename                |       |&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;| log_bin_index                   |       |&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;| log_bin_trust_function_creators | OFF   |&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;| log_bin_use_v1_row_events       | OFF   |&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;| sql_log_bin                     | ON    |&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;+---------------------------------+-------+&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;6 rows in set (0.00 sec)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;å¯ä»¥çœ‹åˆ°ç›®å‰binlogæ˜¯å…³é—­çŠ¶æ€çš„ï¼›åœ¨æ­¤çŠ¶æ€ä¸‹ï¼Œå¯¹æ•°æ®åº“çš„ä»»ä½•æ“ä½œéƒ½ä¸ä¼šè¢«è®°å½•ï¼Œæ‰€æœ‰çš„å¤‡ä»½åŠŸèƒ½éƒ½ä¾èµ–äºç”¨æˆ·ä½¿ç”¨&lt;code&gt;mysqldump&lt;/code&gt;å‘½ä»¤è¿›è¡Œæ‰‹åŠ¨å¤‡ä»½ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;å¼€å¯binlogåŠŸèƒ½&lt;a href=&quot;#å¼€å¯binlogåŠŸèƒ½&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;éœ€è¦ä¿®æ”¹MySQLé…ç½®æ–‡ä»¶&lt;code&gt;/etc/my.cnf&lt;/code&gt;æ¥å®ç°ï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[mysqld]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;server_id=52 #ä¸»æœºIDï¼Œå”¯ä¸€&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;log_bin=/mysql_data/bin_log/mysql-bin #binlogæ—¥å¿—æ–‡ä»¶è·¯å¾„ï¼Œæœ€åbinlogæ—¥å¿—çš„æ–‡ä»¶åæ˜¯mysql-bin.000001&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;character_set_server=utf8mb4&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;port=3306&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;user=mysql&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;basedir=/opt/mysql&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;datadir=/mysql_data/mysql_3306&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;socket=/tmp/mysql.sock&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[mysql]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;socket=/tmp/mysql.sock&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;é‡å¯mysqldåï¼Œå†é€šè¿‡&lt;code&gt;show variables like &apos;%log_bin%&apos;;&lt;/code&gt;æŸ¥çœ‹ï¼Œå¯ä»¥å‘ç°log_binå·²ç»æ˜¯å¼€å¯çŠ¶æ€ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;binlogå¸¸ç”¨å‘½ä»¤&lt;a href=&quot;#binlogå¸¸ç”¨å‘½ä»¤&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;section&gt;&lt;h4&gt;æŸ¥çœ‹binlogæ—¥å¿—æ–‡ä»¶ä¿¡æ¯&lt;a href=&quot;#æŸ¥çœ‹binlogæ—¥å¿—æ–‡ä»¶ä¿¡æ¯&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;è¯¥å‘½ä»¤ä¼šæ˜¾ç¤ºbinlogçš„æ—¥å¿—åˆ—è¡¨å’Œæ¯ä¸ªæ—¥å¿—çš„æ–‡ä»¶å¤§å°ã€‚&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;show &lt;/span&gt;&lt;span&gt;binary&lt;/span&gt;&lt;span&gt; logs;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;åˆ·æ–°æ–°æ—¥å¿—æ–‡ä»¶&lt;a href=&quot;#åˆ·æ–°æ–°æ—¥å¿—æ–‡ä»¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;æ¯æ¬¡æ‰§è¡Œè¯¥å‘½ä»¤ï¼Œå½“å‰æ­£åœ¨ä½¿ç”¨çš„binlogæ—¥å¿—ä¼šè¢«ç»ˆæ­¢ä½¿ç”¨ï¼Œå¹¶æ–°å»ºä¸€ä¸ªbinlogæ—¥å¿—ç”¨äºæ–°çš„è®°å½•ã€‚&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;flush logs;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;æŸ¥çœ‹å½“å‰æ­£åœ¨ä½¿ç”¨çš„æ—¥å¿—åŠå…¶ç›¸å…³ä¿¡æ¯&lt;a href=&quot;#æŸ¥çœ‹å½“å‰æ­£åœ¨ä½¿ç”¨çš„æ—¥å¿—åŠå…¶ç›¸å…³ä¿¡æ¯&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;show &lt;/span&gt;&lt;span&gt;master&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;status&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;æŸ¥çœ‹æ—¥å¿—çš„è®°å½•å†…å®¹(äº‹ä»¶)&lt;a href=&quot;#æŸ¥çœ‹æ—¥å¿—çš„è®°å½•å†…å®¹äº‹ä»¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;show binlog events &lt;/span&gt;&lt;span&gt;in&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;binlogæ–‡ä»¶å&apos;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;ä¾‹å¦‚ï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;mysql&amp;gt; mysql&amp;gt; show binlog events in &apos;mysql-bin.000001&apos;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;+------------------+-----+----------------+-----------+-------------+---------------------------------------+&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;| Log_name         | Pos | Event_type     | Server_id | End_log_pos | Info                                  |&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;+------------------+-----+----------------+-----------+-------------+---------------------------------------+&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;| mysql-bin.000001 |   4 | Format_desc    |        52 |         123 | Server ver: 5.7.28-log, Binlog ver: 4 |&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;| mysql-bin.000001 | 123 | Previous_gtids |        52 |         154 |                                       |&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;| mysql-bin.000001 | 154 | Anonymous_Gtid |        52 |         219 | SET @@SESSION.GTID_NEXT= &apos;ANONYMOUS&apos;  |&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;| mysql-bin.000001 | 219 | Query          |        52 |         322 | create database test_db               |&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;+------------------+-----+----------------+-----------+-------------+---------------------------------------+&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;4 rows in set (0.00 sec)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;å¯ä»¥çœ‹åˆ°ä¸€ä¸ªåˆ›å»ºæ•°æ®åº“çš„æ“ä½œè¢«è®°å½•äº†ä¸‹æ¥ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;è§£ç binlogæ—¥å¿—&lt;a href=&quot;#è§£ç binlogæ—¥å¿—&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;ç”±äºbinlogæ˜¯äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬æ˜¯ä¸èƒ½ç›´æ¥æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶çš„ï¼›MySQLæä¾›äº†&lt;code&gt;mysqlbinlog&lt;/code&gt;å‘½ä»¤ï¼Œå¯ä»¥å¯¹æ—¥å¿—æ–‡ä»¶è¿›è¡Œè§£ç ä¾›ç”¨æˆ·é˜…è¯»ã€‚&lt;br /&gt;&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;mysqlbinlog mysql-bin.000001&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;å®è·µï¼šæ¨¡æ‹Ÿä½¿ç”¨binlogè¿›è¡Œæ•°æ®æ¢å¤&lt;a href=&quot;#å®è·µæ¨¡æ‹Ÿä½¿ç”¨binlogè¿›è¡Œæ•°æ®æ¢å¤&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;section&gt;&lt;h4&gt;åˆ›å»ºæµ‹è¯•æ•°æ®&lt;a href=&quot;#åˆ›å»ºæµ‹è¯•æ•°æ®&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;CREATE&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;TABLE&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;USER&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;id &lt;/span&gt;&lt;span&gt;INT&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;11&lt;/span&gt;&lt;span&gt;) &lt;/span&gt;&lt;span&gt;NOT NULL&lt;/span&gt;&lt;span&gt; auto_increment comment &lt;/span&gt;&lt;span&gt;&apos;id&apos;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;VARCHAR&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;20&lt;/span&gt;&lt;span&gt;) &lt;/span&gt;&lt;span&gt;NOT NULL&lt;/span&gt;&lt;span&gt; comment &lt;/span&gt;&lt;span&gt;&apos;name&apos;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;age &lt;/span&gt;&lt;span&gt;TINYINT&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;) &lt;/span&gt;&lt;span&gt;NOT NULL&lt;/span&gt;&lt;span&gt; comment &lt;/span&gt;&lt;span&gt;&apos;age&apos;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;primary key&lt;/span&gt;&lt;span&gt; (id)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;)engine&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;innodb &lt;/span&gt;&lt;/span&gt;&lt;span&gt;default&lt;/span&gt;&lt;span&gt;&lt;span&gt; charset&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;utf8mb4;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;INSERT INTO&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;test_db&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;USER&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;, age) &lt;/span&gt;&lt;span&gt;VALUES&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&apos;Mike&apos;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;21&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;INSERT INTO&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;test_db&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;USER&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;, age) &lt;/span&gt;&lt;span&gt;VALUES&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&apos;Lee&apos;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;18&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;INSERT INTO&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;test_db&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;USER&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;, age) &lt;/span&gt;&lt;span&gt;VALUES&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&apos;John&apos;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;30&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;INSERT INTO&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;test_db&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;USER&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;, age) &lt;/span&gt;&lt;span&gt;VALUES&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&apos;Sarah&apos;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;19&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;INSERT INTO&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;test_db&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;USER&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;, age) &lt;/span&gt;&lt;span&gt;VALUES&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&apos;Bob&apos;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;22&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;æ¨¡æ‹Ÿï¼šæ•°æ®åº“è¯¯åˆ é™¤&lt;a href=&quot;#æ¨¡æ‹Ÿæ•°æ®åº“è¯¯åˆ é™¤&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;æŸ¥çœ‹binlogæ—¥å¿—çš„èµ·ç‚¹å’Œç»ˆç‚¹poså€¼&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;show binlog events &lt;/span&gt;&lt;span&gt;in&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;mysql-bin.000001&apos;&lt;/span&gt;&lt;span&gt;ï¼›&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;èµ·ç‚¹ï¼š154ï¼›ç»ˆç‚¹ï¼š2122&lt;/p&gt;&lt;p&gt;ä½¿ç”¨&lt;code&gt;mysqlbinlog&lt;/code&gt;å‘½ä»¤ï¼Œå°†è¿™æ®µçš„è®°å½•å¯¼å‡º&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;mysqlbinlog&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--start-position=154&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--stop-position=2223&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/mysql_data/bin_log/mysql-bin.000001&lt;/span&gt;&lt;span&gt; &amp;gt; &lt;/span&gt;&lt;span&gt;~/restore.sql&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;ç™»å½•MySQLæ•°æ®åº“ï¼Œä¸´æ—¶å…³é—­binlogåŠŸèƒ½ï¼Œé˜²æ­¢æ•°æ®æ¢å¤æ—¶é‡å¤å†™å…¥è®°å½•ã€‚&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;set&lt;/span&gt;&lt;span&gt;&lt;span&gt; sql_log_bin&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;ä½¿ç”¨&lt;code&gt;source&lt;/code&gt;å‘½ä»¤å°†sqlæ–‡ä»¶é‡æ–°å†™å…¥&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;source /&lt;/span&gt;&lt;span&gt;root&lt;/span&gt;&lt;span&gt;/&lt;/span&gt;&lt;span&gt;restore&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;sql&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;æœ€åé‡æ–°å¼€å¯binlog &lt;code&gt;set sql_log_bin=0;&lt;/code&gt;&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;è·¨æ—¥å¿—æ–‡ä»¶æ¢å¤æ•°æ®&lt;a href=&quot;#è·¨æ—¥å¿—æ–‡ä»¶æ¢å¤æ•°æ®&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;å‡å¦‚æœ‰5ä¸ªbinlogæ—¥å¿—æ–‡ä»¶ï¼Œä»mysql-bin.000001åˆ°mysql-bin.000005ï¼Œå…¶ä¸­è¢«åˆ é™¤çš„æ—¥å¿—çš„èµ·å§‹posä¸ºmysql-bin.000001çš„225ï¼Œç»ˆæ­¢posä¸ºmysql-bin.000005çš„1779ã€‚&lt;br /&gt;
é‚£ä¹ˆå…¶å®å›å¤æ–¹æ³•æ˜¯ä¸€æ ·çš„:&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;mysqlbinlog --start-position=225 --stop-position=1779 mysql-bin.000001 mysql-bin.000002 mysql-bin.000003 mysql-bin.000004 mysql-bin.000005 mysql-bin.000006 &amp;gt; /root/restore.sql&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;mysqlbinlog&lt;/code&gt;å‘½ä»¤åœ¨å¤„ç†å¤šä¸ªæ—¥å¿—æ–‡ä»¶æ—¶ä¼šé»˜è®¤åº”ç”¨startPosçš„å€¼ä¸ºç¬¬ä¸€ä¸ªæ—¥å¿—æ–‡ä»¶ï¼ŒstopPosçš„å€¼ä¸ºæœ€åä¸€ä¸ªæ—¥å¿—æ–‡ä»¶ã€‚&lt;br /&gt;
æœ€ååœ¨æ•°æ®åº“ä¸­sourceè¿™ä¸ªsqlæ–‡ä»¶å°±å¯ä»¥å®Œæˆæ•°æ®æ¢å¤äº†ï¼›ä¸è¦å¿˜è®°åœ¨æ¢å¤å‰ä¸´æ—¶å…³é—­binlogè®°å½•åŠŸèƒ½ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;åŸºäºGTIDçš„binlog&lt;a href=&quot;#åŸºäºgtidçš„binlog&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;ä»€ä¹ˆæ˜¯åŸºäºGTIDçš„binlog&lt;a href=&quot;#ä»€ä¹ˆæ˜¯åŸºäºgtidçš„binlog&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;GTIDæ˜¯ä» MySQL 5.6.5 å¼€å§‹æ–°å¢çš„å¤åˆ¶æ–¹å¼ï¼Œé€šè¿‡ GTID ä¿è¯äº†æ¯ä¸ªåœ¨ä¸»åº“ä¸Šæäº¤çš„äº‹åŠ¡åœ¨é›†ç¾¤ä¸­æœ‰ä¸€ä¸ªå”¯ä¸€çš„IDï¼›è¿™ç§æ–¹å¼å¼ºåŒ–äº†æ•°æ®åº“çš„ä¸»å¤‡ä¸€è‡´æ€§ï¼Œæ•…éšœæ¢å¤ä»¥åŠå®¹é”™èƒ½åŠ›ã€‚&lt;br /&gt;&lt;/p&gt;&lt;p&gt;åœ¨åŸæ¥åŸºäºäºŒè¿›åˆ¶æ—¥å¿—çš„å¤åˆ¶ä¸­ï¼Œä»åº“éœ€è¦å‘ŠçŸ¥ä¸»åº“è¦ä»å“ªä¸ªåç§»é‡poså€¼è¿›è¡Œå¢é‡åŒæ­¥ï¼Œå¦‚æœæŒ‡å®šé”™è¯¯ä¼šé€ æˆæ•°æ®çš„é—æ¼ï¼Œä»è€Œé€ æˆæ•°æ®çš„ä¸ä¸€è‡´ï¼›å€ŸåŠ©GTIDï¼Œåœ¨å‘ç”Ÿä¸»å¤‡åˆ‡æ¢çš„æƒ…å†µä¸‹ï¼ŒMySQLçš„å…¶å®ƒä»åº“å¯ä»¥è‡ªåŠ¨åœ¨æ–°ä¸»åº“ä¸Šæ‰¾åˆ°æ­£ç¡®çš„å¤åˆ¶ä½ç½®ï¼Œè¿™å¤§å¤§ç®€åŒ–äº†å¤æ‚å¤åˆ¶æ‹“æ‰‘ä¸‹é›†ç¾¤çš„ç»´æŠ¤ï¼Œä¹Ÿå‡å°‘äº†äººä¸ºè®¾ç½®å¤åˆ¶ä½ç½®å‘ç”Ÿè¯¯æ“ä½œçš„é£é™©ã€‚&lt;br /&gt;&lt;/p&gt;&lt;p&gt;å¦å¤–ï¼ŒåŸºäºGTIDçš„å¤åˆ¶å¯ä»¥å¿½ç•¥å·²ç»æ‰§è¡Œè¿‡çš„äº‹åŠ¡ï¼Œå‡å°‘äº†æ•°æ®å‘ç”Ÿä¸ä¸€è‡´çš„é£é™©ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;ä»€ä¹ˆæ˜¯äº‹åŠ¡&lt;a href=&quot;#ä»€ä¹ˆæ˜¯äº‹åŠ¡&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;äº‹åŠ¡æ˜¯ç”¨äºå¤„ç†æ“ä½œé‡è¾ƒå¤§çš„æ“ä½œã€‚&lt;/p&gt;&lt;section&gt;&lt;h4&gt;ç‰¹æ€§&lt;a href=&quot;#ç‰¹æ€§&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;åŸå­æ€§ï¼šä¸€ä¸ªäº‹åŠ¡ï¼ˆtransactionï¼‰ä¸­çš„æ‰€æœ‰æ“ä½œï¼Œè¦ä¹ˆå…¨éƒ¨å®Œæˆï¼Œè¦ä¹ˆå…¨éƒ¨ä¸å®Œæˆï¼Œä¸ä¼šç»“æŸåœ¨ä¸­é—´æŸä¸ªç¯èŠ‚ã€‚äº‹åŠ¡åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼Œä¼šè¢«å›æ»šï¼ˆRollbackï¼‰åˆ°äº‹åŠ¡å¼€å§‹å‰çš„çŠ¶æ€ï¼Œå°±åƒè¿™ä¸ªäº‹åŠ¡ä»æ¥æ²¡æœ‰æ‰§è¡Œè¿‡ä¸€æ ·ã€‚&lt;/li&gt;
&lt;li&gt;ä¸€è‡´æ€§ï¼šåœ¨äº‹åŠ¡å¼€å§‹ä¹‹å‰å’Œäº‹åŠ¡ç»“æŸä»¥åï¼Œæ•°æ®åº“çš„å®Œæ•´æ€§æ²¡æœ‰è¢«ç ´åã€‚&lt;/li&gt;
&lt;li&gt;éš”ç¦»æ€§ï¼šæ•°æ®åº“å…è®¸å¤šä¸ªå¹¶å‘äº‹åŠ¡åŒæ—¶å¯¹å…¶æ•°æ®è¿›è¡Œè¯»å†™å’Œä¿®æ”¹çš„èƒ½åŠ›ï¼Œéš”ç¦»æ€§å¯ä»¥é˜²æ­¢å¤šä¸ªäº‹åŠ¡å¹¶å‘æ‰§è¡Œæ—¶ç”±äºäº¤å‰æ‰§è¡Œè€Œå¯¼è‡´æ•°æ®çš„ä¸ä¸€è‡´ã€‚&lt;/li&gt;
&lt;li&gt;æŒä¹…æ€§ï¼šäº‹åŠ¡å¤„ç†ç»“æŸåï¼Œå¯¹æ•°æ®çš„ä¿®æ”¹å°±æ˜¯æ°¸ä¹…çš„ï¼Œå³ä¾¿ç³»ç»Ÿæ•…éšœä¹Ÿä¸ä¼šä¸¢å¤±ã€‚&lt;br /&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;æ”¯æŒ&lt;a href=&quot;#æ”¯æŒ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;MySQLä¸­åªæœ‰Innodbå¼•æ“çš„æ•°æ®åº“å’Œè¡¨æ‰æ”¯æŒäº‹åŠ¡&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;äº‹åŠ¡ä½œç”¨çš„è¯­å¥&lt;a href=&quot;#äº‹åŠ¡ä½œç”¨çš„è¯­å¥&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;äº‹åŠ¡ç”¨æ¥ç®¡ç† INSERT,UPDATE,DELETE è¯­å¥&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;mysqlé»˜è®¤çš„äº‹åŠ¡è§„åˆ™&lt;a href=&quot;#mysqlé»˜è®¤çš„äº‹åŠ¡è§„åˆ™&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;åœ¨MySQLæ•°æ®åº“ä¸­ï¼Œäº‹åŠ¡é»˜è®¤æ˜¯ä¼šè‡ªåŠ¨æäº¤çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæ²¡æœ‰ç”¨ begin â€¦ commit æ¥æ˜¾å¼æäº¤äº‹åŠ¡çš„è¯ï¼ŒMySQL ä¼šè®¤ä¸ºæ¯ä¸€æ¡SQLè¯­å¥éƒ½æ˜¯ä¸€ä¸ªäº‹åŠ¡ï¼Œä¹Ÿå°±æ˜¯æ¯ä¸€æ¡SQLè¯­å¥éƒ½ä¼šè‡ªåŠ¨æäº¤ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;GTIDçš„ç»„æˆ&lt;a href=&quot;#gtidçš„ç»„æˆ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;GTID (Global Transaction ID) æ˜¯ä¸€ä¸ªå·²æäº¤äº‹åŠ¡çš„ç¼–å·ï¼Œå¹¶ä¸”æ˜¯ä¸€ä¸ªå…¨å±€å”¯ä¸€çš„ç¼–å·ã€‚&lt;br /&gt;
GTIDç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šUUID+TID&lt;br /&gt;&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;UUID æ˜¯ä¸€ä¸ª MySQL å®ä¾‹çš„å”¯ä¸€æ ‡è¯†&lt;/li&gt;
&lt;li&gt;TID ä»£è¡¨äº†è¯¥å®ä¾‹ä¸Šå·²ç»æäº¤çš„äº‹åŠ¡æ•°é‡ï¼Œå¹¶ä¸”éšç€äº‹åŠ¡æäº¤å•è°ƒé€’å¢&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;å¼€å¯GTIDåŠŸèƒ½&lt;a href=&quot;#å¼€å¯gtidåŠŸèƒ½&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;ä¿®æ”¹é…ç½®æ–‡ä»¶&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[mysqld]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;gtid-mode=ON&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;enforce-gtid-consistency=true&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;log-slave-updates=ON&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;åˆ›å»ºä¸€ä¸ªæµ‹è¯•æ•°æ®åº“åï¼Œé€šè¿‡&lt;code&gt;show master status&lt;/code&gt;æŸ¥çœ‹å½“å‰æ—¥å¿—ï¼Œå¯ä»¥å‘ç°&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;mysql&amp;gt; show master status;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;+------------------+----------+--------------+------------------+----------------------------------------+&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;| File             | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set                      |&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;+------------------+----------+--------------+------------------+----------------------------------------+&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;| mysql-bin.000004 |      325 |              |                  | f568445a-3cb2-11ee-b227-000c29da9fe9:1 |&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;+------------------+----------+--------------+------------------+----------------------------------------+&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;1 row in set (0.00 sec)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;Executed_Gtid_Setå­—æ®µä¸å†æ˜¯ç©ºç™½çš„ï¼Œå…¶ä¸­&lt;code&gt;f568445a-3cb2-11ee-b227-000c29da9fe9:1&lt;/code&gt;è¿™ä¸ªå€¼æ­£å¥½çš„&lt;code&gt;uuid:tid&lt;/code&gt;çš„æ ¼å¼ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;äº‹åŠ¡æ§åˆ¶è¯­å¥&lt;a href=&quot;#äº‹åŠ¡æ§åˆ¶è¯­å¥&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;BEGINï¼šæ˜¾ç¤ºå¼€å¯ä¸€ä¸ªäº‹åŠ¡&lt;/li&gt;
&lt;li&gt;COMMITï¼šæäº¤äº‹åŠ¡ï¼Œä½¿ä¿®æ”¹æˆä¸ºæ°¸ä¹…æ€§çš„
ä½¿ç”¨SET AUTOCOMMIT=0/1æ¥ç¦æ­¢æˆ–è€…å¼€å¯è‡ªåŠ¨æäº¤&lt;/li&gt;
&lt;li&gt;Rollbackï¼šå›æ»šï¼Œç»“æŸäº‹åŠ¡å¹¶æ’¤é”€è¯¥äº‹åŠ¡å†…çš„æ‰€æœ‰æ“ä½œ&lt;/li&gt;
&lt;li&gt;SAVEPOINTï¼šè®¾ç½®ä¸€ä¸ªä¿å­˜ç‚¹ï¼Œä¸€ä¸ªäº‹åŠ¡å†…å¯ä»¥æœ‰å¤šä¸ªä¿å­˜ç‚¹&lt;/li&gt;
&lt;li&gt;RELEASE SAVEPOINTï¼šåˆ é™¤ä¿å­˜ç‚¹&lt;/li&gt;
&lt;li&gt;ROLLBACK TOï¼šå›æ»šè‡³æŒ‡å®šä¿å­˜ç‚¹&lt;/li&gt;
&lt;li&gt;SET TRANSACTIONï¼šè®¾å®šäº‹åŠ¡çš„éš”ç¦»çº§åˆ«&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;æ˜¾ç¤ºå¼€å¯ä¸€ä¸ªäº‹åŠ¡ï¼Œå‘t1è¡¨ä¸­æ’å…¥æ•°æ®&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;begin&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;insert into&lt;/span&gt;&lt;span&gt; t1 &lt;/span&gt;&lt;span&gt;values&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;insert into&lt;/span&gt;&lt;span&gt; t1 &lt;/span&gt;&lt;span&gt;values&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;insert into&lt;/span&gt;&lt;span&gt; t1 &lt;/span&gt;&lt;span&gt;values&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;3&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;commit&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;mysql&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt; show binlog events &lt;/span&gt;&lt;/span&gt;&lt;span&gt;in&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;mysql-bin.000004&apos;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;+&lt;/span&gt;&lt;span&gt;------------------+-----+----------------+-----------+-------------+-------------------------------------------------------------------+&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;| Log_name         | Pos | Event_type     | Server_id | End_log_pos | Info                                                              |&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;+&lt;/span&gt;&lt;span&gt;------------------+-----+----------------+-----------+-------------+-------------------------------------------------------------------+&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;| mysql-&lt;/span&gt;&lt;span&gt;bin&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;000004&lt;/span&gt;&lt;span&gt; |   &lt;/span&gt;&lt;span&gt;4&lt;/span&gt;&lt;span&gt; | Format_desc    |        &lt;/span&gt;&lt;span&gt;52&lt;/span&gt;&lt;span&gt; |         &lt;/span&gt;&lt;span&gt;123&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;Server&lt;/span&gt;&lt;span&gt; ver: &lt;/span&gt;&lt;span&gt;5&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;7&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;28&lt;/span&gt;&lt;span&gt;-&lt;/span&gt;&lt;span&gt;log&lt;/span&gt;&lt;span&gt;, Binlog ver: &lt;/span&gt;&lt;span&gt;4&lt;/span&gt;&lt;span&gt;                             |&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;| mysql-&lt;/span&gt;&lt;span&gt;bin&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;000004&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;123&lt;/span&gt;&lt;span&gt; | Previous_gtids |        &lt;/span&gt;&lt;span&gt;52&lt;/span&gt;&lt;span&gt; |         &lt;/span&gt;&lt;span&gt;154&lt;/span&gt;&lt;span&gt; |                                                                   |&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;| mysql-&lt;/span&gt;&lt;span&gt;bin&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;000004&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;154&lt;/span&gt;&lt;span&gt; | Gtid           |        &lt;/span&gt;&lt;span&gt;52&lt;/span&gt;&lt;span&gt; |         &lt;/span&gt;&lt;span&gt;219&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;SET&lt;/span&gt;&lt;span&gt; @@&lt;/span&gt;&lt;span&gt;SESSION&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;GTID_NEXT&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&apos;f568445a-3cb2-11ee-b227-000c29da9fe9:1&apos;&lt;/span&gt;&lt;span&gt; |&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;| mysql-&lt;/span&gt;&lt;span&gt;bin&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;000004&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;219&lt;/span&gt;&lt;span&gt; | Query          |        &lt;/span&gt;&lt;span&gt;52&lt;/span&gt;&lt;span&gt; |         &lt;/span&gt;&lt;span&gt;325&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;create&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;database&lt;/span&gt;&lt;span&gt; test2_db                                          |&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;| mysql-&lt;/span&gt;&lt;span&gt;bin&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;000004&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;325&lt;/span&gt;&lt;span&gt; | Gtid           |        &lt;/span&gt;&lt;span&gt;52&lt;/span&gt;&lt;span&gt; |         &lt;/span&gt;&lt;span&gt;390&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;SET&lt;/span&gt;&lt;span&gt; @@&lt;/span&gt;&lt;span&gt;SESSION&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;GTID_NEXT&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&apos;f568445a-3cb2-11ee-b227-000c29da9fe9:2&apos;&lt;/span&gt;&lt;span&gt; |&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;| mysql-&lt;/span&gt;&lt;span&gt;bin&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;000004&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;390&lt;/span&gt;&lt;span&gt; | Query          |        &lt;/span&gt;&lt;span&gt;52&lt;/span&gt;&lt;span&gt; |         &lt;/span&gt;&lt;span&gt;495&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;use&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;`test2_db`&lt;/span&gt;&lt;span&gt;; &lt;/span&gt;&lt;span&gt;create&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;table&lt;/span&gt;&lt;span&gt; t1(id &lt;/span&gt;&lt;span&gt;int&lt;/span&gt;&lt;span&gt;)                           |&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;| mysql-&lt;/span&gt;&lt;span&gt;bin&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;000004&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;495&lt;/span&gt;&lt;span&gt; | Gtid           |        &lt;/span&gt;&lt;span&gt;52&lt;/span&gt;&lt;span&gt; |         &lt;/span&gt;&lt;span&gt;560&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;SET&lt;/span&gt;&lt;span&gt; @@&lt;/span&gt;&lt;span&gt;SESSION&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;GTID_NEXT&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&apos;f568445a-3cb2-11ee-b227-000c29da9fe9:3&apos;&lt;/span&gt;&lt;span&gt; |&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;| mysql-&lt;/span&gt;&lt;span&gt;bin&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;000004&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;560&lt;/span&gt;&lt;span&gt; | Query          |        &lt;/span&gt;&lt;span&gt;52&lt;/span&gt;&lt;span&gt; |         &lt;/span&gt;&lt;span&gt;636&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;BEGIN&lt;/span&gt;&lt;span&gt;                                                             |&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;| mysql-&lt;/span&gt;&lt;span&gt;bin&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;000004&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;636&lt;/span&gt;&lt;span&gt; | Table_map      |        &lt;/span&gt;&lt;span&gt;52&lt;/span&gt;&lt;span&gt; |         &lt;/span&gt;&lt;span&gt;685&lt;/span&gt;&lt;span&gt; | table_id: &lt;/span&gt;&lt;span&gt;108&lt;/span&gt;&lt;span&gt; (&lt;/span&gt;&lt;span&gt;test2_db&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;t1&lt;/span&gt;&lt;span&gt;)                                       |&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;| mysql-&lt;/span&gt;&lt;span&gt;bin&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;000004&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;685&lt;/span&gt;&lt;span&gt; | Write_rows     |        &lt;/span&gt;&lt;span&gt;52&lt;/span&gt;&lt;span&gt; |         &lt;/span&gt;&lt;span&gt;725&lt;/span&gt;&lt;span&gt; | table_id: &lt;/span&gt;&lt;span&gt;108&lt;/span&gt;&lt;span&gt; flags: STMT_END_F                                   |&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;| mysql-&lt;/span&gt;&lt;span&gt;bin&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;000004&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;725&lt;/span&gt;&lt;span&gt; | Table_map      |        &lt;/span&gt;&lt;span&gt;52&lt;/span&gt;&lt;span&gt; |         &lt;/span&gt;&lt;span&gt;774&lt;/span&gt;&lt;span&gt; | table_id: &lt;/span&gt;&lt;span&gt;108&lt;/span&gt;&lt;span&gt; (&lt;/span&gt;&lt;span&gt;test2_db&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;t1&lt;/span&gt;&lt;span&gt;)                                       |&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;| mysql-&lt;/span&gt;&lt;span&gt;bin&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;000004&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;774&lt;/span&gt;&lt;span&gt; | Write_rows     |        &lt;/span&gt;&lt;span&gt;52&lt;/span&gt;&lt;span&gt; |         &lt;/span&gt;&lt;span&gt;814&lt;/span&gt;&lt;span&gt; | table_id: &lt;/span&gt;&lt;span&gt;108&lt;/span&gt;&lt;span&gt; flags: STMT_END_F                                   |&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;| mysql-&lt;/span&gt;&lt;span&gt;bin&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;000004&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;814&lt;/span&gt;&lt;span&gt; | Table_map      |        &lt;/span&gt;&lt;span&gt;52&lt;/span&gt;&lt;span&gt; |         &lt;/span&gt;&lt;span&gt;863&lt;/span&gt;&lt;span&gt; | table_id: &lt;/span&gt;&lt;span&gt;108&lt;/span&gt;&lt;span&gt; (&lt;/span&gt;&lt;span&gt;test2_db&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;t1&lt;/span&gt;&lt;span&gt;)                                       |&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;| mysql-&lt;/span&gt;&lt;span&gt;bin&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;000004&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;863&lt;/span&gt;&lt;span&gt; | Write_rows     |        &lt;/span&gt;&lt;span&gt;52&lt;/span&gt;&lt;span&gt; |         &lt;/span&gt;&lt;span&gt;903&lt;/span&gt;&lt;span&gt; | table_id: &lt;/span&gt;&lt;span&gt;108&lt;/span&gt;&lt;span&gt; flags: STMT_END_F                                   |&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;| mysql-&lt;/span&gt;&lt;span&gt;bin&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;000004&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;903&lt;/span&gt;&lt;span&gt; | Xid            |        &lt;/span&gt;&lt;span&gt;52&lt;/span&gt;&lt;span&gt; |         &lt;/span&gt;&lt;span&gt;934&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;COMMIT&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/* xid=18 */&lt;/span&gt;&lt;span&gt;                                               |&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;+&lt;/span&gt;&lt;span&gt;------------------+-----+----------------+-----------+-------------+-------------------------------------------------------------------+&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;27&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;15&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;rows&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;in&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;set&lt;/span&gt;&lt;span&gt; (&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;00&lt;/span&gt;&lt;span&gt; sec)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;å¯ä»¥çœ‹å‡ºï¼Œæ‰‹åŠ¨å¼€å¯äº‹åŠ¡åï¼Œä¸‰ä¸ªinsertè¯­å¥æ˜¯è¢«å½“æˆä¸€ç»„äº‹åŠ¡æ¥çœ‹å¾…çš„ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;åŸºäºGTIDæˆªå–æ—¥å¿—&lt;a href=&quot;#åŸºäºgtidæˆªå–æ—¥å¿—&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;æœ‰äº†gtidä¹‹åï¼Œå†ä¹Ÿä¸ç”¨å…³å¿ƒæ—¥å¿—çš„å¼€å§‹posï¼Œç»“æŸposäº†ï¼Œä¸€ä¸ªgtidè®°å½•ï¼Œè®°å½•ä¸€ä¸ªäº‹åŠ¡ã€‚&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;mysqlbinlog&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;--skip-gtids&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;--include-gtids=&lt;/span&gt;&lt;span&gt;&apos;GTIDå·&apos;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;binlogæ–‡ä»¶è·¯å¾„&lt;/span&gt;&lt;span&gt;  &amp;gt; &lt;/span&gt;&lt;span&gt;rollback.sql&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;ä½¿ç”¨mysqldumpå’Œbinlogç»„åˆè¿›è¡Œæ•°æ®å¤‡ä»½&lt;a href=&quot;#ä½¿ç”¨mysqldumpå’Œbinlogç»„åˆè¿›è¡Œæ•°æ®å¤‡ä»½&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;mysqldumpæ˜¯ä¸“é—¨è¿›è¡Œæ•°æ®åº“å¤‡ä»½çš„å‘½ä»¤ï¼Œé€šè¿‡mysqldumpï¼Œæ•°æ®å¯ä»¥è¢«å¯¼å‡ºä¸ºä¸€ä¸ªSQLæ–‡ä»¶ã€‚&lt;br /&gt;
é€šå¸¸æˆ‘ä»¬ä¼šä½¿ç”¨mysqldumpå’Œbinlog(GTID)è¿›è¡Œç»„åˆå¤‡ä»½ï¼Œä¾‹å¦‚æ¯å¤©æ™šä¸Š0ç‚¹å¯¹æ•°æ®åº“è¿›è¡Œä¸€æ¬¡å…¨é‡å¤‡ä»½(mysqldump)ï¼Œåœ¨ä¸¤æ¬¡å¤‡ä»½ä¹‹é—´ä½¿ç”¨binlogè¿›è¡Œå¢é‡å¤‡ä»½ã€‚&lt;/p&gt;&lt;section&gt;&lt;h3&gt;mysqldump&lt;a href=&quot;#mysqldump&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;ç”¨æ³•ï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;#å¤‡ä»½æ‰€æœ‰åº“&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;mysqldump&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-uroot&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-pwww.yuchaoit.cn&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-S&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/data/3306/mysql.sock&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-F&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-A&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-B&lt;/span&gt;&lt;span&gt; |&lt;/span&gt;&lt;span&gt;gzip&lt;/span&gt;&lt;span&gt; &amp;gt;&lt;/span&gt;&lt;span&gt;/server/backup/mysqlbak_&lt;/span&gt;&lt;span&gt;$(&lt;/span&gt;&lt;span&gt;date+%F&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;.sql.gz&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;#å¤‡ä»½å•ä¸ªåº“&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;mysqldump&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-uroot&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-pwww.yuchaoit.cn&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-S&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/data/3306/mysql.sock&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-F&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-B&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;oldboy&lt;/span&gt;&lt;span&gt;|&lt;/span&gt;&lt;span&gt;gzip&lt;/span&gt;&lt;span&gt; &amp;gt;&lt;/span&gt;&lt;span&gt;/server/backup/mysqlbak_&lt;/span&gt;&lt;span&gt;$(&lt;/span&gt;&lt;span&gt;date+%F&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;.sql.gz&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;å‚æ•°ï¼š&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;-Fï¼š å¤‡ä»½å‰ï¼Œåˆ·æ–°binlogæ—¥å¿—ï¼Œç”¨äºå¢é‡æ¢å¤(ç›¸å½“äºflush logs)&lt;/li&gt;
&lt;li&gt;-Bï¼š å¤‡ä»½æŒ‡å®šçš„æŸäº›æ•°æ®åº“&lt;/li&gt;
&lt;li&gt;-Aï¼š å¤‡ä»½æ‰€æœ‰åº“ã€è¡¨ã€æ•°æ®&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;å¯¹äºæ•°æ®é‡æ¯”è¾ƒå¤§çš„åº“æˆ–æœ‰é¢‘ç¹å†™å…¥æ“ä½œçš„åº“ï¼Œä¸€èˆ¬è¿˜éœ€è¦åœ¨å¤‡ä»½æ—¶è¿›è¡Œé”è¡¨ï¼Œç¡®ä¿æ•°æ®ä¸€è‡´æ€§ï¼›
å¯ä»¥ä½¿ç”¨-xå‚æ•°è¿›è¡Œé”åº“æˆ–å…¨å±€é”(å–å†³äºæ˜¯è¦å¤‡ä»½å•ä¸ªåº“ï¼Œè¿˜æ˜¯å…¨éƒ¨æ•°æ®)ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;</content:encoded></item><item><title>äº¤æ¢æœºçš„å·¥ä½œåŸç† - å­¦ä¹ ã€æ³›æ´ªã€è½¬å‘å’Œè¿‡æ»¤</title><link>https://white-festa.net/posts/%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86---%E5%AD%A6%E4%B9%A0%E6%B3%9B%E6%B4%AA%E8%BD%AC%E5%8F%91%E5%92%8C%E8%BF%87%E6%BB%A4/</link><guid isPermaLink="true">https://white-festa.net/posts/%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86---%E5%AD%A6%E4%B9%A0%E6%B3%9B%E6%B4%AA%E8%BD%AC%E5%8F%91%E5%92%8C%E8%BF%87%E6%BB%A4/</guid><description>äº¤æ¢æœºçš„å·¥ä½œåŸç†</description><pubDate>Tue, 20 Dec 2022 00:00:00 GMT</pubDate><content:encoded>&lt;section&gt;&lt;h2&gt;äº¤æ¢æœºçš„å·¥ä½œåŸç† - å­¦ä¹ ã€æ³›æ´ªã€è½¬å‘å’Œè¿‡æ»¤&lt;a href=&quot;#äº¤æ¢æœºçš„å·¥ä½œåŸç†---å­¦ä¹ æ³›æ´ªè½¬å‘å’Œè¿‡æ»¤&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;äº¤æ¢æœºæ˜¯ä¸€ç§å¤šç«¯å£çš„ç½‘æ¡¥ï¼Œåœ¨æ•°æ®é“¾è·¯å±‚ä½¿ç”¨MACåœ°å€è½¬å‘æ•°æ®ã€‚äº¤æ¢æœºåˆ†ä¸ºæœ‰çº¿äº¤æ¢æœºå’Œæ— çº¿äº¤æ¢æœºï¼Œæœ‰çº¿äº¤æ¢æœºä¸€èˆ¬æ˜¯å¤šçº§äº¤æ¢æœºä¹‹é—´äº’ç›¸è¿æ¥ï¼Œæœ€ä¸‹çº§äº¤æ¢æœºè¿æ¥ç»ˆç«¯è®¾å¤‡ï¼Œå½¢æˆç½‘ç»œæ‹“æ‰‘ï¼Œæ¥å°†æ•°æ®åŒ…åˆ†å‘è‡³ç»ˆç«¯è®¾å¤‡ã€‚æ— çº¿äº¤æ¢æœºåˆ™å¯ä»¥ä½¿ç”¨å¹¿æ’­åŠŸèƒ½ï¼Œå°†æ•°æ®åŒ…å¹¿æ’­ç»™å¤šå°è®¾å¤‡ã€‚&lt;/p&gt;&lt;p&gt;é€šå¸¸æƒ…å†µä¸‹ï¼Œé“¾è·¯å±‚ä¼šå°†MACåœ°å€å°è£…è¿›ä»¥å¤ªç½‘å¸§ï¼Œç„¶åå‘ç»™äº¤æ¢æœºï¼Œè¿™ä¸€è¿‡ç¨‹é«˜åº¦ä¾èµ–äºARPåè®®ï¼Œå³åœ°å€è§£æåè®®ï¼ŒAddress Resolution Protocolï¼ŒARPåè®®åŸºäºIPv4åœ°å€æ¥ç¡®å®šå¯¹åº”çš„MACåœ°å€ï¼Œå…¶å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;ARPè¯·æ±‚ï¼šè¯·æ±‚è€…éœ€è¦çŸ¥é“ç‰¹å®šIPåœ°å€çš„MACåœ°å€æ—¶ï¼Œå®ƒä¼šåœ¨å±€åŸŸç½‘å†…å¹¿æ’­ä¸€ä¸ªARPè¯·æ±‚ã€‚è¿™ä¸ªè¯·æ±‚åŒ…å«å‘é€è€…çš„IPå’ŒMACåœ°å€ï¼Œä»¥åŠå®ƒæ­£åœ¨å¯»æ‰¾çš„IPåœ°å€çš„MACåœ°å€ã€‚&lt;/li&gt;
&lt;li&gt;ç½‘ç»œå¹¿æ’­ï¼šARPè¯·æ±‚ä»¥å¹¿æ’­å½¢å¼å‘é€ï¼Œå±€åŸŸç½‘å†…æ‰€æœ‰è®¾å¤‡éƒ½ä¼šæ¥æ”¶åˆ°è¿™ä¸ªè¯·æ±‚ï¼Œæ¯ä¸ªè®¾å¤‡éƒ½ä¼šæ£€æŸ¥ARPè¯·æ±‚ä¸­çš„ç›®æ ‡IPåœ°å€ã€‚&lt;/li&gt;
&lt;li&gt;ARPå›å¤ï¼šç§°ä¸ºå“åº”è€…å‘ç°ARPè¯·æ±‚ä¸­çš„ç›®æ ‡IPåœ°å€ä¸è‡ªå·±çš„IPåœ°å€åŒ¹é…ï¼Œå®ƒå°±ä¼šå‘è¯·æ±‚è€…å‘é€ä¸€ä¸ªARPå›å¤ã€‚è¿™ä¸ªå›å¤åŒ…å«å“åº”è€…çš„IPåœ°å€å’Œå¯¹åº”çš„MACåœ°å€ã€‚&lt;/li&gt;
&lt;li&gt;ç¼“å­˜MACåœ°å€ï¼šè¯·æ±‚è€…æ¥æ”¶åˆ°ARPå›å¤åï¼Œå®ƒä¼šå°†å“åº”è€…çš„IPåœ°å€å’ŒMACåœ°å€å­˜å‚¨åœ¨æœ¬åœ°çš„ARPç¼“å­˜ä¸­ï¼Œä»¥ä¾¿å°†æ¥è¿›è¡Œé€šä¿¡æ—¶å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œé¿å…é‡å¤ARPè¯·æ±‚è¿‡ç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;æ•°æ®åŒ…å‘é€ï¼šä¸€æ—¦è¯·æ±‚è€…è·å¾—äº†ç›®æ ‡MACåœ°å€ï¼Œå®ƒå°±å¯ä»¥å°†æ•°æ®å°è£…åœ¨ä»¥å¤ªç½‘å¸§ä¸­ï¼Œå¹¶é€šè¿‡MACåœ°å€å‘é€ç»™ç›®æ ‡è®¾å¤‡ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;åœ¨å¸§åˆ°è¾¾äº¤æ¢æœºåï¼Œäº¤æ¢æœºä¼šæ£€æŸ¥Headerä¸­çš„ç›®æ ‡MACåœ°å€ï¼Œå¹¶å°è¯•å’Œè‡ªå·±çš„MACåœ°å€è¡¨(æˆ–ç§°è½¬å‘æ•°æ®åº“)ä¸­çš„è®°å½•è¿›è¡ŒåŒ¹é…ï¼ŒåŸºäºåŒ¹é…ç»“æœï¼Œæœ‰ä¸‹é¢å››ç§è¡Œä¸ºï¼š&lt;/p&gt;&lt;section&gt;&lt;h3&gt;æ³›æ´ª&lt;a href=&quot;#æ³›æ´ª&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;äº¤æ¢æœºæ²¡æœ‰åœ¨MACåœ°å€è¡¨ä¸­æ‰¾åˆ°å’Œç›®æ ‡MACåœ°å€åŒ¹é…çš„è®°å½•ï¼Œåˆ™äº¤æ¢æœºå°†æ•°æ®å¸§å‘é€åˆ°è‡ªå·±çš„å…¨éƒ¨ç«¯å£ï¼Œä¹Ÿå°±æ˜¯â€å¹¿æ’­â€ç»™ä¸‹æ¸¸çš„æ‰€æœ‰è®¾å¤‡ï¼›ä¸‹æ¸¸è®¾å¤‡ä¹Ÿä¼šæ£€æŸ¥Headerï¼Œå¦‚æœå‘ç°ç›®æ ‡MACåœ°å€å’Œè‡ªå·±çš„ä¸ç¬¦ï¼Œåˆ™ä¼šé»˜é»˜ä¸¢å¼ƒã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;å­¦ä¹ &lt;a href=&quot;#å­¦ä¹ &quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;äº¤æ¢æœºå…¶ä¸­ä¸€ä¸ªä¸»è¦åŠŸèƒ½æ˜¯ç»´æŠ¤ä¸€ä¸ª MAC åœ°å€è¡¨ï¼Œå°†æ¯ä¸ªäº¤æ¢æœºç«¯å£ä¸æ‰€è¿æ¥è®¾å¤‡çš„ MAC åœ°å€å»ºç«‹æ˜ å°„å…³ç³»ã€‚äº¤æ¢æœºçš„MACåœ°å€è¡¨ä¸€å¼€å§‹æ˜¯ç©ºçš„ï¼Œå› æ­¤æ¯æ¬¡å½“äº¤æ¢æœºæ¥æ”¶åˆ°æ•°æ®å¸§æ—¶ï¼Œéƒ½ä¼šæŸ¥çœ‹Headerï¼Œå°†æ•°æ®å¸§ä¸­çš„æºMACåœ°å€å’Œæ¥æ”¶åˆ°æ•°æ®å¸§çš„ç«¯å£è¿›è¡Œæ˜ å°„ï¼Œå¹¶å­˜å‚¨åœ¨è‡ªå·±çš„MACåœ°å€è¡¨ä¸­ã€‚æ…¢æ…¢åœ°ï¼Œæ¯ä¸ªè¿æ¥åˆ°äº¤æ¢æœºçš„è®¾å¤‡éƒ½ä¼šå‘å‡ºä¸€äº›æ•°æ®ï¼ŒMACåœ°å€è¡¨ä¸­çš„è®°å½•ä¼šé€æ¸å¢åŠ ï¼Œç›´åˆ°è¿™ä¸ªå±€åŸŸç½‘ä¸‹çš„æ‰€æœ‰è®¾å¤‡çš„MACåœ°å€å’Œç«¯å£æ˜ å°„éƒ½å­˜å‚¨åˆ°äº†è‡ªå·±çš„MACåœ°å€è¡¨ä¸­ã€‚å› æ­¤ï¼Œäº¤æ¢æœºåªä¼šå°†æ•°æ®å¸§çš„å‘é€æ–¹çš„MACåœ°å€å­˜å‚¨MACåœ°å€è¡¨ï¼Œå¯¹äºæ‰€æœ‰åœ¨è¡¨ä¸­æ²¡æœ‰è®°å½•çš„MACåœ°å€ï¼Œä¼šä¸€å¾‹ä½¿ç”¨æ³›æ´ªä½œä¸ºåº”å¯¹ã€‚&lt;/p&gt;&lt;p&gt;å½“MACåœ°å€è¡¨æ»¡äº†æ—¶ï¼Œæœ€æ–°å­¦ä¹ åˆ°çš„MACåœ°å€ä¼šè¦†ç›–æœ€é•¿æ—¶é—´æ²¡æœ‰æ•°æ®å¸§å‘é€çš„MACåœ°å€ã€‚ä¸è¿‡ç°åœ¨å³ä½¿æ˜¯å®¶ç”¨äº¤æ¢æœºï¼Œä¸€èˆ¬ä¹Ÿå¯ä»¥å­˜å‚¨5000ä»¥ä¸Šçš„MACåœ°å€ï¼ŒMACåœ°å€è¡¨æ»¡äº†çš„æƒ…å†µæ¯”è¾ƒå°‘è§ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;è½¬å‘&lt;a href=&quot;#è½¬å‘&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;äº¤æ¢æœºåœ¨MACåœ°å€è¡¨ä¸­æ‰¾åˆ°å’Œç›®æ ‡MACåœ°å€åŒ¹é…çš„è®°å½•ï¼Œäº¤æ¢æœºå°†æ•°æ®å¸§è½¬å‘åˆ°å¯¹åº”çš„ç«¯å£ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;è¿‡æ»¤&lt;a href=&quot;#è¿‡æ»¤&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;åŸºæœ¬ä¸Šåªæœ‰æ³›æ´ªåŠŸèƒ½ä¼šä¾èµ–è¿‡æ»¤ã€‚è¿‡æ»¤ä¸»è¦æ˜¯ä¸ºäº†é˜²æ­¢æ•°æ®å¸§åœ¨æ³›æ´ªæ—¶è¢«å‘å›ç»™æ¥æºç«¯å£ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;ç»ƒä¹ &lt;a href=&quot;#ç»ƒä¹ &quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;è€ƒè™‘ä¸€ä¸ªç®€å•çš„äº¤æ¢æœºï¼Œå®ƒåªæœ‰ä¸€ä¸ª MAC åœ°å€è¡¨ï¼Œç”¨äºå­˜å‚¨ç½‘ç»œä¸­ä¸‰ä¸ªè®¾å¤‡çš„ä½ç½®ï¼Œå¹¶ä¸”ä»¥ç©ºçš„ MAC åœ°å€è¡¨å¼€å§‹ã€‚å¯¹äºæ‰€é€‰è¾“å…¥æ•°æ®ä¸­çš„æ¯ä¸ªå¸§ï¼ŒæŒ‡ç¤ºäº¤æ¢æœºæ˜¯å¦ä¼šè½¬å‘ã€è¿‡æ»¤æˆ–æ³›æ´ªè¯¥å¸§ï¼Œå¹¶æŒ‡ç¤ºå¤„ç†æ¯ä¸ªå¸§åçš„ MAC åœ°å€è¡¨å†…å®¹ã€‚
äº¤æ¢æ•°æ®ï¼š
A sends to E
E sends to D
E sends to C
E sends to D
D sends to C
E sends to C
B sends to D
D sends to A
A sends to B
A sends to C&lt;/p&gt;&lt;section&gt;&lt;h3&gt;è§£&lt;a href=&quot;#è§£&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;A sends to E
æ“ä½œï¼šæ³›æ´ªï¼ˆEçš„ä½ç½®æœªçŸ¥ï¼‰
MACåœ°å€è¡¨æ›´æ–°ï¼šA&lt;/p&gt;&lt;p&gt;E sends to D
æ“ä½œï¼šæ³›æ´ªï¼ˆDçš„ä½ç½®æœªçŸ¥ï¼‰
MACåœ°å€è¡¨æ›´æ–°ï¼šA, E&lt;/p&gt;&lt;p&gt;E sends to C
æ“ä½œï¼šæ³›æ´ªï¼ˆCçš„ä½ç½®æœªçŸ¥ï¼‰
MACåœ°å€è¡¨æ›´æ–°ï¼šA, E, Cï¼ˆæ­¤æ—¶è¡¨å·²æ»¡ï¼‰&lt;/p&gt;&lt;p&gt;E sends to D
æ“ä½œï¼šæ³›æ´ªï¼ˆDçš„ä½ç½®æœªçŸ¥ï¼‰
MACåœ°å€è¡¨ä¿æŒä¸å˜ï¼šA, E, C&lt;/p&gt;&lt;p&gt;D sends to C
æ“ä½œï¼šè½¬å‘ï¼ˆCçš„ä½ç½®å·²çŸ¥ï¼‰
MACåœ°å€è¡¨æ›´æ–°ï¼šDæ›¿æ¢Aï¼ˆå› ä¸ºéœ€è¦å­˜å‚¨æœ€è¿‘ä½¿ç”¨çš„è®¾å¤‡ï¼‰ï¼Œå˜ä¸ºD, E, C&lt;/p&gt;&lt;p&gt;E sends to C
æ“ä½œï¼šè½¬å‘ï¼ˆCçš„ä½ç½®å·²çŸ¥ï¼‰
MACåœ°å€è¡¨ä¿æŒä¸å˜ï¼šD, E, C&lt;/p&gt;&lt;p&gt;B sends to D
æ“ä½œï¼šæ³›æ´ªï¼ˆå› ä¸ºBä¸åœ¨è¡¨ä¸­ï¼ŒDçš„ä½ç½®è™½å·²çŸ¥ä½†éœ€è¦æ³›æ´ªä»¥å­¦ä¹ Bçš„ä½ç½®ï¼‰
MACåœ°å€è¡¨æ›´æ–°ï¼šBæ›¿æ¢Eï¼Œå˜ä¸ºD, B, C
(å®é™…ä¸Šä¸çŸ¥é“Bçš„ä½ç½®ä¹Ÿå¯ä»¥å°†æ•°æ®å¸§è½¬å‘åˆ°Dï¼Œåœ¨è¿™é‡Œäº¤æ¢æœºä½¿ç”¨æ³›æ´ªçš„æ ¹æœ¬ç›®çš„æ˜¯å­¦ä¹ Bçš„ä½ç½®)&lt;/p&gt;&lt;p&gt;D sends to A
æ“ä½œï¼šæ³›æ´ªï¼ˆAçš„ä½ç½®æœªçŸ¥ï¼‰
MACåœ°å€è¡¨æ›´æ–°ï¼šDä¿æŒï¼Œå› ä¸ºAä¸åœ¨è¡¨ä¸­ä¸”è¡¨å·²æ»¡ï¼ŒD,B,C&lt;/p&gt;&lt;p&gt;A sends to B
æ“ä½œï¼šæ³›æ´ªï¼ˆå› ä¸ºAä¸åœ¨è¡¨ä¸­ï¼‰
MACåœ°å€è¡¨æ›´æ–°ï¼šAæ›¿æ¢Dï¼Œå˜ä¸ºA, B, C&lt;/p&gt;&lt;p&gt;A sends to C
æ“ä½œï¼šè½¬å‘ï¼ˆå› ä¸ºCçš„ä½ç½®å·²çŸ¥ï¼‰
MACåœ°å€è¡¨ä¿æŒä¸å˜ï¼šA, B, C&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;</content:encoded></item><item><title>ä½¿ç”¨ansible-roleæ¨¡æ¿éƒ¨ç½²redis</title><link>https://white-festa.net/posts/ansible-role-template/</link><guid isPermaLink="true">https://white-festa.net/posts/ansible-role-template/</guid><description>ä¸€ä¸ªä½¿ç”¨ansible templateéƒ¨ç½²redisçš„ç¤ºä¾‹ï¼Œç»“åˆçš„varsç­‰åŠŸèƒ½çš„ä½¿ç”¨</description><pubDate>Sat, 05 Nov 2022 00:00:00 GMT</pubDate><content:encoded>&lt;section&gt;&lt;h1&gt;JinJa2æ¨¡æ¿æ–‡ä»¶&lt;a href=&quot;#jinja2æ¨¡æ¿æ–‡ä»¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;JinJa2æ˜¯ä¸€ä¸ªç‰¹æœ‰çš„æ¨¡æ¿è¯­è¨€ï¼Œä¸»è¦ä½œç”¨å°±æ˜¯èƒ½è®©æ™®é€šçš„æ–‡ä»¶ï¼Œèƒ½è¯»å–ç¨‹åºè®¾ç½®çš„å˜é‡ï¼Œç”¨æ¨¡æ¿è¯­æ³•ï¼ŒåŠ¨æ€æ›¿æ¢æ•°æ®ã€‚&lt;br /&gt;
è¯­æ³•è§„åˆ™ï¼š&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;é…ç½®æ–‡ä»¶å¿…é¡»æ˜¯ä»¥.j2ä¸ºåç¼€&lt;/li&gt;
&lt;li&gt;å¿…é¡»æ”¾å…¥åœ¨templateç›®å½•ä¸‹&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨çš„ansibleæ¨¡å—æ˜¯templateæ¨¡å—&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ä¾‹å¦‚ï¼š&lt;br /&gt;
&lt;code&gt;shd_config&lt;/code&gt;æ–‡ä»¶æ˜¯SSHæœåŠ¡ç«¯çš„é…ç½®æ–‡ä»¶ï¼Œå…¶ä¸­Portå­—æ®µæŒ‡æ˜äº†sshdæœåŠ¡çš„é“¾æ¥ç«¯å£å·ã€‚å°†è¯¥å­—æ®µçš„å€¼æ›¿æ¢ä¸ºå˜é‡ï¼Œå¹¶åœ¨&lt;code&gt;vars/main.yml&lt;/code&gt;ä¸­é…ç½®ï¼Œå¯ä»¥åŠ¨æ€åœ°ä¿®æ”¹è¿™ä¸ªå˜é‡çš„å€¼ã€‚&lt;/p&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;å®è·µï¼šéƒ¨ç½²redis&lt;a href=&quot;#å®è·µéƒ¨ç½²redis&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;section&gt;&lt;h2&gt;tasks/main.yml&lt;a href=&quot;#tasksmainyml&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;01 - install requirement apps&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;yum&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;{{ item }}&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;state&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;installed&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;loop&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;{{ requirements }}&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;02 - create data directory&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;file&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;path&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;{{ item }}&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;state&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;directory&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;loop&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;{{ data_dir }}&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;03 - download redis&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;get_url&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;validate_certs&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;false&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;url&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;{{ source_url }}&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;dest&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;{{ redis_package }}&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;force&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;04 - unarchive redis&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;unarchive&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;src&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;{{ redis_package }}&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;dest&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/opt/&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;remote_src&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;05 - redis complie&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;make&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;chdir&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/opt/redis-5.0.7&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;target&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;{{ item }}&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;loop&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;{{ compile_target }}&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;27&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;06 - copy config file to db-51&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;28&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;template&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;29&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;src&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;redis.j2&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;30&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;dest&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;{{ redis_conf }}&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;31&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;run redis-server&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;32&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;shell&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;33&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;cmd&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;redis-server &quot;{{ redis_conf }}&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;vars/main.yml&lt;a href=&quot;#varsmainyml&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;requirements&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;gcc&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;make&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;data_dir&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;/opt/redis&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;/opt/redis/conf&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;/opt/redis/pid&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;/opt/redis/logs&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;/opt/redis/data&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;source_url&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;http://download.redis.io/releases/redis-5.0.7.tar.gz&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;redis_package&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/opt/redis-5.0.7.tar.gz&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;compile_target&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;MALLOC=libc&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;install&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;redis_conf_dest&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/opt/redis/conf/redis.conf&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;bind_ip&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;127.0.0.1 172.16.1.51 10.0.0.51&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;redis_port&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;6379&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;redis_pid_file&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/opt/redis/pid/redis.pid&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;redis_log_file&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/opt/redis/logs/redis.log&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;redisé…ç½®æ–‡ä»¶redis.j2&lt;a href=&quot;#redisé…ç½®æ–‡ä»¶redisj2&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;daemonize&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;yes&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;bind&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;{{&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;bind_ip&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;}}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;port&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;{{&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;redis_port&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;}}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;pidfile&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;{{&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;redis_pid_file&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;}}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;logfile&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;{{&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;redis_log_file&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;}}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;roleå¯åŠ¨æ–‡ä»¶&lt;a href=&quot;#roleå¯åŠ¨æ–‡ä»¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;hosts&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;db&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;roles&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;deploy_redis&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæ¯ä¸ªplaybookå¯ä»¥è¢«å¤šæ¬¡å¤ç”¨ï¼Œå¯¹äºä¸åŒçš„é…ç½®åªéœ€è¦å¯¹varsè¿›è¡Œæ›´æ”¹ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;</content:encoded></item><item><title>SIT283 Assessment 2  Marine Park showcase video</title><link>https://white-festa.net/posts/showcase-video/</link><guid isPermaLink="true">https://white-festa.net/posts/showcase-video/</guid><pubDate>Mon, 24 Oct 2022 00:00:00 GMT</pubDate><content:encoded>&lt;section&gt;&lt;h1&gt;Showcase Video&lt;a href=&quot;#showcase-video&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;/section&gt;</content:encoded></item><item><title>SIT283 Assessment 2 Marine Park Development Report</title><link>https://white-festa.net/posts/sit283-assessment2-report/</link><guid isPermaLink="true">https://white-festa.net/posts/sit283-assessment2-report/</guid><pubDate>Mon, 24 Oct 2022 00:00:00 GMT</pubDate><content:encoded>&lt;section&gt;&lt;h2&gt;Introduction&lt;a href=&quot;#introduction&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;Concept Park&lt;a href=&quot;#concept-park&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;Context of the Concept&lt;a href=&quot;#context-of-the-concept&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;The idea of constructing this underwater world came from an animation I watched when I was a child, called Future Boy Conan, which tells the story of the protagonist and his grandfather living on an island after more than half of the earthâ€™s land was destroyed in a war. In the early stages of the story, the underwater ruins are impressive, this scenario may be as anti-war propaganda, perhaps can make people recall childhood memories, or can be as simple as an experience of visiting ruins in the underwater world, after all, visiting underwater ruins is almost impossible in the real world.&lt;br /&gt;&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;Key requirements of the concept&lt;a href=&quot;#key-requirements-of-the-concept&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;This concept can be mainly divided into two parts. One is the environment, which includes ruins, uneven seabed, sea creatures, water surface and environment rendering, etc. The other is interactive content, which is mainly player-related functions. In terms of building the environment, I checked some underwater scenes in the Future Boy Conan. I recreated the scene on a small scale using the assets I could easily; For player characters, I used the XR Interaction Toolkit as the support of the VR platform and implemented different functions through a series of codes.&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;Why the application should be considered to be a virtual reality experience?&lt;a href=&quot;#why-the-application-should-be-considered-to-be-a-virtual-reality-experience&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;The game has to be played using a VR headset, combined with the content of the application, itâ€™s a clearly virtual reality experience.&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;Required functionalities:&lt;a href=&quot;#required-functionalities&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;Various form of control&lt;a href=&quot;#various-form-of-control&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;section&gt;&lt;h4&gt;Continuous Movement&lt;a href=&quot;#continuous-movement&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;To enable Continuous movement, I created a script called the Continuous Motion System, which reads the orientation of the playerâ€™s headset and moves the player in that direction. When the player is on the surface (ground layer), the player can only move on the X-axis, and when the player is underwater, the player can move on both the X-axis and the Y-axis.&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;private&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;void&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;CapsuleFollowHeadset&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;height&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;origin&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;CameraInOriginSpaceHeight&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;+&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;addtionalHeight&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;Vector3&lt;/span&gt;&lt;span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;capsuleCenter&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;transform&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;InverseTransformPoint&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;origin&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;Camera&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;transform&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;position&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;center&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;newVector3&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;capsuleCenter&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;x&lt;/span&gt;&lt;span&gt;,Â &lt;/span&gt;&lt;span&gt;character&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;height&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;/&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;+&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;character&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;skinWidth&lt;/span&gt;&lt;span&gt;,Â &lt;/span&gt;&lt;span&gt;capsuleCenter&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;z&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;private&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;void&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;ContinousMove&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;CapsuleFollowHeadset&lt;/span&gt;&lt;span&gt;();&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;Quaternion&lt;/span&gt;&lt;span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;headYaw&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;state&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;isUnderWater&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;-&lt;/span&gt;&lt;/span&gt;&lt;span&gt;1.0f&lt;/span&gt;&lt;span&gt;))&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;headYaw&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;Quaternion&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;Euler&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;origin&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;Camera&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;transform&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;eulerAngles&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;x&lt;/span&gt;&lt;span&gt;,Â &lt;/span&gt;&lt;span&gt;origin&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;Camera&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;transform&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;eulerAngles&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;y&lt;/span&gt;&lt;span&gt;,Â &lt;/span&gt;&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;headYaw&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;Quaternion&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;Euler&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;&lt;span&gt;,Â &lt;/span&gt;&lt;span&gt;origin&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;Camera&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;transform&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;eulerAngles&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;y&lt;/span&gt;&lt;span&gt;,Â &lt;/span&gt;&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;Vector3&lt;/span&gt;&lt;span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;direction&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;headYaw&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;*&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/span&gt;&lt;span&gt;newVector3&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;primary2DAxisValueLeft&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;x&lt;/span&gt;&lt;span&gt;,Â &lt;/span&gt;&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;&lt;span&gt;,Â &lt;/span&gt;&lt;span&gt;primary2DAxisValueLeft&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;y&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;Move&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;direction&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;*&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;Time&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;deltaTime&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;*&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;moveSpeed&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;///Swim&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;private&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;void&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;SwimUp&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;primart2DAxisButton&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;state&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;isUnderWater&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;-&lt;/span&gt;&lt;/span&gt;&lt;span&gt;1.0f&lt;/span&gt;&lt;span&gt;))&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;27&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;Move&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;Vector3&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;up&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;*&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;Time&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;deltaTime&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;*&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;moveSpeed&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;28&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;29&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;Continuous Turn and Snap Turn&lt;a href=&quot;#continuous-turn-and-snap-turn&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;The logic of Continuous Turn is very similar to the Continuous Motion System script, but the Transform.Rotate method is called for rotation.&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;private&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;void&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;ContinousTurn&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;transform&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Rotate&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;&lt;span&gt;,Â &lt;/span&gt;&lt;span&gt;primary2DAxisValueRight&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;x&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;*&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;rotateSpeed&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;*&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;Time&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;deltaTime&lt;/span&gt;&lt;span&gt;,Â &lt;/span&gt;&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;Continuous Turn often makes the player dizzy or uncomfortable, so most games use Snap Turn as a method of rotating the playerâ€™s character. Continuous Turn is automatically disabled when Snap Turn is enabled. By default, Snap Turn rotates 40 degrees to the left or right based on the Y Axis of the playerâ€™s Primary 2D Axis of the controller, but this value can also be adjusted in the control panel.&lt;br /&gt;
Unlike Continuous Turn, Snap Turn does not need continuous rotation. Therefore, I set an interval for Snap Turn. Players must pass this interval before they can rotate again.&lt;br /&gt;&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;void&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Start&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;//InitializeÂ timer&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;snapInterval&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;timer&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;void&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Update&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;//ReadÂ controllerÂ primaryÂ axisÂ input&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;InputDevice&lt;/span&gt;&lt;span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;device&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;InputDevices&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;GetDeviceAtXRNode&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;inputSource&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;TryGetFeatureValue&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;CommonUsages&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;primary2DAxis&lt;/span&gt;&lt;span&gt;,Â &lt;/span&gt;&lt;span&gt;outinputAxis&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;snapTurn&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;inputAxis&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;x&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/span&gt;&lt;span&gt;0.7&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;SnapSpinning&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;turnAngle&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;inputAxis&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;x&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;-&lt;/span&gt;&lt;/span&gt;&lt;span&gt;0.7&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;SnapSpinning&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;-&lt;/span&gt;&lt;span&gt;turnAngle&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;//QucikÂ Turn:Â TurnÂ 180Â degressÂ atÂ once.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;enableQuickTurns&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;inputAxis&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;y&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;-&lt;/span&gt;&lt;/span&gt;&lt;span&gt;0.7&lt;/span&gt;&lt;span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;inputAxis&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;x&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/span&gt;&lt;span&gt;0.7&lt;/span&gt;&lt;span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;inputAxis&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;x&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;-&lt;/span&gt;&lt;/span&gt;&lt;span&gt;0.7&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;SnapSpinning&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;-&lt;/span&gt;&lt;/span&gt;&lt;span&gt;180&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;27&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;//UseÂ aÂ timerÂ toÂ keepÂ theÂ characterÂ fromÂ spinning&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;28&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;snapInterval&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;-=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;Time&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;deltaTime&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;29&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;snapInterval&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&amp;lt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;30&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;31&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;snapTurn&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;32&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;33&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;34&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;private&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;void&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;SnapSpinning&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;float&lt;/span&gt;&lt;span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;angle&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;35&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;36&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;transform&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Rotate&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;newVector3&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;&lt;span&gt;,Â &lt;/span&gt;&lt;span&gt;angle&lt;/span&gt;&lt;span&gt;,Â &lt;/span&gt;&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;));&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;37&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;snapTurn&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;false&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;38&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;snapInterval&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;timer&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;39&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;40&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;///AllowÂ userÂ toÂ setÂ SnapÂ TurnÂ AngleÂ withÂ silderÂ onÂ theÂ controlÂ panel&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;41&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;void&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;setTurnAngle&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;float&lt;/span&gt;&lt;span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;42&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;43&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;turnAngle&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;44&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;State Machine&lt;a href=&quot;#state-machine&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;The PlayerState script is used to get player state in Realtime. There are two states for player, if the player is on the ground and if the player is underwater, the gravity coefficient in the game, whether to render exponential fog and some motion parameters are affected by these states.&lt;br /&gt;&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;bool&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;isUnderWater&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;float&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;offset&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;transform&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;position&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;y&lt;/span&gt;&lt;span&gt; â€“ &lt;/span&gt;&lt;span&gt;waterPlane&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;position&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;y&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;offset&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;bool&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;isOnGround&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;Vector3&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;start&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;transform&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;TransformPoint&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;character&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;center&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;float&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;length&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;character&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;center&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;y&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;+&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;0.01f&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;returnSphereCast&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;start&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;character&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;radius&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;Vector3&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;down&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;outRaycastHit&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;info&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;length&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;groundLayer&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;Tool to interact with environment&lt;a href=&quot;#tool-to-interact-with-environment&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;The tool used to interact with the environment is a simple teleportation tool. When the player has enabled the teleportation function and pressed the Trigger of the right controller, a laser will appear from the hand model. If the end of the laser collides with the plane that can be used as a teleportation target, the position of the point where the laser collides will be returned, and the laser will be displayed in green, otherwise it will be displayed in red; After getting the position of this point, if the player releases the Trigger key (when the trigger value is less than 0.3), it is deemed that the player wants to teleport. At this time, the playerâ€™s CharacterController will be temporarily disabled and then teleport. After the teleportation is completed, the character Controller will be reactivated.&lt;br /&gt;&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;private&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;void&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Start&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;positionCount&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;laserSteps&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;void&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Update&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;triggerValue&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;0.8f&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;TryToGetTeleportTarget&lt;/span&gt;&lt;span&gt;();&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;targetAcquired&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;triggerValue&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;0.3f&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;Teleport&lt;/span&gt;&lt;span&gt;();&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;!&lt;/span&gt;&lt;span&gt;targetAcquired&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;triggerValue&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;0.3f&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;ResetLaser&lt;/span&gt;&lt;span&gt;();&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;private&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;void&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;TryToGetTeleportTarget&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;targetAcquired&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;false&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;Vector3&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;origin&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;transform&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;position&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;SetPosition&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;origin&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;for&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;int&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;i&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;&lt;span&gt;; &lt;/span&gt;&lt;span&gt;i&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;laserSteps&lt;/span&gt;&lt;span&gt;-&lt;/span&gt;&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;&lt;span&gt;; &lt;/span&gt;&lt;span&gt;i&lt;/span&gt;&lt;span&gt;++&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;27&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;Vector3&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;offset&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; (&lt;/span&gt;&lt;span&gt;transform&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;forward&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;+&lt;/span&gt;&lt;span&gt; (&lt;/span&gt;&lt;span&gt;Vector3&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;down&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;*&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;dropPerSegment&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;*&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;i&lt;/span&gt;&lt;span&gt;)).&lt;/span&gt;&lt;span&gt;normalized&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;*&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;laserSegmentDistance&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;28&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;Physics&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Raycast&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;origin&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;offset&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;/span&gt;&lt;span&gt;out&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;RaycastHit&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;hit&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;laserSegmentDistance&lt;/span&gt;&lt;span&gt;))&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;29&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;30&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;for&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;intj&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;i&lt;/span&gt;&lt;span&gt;+&lt;/span&gt;&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;&lt;span&gt;; &lt;/span&gt;&lt;span&gt;j&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;laser&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;positionCount&lt;/span&gt;&lt;span&gt;; &lt;/span&gt;&lt;span&gt;j&lt;/span&gt;&lt;span&gt;++&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;31&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;32&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;                &lt;/span&gt;&lt;/span&gt;&lt;span&gt;laser&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;SetPosition&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;j&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;hit&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;point&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;33&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;34&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;hit&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;transform&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;gameObject&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;layer&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;==&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;LayerMask&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;NameToLayer&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;teleprotationLayerName&lt;/span&gt;&lt;span&gt;))&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;35&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;36&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;                &lt;/span&gt;&lt;/span&gt;&lt;span&gt;startColor&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Color&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;green&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;37&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;                &lt;/span&gt;&lt;/span&gt;&lt;span&gt;endColor&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Color&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;green&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;38&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;                &lt;/span&gt;&lt;/span&gt;&lt;span&gt;targetPos&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;hit&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;point&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;39&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;                &lt;/span&gt;&lt;/span&gt;&lt;span&gt;targetAcquired&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;40&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;                &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;41&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;42&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;43&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;44&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;                &lt;/span&gt;&lt;/span&gt;&lt;span&gt;startColor&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Color&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;red&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;45&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;                &lt;/span&gt;&lt;/span&gt;&lt;span&gt;endColor&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Color&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;red&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;46&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;                &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;47&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;48&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;49&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;50&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;51&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;SetPosition&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;i&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;+&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;origin&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;+&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;offset&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;52&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;origin&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;+=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;offset&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;53&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;54&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;55&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;startColor&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Color&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;red&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;56&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;endColor&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Color&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;red&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;57&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;58&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;private&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;void&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Teleport&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;59&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;60&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;enabled&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;false&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;61&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;targetAcquired&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;false&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;62&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;ResetLaser&lt;/span&gt;&lt;span&gt;();&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;63&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;Vector3&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;offset&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;newVector3&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;targetPos&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;x&lt;/span&gt;&lt;span&gt; â€“ &lt;/span&gt;&lt;span&gt;head&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;transform&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;position&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;x&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;targetPos&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;y&lt;/span&gt;&lt;span&gt; â€“ &lt;/span&gt;&lt;span&gt;origin&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;position&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;y&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;targetPos&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;z&lt;/span&gt;&lt;span&gt; â€“ &lt;/span&gt;&lt;span&gt;head&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;transform&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;position&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;z&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;64&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;position&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;+=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;offset&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;65&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;enabled&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;66&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;67&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;private&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;void&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;ResetLaser&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;68&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;69&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;for&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;int&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;i&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;&lt;span&gt;; &lt;/span&gt;&lt;span&gt;i&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;laser&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;positionCount&lt;/span&gt;&lt;span&gt;; &lt;/span&gt;&lt;span&gt;i&lt;/span&gt;&lt;span&gt;++&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;70&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;71&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;SetPosition&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;i&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;Vector3&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;zero&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;72&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;73&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;After the teleportation, the position of laser will be set as Vector3. Zero, that is, a vector with a length of 0. At this time, the laser is shown as hidden.&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;Visual and auditory cues&lt;a href=&quot;#visual-and-auditory-cues&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;&lt;/p&gt;&lt;figure&gt;&lt;img src=&quot;https://blog.freelytomorrow.com/articles_img/sit283/preview.png&quot; alt=&quot;&quot; /&gt;&lt;figcaption&gt;preview&lt;/figcaption&gt;&lt;/figure&gt;&lt;br /&gt;
To create the underwater atmosphere, I also used exponential fog, which only renders when the player is underwater.&lt;p&gt;&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;private&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;evoid&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;FixedUpdate&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;state&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;isUnderWater&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;-&lt;/span&gt;&lt;/span&gt;&lt;span&gt;1.2f&lt;/span&gt;&lt;span&gt;))&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;fog&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;fog&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;false&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;Parameters can be assessable via a user interface provided to the user&lt;a href=&quot;#parameters-can-be-assessable-via-a-user-interface-provided-to-the-user&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;At any time, the player can call out the Settings panel through the Primary Button of the controller. The panel contains some parameters of the player control system and environment, such as the rotation Angle of a single Snap Turn, enable or disable gravity, enabled or disable teleportation function and play or mute BGM, etc.&lt;br /&gt;
&lt;/p&gt;&lt;figure&gt;&lt;img src=&quot;https://blog.freelytomorrow.com/articles_img/sit283/menu.png&quot; alt=&quot;&quot; /&gt;&lt;figcaption&gt;menu&lt;/figcaption&gt;&lt;/figure&gt;&lt;br /&gt;
When the panel is opened, functions such as movement and teleportation will be disabled. A Laser for manipulating the panel will be enabled. This code is controlled by the MenuPanel script.&lt;p&gt;&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;void&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;SetTypeOfTurn&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;int&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;index&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;index&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;==&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;enabled&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;false&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;enabled&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;//turnAngleSlider.enabled = true;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;gameObject&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;SetActive&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;index&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;==&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;enabled&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;false&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;enabled&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;//turnAngleSlider.enabled = false;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;gameObject&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;SetActive&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;false&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;void&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;EnableGravity&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;int&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;index&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;index&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;==&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;enabled&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;index&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;==&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;enabled&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;false&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;27&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;28&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;29&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;void&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;EnableTeleportation&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;int&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;index&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;30&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;31&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;index&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;==&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;32&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;33&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;enabled&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;34&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;enabled&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;35&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;teleportationState&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;36&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;37&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;index&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;==&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;38&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;39&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;enabled&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;false&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;40&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;enabled&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;false&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;41&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;teleportationState&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;false&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;42&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;43&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;44&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;void&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;ChangeVolume&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;float&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;45&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;46&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;volume&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;47&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;48&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;void&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;EnableVolumeSlider&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;bool&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;49&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;50&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;enabled&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;51&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;mute&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;!&lt;/span&gt;&lt;span&gt;audioSource&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;mute&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;52&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;&lt;/p&gt;&lt;figure&gt;&lt;img src=&quot;https://blog.freelytomorrow.com/articles_img/sit283/panel.png&quot; alt=&quot;&quot; /&gt;&lt;figcaption&gt;panel&lt;/figcaption&gt;&lt;/figure&gt;&lt;br /&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;Autonomous simulation&lt;a href=&quot;#autonomous-simulation&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;A fixed number of fish are generated in the game, each generated by a specific Spawner which sets a random initial spawned position for the fish and defines the fishâ€™s movement range.&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;void&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Start&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;float&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;height&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;waterPlane&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;position&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;y&lt;/span&gt;&lt;span&gt; â€“ &lt;/span&gt;&lt;/span&gt;&lt;span&gt;2.0f&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;goalPos&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;transform&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;position&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;Vector3&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;anchorPos&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;gameObject&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;transform&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;position&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;for&lt;/span&gt;&lt;span&gt; (&lt;/span&gt;&lt;span&gt;int&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;i&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;&lt;span&gt;; &lt;/span&gt;&lt;span&gt;i&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;allFish&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;Length&lt;/span&gt;&lt;span&gt;; &lt;/span&gt;&lt;span&gt;i&lt;/span&gt;&lt;span&gt;++&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;int&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;index&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Random&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Range&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;fishTypeNum&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;GameObject&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;fish&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;fishPrefabs&lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;index&lt;/span&gt;&lt;span&gt;];&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;Vector3&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;pos&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;newVector3&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;Range&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;-&lt;/span&gt;&lt;span&gt;swimRange&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;x&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;+&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;anchorPos&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;x&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;swimRange&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;x&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;+&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;anchorPos&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;x&lt;/span&gt;&lt;span&gt;),&lt;/span&gt;&lt;span&gt;Random&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Range&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;height&lt;/span&gt;&lt;span&gt;),&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;Range&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;-&lt;/span&gt;&lt;span&gt;swimRange&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;z&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;+&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;anchorPos&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;z&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;swimRange&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;z&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;+&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;anchorPos&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;z&lt;/span&gt;&lt;span&gt;));&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;allFish&lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;i&lt;/span&gt;&lt;span&gt;] &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; (&lt;/span&gt;&lt;span&gt;GameObject&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Instantiate&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;fish&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;pos&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;Quaternion&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;identity&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;allFish&lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;i&lt;/span&gt;&lt;span&gt;].&lt;/span&gt;&lt;span&gt;GetComponent&lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;FishFlock&lt;/span&gt;&lt;span&gt;&lt;span&gt;&amp;gt;().&lt;/span&gt;&lt;span&gt;spawnerManager&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;void&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Update&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;Random&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Range&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;10000&lt;/span&gt;&lt;span&gt;&lt;span&gt;) &lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;50&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;//Generate random position&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;goalPos&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;transform&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;position&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;+&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;newVector3&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;Random&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Range&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;-&lt;/span&gt;&lt;span&gt;swimRange&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;x&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;swimRange&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;x&lt;/span&gt;&lt;span&gt;),&lt;/span&gt;&lt;span&gt;Random&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Range&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;-&lt;/span&gt;&lt;span&gt;swimRange&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;y&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;swimRange&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;y&lt;/span&gt;&lt;span&gt;),&lt;/span&gt;&lt;span&gt;Random&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Range&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;-&lt;/span&gt;&lt;span&gt;swimRange&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;z&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;swimRange&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;z&lt;/span&gt;&lt;span&gt;));&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;//goalPrefab.transform.position = goalPos;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;Fish behavior is controlled by another script, the FishFlock. Flocking is an algorithm used to simulate the clustering behavior of animals in the real world. Through this algorithm, when multiple fish are less than a specific distance away, they are set to be in the same group and perform the same moving behavior. Through a random number method, each fish has a certain chance to escape the control of the algorithm for a short time, at which point the fish will leave the cluster until it is controlled by the algorithm again and comes close to other fish to form the group again.&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;void&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Update&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;Bounds&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;bounds&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; new &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Bounds&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;spawnerManager&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;transform&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;position&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;spawnerManager&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;swimRange&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;*&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt;&lt;span&gt; (&lt;/span&gt;&lt;span&gt;!&lt;/span&gt;&lt;span&gt;bounds&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Contains&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;transform&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;position&lt;/span&gt;&lt;span&gt;))&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;turning&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;turning&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;false&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;turning&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;//Let fish back to the center of the tank.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;Vector3&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;direction&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;spawnerManager&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;transform&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;position&lt;/span&gt;&lt;span&gt; â€“ &lt;/span&gt;&lt;span&gt;transform&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;position&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;//Vector3 direction = newGoalPos â€“ transform.position;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;rotation&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Quaternion&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;Slerp&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;transform&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;rotation&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;Quaternion&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;LookRotation&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;direction&lt;/span&gt;&lt;span&gt;), &lt;/span&gt;&lt;span&gt;rotationSpeed&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;*&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Time&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;deltaTime&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;speed&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Random&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;Range&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;minSpeed&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;maxSpeed&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;Random&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Range&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;5&lt;/span&gt;&lt;span&gt;&lt;span&gt;) &lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;ApplyFishBehaviours&lt;/span&gt;&lt;span&gt;();&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;27&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;Translate&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;speed&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;*&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Time&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;deltaTime&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;28&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;29&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;private&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;void&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;ApplyFishBehaviours&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;30&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;31&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;GameObject&lt;/span&gt;&lt;span&gt;&lt;span&gt;[] &lt;/span&gt;&lt;span&gt;gos&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;32&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;gos&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;spawnerManager&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;allFish&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;33&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;//Center of the group&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;34&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;Vector3&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;vCenter&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Vector3&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;zero&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;35&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;//Avoidance vector: Avoid fish from crashing each other&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;36&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;Vector3&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;vAvoid&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Vector3&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;zero&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;37&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;//Group speed&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;38&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;float&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;gSpeed&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;0.1f&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;39&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;//Random position&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;40&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;Vector3&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;goalPos&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;spawnerManager&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;goalPos&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;41&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;float&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;distance&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;42&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;intgroupSize&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;43&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;foreach&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;GameObject&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;item&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;in&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;gos&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;44&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;45&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;item&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;!=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;gameObject&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;46&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;47&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;//Calculate the distance between the current fish to all the other fish.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;48&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;distance&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Vector3&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;Distance&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;item&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;transform&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;position&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;transform&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;position&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;49&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;//Form a group with other fishes whose in the range of â€œneighbourDistanceâ€&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;50&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;distance&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&amp;lt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;neighbourDistance&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;51&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;52&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;                &lt;/span&gt;&lt;/span&gt;&lt;span&gt;vCenter&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;+=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;item&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;transform&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;position&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;53&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;                &lt;/span&gt;&lt;/span&gt;&lt;span&gt;groupSize&lt;/span&gt;&lt;span&gt;++&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;54&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;distance&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;2.0f&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;55&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;                &lt;/span&gt;&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;56&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;                    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;vAvoid&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;vAvoid&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;+&lt;/span&gt;&lt;span&gt; (&lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;transform&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;position&lt;/span&gt;&lt;span&gt; â€“ &lt;/span&gt;&lt;span&gt;item&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;transform&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;position&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;57&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;                &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;58&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;                &lt;/span&gt;&lt;span&gt;FishFlock&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;anotherFlock&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;item&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;GetComponent&lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;FishFlock&lt;/span&gt;&lt;span&gt;&amp;gt;();&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;59&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;                &lt;/span&gt;&lt;/span&gt;&lt;span&gt;gSpeed&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;gSpeed&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;+&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;anotherFlock&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;speed&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;60&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;61&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;62&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;63&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;groupSize&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;64&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;65&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;vCenter&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;vCenter&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;groupSize&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;+&lt;/span&gt;&lt;span&gt; (&lt;/span&gt;&lt;span&gt;goalPos&lt;/span&gt;&lt;span&gt; â€“ &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;transform&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;position&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;66&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;speed&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;gSpeed&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;groupSize&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;67&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;Vector3&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;direction&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; (&lt;/span&gt;&lt;span&gt;vCenter&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;+&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;vAvoid&lt;/span&gt;&lt;span&gt;) â€“ &lt;/span&gt;&lt;span&gt;transform&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;position&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;68&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;direction&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;!=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Vector3&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;zero&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;69&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;70&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;rotation&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Quaternion&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;Slerp&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;transform&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;rotation&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;Quaternion&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;LookRotation&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;direction&lt;/span&gt;&lt;span&gt;), &lt;/span&gt;&lt;span&gt;rotationSpeed&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;*&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Time&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;deltaTime&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;71&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;72&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;73&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;Start screen&lt;a href=&quot;#start-screen&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;The game consists of two scenes: Game Scene, and Menu Scene. The Menu Scene is the start scene which consists of a simple environment and an interactive panel. The interactive panel includes a Start button â€“ click to move player to Game Scene; Button Usage â€“ describes the basic operation method; A Quit button, when clicked, terminates the program; In the lower right corner of the panel is the developer information for the game.&lt;br /&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;Operational instructions&lt;a href=&quot;#operational-instructions&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;How to install and run the code.&lt;a href=&quot;#how-to-install-and-run-the-code&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;The game will be packaged as a compressed file. Players can start playing by double clicking the executable file after unzipping.&lt;br /&gt;
The game program runs on the PC Windows side, but VR headset is necessary for game play.&lt;br /&gt;&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;Instructions on controller operations&lt;a href=&quot;#instructions-on-controller-operations&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;


































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th&gt;Left controller&lt;/th&gt;&lt;th&gt;Right controller&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;Move&lt;/td&gt;&lt;td&gt;2D Axis&lt;/td&gt;&lt;td&gt;-&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Rotation(perspective)&lt;/td&gt;&lt;td&gt;-&lt;/td&gt;&lt;td&gt;2D Axis&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Swim Up&lt;/td&gt;&lt;td&gt;-&lt;/td&gt;&lt;td&gt;2D Axis (Pressed)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Call out the control panel&lt;/td&gt;&lt;td&gt;X Button&lt;/td&gt;&lt;td&gt;A Button&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Teleportation&lt;/td&gt;&lt;td&gt;-&lt;/td&gt;&lt;td&gt;Trigger&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;Asset list&lt;a href=&quot;#asset-list&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;AQUAS Lite â€“ Built-In Render Pipeline, Dogmatic, &lt;a href=&quot;https://assetstore.unity.com/packages/vfx/shaders/aquas-lite-built-in-render-pipeline-53519&quot;&gt;https://assetstore.unity.com/packages/vfx/shaders/aquas-lite-built-in-render-pipeline-53519&lt;/a&gt;&lt;br /&gt;
Colorful Sea-Fish Pack, Sou Chen Ki, &lt;a href=&quot;https://assetstore.unity.com/packages/3d/characters/animals/fish/colorful-sea-fish-pack-12389&quot;&gt;https://assetstore.unity.com/packages/3d/characters/animals/fish/colorful-sea-fish-pack-12389&lt;/a&gt;&lt;br /&gt;
Destroyed City FREE, Profi Developers, &lt;a href=&quot;https://assetstore.unity.com/packages/3d/environments/sci-fi/destroyed-city-free-6459&quot;&gt;https://assetstore.unity.com/packages/3d/environments/sci-fi/destroyed-city-free-6459&lt;/a&gt;&lt;br /&gt;
Free Stylized Skybox, Yuki2022, &lt;a href=&quot;https://assetstore.unity.com/packages/2d/textures-materials/sky/free-stylized-skybox-212257&quot;&gt;https://assetstore.unity.com/packages/2d/textures-materials/sky/free-stylized-skybox-212257&lt;/a&gt;&lt;br /&gt;
Rusty Cars, Duaneâ€™s Mind, &lt;a href=&quot;https://assetstore.unity.com/packages/3d/vehicles/rusty-cars-3437&quot;&gt;https://assetstore.unity.com/packages/3d/vehicles/rusty-cars-3437&lt;/a&gt;&lt;br /&gt;
Ambient Video Game Music â€“ Underwater Worlds, Phat Phrog Studios, &lt;a href=&quot;https://assetstore.unity.com/packages/audio/ambient/nature/ambient-video-game-music-underwater-worlds-220371&quot;&gt;https://assetstore.unity.com/packages/audio/ambient/nature/ambient-video-game-music-underwater-worlds-220371&lt;/a&gt;&lt;br /&gt;
Aquarium â€“ Shoal AI, Blackant Master Studio, &lt;a href=&quot;https://assetstore.unity.com/packages/tools/ai/aquarium-shoal-ai-176475&quot;&gt;https://assetstore.unity.com/packages/tools/ai/aquarium-shoal-ai-176475&lt;/a&gt;&lt;br /&gt;&lt;/p&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;References&lt;a href=&quot;#references&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Al for developers, Chapter 4. Flocking, Glenn.S &amp;amp; David.M.B, Oâ€™REILLY, &lt;a href=&quot;https://www.oreilly.com/library/view/ai-for-game/0596005555/ch04.html&quot;&gt;https://www.oreilly.com/library/view/ai-for-game/0596005555/ch04.html&lt;/a&gt; &lt;br /&gt;
Coding Challenge #124: Flocking Simulation, The Coding Train, YouTube, &amp;lt; &lt;a href=&quot;https://www.youtube.com/watch?v=mhjuuHl6qHM%3E&quot;&gt;https://www.youtube.com/watch?v=mhjuuHl6qHM&amp;gt;&lt;/a&gt;&lt;br /&gt;&lt;/p&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;Showcase Video&lt;a href=&quot;#showcase-video&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;/section&gt;</content:encoded></item><item><title>Ansible Role</title><link>https://white-festa.net/posts/ansible-role/</link><guid isPermaLink="true">https://white-festa.net/posts/ansible-role/</guid><description>é€šè¿‡Ansible Roleå°†å•ä¸ªå‰§æœ¬æ‹†åˆ†ä¸ºå¤šä¸ªå­æ–‡ä»¶ï¼Œæ›´ä¾¿äºå¤ç”¨ã€ç»´æŠ¤ã€ä¿®æ”¹å’Œä½¿ç”¨ã€‚</description><pubDate>Tue, 11 Oct 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;å¸¸è§„çš„ansible playbookï¼Œå…¶ä¸­å¯èƒ½æ¶‰åŠåˆ°ä¸Šä¼ å¤šä»½æ–‡ä»¶åˆ°è¿œç¨‹ä¸»æœºï¼Œè¿™æ ·ä¸€æ¥ï¼Œé…ç½®æ–‡ä»¶ï¼Œå‰§æœ¬ç­‰å†…å®¹éƒ½æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹å†…ï¼Œéå¸¸æ··ä¹±ï¼Œä¸ä¾¿äºç®¡ç†ã€‚&lt;br /&gt;
Ansible Roleå¯ä»¥å°†å•ä¸ªå‰§æœ¬æ‹†åˆ†ä¸ºå¤šä¸ªå­æ–‡ä»¶ï¼Œæ›´ä¾¿äºç»´æŠ¤ï¼Œä¿®æ”¹å’Œä½¿ç”¨ã€‚&lt;/p&gt;
&lt;section&gt;&lt;h1&gt;Ansible Roleä»‹ç»&lt;a href=&quot;#ansible-roleä»‹ç»&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;roleä¸»è¦çš„ä½œç”¨æ˜¯å¯ä»¥å•ç‹¬çš„é€šè¿‡ä¸€ä¸ªæœ‰ç»„ç»‡çš„ç»“æ„ã€é€šè¿‡å•ç‹¬çš„ç›®å½•ç®¡ç†å¦‚å˜é‡ã€æ–‡ä»¶ã€ä»»åŠ¡ã€æ¨¡å—ã€ä»¥åŠå¤„ç†ä»»åŠ¡ç­‰ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡includeå¯¼å…¥ä½¿ç”¨è¿™äº›ç›®å½•ã€‚&lt;br /&gt;
rolesä¸»è¦ä¾èµ–äºç›®å½•çš„å‘½åå’Œæ‘†æ”¾ï¼Œé»˜è®¤tasks/main.ymlæ˜¯æ‰€æœ‰ä»»åŠ¡çš„äººå£ï¼Œä½¿ç”¨rolesçš„è¿‡ç¨‹ä¹Ÿå¯ä»¥è®¤ä¸ºæ˜¯ç›®å½•è§„èŒƒåŒ–å‘½åçš„è¿‡ç¨‹ã€‚&lt;br /&gt;
rolesæ¯ä¸ªç›®å½•ä¸‹å‡ç”±main.ymlå®šä¹‰è¯¥åŠŸèƒ½çš„ä»»åŠ¡é›†ï¼Œtasks/main.ymlé»˜è®¤æ‰§è¡Œæ‰€æœ‰å®šä¹‰çš„ä»»åŠ¡ï¼›&lt;/p&gt;&lt;section&gt;&lt;h2&gt;é…ç½®æ–‡ä»¶&lt;a href=&quot;#é…ç½®æ–‡ä»¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;roleç›®å½•è¢«å®šä¹‰åœ¨ansibleé…ç½®æ–‡ä»¶&lt;code&gt;/etc/ansible/ansible.cfg&lt;/code&gt;ä¸­ï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[root@master-61 /etc/ansible]#cat ansible.cfg | grep roles_path&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;#roles_path    = /etc/ansible/roles&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;ç›®å½•è§„åˆ’&lt;a href=&quot;#ç›®å½•è§„åˆ’&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;ä¸€ä¸ªå®Œæ•´çš„rolesæ˜¯ç”±taskã€handlersã€filesã€varsã€templatesã€metaç­‰ä¸€ç³»åˆ—ç›®å½•ç»„æˆï¼Œå„ç›®å½•å­˜æ”¾ä¸åŒçš„æ–‡ä»¶å®ç°ä¸åŒçš„åŠŸèƒ½ï¼Œåœ¨è°ƒç”¨æ—¶ç›´æ¥ä¸‹æ–‡ä»¶åå³å¯è°ƒç”¨ã€‚&lt;br /&gt;
å‚è§ï¼š&lt;a href=&quot;https://docs.ansible.com/ansible/latest/playbook_guide/playbooks_reuse_roles.html#role-directory-structure&quot;&gt;https://docs.ansible.com/ansible/latest/playbook_guide/playbooks_reuse_roles.html#role-directory-structure&lt;/a&gt; &lt;br /&gt;&lt;/p&gt;&lt;p&gt;Ansible Roleå®šä¹‰äº†å…«ä¸ªä¸»è¦çš„æ ‡å‡†ç›®å½•ï¼Œæ¯ä¸ªansible role playbookä¸­è‡³å°‘åŒ…å«å…¶ä¸­ä¸€ä¸ªç›®å½•ï¼Œä½¿ç”¨ä¸åˆ°çš„ç›®å½•å¯ä»¥çœç•¥ã€‚ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;â”œâ”€â”€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;ansible.cfg&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;â”œâ”€â”€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;hosts&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;â””â”€â”€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;roles&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;â””â”€â”€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;commom&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;â”œâ”€â”€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;defaults&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;â”œâ”€â”€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;files&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;â”œâ”€â”€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;handlers&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;â”œâ”€â”€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;library&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;â”œâ”€â”€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;meta&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;â”œâ”€â”€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;tasks&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;â”œâ”€â”€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;templates&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;â””â”€â”€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;vars&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;ä½œç”¨ï¼š&lt;/p&gt;&lt;ul&gt;
&lt;li&gt;tasks/main.yml  è§’è‰²æ‰§è¡Œçš„ä»»åŠ¡çš„ä¸»è¦åˆ—è¡¨ã€‚&lt;/li&gt;
&lt;li&gt;handlers/main.yml  å¤„ç†ç¨‹åºï¼Œå¯ä»¥åœ¨æ­¤è§’è‰²å†…éƒ¨æˆ–å¤–éƒ¨ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;library/my_module.py å¯åœ¨æ­¤è§’è‰²ä¸­ä½¿ç”¨çš„&lt;a href=&quot;https://docs.ansible.com/ansible/latest/playbook_guide/playbooks_reuse_roles.html#embedding-modules-and-plugins-in-roles&quot;&gt;æ¨¡å—&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;defaults/main.yml- è§’è‰²çš„é»˜è®¤å˜é‡ï¼Œæˆ–è€…è¯´å˜é‡çš„é»˜è®¤å€¼ï¼›å…·æœ‰æœ€ä½çš„ä¼˜å…ˆçº§ï¼Œå¯ä»¥è¢«ä¸»åŠ¨è¦†ç›–ã€‚&lt;/li&gt;
&lt;li&gt;vars/main.yml- è§’è‰²çš„å…¶ä»–å˜é‡ï¼ˆæœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…ä½¿ç”¨å˜é‡ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;files/main.yml- è§’è‰²éƒ¨ç½²çš„æ–‡ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;templates/main.yml- è§’è‰²éƒ¨ç½²çš„æ¨¡æ¿ã€‚&lt;/li&gt;
&lt;li&gt;meta/main.yml- è§’è‰²çš„å…ƒæ•°æ®ï¼ŒåŒ…æ‹¬è§’è‰²ä¾èµ–é¡¹ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;å®è·µ&lt;a href=&quot;#å®è·µ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;å°†ä¹‹å‰çš„éƒ¨ç½²nfsçš„playbookä»¥roleçš„æ–¹å¼é‡å†™&lt;/p&gt;&lt;section&gt;&lt;h2&gt;rolesæ–‡ä»¶ç»“æ„&lt;a href=&quot;#rolesæ–‡ä»¶ç»“æ„&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;â”œâ”€â”€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;ansible.cfg&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;â”œâ”€â”€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;deploy_nfs.yml&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;â”œâ”€â”€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;hosts&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;â”œâ”€â”€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;roles&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;â”‚Â Â &lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;â”œâ”€â”€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;deploy_nfs&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;â”‚Â Â &lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;â”‚Â Â &lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;â”‚Â Â &lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;â””â”€â”€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;main.yml&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;â”‚Â Â &lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;â”‚Â Â &lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;â”œâ”€â”€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;tasks&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;â”‚Â Â &lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;â”‚Â Â &lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;â”‚Â Â &lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;â””â”€â”€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;main.yml&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;â”‚Â Â &lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;â”‚Â Â &lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;â””â”€â”€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;vars&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;â”‚Â Â &lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;â”‚Â Â &lt;/span&gt;&lt;span&gt;     &lt;/span&gt;&lt;span&gt;â””â”€â”€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;main.yml&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;â”‚Â Â &lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;â””â”€â”€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;web_mount&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;â”‚Â Â &lt;/span&gt;&lt;span&gt;     &lt;/span&gt;&lt;span&gt;â”œâ”€â”€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;tasks&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;â”‚Â Â &lt;/span&gt;&lt;span&gt;     &lt;/span&gt;&lt;span&gt;â”‚Â Â &lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;â””â”€â”€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;main.yml&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;â”‚Â Â &lt;/span&gt;&lt;span&gt;     &lt;/span&gt;&lt;span&gt;â””â”€â”€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;vars&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;â”‚Â Â &lt;/span&gt;&lt;span&gt;         &lt;/span&gt;&lt;span&gt;â””â”€â”€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;main.yml&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;â””â”€â”€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;web_mount.yml&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;nfsæœåŠ¡ç«¯&lt;a href=&quot;#nfsæœåŠ¡ç«¯&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;tasks/main.yml&lt;a href=&quot;#tasksmainyml&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;01 - install apps&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;yum&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;{{ item }}&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;state&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;installed&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;loop&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;{{ apps }}&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;02 - start and enable apps&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;systemd&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;{{ item }}&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;state&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;started&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;enabled&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;loop&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;{{ apps }}&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;03 - setup nfs configuration&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;shell&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;cmd&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;echo &apos;/data 172.16.1.0/24(rw,sync,all_squash)&apos; &amp;gt;&amp;gt; /etc/exports&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;notify&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;start nfs&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;04 - change wordpress file user and group&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;file&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;path&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;{{ target_path }}&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;state&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;directory&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;owner&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nfsnobody&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;group&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nfsnobody&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;recurse&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;vars/main.yml&lt;a href=&quot;#varsmainyml&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apps&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;nfs-utils&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;rpcbind&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;target_path&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/data&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;handlers/main.yml&lt;a href=&quot;#handlersmainyml&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;start nfs&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;systemd&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nfs&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;state&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;started&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;enabled&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;roleå¯åŠ¨æ–‡ä»¶deploy_nfs.yml&lt;a href=&quot;#roleå¯åŠ¨æ–‡ä»¶deploy_nfsyml&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;è¯¥æ–‡ä»¶å’Œrolesç›®å½•å¹³çº§&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;hosts&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nfs&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;roles&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;deploy_nfs&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;nfsæœåŠ¡ç«¯(webä¸»æœºç»„)&lt;a href=&quot;#nfsæœåŠ¡ç«¯webä¸»æœºç»„&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;tasks/main.yml&lt;a href=&quot;#tasksmainyml-1&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;01 - install apps&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;yum&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;{{ item }}&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;state&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;installed&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;loop&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;{{ apps }}&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;02 - start and enable apps&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;systemd&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;{{ item }}&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;state&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;started&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;enabled&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;loop&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;{{ apps }}&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;03 - create mount directory&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;file&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;path&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;{{ mount_path }}&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;state&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;directory&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;04 - mount&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;mount&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;src&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;172.16.1.31:/data&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;path&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;{{ mount_path }}&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;fstype&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nfs&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;state&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;mounted&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;vars/main.yml&lt;a href=&quot;#varsmainyml-1&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;apps&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;nfs-utils&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;rpcbind&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;mount_path&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/www&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;roleå¯åŠ¨æ–‡ä»¶web_mount.yml&lt;a href=&quot;#roleå¯åŠ¨æ–‡ä»¶web_mountyml&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;hosts&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;roles&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;web_mount&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;</content:encoded></item><item><title>Ansible-playbooké«˜çº§ç”¨æ³•</title><link>https://white-festa.net/posts/ansible-playbook/</link><guid isPermaLink="true">https://white-festa.net/posts/ansible-playbook/</guid><description>åœ¨ansible playbookä¸­ä½¿ç”¨å¾ªç¯ã€varså’Œwhenç­‰æ–¹æ³•å®ç°ansibleæ¡ä»¶å¼åŠŸèƒ½</description><pubDate>Sun, 25 Sep 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Ansible Playbookæ˜¯åŸºäºYamlè¯­æ³•çš„ansibleå‘½ä»¤æ–‡ä»¶ï¼Œç®€å•æ¥è¯´ï¼Œå¯ä»¥ç†è§£ä¸ºlinuxçš„æ™®é€šå‘½ä»¤å’Œshellè„šæœ¬çš„åŒºåˆ«ï¼Œé€šè¿‡playbookï¼Œå¯ä»¥å®ç°æ›´å¤æ‚çš„æ“ä½œã€‚&lt;br /&gt;
ä¸‹é¢æ˜¯ä¸€ä¸ªéƒ¨ç½²nfsè¿œç¨‹æŒ‚è½½çš„ansible playbook&lt;/p&gt;
&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;---&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;setup nfs server&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;hosts&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nfs&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;tasks&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;01 - install nfs-utils&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;yum&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nfs-utils&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;state&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;installed&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;02 - install rpcbind&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;yum&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;rpcbind&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;state&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;installed&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;03 - start and enable nfs-utils&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;systemd&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nfs-utils&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;state&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;started&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;enabled&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;04 - start and enable rpcbind&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;systemd&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;rpcbind&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;state&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;started&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;enabled&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;05 - setup nfs configuration&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;shell&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;cmd&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;echo &apos;/data 172.16.1.0/24(rw,sync,all_squash)&apos; &amp;gt;&amp;gt; /etc/exports&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;06 - change wordpress file user and group&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;27&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;file&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;28&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;path&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/data&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;29&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;state&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;directory&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;30&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;owner&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nfsnobody&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;31&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;group&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nfsnobody&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;32&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;recurse&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;33&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;09 - start and enable nfs&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;34&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;systemd&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;35&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nfs&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;36&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;state&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;started&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;37&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;enabled&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;38&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;39&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;mount wordpress files to web server&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;40&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;hosts&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;41&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;tasks&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;42&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;01 - install rpcbind&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;43&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;yum&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;44&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;rpcbind&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;45&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;state&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;installed&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;46&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;02 - install nfs-utils&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;47&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;yum&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;48&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nfs-utils&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;49&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;state&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;installed&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;50&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;03 - start and enable nfs-utils&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;51&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;systemd&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;52&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nfs-utils&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;53&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;state&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;started&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;54&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;enabled&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;55&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;04 - create mount directory&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;56&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;file&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;57&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;path&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/www&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;58&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;state&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;directory&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;59&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;05 - restart rpcbind&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;60&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;systemd&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;61&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;rpcbind&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;62&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;state&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;restarted&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;63&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;enabled&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;64&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;06 - mount&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;65&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;mount&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;66&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;src&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;172.16.1.31:/wordpress&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;67&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;path&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/www&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;68&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;fstype&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nfs&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;69&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;state&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;mounted&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;ä»è¿™ä¸ªplaybookå¯ä»¥çœ‹å‡ºï¼Œéƒ¨åˆ†å†…å®¹æ˜¯é‡å¤çš„ï¼Œä½†æ˜¯é€šè¿‡playbookçš„é«˜çº§ç”¨æ³•å¯ä»¥æ›´ç®€å•çš„å®ç°ç›¸åŒçš„åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;section&gt;&lt;h1&gt;Loopå¾ªç¯&lt;a href=&quot;#loopå¾ªç¯&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨loopå…³é”®å­—å®šä¹‰å¾ªç¯å˜é‡&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨itemå…³é”®å­—æå–loopæ¯æ¬¡å¾ªç¯å‡ºæ¥çš„å€¼&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ä»¥nfsæœåŠ¡å™¨ä¸­å®‰è£…nfs-utilså’Œrpcbindä¸ºä¾‹ï¼Œä½¿ç”¨loopå¯ä»¥è®©æˆ‘ä»¬åœ¨ä¸€ä¸ªæ¨¡å—ä¸­å®‰è£…ä¸¤ä¸ªåº”ç”¨ã€‚&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;---&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;install nfs-utils and rpcbind&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;hosts&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nfs&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;tasks&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;installation&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;yum&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;{{ item }}&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;state&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;installed&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;loop&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;nfs-utils&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;rpcbind&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;å¦‚æ­¤ä¸€æ¥ï¼Œæˆ‘ä»¬å°±å®ç°äº†é€šè¿‡å¾ªç¯å®‰è£…å¤šä¸ªè½¯ä»¶ã€‚&lt;br /&gt;
ä½†æ˜¯ï¼Œå¯ä»¥å‘ç°æˆ‘ä»¬åé¢ä¸€æ ·è¦é€šè¿‡systemdæ¨¡å—æ¥è¿è¡Œå¹¶ä¸ºè¿™ä¸¤ä¸ªåº”ç”¨è®¾ç½®å¼€æœºè‡ªå¯ï¼›ç›®å‰loopå¾ªç¯æ˜¯ç½®äºname: installationä¸‹é¢ï¼Œæ²¡åŠæ³•åœ¨å…¶ä»–çš„æ¨¡å—ä¸­ä½¿ç”¨ï¼Œå› æ­¤ï¼Œå¼•å…¥ä¸‹ä¸€ä¸ªæ¦‚å¿µï¼švars&lt;/p&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;ä½¿ç”¨varså®šä¹‰å¾ªç¯åˆ—è¡¨&lt;a href=&quot;#ä½¿ç”¨varså®šä¹‰å¾ªç¯åˆ—è¡¨&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;é€šè¿‡varså…³é”®å­—æˆ‘ä»¬å¯ä»¥ä¸ºå¾ªç¯é…ç½®ä¸€ä¸ªå˜é‡åï¼Œè®©è¿™ä¸ªå¾ªç¯å¯ä»¥è¢«åŒçº§çš„ä»»ä½•ä¸€ä¸ªæ¨¡å—ä½¿ç”¨ã€‚&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;---&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;setup nfs applications&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;hosts&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nfs&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;vars&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;nfs-utils&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;rpcbind&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;tasks&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;installation&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;yum&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;{{ item }}&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;state&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;installed&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;loop&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;{{ app }}&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;start and set enabled&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;systemd&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;{{ item }}&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;state&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;started&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;enabled&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;loop&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;{{ app }}&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;å¾ªç¯å¤„ç†å­—å…¸æ•°æ®&lt;a href=&quot;#å¾ªç¯å¤„ç†å­—å…¸æ•°æ®&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;å‡å¦‚æˆ‘è¦åˆ›å»ºä¸‰ä¸ªæ–‡ä»¶ï¼Œä»–ä»¬çš„å±ä¸»å„ä¸ç›¸åŒï¼Œåº”è¯¥å¦‚æœå®ç°å‘¢ï¼Ÿ&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;---&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;create files for three different users&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;hosts&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;tasks&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;create files&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;file&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;path&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;{{ item.path }}&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;state&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;touch&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;owner&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;{{ item.owner }}&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;loop&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- {&lt;/span&gt;&lt;span&gt;path&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&apos;/opt/mike.txt&apos;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;owner&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;mike&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- {&lt;/span&gt;&lt;span&gt;path&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&apos;/opt/sarah.txt&apos;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;owner&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;sarah&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- {&lt;/span&gt;&lt;span&gt;path&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&apos;/opt/john.txt&apos;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;owner&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;john&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;å½“ç„¶ï¼Œå­—å…¸å¾ªç¯ä¹Ÿå¯ä»¥è¢«å£°æ˜æˆä¸€ä¸ªå˜é‡ï¼Œå’Œä¹‹å‰çš„å·®ä¸å¤šï¼Œå°±ä¸åŠ èµ˜è¿°äº†ã€‚&lt;/p&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;Registerå°†æ¨¡å—çš„è¾“å‡ºç»“æœæ³¨å†Œä¸ºå˜é‡&lt;a href=&quot;#registerå°†æ¨¡å—çš„è¾“å‡ºç»“æœæ³¨å†Œä¸ºå˜é‡&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;Registerå¯ä»¥å°†æ¨¡å—çš„æ‰§è¡Œç»“æœæ³¨å†Œä¸ºä¸€ä¸ªå˜é‡ï¼Œå¹¶é€šè¿‡&lt;code&gt;debug&lt;/code&gt;æ¨¡å—ä¸­çš„.&lt;code&gt;stdout_lines&lt;/code&gt;è¾“å‡ºåˆ°ansibleç®¡ç†ç»ˆç«¯ã€‚&lt;br /&gt;
ä¾‹å¦‚ï¼Œæˆ‘æƒ³è¦çŸ¥é“ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ä¸­æœ‰å¤šå°‘è¡Œï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;---&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;how many lines for the text file&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;hosts&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;172.16.1.105&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;tasks&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;count lines&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;shell&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;cmd&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;cat /opt/testfile.txt | wc -l&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;register&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;lines&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;output the value&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;debug&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;msg&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;{{ lines.stdout_lines }}&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;section&gt;&lt;h3&gt;æ³¨å†Œå¤šä¸ªå˜é‡å¹¶å’Œloopç»“åˆä½¿ç”¨&lt;a href=&quot;#æ³¨å†Œå¤šä¸ªå˜é‡å¹¶å’Œloopç»“åˆä½¿ç”¨&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;åœ¨ä¹‹å‰çš„åŸºç¡€ä¸Šå†æŸ¥çœ‹ä¸€ä¸‹ç›®æ ‡ä¸»æœºå&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;---&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;register and loop&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;hosts&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;172.16.1.105&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;tasks&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;count lines&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;shell&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;cmd&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;cat /opt/testfile.txt | wc -l&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;register&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;lines&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;show hostname&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;shell&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;cmd&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;cat /etc/hostname&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;register&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;hostname&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;output the value&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;debug&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;msg&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;{{ item }}&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;loop&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;lines.stdout_lines&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;hostname.stdout_lines&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;Whenæ¡ä»¶åˆ¤æ–­&lt;a href=&quot;#whenæ¡ä»¶åˆ¤æ–­&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;whené€šå¸¸å’Œregisterç»„åˆä½¿ç”¨ï¼Œä»¥å®ç°é€šè¿‡åˆ¤æ–­æ‰§è¡Œç»“æœæ¥æŒ‡å®šåç»­æ“ä½œã€‚&lt;br /&gt;
ä»¥æŸ¥çœ‹æ–‡ä»¶ä¸ºä¾‹ï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;---&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;how many lines for the text file&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;hosts&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;172.16.1.105&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;tasks&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;count lines&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;shell&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;cmd&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;cat /opt/testfile.txt&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;ignore_errors&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;register&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;result&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;output the value&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;debug&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;msg&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;FATAL: File does not exists&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;when&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;result is failed&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;ignore_errors&lt;/code&gt;: å¿½ç•¥æŠ¥é”™ç»§ç»­å‘åæ‰§è¡Œ&lt;/p&gt;&lt;p&gt;ä¸ansibleçš„å†…ç½®å˜é‡ç›¸ç»“åˆï¼Œè¿˜å¯ä»¥å®ç°æ›´å¤šçš„æœ‰è¶£çš„åŠŸèƒ½ï¼›æ¯”å¦‚æˆ‘æƒ³ä¸ºwebä¸»æœºç»„ä¸‹çš„æ‰€æœ‰ä¸»æœºåˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œä½†å…¶ä¸­ä¸€å°ä¸»æœºä¸åŒ…æ‹¬åœ¨å†…ï¼Œè¿™å°±å¯ä»¥ç”¨å†…ç½®å˜é‡åŠ æ¡ä»¶åˆ¤æ–­çš„æ–¹æ³•æ¥å®ç°ï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;---&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;how many lines for the text file&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;hosts&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;tasks&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;count lines&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;file&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;path&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/opt/file.txt&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;state&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;touch&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;when&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;inventory_hostname != &quot;172.16.1.7&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;inventory_hostname&lt;/code&gt;: ç›®æ ‡ä¸»æœºå - å–å†³äºä½ åœ¨hostsæ–‡ä»¶ä¸­æ˜¯å¦‚ä½•é…ç½®çš„(ipæˆ–è€…åˆ«å)&lt;/p&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;Notifyå’ŒHandler&lt;a href=&quot;#notifyå’Œhandler&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;å½“è°ƒç”¨æŸä¸ªä»»åŠ¡ç¡®å®æ‰§è¡Œäº†ï¼Œä¸”çŠ¶æ€changedä¸ºtrueï¼Œnotifyå°±ä¼šæ‰§è¡ŒæŒ‡å®šçš„handleräº‹ä»¶&lt;br /&gt;
è¿˜æ˜¯ä»¥åˆ›å»ºæ–‡ä»¶ä¸ºä¾‹ï¼š&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;---&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;hosts&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;tasks&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;create file&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;file&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;path&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/opt/testfile.txt&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;state&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;touch&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;mode&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;600&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;notify&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;output message&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;handlers&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;output message&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;debug&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;msg&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;File created&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;ä½¿ç”¨Tagsä¸ºä¸åŒçš„taskæ‰“æ ‡ç­¾ï¼Œå®ç°å‰§æœ¬çš„éƒ¨åˆ†æ‰§è¡Œ&lt;a href=&quot;#ä½¿ç”¨tagsä¸ºä¸åŒçš„taskæ‰“æ ‡ç­¾å®ç°å‰§æœ¬çš„éƒ¨åˆ†æ‰§è¡Œ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;deploy nfs&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;hosts&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nfs&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;tasks&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;01 - install nfs-utils&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;yum&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;name=nfs-utils state=installed&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;tags&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;01_install_nfs_service&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;02 - install rpcbind&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;yum&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;name=rpcbind state=installed&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;tags&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;02_install_rpcbind_service&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;03 - create group&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;group&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;name=www gid=666&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;tags&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;03_add_group&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;04 - create user&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;user&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;name=www uid=666 group=www create_home=no shell=/sbin/nologin&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;tags&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;04_add_user&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;æ˜¾ç¤ºå‰§æœ¬çš„æ‰€æœ‰tagæ ‡ç­¾ï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ansible-playbook --list-tags playbook.yml&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;ä½¿ç”¨-tå‚æ•°æ ¹æ®tagæ‰§è¡Œéƒ¨åˆ†å‰§æœ¬ï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ansible-playbook -t tagå playbook.yml&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;å¯¹ä¸€å¼€å§‹çš„éƒ¨ç½²nfsæŒ‚è½½å‰§æœ¬è¿›è¡Œæ”¹é€ &lt;a href=&quot;#å¯¹ä¸€å¼€å§‹çš„éƒ¨ç½²nfsæŒ‚è½½å‰§æœ¬è¿›è¡Œæ”¹é€ &quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;---&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;setup nfs server&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;hosts&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nfs&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;vars&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;nfs-utils&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;rpcbind&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;tasks&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;01 - install apps&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;yum&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;{{ item }}&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;state&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;installed&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;loop&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;{{ app }}&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;02 - start and enable apps&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;systemd&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;{{ item }}&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;state&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;started&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;enabled&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;loop&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;{{ app }}&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;03 - setup nfs configuration&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;shell&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;cmd&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;echo &apos;/data 172.16.1.0/24(rw,sync,all_squash)&apos; &amp;gt;&amp;gt; /etc/exports&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;notify&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;start NFS&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;handlers&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;27&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;start NFS&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;28&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;systemd&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;29&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nfs&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;30&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;state&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;started&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;31&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;enabled&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;32&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;04 - change wordpress file user and group&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;33&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;file&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;34&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;path&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/data&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;35&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;state&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;directory&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;36&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;owner&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nfsnobody&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;37&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;group&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nfsnobody&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;38&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;recurse&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;39&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;40&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;mount directory to web server&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;41&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;hosts&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;web&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;42&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;vars&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;43&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;app&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;44&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;nfs-utils&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;45&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;rpcbind&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;46&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;tasks&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;47&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;01 - install apps&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;48&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;yum&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;49&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;{{ item }}&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;50&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;state&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;installed&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;51&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;loop&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;{{ app }}&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;52&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;02 - start and enable apps&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;53&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;systemd&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;54&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;{{ item }}&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;55&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;state&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;started&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;56&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;enabled&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;57&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;loop&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;&quot;{{ app }}&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;58&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;03 - create mount directory&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;59&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;file&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;60&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;path&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/www&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;61&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;state&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;directory&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;62&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;- &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;04 - mount&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;63&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;mount&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;64&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;src&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;172.16.1.31:/data&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;65&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;path&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;/www&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;66&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;fstype&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;nfs&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;67&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;state&lt;/span&gt;&lt;span&gt;: &lt;/span&gt;&lt;span&gt;mounted&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;</content:encoded></item><item><title>åŸºäºNginxè™šæ‹Ÿä¸»æœºè®¾ç½®èµ„æºé˜²ç›—é“¾çš„ç®€å•æ–¹æ³•</title><link>https://white-festa.net/posts/nginx-referer/</link><guid isPermaLink="true">https://white-festa.net/posts/nginx-referer/</guid><pubDate>Thu, 22 Sep 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;åŸºäºnginxçš„ valid_refererå˜é‡å¯ä»¥å®ç°è¿™ä¸€åŠŸèƒ½ã€‚&lt;br /&gt;
refereræ˜¯httpåè®®request headerä¸­çš„ä¸€ä¸ªå­—æ®µï¼Œè¿™ä¸ªå­—æ®µå¯ä»¥ç®€å•çš„ç†è§£ä¸ºâ€œç»æ‰‹äººâ€ï¼Œå½“æˆ‘ä»¬è®¿é—®æŸä¸ªç½‘ç«™æ—¶ï¼Œæˆ‘ä»¬å‘è¿™ä¸ªç½‘ç«™çš„nginx web serverå‘èµ·äº†è¯·æ±‚ï¼Œè¯·æ±‚è§£æå®Œæˆå nginxä¼šå°†å„ç§èµ„æºå’Œæºä»£ç è¿”å›ç»™å®¢æˆ·ç«¯å¹¶è¿›è¡Œæ¸²æŸ“ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬è®¿é—®çš„ç½‘ç«™å¯ä»¥è¢«è§†ä¸ºæ˜¯æˆ‘ä»¬è®¿é—®è¿™äº›é™æ€æ–‡ä»¶çš„â€œç»æ‰‹äººâ€ã€‚é€šè¿‡å¯¹refererè¿›è¡Œé™åˆ¶ï¼Œå¯ä»¥é˜²æ­¢ç¬¬ä¸‰æ–¹å¯¹äºèµ„æºçš„è·å–ã€‚&lt;br /&gt;&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹ä»£ç æ˜¯ä¸€ä¸ªä¾‹å­ï¼š&lt;/p&gt;
&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;valid_referers &lt;/span&gt;&lt;span&gt;*.example.com;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;#å®šä¹‰äº†åˆæ³•çš„refererï¼ŒäºŒçº§åŸŸåä¸ºexample.comçš„æ‰€æœ‰ç½‘ç«™éƒ½æ˜¯åˆæ³•çš„referer&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; ($&lt;/span&gt;&lt;span&gt;invalid_referer&lt;/span&gt;&lt;span&gt;) &lt;/span&gt;&lt;span&gt;#å¦‚æœrefererä¸åˆæ³•ï¼Œåˆ™ invalid_refererä¸º1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;403&lt;/span&gt;&lt;span&gt;; &lt;/span&gt;&lt;span&gt;#è¿”å›403ä»£ç  - æ— æƒé™è®¿é—®&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;alias &lt;/span&gt;&lt;span&gt;/www/wordpress/resources/image/;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;
&lt;p&gt;ä½¿ç”¨è¿™ç§æ–¹æ³•ï¼Œæ‰€æœ‰éæŒ‡å®šçš„refererçš„è®¿é—®éƒ½ä¼šè¢«æ‹’ç»ï¼Œå› æ­¤ï¼Œå¦‚æœç”¨æˆ·åªæ˜¯æƒ³ä¿å­˜ä¸€å¼ å›¾ç‰‡ï¼Œä»ä¼šæ”¶åˆ°403é”™è¯¯ä»£ç ï¼›&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ˜¯å¦ä¸€ç§æ–¹æ³•ï¼š&lt;/p&gt;
&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;valid_referers &lt;/span&gt;&lt;span&gt;none blocked *.example.com; &lt;/span&gt;&lt;span&gt;#å½“refererä¸ºç©ºæˆ–refererä¸ºæŒ‡å®šçš„äºŒçº§åŸŸåæ—¶ï¼Œ invalid_refererä¸º0&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;referer&lt;/span&gt;&lt;span&gt; if ($&lt;/span&gt;&lt;span&gt;invalid_referer&lt;/span&gt;&lt;span&gt;) { &lt;/span&gt;&lt;span&gt;#å¦‚æœrefererä¸åˆæ³•ï¼Œåˆ™ invalid_refererä¸º1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;403&lt;/span&gt;&lt;span&gt;; &lt;/span&gt;&lt;span&gt;#è¿”å›403ä»£ç  - æ— æƒé™è®¿é—®&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;alias &lt;/span&gt;&lt;span&gt;/www/wordpress/resources/image/;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;
&lt;p&gt;noneè¡¨ç¤ºç©ºçš„refererï¼Œä¹Ÿå°±æ˜¯ç›´æ¥è®¿é—®ï¼Œæ¯”å¦‚ç›´æ¥åœ¨æµè§ˆå™¨æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶;&lt;br /&gt;
blockedè¡¨ç¤ºè¢«é˜²ç«å¢™æ ‡è®°è¿‡çš„æ¥è·¯ï¼Œ*..comè¡¨ç¤ºæ‰€æœ‰å­åŸŸåã€‚&lt;br /&gt;&lt;/p&gt;
&lt;p&gt;ç„¶è€Œè¿™ç§æ–¹æ³•åˆå­˜åœ¨å¦å¤–ä¸€ä¸ªç¼ºé™·ï¼Œé‚£å°±æ˜¯ç”±äºç©ºrefererè¢«è§†ä¸ºåˆæ³•ï¼Œç¬¬ä¸‰æ–¹å¯ä»¥é€šè¿‡éšè—refereræ¥å®ç°å¯¹èµ„æºçš„ç›—å–ã€‚&lt;/p&gt;
&lt;p&gt;ç»¼ä¸Šæ‰€è¿°ï¼Œè¿™ä¸¤ç§æ–¹æ³•éƒ½å­˜åœ¨ç¼ºé™·ï¼Œæœ€å¥½çš„æ–¹æ³•è¿˜æ˜¯é€šè¿‡è®¾ç½®CDNæ¥é™åˆ¶IPæ¥æºã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯æ—¢ç„¶ä½ å·²ç»ç”¨äº†è¿™ç§æ–¹æ³•äº†ï¼Œè¯´æ˜ä½ çš„ç½‘ç«™å¤§æ¦‚ç‡ä¸æ˜¯ä»€ä¹ˆçƒ­é—¨ç«™ç‚¹ã€‚ã€‚å¤§æ¦‚ç‡ä¸ä¼šå—åˆ°é‚£ä¹ˆå¤šèµ„æºçªƒå–ï¼Œå› æ­¤ä¹Ÿä¸å¿…å¤ªè¿‡æ‹…å¿ƒã€‚&lt;/p&gt;</content:encoded></item><item><title>Nodejsä½¿ç”¨Mongooseå¯¹MongoDBè¿›è¡Œå¢åˆ æ”¹æŸ¥ç­‰åŸºæœ¬æ“ä½œ</title><link>https://white-festa.net/posts/nodejs-mongoose/</link><guid isPermaLink="true">https://white-festa.net/posts/nodejs-mongoose/</guid><description>ä½¿ç”¨Mongooseæ¨¡å—å¯¹MongoDBè®°å½•è¿›è¡ŒåŸºæœ¬çš„å¢åˆ æ”¹æŸ¥æ“ä½œå’Œç­›é€‰ï¼Œæ’åºç­‰ã€‚</description><pubDate>Thu, 22 Sep 2022 00:00:00 GMT</pubDate><content:encoded>&lt;section&gt;&lt;h2&gt;é“¾æ¥æ•°æ®åº“&lt;a href=&quot;#é“¾æ¥æ•°æ®åº“&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;//å¯¼å…¥MongooseåŒ…&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;const&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;mongoose&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;require&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&apos;mongoose&apos;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;//é“¾æ¥MongoDB&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;mongoose&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;connect&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&apos;mongodb://localhost:27017/bilibili&apos;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;//è®¾ç½®å›è°ƒ&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;mongoose&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;connection&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;once&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&apos;open&apos;&lt;/span&gt;&lt;span&gt;, () &lt;/span&gt;&lt;span&gt;=&amp;gt;&lt;/span&gt;&lt;span&gt; {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;console&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;log&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&apos;é“¾æ¥æ•°æ®åº“æˆåŠŸ&apos;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;});&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;mongoose&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;connection&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;once&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&apos;error&apos;&lt;/span&gt;&lt;span&gt;, () &lt;/span&gt;&lt;span&gt;=&amp;gt;&lt;/span&gt;&lt;span&gt; {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;console&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;log&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&apos;é“¾æ¥æ•°æ®åº“å¤±è´¥&apos;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;});&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;mongoose&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;connection&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;once&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&apos;close&apos;&lt;/span&gt;&lt;span&gt;, () &lt;/span&gt;&lt;span&gt;=&amp;gt;&lt;/span&gt;&lt;span&gt; {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;console&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;log&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&apos;å’Œæ•°æ®åº“çš„é“¾æ¥ä¸­æ–­&apos;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;});&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;setTimeout&lt;/span&gt;&lt;span&gt;(() &lt;/span&gt;&lt;span&gt;=&amp;gt;&lt;/span&gt;&lt;span&gt; {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;mongoose&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;disconnect&lt;/span&gt;&lt;span&gt;();&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}, &lt;/span&gt;&lt;span&gt;2000&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;onceå’Œonçš„åŒºåˆ«åœ¨äºonceåªä¼šæ‰§è¡Œä¸€æ¬¡å›è°ƒå‡½æ•°ï¼Œè€Œonä¼šæ¯æ¬¡éƒ½æ‰§è¡Œï¼Œå¦‚æœå°†ç«¯å£ä¾¦å¬å†™åœ¨å›è°ƒä¸­ï¼Œåˆ™ä¸€å®šè¦ç”¨onceã€‚&lt;/p&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;åˆ›å»ºæ–°æ–‡æ¡£&lt;a href=&quot;#åˆ›å»ºæ–°æ–‡æ¡£&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;mongoose&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;connection&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;once&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&apos;open&apos;&lt;/span&gt;&lt;span&gt;, () &lt;/span&gt;&lt;span&gt;=&amp;gt;&lt;/span&gt;&lt;span&gt; {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;console&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;log&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&apos;é“¾æ¥æ•°æ®åº“æˆåŠŸ&apos;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;//åˆ›å»ºæ–‡æ¡£çš„ç»“æ„å¯¹è±¡ï¼Œè®¾ç½®é›†åˆä¸­æ–‡æ¡£çš„å±æ€§ä»¥åŠå±æ€§å€¼ç±»å‹&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;bookSchema&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;new&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;mongoose&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Schema&lt;/span&gt;&lt;span&gt;({&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;String&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;author&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;String&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;price&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Number&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;});&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;//åˆ›å»ºæ¨¡å‹å¯¹è±¡ï¼Œå³å¯¹ä¹‹å‰çš„æ–‡æ¡£æ“ä½œçš„å°è£…å¯¹è±¡&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;bookModel&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;mongoose&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;model&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&apos;books&apos;&lt;/span&gt;&lt;span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;bookSchema&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;//æ–°å¢&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;createBook&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;bookModel&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;//bookModel.create({name: &apos;è¥¿æ¸¸è®°&apos;, author: &apos;å´æ‰¿æ©&apos;,price: 19.9});&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;});&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;å¼‚æ­¥æ‰§è¡Œå†™å…¥æ“ä½œï¼Œè¿”å›æ’å…¥æ•°æ®å¯¹è±¡æœ¬èº«ã€‚
è¿™é‡ŒåŸæœ¬å¯ä»¥å¸è½½createçš„å›è°ƒå‡½æ•°ä¸­ï¼Œä½†æ˜¯ä»Mongoose7å¼€å§‹createæ–¹æ³•ä¸åœ¨æ”¯æŒå›è°ƒå‡½æ•°ï¼Œå› æ­¤åªèƒ½é€šè¿‡å¼‚æ­¥æ“ä½œæ–¹å¼è·å¾—è¿”å›å¯¹è±¡ã€‚&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;async&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;createBook&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;bookModel&lt;/span&gt;&lt;span&gt;){&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;const&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;data&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;await&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;bookModel&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;create&lt;/span&gt;&lt;span&gt;({ &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;çº¢æ¥¼æ¢¦&apos;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;author&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;æ›¹é›ªèŠ¹&apos;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;price&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;19.9&lt;/span&gt;&lt;span&gt; });&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;console&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;log&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;data&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt;&lt;span&gt; (&lt;/span&gt;&lt;span&gt;err&lt;/span&gt;&lt;span&gt;){&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;console&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;log&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;err&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;å­—æ®µç±»å‹&lt;a href=&quot;#å­—æ®µç±»å‹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;æœ‰ä»¥ä¸‹çš„æ•°æ®ç±»å‹&lt;/p&gt;












































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;ç±»å‹&lt;/th&gt;&lt;th&gt;æè¿°&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;String&lt;/td&gt;&lt;td&gt;å­—ç¬¦ä¸²&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Number&lt;/td&gt;&lt;td&gt;æ•°å­—&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Boolean&lt;/td&gt;&lt;td&gt;å¸ƒå°”å€¼&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Array&lt;/td&gt;&lt;td&gt;æ•°ç»„ç±»å‹ï¼Œä¹Ÿå¯ä»¥ç”¨[]è¡¨ç¤º&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Date&lt;/td&gt;&lt;td&gt;æ—¥æœŸ&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Buffer&lt;/td&gt;&lt;td&gt;Bufferå¯¹è±¡ï¼Œæ¯”å¦‚å¤šåª’ä½“æ–‡ä»¶çš„äºŒè¿›åˆ¶ç &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Mixed&lt;/td&gt;&lt;td&gt;ä»»æ„ç±»å‹ï¼Œéœ€è¦ä½¿ç”¨mongoose.Schema.Types.MixedæŒ‡å®š&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;ObjectId&lt;/td&gt;&lt;td&gt;å¯¹è±¡IDï¼Œéœ€è¦ä½¿ç”¨mongoose.Schema.Types.ObjectIdæŒ‡å®š&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Decimal128&lt;/td&gt;&lt;td&gt;é«˜ç²¾åº¦æ•°å­—ï¼Œéœ€è¦ä½¿ç”¨mongoose.Schema.Types.Decimal128æŒ‡å®š&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;section&gt;&lt;h4&gt;ä¸¾ä¾‹&lt;a href=&quot;#ä¸¾ä¾‹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;mongoose&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;connection&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;once&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&apos;open&apos;&lt;/span&gt;&lt;span&gt;, () &lt;/span&gt;&lt;span&gt;=&amp;gt;&lt;/span&gt;&lt;span&gt; {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;bookSchema&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;new&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;mongoose&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Schema&lt;/span&gt;&lt;span&gt;({&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;String&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;author&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;String&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;price&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Number&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;isHot&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Boolean&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;tags&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Array&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;publish&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Date&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;});&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;bookModel&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;mongoose&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;model&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&apos;books&apos;&lt;/span&gt;&lt;span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;bookSchema&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;createBook&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;bookModel&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;});&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;async&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;createBook&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;bookModel&lt;/span&gt;&lt;span&gt;){&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;const&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;data&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;await&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;bookModel&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;create&lt;/span&gt;&lt;span&gt;({ &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;çº¢æ¥¼æ¢¦&apos;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;author&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;æ›¹é›ªèŠ¹&apos;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;price&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;19.9&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;isHot&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;tags&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; [&lt;/span&gt;&lt;span&gt;&apos;å¤å…¸&apos;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;&apos;ç¤¾ä¼š&apos;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;&apos;æƒ…æ„Ÿ&apos;&lt;/span&gt;&lt;span&gt;], &lt;/span&gt;&lt;span&gt;publish&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;new&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Date&lt;/span&gt;&lt;span&gt;() });&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;å­—æ®µéªŒè¯&lt;a href=&quot;#å­—æ®µéªŒè¯&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;æœ‰ä»¥ä¸‹å‡ ç§éªŒè¯æ–¹æ³•&lt;/p&gt;
























&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;ç±»å‹&lt;/th&gt;&lt;th&gt;ä½œç”¨&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;required&lt;/td&gt;&lt;td&gt;è¡¨ç¤ºè¯¥å­—æ®µä¸ºå¿…å¡«å­—æ®µ&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;unique&lt;/td&gt;&lt;td&gt;æ˜¯å¦ä¸ºå”¯ä¸€å€¼(å¿…é¡»åœ¨æ–°é›†åˆä¸­å®ç°)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;enum&lt;/td&gt;&lt;td&gt;æšä¸¾ç±»å‹ï¼Œå¤èµ‹å€¼æ˜¯å¿…é¡»ä¸ºæšä¸¾ç±»å‹ä¸­æ‰€è§„å®šçš„å€¼&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;default&lt;/td&gt;&lt;td&gt;å­—æ®µçš„é»˜è®¤å€¼&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;section&gt;&lt;h4&gt;ä¸¾ä¾‹&lt;a href=&quot;#ä¸¾ä¾‹-1&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;mongoose&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;connection&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;once&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&apos;open&apos;&lt;/span&gt;&lt;span&gt;, () &lt;/span&gt;&lt;span&gt;=&amp;gt;&lt;/span&gt;&lt;span&gt; {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;bookSchema&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;new&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;mongoose&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Schema&lt;/span&gt;&lt;span&gt;({&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;id&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; {&lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;String&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;/span&gt;&lt;span&gt;unique&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;span&gt;}, &lt;/span&gt;&lt;span&gt;//unique: æ˜¯å¦ä¸ºå”¯ä¸€å€¼(å¿…é¡»åœ¨æ–°é›†åˆä¸­å®ç°)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; {&lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;String&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;/span&gt;&lt;span&gt;required&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;span&gt;}, &lt;/span&gt;&lt;span&gt;//required: è¡¨ç¤ºè¯¥å­—æ®µä¸ºå¿…å¡«å­—æ®µ&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;author&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; {&lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;String&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;/span&gt;&lt;span&gt;default&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;ä½šå&lt;/span&gt;&lt;span&gt;}, &lt;/span&gt;&lt;/span&gt;&lt;span&gt;//default: å­—æ®µçš„é»˜è®¤å€¼&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;source&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; {&lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;String&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;/span&gt;&lt;span&gt;enum&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; [&lt;/span&gt;&lt;span&gt;&apos;ä¸­æ–‡&apos;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;&apos;å¤–æ–‡&apos;&lt;/span&gt;&lt;span&gt;]}, &lt;/span&gt;&lt;span&gt;//enum: æšä¸¾ç±»å‹ï¼Œå¤èµ‹å€¼æ˜¯å¿…é¡»ä¸ºæšä¸¾ç±»å‹ä¸­æ‰€è§„å®šçš„å€¼ã€‚&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;price&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Number&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;});&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;bookModel&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;mongoose&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;model&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&apos;books&apos;&lt;/span&gt;&lt;span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;bookSchema&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;createBook&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;bookModel&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;});&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;åˆ é™¤æ–‡æ¡£&lt;a href=&quot;#åˆ é™¤æ–‡æ¡£&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;åŸºäºä¸¤ä¸ªæ ¸å¿ƒæ–¹æ³•deleteOneå’ŒdeleteManyå¯ä»¥åˆ†åˆ«åˆ é™¤å•æ¡æ–‡æ¡£å’Œå¤šæ¡æ–‡æ¡£&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;mongoose&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;connection&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;once&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&apos;open&apos;&lt;/span&gt;&lt;span&gt;, () &lt;/span&gt;&lt;span&gt;=&amp;gt;&lt;/span&gt;&lt;span&gt; {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;console&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;log&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&apos;é“¾æ¥æ•°æ®åº“æˆåŠŸ&apos;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;bookSchema&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;new&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;mongoose&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Schema&lt;/span&gt;&lt;span&gt;({&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;String&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;author&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;String&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;price&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Number&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;is_hot&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Boolean&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;});&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;bookModel&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;mongoose&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;model&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&apos;novels&apos;&lt;/span&gt;&lt;span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;bookSchema&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;//åˆ é™¤å•æ¡&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;deleteRecords&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;bookModel&lt;/span&gt;&lt;span&gt;, {&lt;/span&gt;&lt;/span&gt;&lt;span&gt;author&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;ä½™å&apos;&lt;/span&gt;&lt;span&gt;&lt;span&gt;}, &lt;/span&gt;&lt;span&gt;bookModel&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;deleteOne&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;//åˆ é™¤å¤šæ¡&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;deleteRecords&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;bookModel&lt;/span&gt;&lt;span&gt;, {&lt;/span&gt;&lt;/span&gt;&lt;span&gt;author&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;ä½™å&apos;&lt;/span&gt;&lt;span&gt;&lt;span&gt;}, &lt;/span&gt;&lt;span&gt;bookModel&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;deleteMany&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;});&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;async&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;deleteRecords&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;model&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;deleteFunction&lt;/span&gt;&lt;span&gt;){&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;const&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;data&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;await&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;deleteFunction&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;call&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;model&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;console&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;log&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;data&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;err&lt;/span&gt;&lt;span&gt;){&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;console&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;log&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;err&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;æ›´æ–°æ–‡æ¡£&lt;a href=&quot;#æ›´æ–°æ–‡æ¡£&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;åŸºäºupdateOneå’ŒupdateManyä¸¤ä¸ªå‡½æ•°&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;mongoose&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;connection&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;once&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&apos;open&apos;&lt;/span&gt;&lt;span&gt;, () &lt;/span&gt;&lt;span&gt;=&amp;gt;&lt;/span&gt;&lt;span&gt; {&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;console&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;log&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&apos;é“¾æ¥æ•°æ®åº“æˆåŠŸ&apos;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;bookSchema&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;new&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;mongoose&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Schema&lt;/span&gt;&lt;span&gt;({&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;String&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;author&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;String&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;price&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Number&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;is_hot&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Boolean&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;});&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;bookModel&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;mongoose&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;model&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&apos;novel&apos;&lt;/span&gt;&lt;span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;bookSchema&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;updateRecords&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;bookModel&lt;/span&gt;&lt;span&gt;, {&lt;/span&gt;&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;è¥¿æ¸¸è®°&apos;&lt;/span&gt;&lt;span&gt;&lt;span&gt;}, &lt;/span&gt;&lt;span&gt;bookModel&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;updateOne&lt;/span&gt;&lt;span&gt;, {&lt;/span&gt;&lt;span&gt;price&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;50&lt;/span&gt;&lt;span&gt;});&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;});&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;async&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;updateRecords&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;model&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;update&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;newRecord&lt;/span&gt;&lt;span&gt;){&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;const&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;data&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;await&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;update&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;call&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;model&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;newRecord&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;console&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;log&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;data&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;err&lt;/span&gt;&lt;span&gt;){&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;console&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;log&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;err&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;è¯»å–æ–‡æ¡£&lt;a href=&quot;#è¯»å–æ–‡æ¡£&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;åŒæ ·ï¼ŒåŸºäºOneå’ŒManyä¸¤ä¸ªå‡½æ•°&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;async&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;findRecords&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;model&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;search&lt;/span&gt;&lt;span&gt;){&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;const&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;data&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;await&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;search&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;call&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;model&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;console&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;log&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;data&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;err&lt;/span&gt;&lt;span&gt;){&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;console&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;log&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&apos;è¯»å–å¤±è´¥: &apos;&lt;/span&gt;&lt;span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;err&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;è°ƒç”¨&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;findRecords&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;bookModel&lt;/span&gt;&lt;span&gt;, {&lt;/span&gt;&lt;/span&gt;&lt;span&gt;author&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;æ›¹é›ªèŠ¹&apos;&lt;/span&gt;&lt;span&gt;&lt;span&gt;}, &lt;/span&gt;&lt;span&gt;bookModel&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;findOne&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;findRecords&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;bookModel&lt;/span&gt;&lt;span&gt;, {&lt;/span&gt;&lt;/span&gt;&lt;span&gt;author&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;ä½™å&apos;&lt;/span&gt;&lt;span&gt;&lt;span&gt;}, &lt;/span&gt;&lt;span&gt;bookModel&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;findMany&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;æ¡ä»¶æ§åˆ¶&lt;a href=&quot;#æ¡ä»¶æ§åˆ¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;å°±åƒif elseå¯ä»¥é€šè¿‡ä¸å’Œæˆ–å°†å¤šä¸ªæ¡ä»¶ç»“åˆä½¿ç”¨ä¸€æ ·ï¼Œmongodbä¹Ÿå¯ä»¥ï¼›MongoDBä¸­æœ‰ä»¥ä¸‹å‡ ç§æ¡ä»¶æ§åˆ¶&lt;/p&gt;&lt;section&gt;&lt;h3&gt;è¿ç®—ç¬¦&lt;a href=&quot;#è¿ç®—ç¬¦&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;




























&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;è¿ç®—ç¬¦&lt;/th&gt;&lt;th&gt;ä½œç”¨&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;$gt&lt;/td&gt;&lt;td&gt;å¤§äº&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;$lt&lt;/td&gt;&lt;td&gt;å°äº&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;$gte&lt;/td&gt;&lt;td&gt;å¤§äºç­‰äº&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;$lte&lt;/td&gt;&lt;td&gt;å°äºç­‰äº&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;$ne&lt;/td&gt;&lt;td&gt;ä¸ç­‰äº&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;ä¸¾ä¾‹ï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;findRecords&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;bookModel&lt;/span&gt;&lt;span&gt;, {&lt;/span&gt;&lt;/span&gt;&lt;span&gt;price&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; {&lt;/span&gt;&lt;span&gt;$lt&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;20&lt;/span&gt;&lt;span&gt;&lt;span&gt;}}, &lt;/span&gt;&lt;span&gt;bookModel&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;findOne&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;é€»è¾‘è¿ç®—&lt;a href=&quot;#é€»è¾‘è¿ç®—&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;
















&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;è¿ç®—ç¬¦&lt;/th&gt;&lt;th&gt;ä½œç”¨&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;$or&lt;/td&gt;&lt;td&gt;æˆ–è¿ç®—&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;$and&lt;/td&gt;&lt;td&gt;ä¸è¿ç®—&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;ä¸¾ä¾‹ï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;findRecords&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;bookModel&lt;/span&gt;&lt;span&gt;, {&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;$and&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; [&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;span&gt;price&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; {&lt;/span&gt;&lt;span&gt;$gt&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;30&lt;/span&gt;&lt;span&gt;}},&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;span&gt;price&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; {&lt;/span&gt;&lt;span&gt;$lt&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;70&lt;/span&gt;&lt;span&gt;}}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;}, &lt;/span&gt;&lt;span&gt;bookModel&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;findOne&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;æ­£åˆ™åŒ¹é…&lt;a href=&quot;#æ­£åˆ™åŒ¹é…&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;æœ‰ä¸¤ç§æ–¹æ³•&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;findRecords&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;bookModel&lt;/span&gt;&lt;span&gt;,{&lt;/span&gt;&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; /ä¸‰/&lt;/span&gt;&lt;span&gt;&lt;span&gt;}, &lt;/span&gt;&lt;span&gt;bookModel&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;findOne&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;//å¦ä¸€ç§æ–¹æ³•ï¼š&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;findRecords&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;bookModel&lt;/span&gt;&lt;span&gt;,{&lt;/span&gt;&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;new&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;RegExp&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&apos;ä¸‰&apos;&lt;/span&gt;&lt;span&gt;&lt;span&gt;)}, &lt;/span&gt;&lt;span&gt;bookModel&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;findOne&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;æ¨èä½¿ç”¨ç¬¬äºŒç§ï¼Œå› ä¸ºç¬¬ä¸€ç§æ— æ³•è¯»å–å˜é‡ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;ä¸ªæ€§åŒ–è¯»å–&lt;a href=&quot;#ä¸ªæ€§åŒ–è¯»å–&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;æœ‰ä»¥ä¸‹å‡ ç§æ–¹æ³•ï¼Œå¯ä»¥æ˜¾ç¤ºç‰¹å®šçš„æ–‡æ¡£&lt;/p&gt;
























&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;æ–¹æ³•&lt;/th&gt;&lt;th&gt;ä½œç”¨&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;select&lt;/td&gt;&lt;td&gt;å­—æ®µç­›é€‰&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;sort&lt;/td&gt;&lt;td&gt;æ’åº&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;skip&lt;/td&gt;&lt;td&gt;è·³è¿‡å¤šå°‘æ¡è®°å½•&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;limit&lt;/td&gt;&lt;td&gt;å‘åæ˜¾ç¤ºå¤šå°‘æ¡è®°å½•&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;ä½¿ç”¨æ–¹æ³•ï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;//åªæ˜¾ç¤ºè¿”å›çš„æ•°æ®çš„nameå’Œauthorä¸¤ä¸ªå­—æ®µ, ä¸æ˜¾ç¤º_idå­—æ®µ&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;const&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;data&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;await&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;model&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;find&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt;).&lt;/span&gt;&lt;/span&gt;&lt;span&gt;select&lt;/span&gt;&lt;span&gt;({&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;author&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;_id&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;});&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;//æ ¹æ®è¿”å›æ•°æ®çš„priceå­—æ®µå‡åºæ˜¾ç¤º(-1ä¸ºé™åº)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;const&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;data&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;await&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;model&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;find&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt;).&lt;/span&gt;&lt;/span&gt;&lt;span&gt;sort&lt;/span&gt;&lt;span&gt;({&lt;/span&gt;&lt;span&gt;price&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;}).&lt;/span&gt;&lt;span&gt;select&lt;/span&gt;&lt;span&gt;({&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;price&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;});&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;//åªè¿”å›æ•°æ®çš„å‰ä¸‰æ¡&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;const&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;data&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;await&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;model&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;find&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt;).&lt;/span&gt;&lt;/span&gt;&lt;span&gt;sort&lt;/span&gt;&lt;span&gt;({&lt;/span&gt;&lt;span&gt;price&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;}).&lt;/span&gt;&lt;span&gt;select&lt;/span&gt;&lt;span&gt;({&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;price&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;}).&lt;/span&gt;&lt;span&gt;limit&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;3&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;//å’Œskipç»„åˆä½¿ç”¨&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;//åªè¿”å›ç¬¬3åˆ°ç¬¬6æ¡æ•°æ®&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;const&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;data&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;await&lt;/span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;model&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&gt;find&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt;).&lt;/span&gt;&lt;/span&gt;&lt;span&gt;sort&lt;/span&gt;&lt;span&gt;({&lt;/span&gt;&lt;span&gt;price&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;}).&lt;/span&gt;&lt;span&gt;select&lt;/span&gt;&lt;span&gt;({&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;price&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;}).&lt;/span&gt;&lt;span&gt;skip&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;3&lt;/span&gt;&lt;span&gt;).&lt;/span&gt;&lt;span&gt;limit&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;3&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;</content:encoded></item><item><title>Ansibleå…¥é—¨</title><link>https://white-festa.net/posts/ansible-start/</link><guid isPermaLink="true">https://white-festa.net/posts/ansible-start/</guid><description>ansibleå…¥é—¨åŸºç¡€æ•™å­¦</description><pubDate>Thu, 11 Aug 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Ansibleæ˜¯ä¸€ä¸ªåŒæ—¶ç®¡ç†å¤šä¸ªè¿œç¨‹ä¸»æœºçš„è½¯ä»¶ï¼ˆä»»ä½•å¯ä»¥é€šè¿‡SSHåè®®ç™»å½•çš„æœºå™¨ï¼‰ï¼Œå› æ­¤Ansibleå¯ä»¥ç®¡ç†è¿œç¨‹è™šæ‹Ÿæœºã€ç‰©ç†æœºï¼Œä¹Ÿå¯ä»¥æ˜¯æœ¬åœ°ä¸»æœºï¼ˆlinuxã€windowsï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;Ansibleé€šè¿‡SSHåè®®å®ç°ç®¡ç†èŠ‚ç‚¹ã€è¿œç¨‹èŠ‚ç‚¹çš„é€šä¿¡ã€‚&lt;/p&gt;
&lt;p&gt;ansibleä½œä¸ºè¿ç»´è‡ªåŠ¨åŒ–çš„æ ¸å¿ƒè½¯ä»¶ä¹‹ä¸€ï¼Œå¯ä»¥è®©æˆ‘ä»¬æŠŠåŒæ‰‹ä»æœºæ¢°æ€§çš„é‡å¤åŠ³åŠ¨ä¸­è§£æ”¾å‡ºæ¥ï¼Œç®€å•å¿«æ·çš„ç®¡ç†å¤§é‡ä¸»æœºã€‚&lt;/p&gt;
&lt;section&gt;&lt;h1&gt;Ansibleçš„å®‰è£…å’Œéƒ¨ç½²&lt;a href=&quot;#ansibleçš„å®‰è£…å’Œéƒ¨ç½²&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;section&gt;&lt;h2&gt;å®‰è£…Ansibleè½¯ä»¶&lt;a href=&quot;#å®‰è£…ansibleè½¯ä»¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;é…ç½®å¥½äº†è½¯ä»¶æºåå¯ä»¥ä½¿ç”¨ä¸€æ¡å‘½ä»¤å®‰è£…ï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;yum&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;install&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;ansible&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;libselinux-python&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-y&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;æŸ¥çœ‹Ansibleç‰ˆæœ¬&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ansible&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--version&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ansible&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;2.9.27&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;config&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;file&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/etc/ansible/ansible.cfg&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;configured&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;module&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;search&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;path&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; [u&lt;/span&gt;&lt;span&gt;&apos;/root/.ansible/plugins/modules&apos;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;u&apos;/usr/share/ansible/plugins/modules&apos;]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;ansible&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;python&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;module&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;location&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/usr/lib/python2.7/site-packages/ansible&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;executable&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;location&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/usr/bin/ansible&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;python&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;version&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;2.7.5&lt;/span&gt;&lt;span&gt; (default, &lt;/span&gt;&lt;span&gt;Oct&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;14&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;2020,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;14:45:30&lt;/span&gt;&lt;span&gt;) [GCC &lt;/span&gt;&lt;span&gt;4.8.5&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;20150623&lt;/span&gt;&lt;span&gt; (&lt;/span&gt;&lt;span&gt;Red&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Hat&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;4&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;8&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;5&lt;/span&gt;&lt;span&gt;-&lt;/span&gt;&lt;span&gt;44&lt;/span&gt;&lt;span&gt;)]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;é…ç½®Ansibleä¸»æœºæ¸…å•&lt;a href=&quot;#é…ç½®ansibleä¸»æœºæ¸…å•&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;ä¿®æ”¹/etc/ansible/hostsæ–‡ä»¶&lt;/p&gt;&lt;section&gt;&lt;h3&gt;æ¸…å•æ¨¡å¼&lt;a href=&quot;#æ¸…å•æ¨¡å¼&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;ä¸»æœºæ¸…å•æœ‰ä¸¤ç§æ¨¡å¼ï¼Œä¸€ç§æ˜¯åˆ†ç»„æ¸…å•ï¼Œä¸€ç§æ˜¯æ™®é€šæ¸…å•(æ— åˆ†ç»„)ã€‚&lt;br /&gt;
åˆ†ç»„æ¸…å•ï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[web]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;172.16.1.7&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;172.16.1.9&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;æ™®é€šæ¸…å•å°±æ˜¯æŠŠç»„æ ‡å·å»æ‰ã€‚&lt;br /&gt;
æ¸…å•ä¸ä»…ä»…æ”¯æŒIPï¼Œä¹Ÿæ”¯æŒåŸŸåï¼Œå¦‚ï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[site]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;web.example.com&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;db.example.com&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;èŒƒå›´åŒ¹é…æ¨¡å¼&lt;a href=&quot;#èŒƒå›´åŒ¹é…æ¨¡å¼&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;web-[7:9].example.com&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;è¿™æ„å‘³ç€å°†web-7.example.comï¼Œweb-8.example.comï¼Œweb-9.example.coméƒ½åŠ å…¥æ¸…å•ä¸­ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;Ansibleä¸»æœºç™»å½•è®¤è¯&lt;a href=&quot;#ansibleä¸»æœºç™»å½•è®¤è¯&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;åŸºäºå¯†ç è®¤è¯&lt;a href=&quot;#åŸºäºå¯†ç è®¤è¯&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;åœ¨hostsæ–‡ä»¶ä¸­å¢åŠ ç™»å½•å‚æ•°é…ç½®ï¼›æœ‰ä»¥ä¸‹å‡ ä¸ªå‚æ•°ï¼š&lt;/p&gt;
























&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å‚æ•°&lt;/th&gt;&lt;th&gt;å‚æ•°ç±»å‹&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;ansible_host&lt;/td&gt;&lt;td&gt;ä¸»æœºåœ°å€&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;ansible_port&lt;/td&gt;&lt;td&gt;ä¸»æœºç«¯å£&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;ansible_user&lt;/td&gt;&lt;td&gt;æ“ä½œç”¨æˆ·&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;ansible_password&lt;/td&gt;&lt;td&gt;ç™»å½•å¯†ç &lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;ä¿®æ”¹åå¦‚ä¸‹ï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[web]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;172.16.1.7&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;ansible_port=&lt;/span&gt;&lt;span&gt;22&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;ansible_user=root&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;ansible_password=&lt;/span&gt;&lt;span&gt;123456&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;172.16.1.9&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;ansible_port=&lt;/span&gt;&lt;span&gt;22000&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;ansible_user=root&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;ansible_password=&lt;/span&gt;&lt;span&gt;123123&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;section&gt;&lt;h4&gt;é€šç”¨å˜é‡é…ç½®&lt;a href=&quot;#é€šç”¨å˜é‡é…ç½®&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;å¦‚æœå½“å‰æ¸…å•ä¸­æœ‰å¤šä¸ªä¸»æœºç»„ï¼Œè€Œæ¯ä¸ªä¸»æœºç»„çš„å‚æ•°é…ç½®éƒ½ä¸€æ ·ï¼Œåˆ™å¯ä»¥ä½¿ç”¨é€šç”¨é…ç½®ï¼Œå…å»åœ¨æ¯ä¸ªä¸»æœºåé¢åŠ ä¸Šå‚æ•°é…ç½®ã€‚å¦‚ï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[web:vars]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ansible_ssh_port&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;22000&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ansible_ssh_user&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;root&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ansible_ssh_pass&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;123123&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[web]&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;172.16.1.7&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;172.16.1.9&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;[web]ä¸­çš„é…ç½®å°†è‡ªåŠ¨ç”¨äºæ‰€æœ‰webç»„ä¸‹çš„ä¸»æœºã€‚&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;åŸºäºå…å¯†ç™»å½•&lt;a href=&quot;#åŸºäºå…å¯†ç™»å½•&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;åœ¨ä½¿ç”¨ansibleå‰é€šè¿‡ssh-keygenå’Œssh-copy-idä¸¤æ¡å‘½ä»¤å°†æœ¬æœºç§˜é’¥å‘é€è‡³ç›®æ ‡ä¸»æœºï¼Œç”±æ­¤å®ç°å…å¯†ç™»å½•ï¼Œè¿™æ ·å°±æ— éœ€å†å¯¹ç™»å½•å¯†ç è¿›è¡Œé…ç½®ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;ansible-doc å‘½ä»¤&lt;a href=&quot;#ansible-doc-å‘½ä»¤&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;è¯¥å‘½ä»¤æ˜¯ansibleçš„è¯´æ˜æ–‡æ¡£å‘½ä»¤ï¼Œå¯ä»¥é€šè¿‡æ­¤å‘½ä»¤æŸ¥çœ‹ansibleæ”¯æŒçš„æ¨¡å—ï¼Œå…·ä½“æ¨¡å—çš„ä½¿ç”¨æ–¹æ³•ç­‰ã€‚&lt;br /&gt;
æŸ¥çœ‹ansibleæ”¯æŒçš„æ‰€æœ‰æ¨¡å—&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ansible-doc&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-l&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;æŸ¥çœ‹å…·ä½“æŸä¸ªæ¨¡å—çš„ç”¨æ³•ï¼Œä»¥commandæ¨¡å—ä¸ºä¾‹&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[root@master-61 ~/.ssh]#ansible-doc -s command&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;-&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;name:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Execute&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;commands&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;on&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;targets&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;command&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;argv:&lt;/span&gt;&lt;span&gt;                  &lt;/span&gt;&lt;span&gt;# Passes the command as a list rather than a string. Use `argv&apos;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;                               &lt;/span&gt;&lt;span&gt;to&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;avoid&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;quoting&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;values&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;that&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;                               &lt;/span&gt;&lt;span&gt;would&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;otherwise&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;be&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;interpreted&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;                               &lt;/span&gt;&lt;span&gt;incorrectly&lt;/span&gt;&lt;span&gt; (for &lt;/span&gt;&lt;span&gt;example&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;user&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;                               &lt;/span&gt;&lt;/span&gt;&lt;span&gt;name&quot;&lt;/span&gt;&lt;span&gt;). Only the string or the&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;                               &lt;/span&gt;&lt;span&gt;list&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;form&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;can&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;be&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;provided,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;not&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;                               &lt;/span&gt;&lt;span&gt;both.&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;One&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;or&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;the&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;other&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;must&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;                               &lt;/span&gt;&lt;span&gt;be&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;provided.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;chdir:&lt;/span&gt;&lt;span&gt;                 &lt;/span&gt;&lt;span&gt;# Change into this directory before running the command.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;cmd:&lt;/span&gt;&lt;span&gt;                   &lt;/span&gt;&lt;span&gt;# The command to run.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;creates:&lt;/span&gt;&lt;span&gt;               &lt;/span&gt;&lt;span&gt;# A filename or (since 2.0) glob pattern. If it already exists,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;                               &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;step&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;*&lt;/span&gt;&lt;span&gt;won&apos;t* be run.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;free_form:             # The command module takes a free form command to run. There is&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;                               &lt;/span&gt;&lt;/span&gt;&lt;span&gt;no actual parameter named&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;                               &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&apos;free&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;form&apos;.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;removes:               # A filename or (since 2.0) glob pattern. If it already exists,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;                               &lt;/span&gt;&lt;/span&gt;&lt;span&gt;this step *will* be run.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;stdin:                 # Set the stdin of the command directly to the specified value.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;      &lt;/span&gt;&lt;/span&gt;&lt;span&gt;stdin_add_newline:     # If set to `yes&apos;,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;append&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;newline&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;to&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;stdin&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;data.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;strip_empty_ends:&lt;/span&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;# Strip empty lines from the end of stdout/stderr in result.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;warn:&lt;/span&gt;&lt;span&gt;                  &lt;/span&gt;&lt;span&gt;# Enable or disable task warnings.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;Ansibleæ‰§è¡Œå‘½ä»¤ç»“æœ(çŠ¶æ€é¢œè‰²)&lt;a href=&quot;#ansibleæ‰§è¡Œå‘½ä»¤ç»“æœçŠ¶æ€é¢œè‰²&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;ç»¿è‰²ï¼šå‘½ä»¤ä»¥ç”¨æˆ·æœŸæœ›çš„æ‰§è¡Œäº†ï¼Œä½†æ˜¯çŠ¶æ€æ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼›&lt;/li&gt;
&lt;li&gt;é»„è‰²ï¼šå‘½ä»¤ä»¥ç”¨æˆ·æœŸæœ›çš„æ‰§è¡Œäº†ï¼Œå¹¶ä¸”çŠ¶æ€å‘ç”Ÿäº†æ”¹å˜ï¼›&lt;/li&gt;
&lt;li&gt;ç´«è‰²ï¼šè­¦å‘Šä¿¡æ¯ï¼Œè¯´æ˜ansibleæç¤ºä½ æœ‰æ›´åˆé€‚çš„ç”¨æ³•ï¼›&lt;/li&gt;
&lt;li&gt;çº¢è‰²ï¼šå‘½ä»¤é”™è¯¯ï¼Œæ‰§è¡Œå¤±è´¥ï¼›&lt;/li&gt;
&lt;li&gt;è“è‰²ï¼š è¯¦ç»†çš„æ‰§è¡Œè¿‡ç¨‹ï¼›&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;</content:encoded></item><item><title>Linuxç£ç›˜åˆ†åŒº</title><link>https://white-festa.net/posts/disk/</link><guid isPermaLink="true">https://white-festa.net/posts/disk/</guid><description>å…³äºç£ç›˜æ’å…¥åæœåŠ¡å™¨ä¸è¯†åˆ«çš„å¤„ç½®æ–¹æ³•ã€ç£ç›˜åˆ†åŒºã€æŒ‚è½½åŠæ–‡ä»¶ç³»ç»Ÿæ ¼å¼åŒ–</description><pubDate>Sat, 25 Jun 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;åœ¨æœåŠ¡å™¨æ—¥å¸¸è¿è¡ŒæœåŠ¡çš„è¿‡ç¨‹ä¸­ç£ç›˜ç©ºé—´å¯èƒ½ä¼šå˜çš„è¶Šæ¥è¶Šå°ï¼Œæœ‰ä¸€ç§å¯èƒ½æ˜¯å› ä¸ºæ—¥å¿—å¤ªå¤šäº†ï¼Œåªè¦æ¸…ç†æ—¥å¿—æ–‡ä»¶å³å¯ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯é™æ€æ–‡ä»¶æœåŠ¡å™¨ä¸­å­˜æ”¾çš„å†…å®¹è¶Šæ¥è¶Šå¤šï¼Œè¿™äº›ä¸œè¥¿ä¹Ÿæ²¡åŠæ³•åˆ å‡ï¼Œæ‰€ä»¥åªèƒ½å¯¹ç£ç›˜è¿›è¡Œæ‰©å®¹ã€‚&lt;/p&gt;
&lt;section&gt;&lt;h1&gt;æ’å…¥æ–°ç£ç›˜åæœåŠ¡å™¨ä¸è¯†åˆ«&lt;a href=&quot;#æ’å…¥æ–°ç£ç›˜åæœåŠ¡å™¨ä¸è¯†åˆ«&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;æœ‰ä¸¤ç§è§£å†³æ–¹æ³•ï¼š&lt;br /&gt;&lt;/p&gt;&lt;ol&gt;
&lt;li&gt;å¦‚æœæœåŠ¡æœ¬èº«ä½¿ç”¨è€…å¾ˆå°‘ï¼Œå¯¹äºå¯ç”¨æ€§éœ€æ±‚æ²¡æœ‰é‚£ä¹ˆé«˜çš„è¯ï¼Œç›´æ¥é‡å¯æœåŠ¡å™¨å°±å¯ä»¥äº†ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹äºæ¯”è¾ƒé‡è¦çš„æœåŠ¡å™¨ï¼Œä¸èƒ½é‡å¯ï¼Œå¯ä»¥é€šè¿‡é‡æ–°æ‰«æSCSIæ€»çº¿çš„æ–¹å¼æ·»åŠ è®¾å¤‡ï¼š&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# æŸ¥çœ‹ä¸»æœºæ€»çº¿å·&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;ls&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/sys/class/scsi_host/&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# é‡æ–°æ‰«æSCSIæ€»çº¿&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;echo&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;- - -&quot;&lt;/span&gt;&lt;span&gt; &amp;gt; &lt;/span&gt;&lt;span&gt;/sys/class/scsi_host/host0/scan&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;echo&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;- - -&quot;&lt;/span&gt;&lt;span&gt; &amp;gt; &lt;/span&gt;&lt;span&gt;/sys/class/scsi_host/host1/scan&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;echo&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;- - -&quot;&lt;/span&gt;&lt;span&gt; &amp;gt; &lt;/span&gt;&lt;span&gt;/sys/class/scsi_host/host2/scan&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;...&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;ç„¶åé€šè¿‡&lt;code&gt;lsblk&lt;/code&gt;å‘½ä»¤åº”è¯¥èƒ½çœ‹åˆ°æ–°å®‰è£…çš„ç¡¬ç›˜ã€‚
ä»¥shellè„šæœ¬æ‰«æSCSIæ€»çº¿&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;sum&lt;/span&gt;&lt;span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;$(&lt;/span&gt;&lt;/span&gt;&lt;span&gt;ll&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/sys/class/scsi_host/host&lt;/span&gt;&lt;span&gt;*&lt;/span&gt;&lt;span&gt; | &lt;/span&gt;&lt;span&gt;wc&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-l&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;for&lt;/span&gt;&lt;span&gt; ((&lt;/span&gt;&lt;span&gt;i&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;; &lt;/span&gt;&lt;span&gt;i&lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;${&lt;/span&gt;&lt;span&gt;sum&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span&gt;; &lt;/span&gt;&lt;span&gt;i&lt;/span&gt;&lt;span&gt;&lt;span&gt;++&lt;/span&gt;&lt;span&gt;))&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;do&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;echo&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;- - -&quot;&lt;/span&gt;&lt;span&gt; &amp;gt; &lt;/span&gt;&lt;span&gt;/sys/class/scsi_host/host&lt;/span&gt;&lt;span&gt;&lt;span&gt;${&lt;/span&gt;&lt;span&gt;i&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span&gt;/scan&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;done&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;æŸ¥çœ‹å ç”¨ç£ç›˜ç©ºé—´æœ€å¤§çš„ç›®å½•&lt;a href=&quot;#æŸ¥çœ‹å ç”¨ç£ç›˜ç©ºé—´æœ€å¤§çš„ç›®å½•&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;åŸºäºduå‘½ä»¤çš„æ·±åº¦æŸ¥è¯¢å‚æ•°ï¼Œåœ¨æ ¹ç›®å½•ä¸‹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;du&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-h&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;--max-depth=1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;æ‰§è¡Œæ­¤å‘½ä»¤å¯ä»¥å¾—å‡ºå½“å‰ç›®å½•çš„ä¸‹ä¸€çº§ä¸­å ç”¨æœ€å¤§ç£ç›˜ç©ºé—´çš„ç›®å½•ã€‚&lt;/p&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;ç£ç›˜åˆ†åŒº - MBRç±»å‹&lt;a href=&quot;#ç£ç›˜åˆ†åŒº---mbrç±»å‹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;section&gt;&lt;h2&gt;MBRç±»å‹ç‰¹ç‚¹&lt;a href=&quot;#mbrç±»å‹ç‰¹ç‚¹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;ä¸æ”¯æŒ2Tä»¥ä¸Šç¡¬ç›˜&lt;/li&gt;
&lt;li&gt;æœ€å¤šæ”¯æŒ4ä¸ªä¸»åˆ†åŒº&lt;/li&gt;
&lt;li&gt;fdiskå‘½ä»¤åªèƒ½åˆ›å»ºMBRåˆ†åŒº&lt;/li&gt;
&lt;/ol&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;ä½¿ç”¨fdiskå‘½ä»¤åˆ›å»ºç£ç›˜åˆ†åŒº&lt;a href=&quot;#ä½¿ç”¨fdiskå‘½ä»¤åˆ›å»ºç£ç›˜åˆ†åŒº&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[root@web-7 /]#fdisk /dev/sdb&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Welcome&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;to&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;fdisk&lt;/span&gt;&lt;span&gt; (util-linux &lt;/span&gt;&lt;span&gt;2.23.2&lt;/span&gt;&lt;span&gt;).&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Changes&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;will&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;remain&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;in&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;memory&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;only,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;until&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;you&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;decide&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;to&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;write&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;them.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Be&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;careful&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;before&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;using&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;the&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;write&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;command.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Command&lt;/span&gt;&lt;span&gt; (m &lt;/span&gt;&lt;span&gt;for&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;help&lt;/span&gt;&lt;span&gt;): p &lt;/span&gt;&lt;span&gt;#åˆ—å‡ºåˆ†åŒºè¡¨&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Disk&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/dev/sdb:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;10.7&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;GB,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;10737418240&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;bytes,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;20971520&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;sectors&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Units&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;sectors&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;of&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;*&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;512&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;512&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;bytes&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Sector&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;size&lt;/span&gt;&lt;span&gt; (logical/physical): 512 bytes / 512 bytes&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;I/O&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;size&lt;/span&gt;&lt;span&gt; (minimum/optimal): 512 bytes / 512 bytes&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Disk&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;label&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;type:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;dos&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Disk&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;identifier:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;0x25b1f0fc&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;Device&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Boot&lt;/span&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;Start&lt;/span&gt;&lt;span&gt;         &lt;/span&gt;&lt;span&gt;End&lt;/span&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;Blocks&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;Id&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;System&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Command&lt;/span&gt;&lt;span&gt; (m &lt;/span&gt;&lt;span&gt;for&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;help&lt;/span&gt;&lt;span&gt;): n &lt;/span&gt;&lt;span&gt;#æ·»åŠ æ–°åˆ†åŒº&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Partition&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;type:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;primary&lt;/span&gt;&lt;span&gt; (0 &lt;/span&gt;&lt;span&gt;primary,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;extended,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;4&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;free&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;e&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;extended&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Select&lt;/span&gt;&lt;span&gt; (default &lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;): p &lt;/span&gt;&lt;span&gt;# é€‰æ‹©æ·»åŠ ä¸»åˆ†åŒº(ç³»ç»Ÿå¼•å¯¼)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Partition&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;number&lt;/span&gt;&lt;span&gt; (1-4, &lt;/span&gt;&lt;span&gt;default&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;): &lt;/span&gt;&lt;span&gt;# åˆ†åŒºç¼–å·ï¼šä½¿ç”¨é»˜è®¤å€¼&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;First&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;sector&lt;/span&gt;&lt;span&gt; (2048-20971519, &lt;/span&gt;&lt;span&gt;default&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;2048&lt;/span&gt;&lt;span&gt;): &lt;/span&gt;&lt;span&gt;# å…¶å®æ‰‡åŒºï¼šä½¿ç”¨é»˜è®¤å€¼&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Using&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;default&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;2048&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;27&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Last&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;sector,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;+sectors&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;or&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;+size{K,M,G}&lt;/span&gt;&lt;span&gt; (2048-20971519, &lt;/span&gt;&lt;span&gt;default&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;20971519&lt;/span&gt;&lt;span&gt;): +256M &lt;/span&gt;&lt;span&gt;# èµ‹äºˆè¯¥ä¸»åˆ†åŒº256Mçš„ç£ç›˜ç©ºé—´&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;28&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Partition&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;of&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Linux&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;and&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;of&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;size&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;256&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;MiB&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;is&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;set&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;29&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;30&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Command&lt;/span&gt;&lt;span&gt; (m &lt;/span&gt;&lt;span&gt;for&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;help&lt;/span&gt;&lt;span&gt;): p&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;31&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;32&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Disk&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/dev/sdb:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;10.7&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;GB,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;10737418240&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;bytes,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;20971520&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;sectors&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;33&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Units&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;sectors&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;of&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;*&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;512&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;512&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;bytes&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;34&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Sector&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;size&lt;/span&gt;&lt;span&gt; (logical/physical): 512 bytes / 512 bytes&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;35&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;I/O&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;size&lt;/span&gt;&lt;span&gt; (minimum/optimal): 512 bytes / 512 bytes&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;36&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Disk&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;label&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;type:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;dos&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;37&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Disk&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;identifier:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;0x25b1f0fc&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;38&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;39&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;Device&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Boot&lt;/span&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;Start&lt;/span&gt;&lt;span&gt;         &lt;/span&gt;&lt;span&gt;End&lt;/span&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;Blocks&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;Id&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;System&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;40&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;/dev/sdb1&lt;/span&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;2048&lt;/span&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;526335&lt;/span&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;262144&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;83&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;Linux&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;41&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;42&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Command&lt;/span&gt;&lt;span&gt; (m &lt;/span&gt;&lt;span&gt;for&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;help&lt;/span&gt;&lt;span&gt;): n &lt;/span&gt;&lt;span&gt;#æ·»åŠ æ–°åˆ†åŒº&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;43&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Partition&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;type:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;44&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;primary&lt;/span&gt;&lt;span&gt; (1 &lt;/span&gt;&lt;span&gt;primary,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;extended,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;3&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;free&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;45&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;e&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;extended&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;46&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Select&lt;/span&gt;&lt;span&gt; (default &lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;): e &lt;/span&gt;&lt;span&gt;# é€‰æ‹©æ·»åŠ æ‰©å±•åˆ†åŒº&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;47&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Partition&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;number&lt;/span&gt;&lt;span&gt; (2-4, &lt;/span&gt;&lt;span&gt;default&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;):&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;48&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;First&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;sector&lt;/span&gt;&lt;span&gt; (526336-20971519, &lt;/span&gt;&lt;span&gt;default&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;526336&lt;/span&gt;&lt;span&gt;):&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;49&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Using&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;default&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;526336&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;50&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Last&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;sector,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;+sectors&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;or&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;+size{K,M,G}&lt;/span&gt;&lt;span&gt; (526336-20971519, &lt;/span&gt;&lt;span&gt;default&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;20971519&lt;/span&gt;&lt;span&gt;):&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;51&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Using&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;default&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;20971519&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;# å°†å…¨éƒ¨çš„å‰©ä½™ç©ºé—´ç»™è¿™ä¸ªåˆ†åŒº&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;52&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Partition&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;of&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Extended&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;and&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;of&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;size&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;9.8&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;GiB&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;is&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;set&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;53&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;54&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Command&lt;/span&gt;&lt;span&gt; (m &lt;/span&gt;&lt;span&gt;for&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;help&lt;/span&gt;&lt;span&gt;): p&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;55&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;56&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Disk&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/dev/sdb:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;10.7&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;GB,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;10737418240&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;bytes,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;20971520&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;sectors&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;57&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Units&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;sectors&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;of&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;*&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;512&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;512&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;bytes&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;58&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Sector&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;size&lt;/span&gt;&lt;span&gt; (logical/physical): 512 bytes / 512 bytes&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;59&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;I/O&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;size&lt;/span&gt;&lt;span&gt; (minimum/optimal): 512 bytes / 512 bytes&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;60&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Disk&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;label&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;type:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;dos&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;61&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Disk&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;identifier:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;0x25b1f0fc&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;62&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;63&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;Device&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Boot&lt;/span&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;Start&lt;/span&gt;&lt;span&gt;         &lt;/span&gt;&lt;span&gt;End&lt;/span&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;Blocks&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;Id&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;System&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;64&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;/dev/sdb1&lt;/span&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;2048&lt;/span&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;526335&lt;/span&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;262144&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;83&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;Linux&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;65&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;/dev/sdb2&lt;/span&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;526336&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;20971519&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;10222592&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;5&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;Extended&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;66&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;67&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Command&lt;/span&gt;&lt;span&gt; (m &lt;/span&gt;&lt;span&gt;for&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;help&lt;/span&gt;&lt;span&gt;): n &lt;/span&gt;&lt;span&gt;#æ·»åŠ æ–°åˆ†åŒº&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;68&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Partition&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;type:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;69&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;primary&lt;/span&gt;&lt;span&gt; (1 &lt;/span&gt;&lt;span&gt;primary,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;extended,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;free&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;70&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;l&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;logical&lt;/span&gt;&lt;span&gt; (numbered &lt;/span&gt;&lt;span&gt;from&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;5&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;71&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Select&lt;/span&gt;&lt;span&gt; (default &lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;): l &lt;/span&gt;&lt;span&gt;# æ·»åŠ é€»è¾‘åˆ†åŒº&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;72&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Adding&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;logical&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;partition&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;5&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;73&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;First&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;sector&lt;/span&gt;&lt;span&gt; (528384-20971519, &lt;/span&gt;&lt;span&gt;default&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;528384&lt;/span&gt;&lt;span&gt;):&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;74&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Using&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;default&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;528384&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;75&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Last&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;sector,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;+sectors&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;or&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;+size{K,M,G}&lt;/span&gt;&lt;span&gt; (528384-20971519, &lt;/span&gt;&lt;span&gt;default&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;20971519&lt;/span&gt;&lt;span&gt;):&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;76&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Using&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;default&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;20971519&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;# å°†æ‰©å±•åˆ†åŒºçš„å…¨éƒ¨ç£ç›˜ç»™è¿™ä¸ªé€»è¾‘åˆ†åŒº&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;77&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Partition&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;5&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;of&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Linux&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;and&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;of&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;size&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;9.8&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;GiB&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;is&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;set&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;78&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;79&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Command&lt;/span&gt;&lt;span&gt; (m &lt;/span&gt;&lt;span&gt;for&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;help&lt;/span&gt;&lt;span&gt;): p&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;80&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;81&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Disk&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/dev/sdb:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;10.7&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;GB,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;10737418240&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;bytes,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;20971520&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;sectors&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;82&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Units&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;sectors&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;of&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;*&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;512&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;512&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;bytes&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;83&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Sector&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;size&lt;/span&gt;&lt;span&gt; (logical/physical): 512 bytes / 512 bytes&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;84&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;I/O&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;size&lt;/span&gt;&lt;span&gt; (minimum/optimal): 512 bytes / 512 bytes&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;85&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Disk&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;label&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;type:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;dos&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;86&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Disk&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;identifier:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;0x25b1f0fc&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;87&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;88&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;Device&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Boot&lt;/span&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;Start&lt;/span&gt;&lt;span&gt;         &lt;/span&gt;&lt;span&gt;End&lt;/span&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;Blocks&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;Id&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;System&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;89&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;/dev/sdb1&lt;/span&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;2048&lt;/span&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;526335&lt;/span&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;262144&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;83&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;Linux&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;90&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;/dev/sdb2&lt;/span&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;526336&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;20971519&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;10222592&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;5&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;Extended&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;91&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;/dev/sdb5&lt;/span&gt;&lt;span&gt;          &lt;/span&gt;&lt;span&gt;528384&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;20971519&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;10221568&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;83&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;Linux&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;92&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;93&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Command&lt;/span&gt;&lt;span&gt; (m &lt;/span&gt;&lt;span&gt;for&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;help&lt;/span&gt;&lt;span&gt;): w &lt;/span&gt;&lt;span&gt;#ï¼ï¼ï¼ï¼ å†™å…¥ä¹‹å‰çš„æ“ä½œ ï¼ï¼ï¼ï¼ï¼&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;94&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;The&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;partition&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;table&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;has&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;been&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;altered!&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;95&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;96&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Calling&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;ioctl&lt;/span&gt;&lt;span&gt;() &lt;/span&gt;&lt;span&gt;to&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;re-read&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;partition&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;table.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;97&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Syncing&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;disks.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;ç„¶åå¯ä»¥çœ‹åˆ°æ–°çš„ç£ç›˜æ–‡ä»¶äº†&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[root@web-7 /]#lsblk&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;NAME&lt;/span&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;MAJ:MIN&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;RM&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;SIZE&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;RO&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;TYPE&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;MOUNTPOINT&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;sda&lt;/span&gt;&lt;span&gt;               &lt;/span&gt;&lt;span&gt;8:0&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;20G&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;disk&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;â”œâ”€sda1&lt;/span&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;8:1&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;1G&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;part&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/boot&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;â””â”€sda2&lt;/span&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;8:2&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;19G&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;part&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;â”œâ”€centos-root&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;253:0&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;17G&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;lvm&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;/&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;â””â”€centos-swap&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;253:1&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;2G&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;lvm&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;sdb&lt;/span&gt;&lt;span&gt;               &lt;/span&gt;&lt;span&gt;8:16&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;10G&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;disk&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;â”œâ”€sdb1&lt;/span&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;8:17&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;256M&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;part&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;â”œâ”€sdb2&lt;/span&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;8:18&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;1K&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;part&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;â””â”€sdb5&lt;/span&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;8:21&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;9.8G&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;part&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;#æ–°çš„ç£ç›˜(é€»è¾‘åˆ†åŒº)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;sr0&lt;/span&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;11:0&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;4.4G&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;rom&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;æ ¼å¼åŒ–æ–‡ä»¶ç³»ç»Ÿ&lt;a href=&quot;#æ ¼å¼åŒ–æ–‡ä»¶ç³»ç»Ÿ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;ç›®å‰è¿™ä¸ªç£ç›˜è¿˜æ˜¯æ— æ³•ä½¿ç”¨çš„ï¼Œå› ä¸ºè¿˜æ²¡æœ‰æ–‡ä»¶ç³»ç»Ÿï¼›XFSæ˜¯Centos7å¼€å§‹ä½¿ç”¨çš„é»˜è®¤æ–‡ä»¶ç³»ç»Ÿã€‚æˆ‘ä»¬å¯ä»¥å°†æ–°çš„ç£ç›˜æ ¼å¼åŒ–ä¸ºè¿™ä¸ªç³»ç»Ÿä½¿ç”¨&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[root@web-7 /]#mkfs.xfs /dev/sdb5&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;meta-data&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;/dev/sdb5&lt;/span&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;isize&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;512&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;agcount&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;4,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;agsize&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;638848&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;blks&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;         &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;                       &lt;/span&gt;&lt;span&gt;sectsz=&lt;/span&gt;&lt;span&gt;512&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;attr=2,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;projid32bit=&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;         &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;                       &lt;/span&gt;&lt;span&gt;crc=&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;finobt=0,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;sparse=&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;data&lt;/span&gt;&lt;span&gt;     &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;                       &lt;/span&gt;&lt;span&gt;bsize=&lt;/span&gt;&lt;span&gt;4096&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;blocks=2555392,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;imaxpct=&lt;/span&gt;&lt;span&gt;25&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;         &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;                       &lt;/span&gt;&lt;span&gt;sunit=&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;swidth=&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;blks&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;naming&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;=version&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;bsize=&lt;/span&gt;&lt;span&gt;4096&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;ascii-ci=&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;ftype=&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;log&lt;/span&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;=internal&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;log&lt;/span&gt;&lt;span&gt;           &lt;/span&gt;&lt;span&gt;bsize=&lt;/span&gt;&lt;span&gt;4096&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;blocks=2560,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;version=&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;         &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;                       &lt;/span&gt;&lt;span&gt;sectsz=&lt;/span&gt;&lt;span&gt;512&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;sunit=&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;blks,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;lazy-count=&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;realtime&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=none&lt;/span&gt;&lt;span&gt;                   &lt;/span&gt;&lt;span&gt;extsz=&lt;/span&gt;&lt;span&gt;4096&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;blocks=0,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;rtextents=&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;æŒ‚è½½ç£ç›˜&lt;a href=&quot;#æŒ‚è½½ç£ç›˜&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;æ ¼å¼åŒ–åè¿˜éœ€è¦å°†æ–°ç£ç›˜æŒ‚è½½åœ¨æŸä¸ªç›®å½•ä¸‹ï¼Œè¿™æ ·æˆ‘ä»¬æ‰èƒ½å¤Ÿè®¿é—®åˆ°è¿™å—ç£ç›˜ï¼›è¿™ä¸ªç›®å½•å°±åƒWindowsæˆ‘çš„ç”µè„‘ä¸­çš„Dç›˜Eç›˜ç›®å½•ä¸€æ ·ã€‚&lt;/p&gt;&lt;section&gt;&lt;h3&gt;ä¸´æ—¶æŒ‚è½½&lt;a href=&quot;#ä¸´æ—¶æŒ‚è½½&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;mount&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/dev/sdb5&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/diskB&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;ä½¿ç”¨è¿™ç§æŒ‚è½½æ–¹æ³•ï¼ŒæœåŠ¡å™¨é‡å¯åä¼šå¤±å»æŒ‚è½½ï¼Œå¿…é¡»é‡æ–°è¿›è¡Œæ‰‹åŠ¨æŒ‚è½½ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;é…ç½®è‡ªåŠ¨æŒ‚è½½&lt;a href=&quot;#é…ç½®è‡ªåŠ¨æŒ‚è½½&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;éœ€è¦å°†é…ç½®å†™å…¥åˆ°&lt;code&gt;/etc/fstab&lt;/code&gt;æ–‡ä»¶ä¸­&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# é…ç½®è¯­æ³•&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;æŒ‚è½½è®¾å¤‡&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;æŒ‚è½½ç‚¹&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;æ–‡ä»¶ç³»ç»Ÿ&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;æŒ‚è½½å‚æ•°&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;æ˜¯å¦å¤‡ä»½&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;æ˜¯å¦æ£€æŸ¥&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# å°†sdb5ç£ç›˜æŒ‚è½½åˆ°/diskBç›®å½•ä¸‹ï¼Œå†™å…¥é…ç½®æ–‡ä»¶&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;/dev/sdb5&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/diskB&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;xfs&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;defaults&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;section&gt;&lt;h4&gt;æŒ‚è½½å‚æ•°&lt;a href=&quot;#æŒ‚è½½å‚æ•°&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;æŒ‚è½½å‚æ•°å…¶å®å°±æ˜¯&lt;code&gt;mount -o&lt;/code&gt;å‘½ä»¤å¯é™„åŠ çš„æŒ‚è½½é€‰é¡¹&lt;/p&gt;




















































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å‚æ•°&lt;/th&gt;&lt;th&gt;å«ä¹‰&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;async&lt;/td&gt;&lt;td&gt;ä»¥å¼‚æ­¥æ–¹å¼å¤„ç†æ–‡ä»¶ç³»ç»ŸI/Oæ“ä½œï¼Œæ•°æ®ä¸ä¼šåŒæ­¥å†™å…¥ç£ç›˜ï¼Œè€Œæ˜¯å†™åˆ°ç¼“å†²åŒºï¼Œæé«˜ç³»ç»Ÿæ€§èƒ½ï¼Œä½†æŸå¤±æ•°æ®å®‰å…¨æ€§&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;sync&lt;/td&gt;&lt;td&gt;æ‰€æœ‰I/Oæ“ä½œåŒæ­¥å¤„ç†ï¼Œæ•°æ®åŒæ­¥å†™å…¥ç£ç›˜ï¼Œæ€§èƒ½è¾ƒå¼±ï¼Œæ•°æ®å®‰å…¨æ€§é«˜&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;atime/noatime&lt;/td&gt;&lt;td&gt;æ–‡ä»¶è¢«è®¿é—®æ—¶æ˜¯å¦ä¿®æ”¹æ—¶é—´æˆ³ï¼Œä¸æ›´æ”¹æ—¶é—´ï¼Œå¯ä»¥æé«˜ç£ç›˜I/Oé€Ÿåº¦&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;auto/noauto&lt;/td&gt;&lt;td&gt;é€šè¿‡-aå‚æ•°å¯ä»¥è‡ªåŠ¨è¢«æŒ‚è½½/ä¸è‡ªåŠ¨æŒ‚è½½&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;defaults&lt;/td&gt;&lt;td&gt;é»˜è®¤å€¼åŒ…æ‹¬rwã€suidã€devã€execã€autoã€nouserã€asyncï¼Œ/etc/fstabå¤§å¤šé»˜è®¤å€¼&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;exec/noexec&lt;/td&gt;&lt;td&gt;æ˜¯å¦å…è®¸æ‰§è¡ŒäºŒè¿›åˆ¶ç¨‹åºï¼Œå–æ¶ˆæä¾›å®‰å…¨æ€§&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;suid/nosuid&lt;/td&gt;&lt;td&gt;æ˜¯å¦å…è®¸suid(ç‰¹æ®Šæƒé™)ç”Ÿæ•ˆ&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;user/nouser&lt;/td&gt;&lt;td&gt;æ˜¯å¦å…è®¸æ™®é€šç”¨æˆ·æŒ‚è½½&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;remount&lt;/td&gt;&lt;td&gt;é‡æ–°æŒ‚è½½&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;ro&lt;/td&gt;&lt;td&gt;åªè¯»&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;rw&lt;/td&gt;&lt;td&gt;è¯»å†™&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;ç£ç›˜åˆ†åŒº - GPT(GUID)ç±»å‹&lt;a href=&quot;#ç£ç›˜åˆ†åŒº---gptguidç±»å‹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;section&gt;&lt;h2&gt;GPTç±»å‹ç‰¹ç‚¹&lt;a href=&quot;#gptç±»å‹ç‰¹ç‚¹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;æ”¯æŒ2TBä»¥ä¸Šç¡¬ç›˜&lt;/li&gt;
&lt;li&gt;GPTåˆ†åŒºè¡¨ï¼Œæ²¡æœ‰æ‰©å±•åˆ†åŒºçš„ç±»å‹ï¼Œåªæœ‰ä¸»åˆ†åŒºå’Œé€»è¾‘åˆ†åŒºã€‚&lt;/li&gt;
&lt;li&gt;å¯ä»¥ä½¿ç”¨partedå‘½ä»¤ï¼Œå°†GPTåˆ†åŒºè¡¨ç±»å‹è½¬æ¢ä¸ºMBRç±»å‹&lt;/li&gt;
&lt;/ol&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;ä½¿ç”¨gdiskå‘½ä»¤åˆ›å»ºGPTç±»å‹çš„åˆ†åŒº&lt;a href=&quot;#ä½¿ç”¨gdiskå‘½ä»¤åˆ›å»ºgptç±»å‹çš„åˆ†åŒº&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[root@web-7 ~]#gdisk /dev/sdb&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;GPT&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;fdisk&lt;/span&gt;&lt;span&gt; (gdisk) version 0.8.10&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Partition&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;table&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;scan:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;MBR:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;not&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;present&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;BSD:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;not&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;present&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;APM:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;not&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;present&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;GPT:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;not&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;present&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Creating&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;new&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;GPT&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;entries.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Command&lt;/span&gt;&lt;span&gt; (? &lt;/span&gt;&lt;span&gt;for&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;help&lt;/span&gt;&lt;span&gt;): p &lt;/span&gt;&lt;span&gt;#æŸ¥çœ‹åˆ†åŒºåˆ—è¡¨&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Disk&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/dev/sdb:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;20971520&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;sectors,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;10.0&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;GiB&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Logical&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;sector&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;size:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;512&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;bytes&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Disk&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;identifier&lt;/span&gt;&lt;span&gt; (GUID): 5C1FE704-60A3-4D3B-8F91-8C9782B0FAF6&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Partition&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;table&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;holds&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;up&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;to&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;128&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;entries&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;First&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;usable&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;sector&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;is&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;34,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;last&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;usable&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;sector&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;is&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;20971486&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Partitions&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;will&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;be&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;aligned&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;on&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;2048-sector&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;boundaries&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Total&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;free&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;space&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;is&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;20971453&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;sectors&lt;/span&gt;&lt;span&gt; (10.0 &lt;/span&gt;&lt;span&gt;GiB&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# ç›®å‰è¿˜æ²¡æœ‰åˆ†åŒº&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Number&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;Start&lt;/span&gt;&lt;span&gt; (sector)    End (&lt;/span&gt;&lt;span&gt;sector&lt;/span&gt;&lt;span&gt;)  Size       Code  Name&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Command&lt;/span&gt;&lt;span&gt; (? &lt;/span&gt;&lt;span&gt;for&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;help&lt;/span&gt;&lt;span&gt;): n &lt;/span&gt;&lt;span&gt;#å¢åŠ ä¸€ä¸ªåˆ†åŒº&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Partition&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;number&lt;/span&gt;&lt;span&gt; (1-128, &lt;/span&gt;&lt;span&gt;default&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;):&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;First&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;sector&lt;/span&gt;&lt;span&gt; (34-20971486, &lt;/span&gt;&lt;span&gt;default&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;2048&lt;/span&gt;&lt;span&gt;) or {&lt;/span&gt;&lt;span&gt;+-}size&lt;/span&gt;&lt;span&gt;{KMGTP}&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;#èµ·å§‹æ‰‡åŒºï¼šé»˜è®¤å€¼&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;27&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Last&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;sector&lt;/span&gt;&lt;span&gt; (2048-20971486, &lt;/span&gt;&lt;span&gt;default&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;20971486&lt;/span&gt;&lt;span&gt;) or {&lt;/span&gt;&lt;span&gt;+-}size&lt;/span&gt;&lt;span&gt;{KMGTP}&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;+1G&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;#æœ€åä¸€ä¸ªæ‰‡åŒºï¼šç›´æ¥åˆ†ç»™ä»–1G&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;28&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Current&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;is&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;Linux filesystem&apos;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;29&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Hex&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;code&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;or&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;GUID&lt;/span&gt;&lt;span&gt; (L &lt;/span&gt;&lt;span&gt;to&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;show&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;codes,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Enter&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;8300&lt;/span&gt;&lt;span&gt;):  &lt;/span&gt;&lt;span&gt;# åˆ›å»ºGUID&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;30&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Changed&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;of&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;partition&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;to&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;Linux filesystem&apos;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;31&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;32&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Command&lt;/span&gt;&lt;span&gt; (? &lt;/span&gt;&lt;span&gt;for&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;help&lt;/span&gt;&lt;span&gt;): p &lt;/span&gt;&lt;span&gt;#æŸ¥çœ‹åˆ†åŒºåˆ—è¡¨&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;33&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Disk&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/dev/sdb:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;20971520&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;sectors,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;10.0&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;GiB&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;34&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Logical&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;sector&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;size:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;512&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;bytes&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;35&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Disk&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;identifier&lt;/span&gt;&lt;span&gt; (GUID): 5C1FE704-60A3-4D3B-8F91-8C9782B0FAF6&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;36&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Partition&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;table&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;holds&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;up&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;to&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;128&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;entries&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;37&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;First&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;usable&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;sector&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;is&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;34,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;last&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;usable&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;sector&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;is&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;20971486&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;38&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Partitions&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;will&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;be&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;aligned&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;on&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;2048-sector&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;boundaries&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;39&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Total&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;free&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;space&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;is&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;18874301&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;sectors&lt;/span&gt;&lt;span&gt; (9.0 &lt;/span&gt;&lt;span&gt;GiB&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;40&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;41&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;# å¯ä»¥å‘ç°æœ‰äº†ä¸€ä¸ªåˆ†åŒº&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;42&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Number&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;Start&lt;/span&gt;&lt;span&gt; (sector)    End (&lt;/span&gt;&lt;span&gt;sector&lt;/span&gt;&lt;span&gt;)  Size       Code  Name&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;43&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;2048&lt;/span&gt;&lt;span&gt;         &lt;/span&gt;&lt;span&gt;2099199&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;1024.0&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;MiB&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;8300&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;Linux&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;filesystem&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;44&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;45&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Command&lt;/span&gt;&lt;span&gt; (? &lt;/span&gt;&lt;span&gt;for&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;help&lt;/span&gt;&lt;span&gt;): n &lt;/span&gt;&lt;span&gt;#å¢åŠ ä¸€ä¸ªåˆ†åŒº&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;46&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Partition&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;number&lt;/span&gt;&lt;span&gt; (2-128, &lt;/span&gt;&lt;span&gt;default&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;):&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;47&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;First&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;sector&lt;/span&gt;&lt;span&gt; (34-20971486, &lt;/span&gt;&lt;span&gt;default&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;2099200&lt;/span&gt;&lt;span&gt;) or {&lt;/span&gt;&lt;span&gt;+-}size&lt;/span&gt;&lt;span&gt;{KMGTP}&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;48&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Last&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;sector&lt;/span&gt;&lt;span&gt; (2099200-20971486, &lt;/span&gt;&lt;span&gt;default&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;20971486&lt;/span&gt;&lt;span&gt;) or {&lt;/span&gt;&lt;span&gt;+-}size&lt;/span&gt;&lt;span&gt;{KMGTP}&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;#å°†æ‰€æœ‰å‰©ä½™ç©ºé—´åˆ†ç»™è¿™ä¸ªåˆ†åŒº&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;49&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Current&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;is&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;Linux filesystem&apos;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;50&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Hex&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;code&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;or&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;GUID&lt;/span&gt;&lt;span&gt; (L &lt;/span&gt;&lt;span&gt;to&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;show&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;codes,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Enter&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;8300&lt;/span&gt;&lt;span&gt;):  &lt;/span&gt;&lt;span&gt;#åˆ›å»ºGUID&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;51&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Changed&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;of&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;partition&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;to&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;Linux filesystem&apos;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;52&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;53&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Command&lt;/span&gt;&lt;span&gt; (? &lt;/span&gt;&lt;span&gt;for&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;help&lt;/span&gt;&lt;span&gt;): w &lt;/span&gt;&lt;span&gt;#å°†ä¹‹å‰çš„æ“ä½œå†™å…¥&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;54&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;55&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Final&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;checks&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;complete.&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;About&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;to&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;write&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;GPT&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;data.&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;THIS&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;WILL&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;OVERWRITE&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;EXISTING&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;56&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;PARTITIONS!!&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;57&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;58&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Do&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;you&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;want&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;to&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;proceed?&lt;/span&gt;&lt;span&gt; (Y/N): y &lt;/span&gt;&lt;span&gt;#ç¡®è®¤å†™å…¥&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;59&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;OK&lt;/span&gt;&lt;span&gt;; &lt;/span&gt;&lt;span&gt;writing&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;new&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;GUID&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;partition&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;table&lt;/span&gt;&lt;span&gt; (GPT) to /dev/sdb.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;60&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;The&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;operation&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;has&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;completed&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;successfully.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;éªŒæ”¶åˆ†åŒº&lt;a href=&quot;#éªŒæ”¶åˆ†åŒº&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[root@web-7 ~]#lsblk&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;NAME&lt;/span&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;MAJ:MIN&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;RM&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;SIZE&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;RO&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;TYPE&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;MOUNTPOINT&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;sda&lt;/span&gt;&lt;span&gt;               &lt;/span&gt;&lt;span&gt;8:0&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;20G&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;disk&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;â”œâ”€sda1&lt;/span&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;8:1&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;1G&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;part&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/boot&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;â””â”€sda2&lt;/span&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;8:2&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;19G&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;part&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;â”œâ”€centos-root&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;253:0&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;17G&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;lvm&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;/&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;â””â”€centos-swap&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;253:1&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;2G&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;lvm&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;sdb&lt;/span&gt;&lt;span&gt;               &lt;/span&gt;&lt;span&gt;8:16&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;10G&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;disk&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;â”œâ”€sdb1&lt;/span&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;8:17&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;1G&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;part&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;â””â”€sdb2&lt;/span&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;8:18&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;9G&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;part&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;sr0&lt;/span&gt;&lt;span&gt;              &lt;/span&gt;&lt;span&gt;11:0&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;4.4G&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;rom&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;æ ¼å¼åŒ–æ–‡ä»¶ç³»ç»Ÿ&lt;a href=&quot;#æ ¼å¼åŒ–æ–‡ä»¶ç³»ç»Ÿ-1&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;è¿™æ¬¡å°†è¿™å—ç¡¬ç›˜æ ¼å¼åŒ–ä¸ºExt4æ ¼å¼&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;mkfs.ext4&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/dev/sdb2&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h2&gt;æŒ‚è½½&lt;a href=&quot;#æŒ‚è½½&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;å†™å…¥æŒ‚è½½é…ç½®&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;echo&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;/dev/sdb2 /diskb ext4 defaults 0 0&quot;&lt;/span&gt;&lt;span&gt; &amp;gt;&amp;gt; &lt;/span&gt;&lt;span&gt;/etc/fstab&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;ç”Ÿæ•ˆæŒ‚è½½é…ç½®&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;mount&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-a&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;å°†GPTç±»å‹è½¬ä¸ºMBRç±»å‹&lt;a href=&quot;#å°†gptç±»å‹è½¬ä¸ºmbrç±»å‹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;åŸºäºpartedå‘½ä»¤&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[root@web-7 ~]#parted /dev/sdb&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;GNU&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Parted&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;3.1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Using&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/dev/sdb&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Welcome&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;to&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;GNU&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Parted!&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Type&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;help&apos;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;to&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;view&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;list&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;of&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;commands.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;parted&lt;/span&gt;&lt;span&gt;) &lt;/span&gt;&lt;span&gt;mktable&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;msdos&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;#è½¬æ¢ç£ç›˜ç±»å‹&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Warning:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;The&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;existing&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;disk&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;label&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;on&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/dev/sdb&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;will&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;be&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;destroyed&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;and&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;all&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;data&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;on&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;disk&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;will&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;be&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;lost.&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Do&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;you&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;want&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;to&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;continue?&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Yes/No?&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;yes&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;parted&lt;/span&gt;&lt;span&gt;) &lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Model:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;VMware,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;VMware&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Virtual&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;S&lt;/span&gt;&lt;span&gt; (scsi)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Disk&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/dev/sdb:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;10.7GB&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Sector&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;size&lt;/span&gt;&lt;span&gt; (logical/physical): 512B/512B&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Partition&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Table:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;msdos&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Disk&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Flags:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Number&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;Start&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;End&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;Size&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;Type&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;File&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;system&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;Flags&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;parted&lt;/span&gt;&lt;span&gt;) &lt;/span&gt;&lt;span&gt;quit&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Information:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;You&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;may&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;need&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;to&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;update&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/etc/fstab.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;
&lt;section&gt;&lt;h1&gt;å°†MBRç±»å‹çš„ç£ç›˜è½¬æ¢ä¸ºMBR&lt;a href=&quot;#å°†mbrç±»å‹çš„ç£ç›˜è½¬æ¢ä¸ºmbr&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;åŸºäºgdiskå‘½ä»¤&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;[root@web-7 ~]#gdisk /dev/sdb&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;GPT fdisk (gdisk) version 0.8.10&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Partition table scan:&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;MBR: MBR only&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;BSD: not present&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;APM: not present&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;span&gt;GPT: not present&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;#è¿™é‡Œæç¤ºå¦‚æœè½¬æ¢ä¼šé‡å†™æ•´ä¸ªç£ç›˜ï¼Œå¦‚æœæ˜¯è¯¯æ“ä½œå¯ä»¥ç›´æ¥æŒ‰qé€€å‡º&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;***************************************************************&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Found invalid GPT and valid MBR; converting MBR to GPT format&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;in memory. THIS OPERATION IS POTENTIALLY DESTRUCTIVE! Exit by&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;typing &apos;q&apos; if you don&apos;t want to convert your MBR partitions&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;to GPT format!&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;16&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;***************************************************************&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;17&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;18&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;19&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Command (? for help): w #å†™å…¥æ“ä½œ&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;20&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;21&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Final checks complete. About to write GPT data. THIS WILL OVERWRITE EXISTING&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;22&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;PARTITIONS!!&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;23&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;24&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Do you want to proceed? (Y/N): Y&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;25&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;OK; writing new GUID partition table (GPT) to /dev/sdb.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;26&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;The operation has completed successfully.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;</content:encoded></item><item><title>Raidç£ç›˜å†—ä½™é˜µåˆ—</title><link>https://white-festa.net/posts/raid/</link><guid isPermaLink="true">https://white-festa.net/posts/raid/</guid><description>å…³äºRaidç£ç›˜å¤‡ä»½æŠ€æœ¯çš„ç®€å•æè¿°</description><pubDate>Sat, 18 Jun 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;RAIDï¼Œå…¨ç§°ä¸ºRedundant Arrays of Independent Drivesï¼Œå³ç£ç›˜å†—ä½™é˜µåˆ—ï¼Œæ˜¯ç”±å¤šå—ç‹¬ç«‹ç£ç›˜ï¼ˆå¤šä¸ºç¡¬ç›˜ï¼‰ç»„åˆçš„ä¸€ä¸ªè¶…å¤§å®¹é‡ç£ç›˜ç»„ã€‚æ ¹æ®ä¸åŒçš„RAIDçº§åˆ«ï¼Œå¯ä»¥å®ç°ä¸åŒçš„åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;section&gt;&lt;h2&gt;Raidçº§åˆ«&lt;a href=&quot;#raidçº§åˆ«&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;Raid 0&lt;a href=&quot;#raid-0&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;å°†ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šç›¸åŒå‹å·ã€å®¹é‡çš„ç¡¬ç›˜ç»„åˆï¼Œç£ç›˜é˜µåˆ—çš„æ€»å®¹é‡ä¾¿æ˜¯å¤šä¸ªç¡¬ç›˜çš„æ€»å’Œã€‚&lt;/p&gt;&lt;section&gt;&lt;h4&gt;Raid 0ç‰¹ç‚¹&lt;a href=&quot;#raid-0ç‰¹ç‚¹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;è‡³å°‘éœ€è¦ä¸¤å—ç£ç›˜&lt;/li&gt;
&lt;li&gt;æ•°æ®&lt;code&gt;æ¡å¸¦åŒ–&lt;/code&gt;åˆ†å¸ƒåˆ°ç£ç›˜ï¼Œé«˜è¯»å†™æ€§èƒ½ï¼Œ&lt;code&gt;100%&lt;/code&gt;å­˜å‚¨ç©ºé—´åˆ©ç”¨ç‡&lt;/li&gt;
&lt;li&gt;æ•°æ®&lt;code&gt;æ²¡æœ‰å†—ä½™ç­–ç•¥&lt;/code&gt;ï¼Œä¸€å—ç£ç›˜æ•…éšœï¼Œæ•°æ®å°†æ— æ³•æ¢å¤&lt;/li&gt;
&lt;li&gt;é€‚åˆå¯¹æ•°æ®å®‰å…¨æ€§éœ€æ±‚ä¸é«˜çš„åº”ç”¨åœºæ™¯&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;æ¡å¸¦åŒ–æŠ€æœ¯&lt;a href=&quot;#æ¡å¸¦åŒ–æŠ€æœ¯&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;æ¡å¸¦åŒ–æŠ€æœ¯å°±æ˜¯ä¸€ç§è‡ªåŠ¨çš„å°† I/O çš„è´Ÿè½½å‡è¡¡åˆ°å¤šä¸ªç‰©ç†ç£ç›˜ä¸Šçš„æŠ€æœ¯ï¼Œç£ç›˜æ¡å¸¦åŒ–æ˜¯æŒ‡åˆ©ç”¨æ¡å¸¦åŒ–æŠ€æœ¯å°±æ˜¯å°†ä¸€å—è¿ç»­çš„æ•°æ®åˆ†æˆå¾ˆå¤šå°éƒ¨åˆ†å¹¶æŠŠå®ƒä»¬åˆ†åˆ«å­˜å‚¨åˆ°ä¸åŒç£ç›˜ä¸Šå»ã€‚&lt;/p&gt;&lt;p&gt;RAID 0 çº§åˆ«ä¸‹ï¼Œæ•°æ®ä»¥æ­¤å†™å…¥åˆ°ä¸¤å—ç£ç›˜ä¹‹ä¸­ï¼Œç†æƒ³çŠ¶æ€ä¸‹ï¼Œè¯»å†™æ€§èƒ½ä¼šç¿»å€ï¼Œæ€§èƒ½å¤§äºå•ä¸ªç¡¬ç›˜ã€‚ä½†æ˜¯raid 0 ä»»æ„ä¸€å—ç¡¬ç›˜æ•…éšœéƒ½ä¼šå¯¼è‡´æ•´ä¸ªç³»ç»Ÿæ•°æ®è¢«ç ´åï¼Œæ•°æ®åˆ†åˆ«å†™å…¥ä¸¤ä¸ªç¡¬ç›˜è®¾å¤‡ï¼Œæ²¡æœ‰æ•°æ®å¤‡ä»½çš„åŠŸèƒ½ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;Raid 1&lt;a href=&quot;#raid-1&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;ç”±äºraid 0çš„ç‰¹æ€§ï¼Œæ•°æ®ä¾æ¬¡å†™å…¥åˆ°å„ä¸ªç‰©ç†ç¡¬ç›˜ä¸­ï¼Œæ•°æ®æ˜¯åˆ†å¼€æ”¾çš„ï¼Œå› æ­¤æŸåä»»æ„ä¸€ä¸ªç¡¬ç›˜ï¼Œéƒ½ä¼šå¯¹å®Œæ•´çš„æ•°æ®ç ´åï¼Œå¯¹äºä¼ä¸šæ•°æ®æ¥è¯´ï¼Œè‚¯å®šæ˜¯ä¸å…è®¸ã€‚&lt;/p&gt;&lt;p&gt;Raid 1æŠ€æœ¯ï¼Œä¹Ÿæ˜¯å°†ä¸¤å—ä»¥ä¸Šç¡¬ç›˜ç»‘å®šï¼Œä½†æ˜¯æ•°æ®å†™å…¥æ—¶ï¼ŒåŒæ—¶å†™å…¥ä¸¤å—ç¡¬ç›˜ï¼Œå› æ­¤å³ä½¿æœ‰ç¡¬ç›˜æ•…éšœï¼Œä¹Ÿæœ‰æ•°æ®å¤‡ä»½ã€‚&lt;/p&gt;&lt;section&gt;&lt;h4&gt;Raid 1ç‰¹ç‚¹&lt;a href=&quot;#raid-1ç‰¹ç‚¹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;è‡³å°‘éœ€è¦2å—ç£ç›˜&lt;/li&gt;
&lt;li&gt;æ•°æ®é•œåƒå¤‡ä»½å†™åˆ°ç£ç›˜ä¸Š(å·¥ä½œç›˜å’Œé•œåƒç›˜)ï¼Œå¯é æ€§é«˜ï¼Œç£ç›˜åˆ©ç”¨ç‡ä¸º&lt;code&gt;50%&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;è¯»æ€§èƒ½å¯ä»¥ï¼Œä½†å†™æ€§èƒ½ä¸ä½³ï¼Œå†™å…¥æ•°æ®è¦åŒæ­¥ï¼Œå› æ­¤é€Ÿåº¦è¾ƒæ…¢ã€‚&lt;/li&gt;
&lt;li&gt;æ•°æ®å®‰å…¨æ€§é«˜ï¼Œå› ä¸ºå­˜åœ¨æ•°æ®å¤‡ä»½ï¼Œä¸”ä¸¤å—ç¡¬ç›˜åŒæ—¶æŸåçš„æ¦‚ç‡å¾ˆä½ã€‚é€‚ç”¨äºå¯¹æ•°æ®å®‰å…¨æ€§è¾ƒé«˜çš„åœºæ™¯ï¼Œå¦‚é‚®ä»¶ã€äº¤æ˜“ç³»ç»Ÿã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;Raid 3&lt;a href=&quot;#raid-3&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Raid 3çš„æ–¹å¼æ˜¯å°†æ•°æ®å‘Raid 0ä¸€æ ·ä¾åºå†™å…¥å¤šå—ç£ç›˜ï¼Œå†é¢å¤–ä½¿ç”¨ä¸€ä¸ªç£ç›˜å†™å…¥&lt;code&gt;å¥‡å¶æ ¡éªŒç &lt;/code&gt;ï¼Œè¿™æ ·ä¸€æ—¦æœ‰æŸä¸€å—ç£ç›˜æŸåï¼Œå°±å¯ä»¥åˆ©ç”¨è¿™ä¸ªå­˜æ”¾æ ¡éªŒç çš„ç£ç›˜å»æ¢å¤æ•°æ®ã€‚&lt;br /&gt;
Raid 3æœ€å¤§ç¼ºç‚¹æ˜¯ç”±äºä»»ä½•æ•°æ®çš„å†™å…¥éƒ½ä¼šæ›´æ–°æ ¡éªŒç ç£ç›˜ï¼Œå› æ­¤ä½œä¸ºå¤‡ä»½çš„ç£ç›˜åå€’æ˜¯æœ€å®¹æ˜“æŸåçš„ã€‚&lt;br /&gt;
Raid 3å¾ˆå°‘ä½¿ç”¨ï¼Œæ›´å¤šçš„æ˜¯ä½¿ç”¨ä¸ä»–æœºåˆ¶ç›¸ä¼¼çš„Raid 5ã€‚&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;Raid 5&lt;a href=&quot;#raid-5&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;RAID5æ¨¡å¼ä¸­ï¼Œä¸å†éœ€è¦ç”¨å•ç‹¬çš„ç£ç›˜å†™æ ¡éªŒç äº†ã€‚å®ƒæŠŠæ ¡éªŒç ä¿¡æ¯åˆ†å¸ƒåˆ°å„ä¸ªç£ç›˜ä¸Šã€‚ä¾‹å¦‚ï¼Œæ€»å…±æœ‰Nå—ç£ç›˜ï¼Œé‚£ä¹ˆä¼šå°†è¦å†™å…¥çš„æ•°æ®åˆ†æˆNä»½ï¼Œå¹¶å‘çš„å†™å…¥åˆ°Nå—ç£ç›˜ä¸­ï¼ŒåŒæ—¶è¿˜å°†æ•°æ®çš„æ ¡éªŒç ä¿¡æ¯ä¹Ÿå†™å…¥åˆ°è¿™Nå—ç£ç›˜ä¸­ï¼ˆæ•°æ®ä¸å¯¹åº”çš„æ ¡éªŒç ä¿¡æ¯å¿…é¡»å¾—åˆ†å¼€å­˜å‚¨åœ¨ä¸åŒçš„ç£ç›˜ä¸Šï¼‰ã€‚ä¸€æ—¦æŸä¸€å—ç£ç›˜æŸåäº†ï¼Œå°±å¯ä»¥ç”¨å‰©ä¸‹çš„æ•°æ®å’Œå¯¹åº”çš„å¥‡å¶æ ¡éªŒç ä¿¡æ¯å»æ¢å¤æŸåçš„æ•°æ®ã€‚&lt;br /&gt;
&lt;/p&gt;&lt;figure&gt;&lt;img src=&quot;https://blog.freelytomorrow.com/articles_img/raid/raid5-1.gif&quot; alt=&quot;&quot; /&gt;&lt;figcaption&gt;raid5-1&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;h4&gt;Raid 5ç‰¹ç‚¹&lt;a href=&quot;#raid-5ç‰¹ç‚¹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;è‡³å°‘éœ€è¦3å—ç£ç›˜&lt;/li&gt;
&lt;li&gt;æ•°æ®æ¡å¸¦åŒ–å­˜å‚¨åœ¨ç£ç›˜ï¼Œè¯»å†™æ€§èƒ½å¥½ï¼Œç£ç›˜åˆ©ç”¨ç‡ä¸º&lt;code&gt;(n-1)/n&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;ä¸€å—ç£ç›˜æ•…éšœï¼Œå¯æ ¹æ®å…¶ä»–æ•°æ®å—å’Œå¯¹åº”çš„æ ¡éªŒæ•°æ®é‡æ„æŸåæ•°æ®
&lt;ul&gt;
&lt;li&gt;æ ¡éªŒç®—æ³•æ˜¯è®¡ç®—æœºäºŒè¿›åˆ¶çš„çš„&lt;code&gt;å¼‚æˆ–è¿ç®—&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;åªèƒ½å…è®¸åæ‰ä¸€å—ç›˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ç»¼åˆæ€§èƒ½æœ€ä½³çš„æ•°æ®ä¿æŠ¤è§£å†³æ–¹æ¡ˆ&lt;/li&gt;
&lt;li&gt;å…¼é¡¾äº†å­˜å‚¨æ€§èƒ½ã€æ•°æ®å®‰å…¨å’Œå­˜å‚¨æˆæœ¬ç­‰å„æ–¹é¢å› ç´ &lt;/li&gt;
&lt;li&gt;é€‚ç”¨äºå¤§éƒ¨åˆ†çš„åº”ç”¨åœºæ™¯&lt;br /&gt;
&lt;figure&gt;&lt;img src=&quot;https://blog.freelytomorrow.com/articles_img/raid/raid5-2.gif&quot; alt=&quot;&quot; /&gt;&lt;figcaption&gt;raid5-2&lt;/figcaption&gt;&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;Raid 6&lt;a href=&quot;#raid-6&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;æ¯”èµ·raid5æä¾›çš„æ•°æ®æ ¡éªŒï¼Œåˆå¤šäº†ä¸€å±‚æ ¡éªŒï¼ŒåŒå±‚æ ¡éªŒã€‚&lt;br /&gt;
RAID6é™¤äº†æ¯å—ç£ç›˜ä¸Šéƒ½æœ‰åŒçº§æ•°æ®XORæ ¡éªŒåŒºä»¥å¤–ï¼Œè¿˜æœ‰é’ˆå¯¹æ¯ä¸ªæ•°æ®å—çš„XORæ ¡éªŒåŒºï¼Œè¿™æ ·çš„è¯ï¼Œç›¸å½“äºæ¯ä¸ªæ•°æ®å—æœ‰ä¸¤ä¸ªæ ¡éªŒä¿æŠ¤æªæ–½ï¼Œå› æ­¤æ•°æ®çš„å†—ä½™æ€§æ›´é«˜äº†ã€‚&lt;br /&gt;
&lt;/p&gt;&lt;figure&gt;&lt;img src=&quot;https://blog.freelytomorrow.com/articles_img/raid/raid6.png&quot; alt=&quot;&quot; /&gt;&lt;figcaption&gt;raid6&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;h4&gt;Raid 6ç‰¹ç‚¹&lt;a href=&quot;#raid-6ç‰¹ç‚¹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;è‡³å°‘éœ€è¦4å—ç£ç›˜&lt;/li&gt;
&lt;li&gt;æ•°æ®æ¡å¸¦åŒ–å­˜å‚¨åœ¨ç£ç›˜ï¼Œè¯»å–æ€§èƒ½å¥½ï¼Œå®¹é”™èƒ½åŠ›å¼º&lt;/li&gt;
&lt;li&gt;å†™æ€§èƒ½è¾ƒå·®&lt;/li&gt;
&lt;li&gt;é‡‡ç”¨åŒé‡æ ¡éªŒæ–¹å¼ä¿è¯æ•°æ®çš„å®‰å…¨æ€§&lt;/li&gt;
&lt;li&gt;å¦‚æœ2å—ç£ç›˜åŒæ—¶æ•…éšœï¼Œå¯ä»¥é€šè¿‡ä¸¤ä¸ªæ ¡éªŒæ•°æ®æ¥é‡å»ºä¸¤ä¸ªç£ç›˜çš„æ•°æ®&lt;/li&gt;
&lt;li&gt;æˆæœ¬è¦æ¯”å…¶ä»–ç­‰çº§é«˜ï¼Œå¹¶ä¸”æ›´å¤æ‚&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;Raid 10&lt;a href=&quot;#raid-10&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Raid 10æ˜¯Raid 1 å’Œ Raid 0çš„ç»„åˆã€‚&lt;br /&gt;
Raid 10å…¼å¤‡äº†Raid 1å’ŒRAID0çš„æœ‰ä¼˜ç‚¹ã€‚é¦–å…ˆåŸºäºRaid 1æ¨¡å¼å°†ç£ç›˜åˆ†ä¸º2ä»½ï¼Œå½“è¦å†™å…¥æ•°æ®çš„æ—¶å€™ï¼Œå°†æ‰€æœ‰çš„æ•°æ®åœ¨ä¸¤ä»½ç£ç›˜ä¸ŠåŒæ—¶å†™å…¥ï¼Œç›¸å½“äºå†™äº†åŒä»½æ•°æ®ï¼Œèµ·åˆ°äº†æ•°æ®ä¿éšœçš„ä½œç”¨ã€‚ä¸”åœ¨æ¯ä¸€ä»½ç£ç›˜ä¸Šåˆä¼šåŸºäºRaid 0æŠ€æœ¯å°†æ•°æ®åˆ†ä¸ºNä»½å¹¶å‘çš„è¯»å†™ï¼Œè¿™æ ·ä¹Ÿä¿éšœäº†æ•°æ®çš„æ•ˆç‡ã€‚&lt;/p&gt;&lt;section&gt;&lt;h4&gt;Raid 10ç‰¹ç‚¹&lt;a href=&quot;#raid-10ç‰¹ç‚¹&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;è‡³å°‘éœ€è¦4å—ç£ç›˜&lt;/li&gt;
&lt;li&gt;ä¸¤å—ç¡¬ç›˜ä¸ºä¸€ç»„å…ˆåšRaid 1ï¼Œå†å°†åšå¥½raid1çš„ä¸¤ç»„åšRaid 0&lt;/li&gt;
&lt;li&gt;å…¼é¡¾æ•°æ®çš„å†—ä½™ï¼ˆRaid 1é•œåƒï¼‰å’Œè¯»å†™æ€§èƒ½ï¼ˆRaid 0æ•°æ®æ¡å¸¦åŒ–ï¼‰&lt;/li&gt;
&lt;li&gt;ç£ç›˜åˆ©ç”¨ç‡ä¸º&lt;code&gt;50%&lt;/code&gt;ï¼Œæˆæœ¬è¾ƒé«˜&lt;/li&gt;
&lt;li&gt;åªè¦åçš„ä¸æ˜¯åŒä¸€ä¸ªç»„ä¸­ï¼Œæ‰€æœ‰çš„ç¡¬ç›˜ï¼Œå°±ç®—åæ‰ä¸€åŠç¡¬ç›˜éƒ½ä¸ä¼šä¸¢æ•°æ®&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;æ€»ç»“&lt;a href=&quot;#æ€»ç»“&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;




















































&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;ç±»å‹&lt;/th&gt;&lt;th&gt;è¯»æ€§èƒ½&lt;/th&gt;&lt;th&gt;å†™æ€§èƒ½&lt;/th&gt;&lt;th&gt;å¯é æ€§&lt;/th&gt;&lt;th&gt;ç£ç›˜åˆ©ç”¨ç‡&lt;/th&gt;&lt;th&gt;æˆæœ¬&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;Raid 0&lt;/td&gt;&lt;td&gt;é«˜&lt;/td&gt;&lt;td&gt;é«˜&lt;/td&gt;&lt;td&gt;ä½&lt;/td&gt;&lt;td&gt;100%&lt;/td&gt;&lt;td&gt;ä½&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Raid 1&lt;/td&gt;&lt;td&gt;ä¸€èˆ¬&lt;/td&gt;&lt;td&gt;ä½&lt;/td&gt;&lt;td&gt;é«˜&lt;/td&gt;&lt;td&gt;50%&lt;/td&gt;&lt;td&gt;åé«˜&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Raid 5&lt;/td&gt;&lt;td&gt;æ¥è¿‘Raid0&lt;/td&gt;&lt;td&gt;è¾ƒé«˜(å¤šäº†å±‚æ ¡éªŒ)&lt;/td&gt;&lt;td&gt;RAID0&amp;lt;RAID5&amp;lt;RAID1&lt;/td&gt;&lt;td&gt;(n-1)/n&lt;/td&gt;&lt;td&gt;RAID0&amp;lt;RAID5&amp;lt;RAID1&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Raid 6&lt;/td&gt;&lt;td&gt;æ¥è¿‘Raid0&lt;/td&gt;&lt;td&gt;ä¸€èˆ¬(å¤šäº†åŒå±‚æ ¡éªŒ)&lt;/td&gt;&lt;td&gt;RAID6&amp;gt;RAID5&lt;/td&gt;&lt;td&gt;RAID6&amp;lt;RAID5&lt;/td&gt;&lt;td&gt;RAID6&amp;gt;RAID5&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Raid 10&lt;/td&gt;&lt;td&gt;é«˜&lt;/td&gt;&lt;td&gt;é«˜&lt;/td&gt;&lt;td&gt;é«˜&lt;/td&gt;&lt;td&gt;50%&lt;/td&gt;&lt;td&gt;æœ€é«˜&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;</content:encoded></item><item><title>è§£å†³WordPressè¯»å–ä¼šè¯æ•°æ®å¤±è´¥æŠ¥é”™</title><link>https://white-festa.net/posts/wordpress-session-error/</link><guid isPermaLink="true">https://white-festa.net/posts/wordpress-session-error/</guid><pubDate>Sat, 11 Jun 2022 00:00:00 GMT</pubDate><content:encoded>&lt;section&gt;&lt;h2&gt;æŠ¥é”™ä¿¡æ¯&lt;a href=&quot;#æŠ¥é”™ä¿¡æ¯&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;&lt;code&gt;[error] 5378#5378: *2481 FastCGI sent in stderr: â€œPHP message: PHP Warning: session_start(): open(/var/lib/php/session/sess_11d6edde5218ffa04f1fc6f231efe25d, O_RDWR) failed: No such file or directory (2) in /code/wordpress/wp-content/themes/argon-theme-1.3.5/functions.php on line 432&lt;/code&gt;&lt;/p&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;åŸå› &lt;a href=&quot;#åŸå› &quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;ç¼ºå°‘ PHP ä¼šè¯ç›®å½•ã€å…·æœ‰æ— æ•ˆæƒé™å’Œ/æˆ–æ— æ•ˆçš„ SELinux&lt;/p&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;è§£å†³æ–¹æ³•&lt;a href=&quot;#è§£å†³æ–¹æ³•&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;æ‰“å¼€/etc/php.iniæ–‡ä»¶ï¼ŒæŸ¥çœ‹session.save_pathçš„å€¼&lt;br /&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è¯¥å€¼é€šå¸¸æ˜¯è¢«æ³¨é‡Šæ‰çš„ï¼Œä¹Ÿå°±æ˜¯æœªè®¾ç½®çš„çŠ¶æ€ï¼›åœ¨åŸºäºÂ Ubuntu æˆ– DebianÂ æ“ä½œç³»ç»Ÿçš„ç³»ç»Ÿä¸Šï¼Œæ­¤å˜é‡çš„é»˜è®¤å€¼ä¸ºï¼š/var/lib/php7Â ï¼› åœ¨åŸºäºÂ RHEL æˆ– CentOSÂ æ“ä½œç³»ç»Ÿä¸Šï¼Œé»˜è®¤å€¼ä¸ºï¼š/var/lib/php/sessionï¼›å¦‚æœè¯¥å˜é‡è¢«è®¾ç½®äº†ç‰¹å®šå€¼ï¼Œåˆ™ç”¨è¯¥å€¼æ›¿æ¢è·¯å¾„ã€‚&lt;br /&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åˆ›å»ºå’Œ/æˆ–è®¾ç½®å¯¹ PHP ä¼šè¯æ–‡ä»¶å¤¹çš„é€‚å½“æƒé™ã€‚ä¾‹å¦‚ï¼Œæˆ‘çš„CentOSæœåŠ¡å™¨çš„PHPä¼šè¯ç›®å½•è·¯å¾„æ˜¯ï¼š/var/lib/php/session&lt;br /&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¯è¾“å…¥ä»¥ä¸‹æŒ‡ä»¤ï¼š&lt;br /&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;mkdir&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-p&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/var/lib/php/session&lt;/span&gt;&lt;span&gt; &amp;amp;&amp;amp; &lt;/span&gt;&lt;span&gt;chmod&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1733&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/var/lib/php/session&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;</content:encoded></item><item><title>WordPressä¿®æ”¹ä¸Šä¼ åª’ä½“æ–‡ä»¶å¤§å°é™åˆ¶</title><link>https://white-festa.net/posts/wordpress-file-size/</link><guid isPermaLink="true">https://white-festa.net/posts/wordpress-file-size/</guid><pubDate>Fri, 20 May 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;éœ€è¦ä»ä¸¤ä¸ªæ–¹é¢å…¥æ‰‹ï¼Œä¸€ä¸ªæ˜¯wordpressæœ¬èº«ï¼Œä¹Ÿå°±æ˜¯å®ƒçš„phpé…ç½®æ–‡ä»¶ï¼Œå¦ä¸€ä¸ªæ˜¯ä¿®æ”¹nginxè™šæ‹Ÿä¸»æœºçš„é™åˆ¶ã€‚&lt;/p&gt;
&lt;section&gt;&lt;h2&gt;ä¿®æ”¹php.inié…ç½®æ–‡ä»¶&lt;a href=&quot;#ä¿®æ”¹phpinié…ç½®æ–‡ä»¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;æ‰“å¼€/etc/php.iniæ–‡ä»¶ï¼Œå¦‚æœä¸åœ¨/etcç›®å½•ä¸‹å¯ä»¥ç”¨findå‘½ä»¤æŸ¥æ‰¾ä¸€ä¸‹&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;find&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-name&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;php.ini&apos;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;æ‰¾åˆ°åæ‰“å¼€æ–‡ä»¶ï¼Œæ‰¾åˆ°upload_max_filesizeå­—æ®µï¼Œå°†å…¶åé¢çš„å€¼ä¿®æ”¹ä¸º32æˆ–64Mï¼›&lt;br /&gt;
ä¸å»ºè®®æ›´å¤§ï¼Œå› ä¸ºç‰¹åˆ«å¤§çš„æ–‡ä»¶æ’­æ”¾æˆ–è¯»å–èµ·æ¥å¯¹å¸¦å®½çš„è¦æ±‚å¾ˆé«˜ã€‚&lt;/p&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;ä¿®æ”¹nginx.confæ–‡ä»¶&lt;a href=&quot;#ä¿®æ”¹nginxconfæ–‡ä»¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;åœ¨/etc/nginx/nginx.confæ–‡ä»¶ä¸­ï¼Œæ‰¾åˆ°httpåŒºå—ï¼Œåœ¨å…¶ä¸­å¢åŠ ä¸€è¡Œï¼š&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;client_max_body_size &lt;/span&gt;&lt;span&gt;64m&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;æ¥ä¸‹æ¥é‡å¯æœåŠ¡å³å¯&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;systemctl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;restart&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;php-fpm&lt;/span&gt;&lt;span&gt; &amp;amp;&amp;amp; &lt;/span&gt;&lt;span&gt;systemctl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;reload&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;nginx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;</content:encoded></item><item><title>å•æœºéƒ¨ç½²LNMPæ¶æ„</title><link>https://white-festa.net/posts/single-lnmp/</link><guid isPermaLink="true">https://white-festa.net/posts/single-lnmp/</guid><description>ç»ƒä¹  - éƒ¨ç½²LNMPå•ç‚¹æ¶æ„</description><pubDate>Thu, 12 May 2022 00:00:00 GMT</pubDate><content:encoded>&lt;section&gt;&lt;h2&gt;ä»€ä¹ˆæ˜¯LNMPæ¶æ„&lt;a href=&quot;#ä»€ä¹ˆæ˜¯lnmpæ¶æ„&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;LNMPæ˜¯å¸¸è§çš„å•æœºæ¶æ„ï¼Œé€šå¸¸ç”¨äºä¸šåŠ¡çš„æ—©æœŸé˜¶æ®µæˆ–æ˜¯ä¸ªäººä¸šåŠ¡ï¼Œå¦‚åšå®¢ï¼›LNMPå³ Linuxç³»ç»Ÿ+Nginx Web server+Mysqlæ•°æ®åº“+PHPåç«¯ç¨‹åºçš„ç»Ÿç§°ï¼›&lt;br /&gt;&lt;/p&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;LNMPæ¶æ„åŸç†&lt;a href=&quot;#lnmpæ¶æ„åŸç†&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;LNMPå·¥ä½œæµæ˜¯çš„å½“ç”¨æˆ·é€šè¿‡æµè§ˆå™¨è®¿é—®WebæœåŠ¡æ—¶ï¼Œå…¶é™æ€è¯·æ±‚äº¤ç”±Nginx Web Serveræ¥å¤„ç†ï¼Œè€ŒåŠ¨æ€è¯·æ±‚åˆ™ç”±Nginxé€šè¿‡FastCGIæ¥å£è½¬å‘ç»™æœ¬æœºçš„åç«¯ç¨‹åºï¼Œå³php-fpmè¿›ç¨‹è¿›è¡Œè§£æï¼›&lt;br /&gt;&lt;/p&gt;&lt;p&gt;å¦‚æœè¯¥è¯·æ±‚éœ€è¦è¯»å–MySQLæ•°æ®åº“ï¼Œåˆ™php-fpmä¼šç»§ç»­å‘åè¯»å–MySQLæ•°æ®åº“ï¼Œå¹¶ä¸€å±‚ä¸€å±‚åœ°è¿”å›æ•°æ®ï¼Œæœ€åç”±Nginxå°†æ•°æ®è¿”å›ç»™ç”¨æˆ·&lt;br /&gt;&lt;/p&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;éƒ¨ç½²LNMPç¯å¢ƒ&lt;a href=&quot;#éƒ¨ç½²lnmpç¯å¢ƒ&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;åˆ›å»ºNginxè¿è¡Œç”¨æˆ·&lt;a href=&quot;#åˆ›å»ºnginxè¿è¡Œç”¨æˆ·&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;å…¶å®è¿™éƒ¨å¹¶éå¿…è¦ï¼Œyumå®‰è£…Nginxçš„è¯å®‰è£…è¿‡ç¨‹ä¸­ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªNginxç”¨æˆ·ï¼Œä½†æ˜¯æˆ‘ä¹ æƒ¯äº†ç”¨wwwç”¨æˆ·æ¥è·‘Web Serverï¼Œæ‰€ä»¥è¿˜æ˜¯åˆ›å»ºä¸€ä¸ªã€‚&lt;br /&gt;&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;groupadd&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;www&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-g&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;500&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;useradd&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;www&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-s&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/sbin/nologin&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-M&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-u&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;500&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-g&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;500&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;ä¹‹åå¯ä»¥ç”¨idå‘½ä»¤æ¥æ£€æŸ¥ä¸€ä¸‹ç”¨æˆ·åˆ›å»ºæ˜¯å¦æˆåŠŸã€‚&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;id&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;www&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;å®‰è£…Nginxï¼ŒPHPå’ŒMySQL&lt;a href=&quot;#å®‰è£…nginxphpå’Œmysql&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;section&gt;&lt;h4&gt;å®‰è£…Nginx&lt;a href=&quot;#å®‰è£…nginx&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;yum&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;insatll&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;nginx&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-y&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;å®‰è£…php-fpmåŠå…¶ä¾èµ–&lt;a href=&quot;#å®‰è£…php-fpmåŠå…¶ä¾èµ–&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;å…ˆåˆ é™¤PHPæ—§ç¯å¢ƒ&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;yum&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;remove&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;php&lt;/span&gt;&lt;span&gt;*&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-y&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;é…ç½®PHPçš„yumæºå’Œç¬¬ä¸‰æ–¹æº&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;rpm&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-Uvh&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;rpm&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-Uvh&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;https://mirror.webtatic.com/yum/el7/webtatic-release.rpm&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;å®‰è£…php-fpmåŠå…¶ä¾èµ–&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;yum&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;install&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-y&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;php71w-cli&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;php71w-common&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;php71w-devel&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;php71w-embedded&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;php71w-gd&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;php71w-mcrypt&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;php71w-mbstring&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;php71w-pdo&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;php71w-xml&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;php71w-fpm&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;php71w-mysqlnd&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;php71w-opcache&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;php71w-pecl-memcached&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;php71w-pecl-redis&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;php71w-pecl-mongodb&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;php71w-json&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;php71w-pecl-apcu&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;php71w-pecl-apcu-devel&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;ä¿®æ”¹php-fpmçš„è¿è¡Œç”¨æˆ·å’Œnginxä¸€æ ·&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;sed&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-i&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;/^user/c user = www&apos;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/etc/php-fpm.d/www.conf&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;sed&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-i&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&apos;/^group/c group = www&apos;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/etc/php-fpm.d/www.conf&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;æˆ–è€…ä¹Ÿå¯ä»¥ç›´æ¥ç”¨Vimç¼–è¾‘/etc/php-fpm.d/&lt;a href=&quot;http://www.conf%E6%96%87%E4%BB%B6%EF%BC%8C%E5%B0%86%E7%AC%AC8%E8%A1%8C%E5%92%8C%E7%AC%AC10%E8%A1%8C%E7%9A%84user%E5%92%8Cgroup%E9%83%BD%E7%AD%89%E4%BA%8Ewww%E5%B0%B1%E8%A1%8C%E3%80%82&quot;&gt;www.confæ–‡ä»¶ï¼Œå°†ç¬¬8è¡Œå’Œç¬¬10è¡Œçš„userå’Œgroupéƒ½ç­‰äºwwwå°±è¡Œã€‚&lt;/a&gt;&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;éƒ¨ç½²MySQL&lt;a href=&quot;#éƒ¨ç½²mysql&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;å®‰è£…mysqlæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;yum&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;install&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;mariadb-server&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;mariadb&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-y&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;mysqlå’Œmariadbå…¶å®å·®ä¸å¤šçš„ï¼Œmysqlè¢«æ”¶è´­ååŸå¼€å‘è€…é‡æ–°å¼€å‘äº†mariadbï¼Œä¸¤è€…å·®åˆ«ä¸å¤§ï¼Œmariadbçš„å®¢æˆ·ç«¯ç”šè‡³å¯ä»¥ç”¨æ¥é“¾æ¥mysqlçš„æœåŠ¡ç«¯ï¼Œä¸¤è€…çš„å‘½ä»¤ä¹Ÿæ˜¯ä¸€æ ·çš„&lt;br /&gt;&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h4&gt;å¯åŠ¨æœåŠ¡å¹¶è®¾ç½®å¼€æœºè‡ªå¯&lt;a href=&quot;#å¯åŠ¨æœåŠ¡å¹¶è®¾ç½®å¼€æœºè‡ªå¯&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;systemctl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;start&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;nginx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;systemctl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;enable&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;nginx&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;systemctl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;start&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;php-fpm&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;systemctl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;enable&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;php-fpm&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;systemctl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;start&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;mariadb&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;systemctl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;enable&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;mariadb&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;MySQLåˆå§‹åŒ–è®¾ç½®&lt;a href=&quot;#mysqlåˆå§‹åŒ–è®¾ç½®&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;rootæ˜¯MySQLçš„é»˜è®¤ç®¡ç†å‘˜ç”¨æˆ·ï¼Œæˆ‘ä»¬é¦–å…ˆè¦ä¸ºå…¶è®¾ç½®å¯†ç ã€‚&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;mysqladmin&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;password&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;â€˜passwordâ€™&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;#passwordç”¨è‡ªå·±çš„å¯†ç è¿›è¡Œæ›¿æ¢&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;æµ‹è¯•ç™»å½•&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;mysql&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-uroot&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-ppassword&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;#-u åé¢è·Ÿrootç”¨æˆ·å -påé¢è·Ÿç”¨æˆ·åå¯¹åº”çš„å¯†ç &lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;ä¿®æ”¹Nginxé…ç½®æ–‡ä»¶ä½¿å…¶æ”¯æŒFastCGI&lt;a href=&quot;#ä¿®æ”¹nginxé…ç½®æ–‡ä»¶ä½¿å…¶æ”¯æŒfastcgi&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;éœ€è¦ä½¿ç”¨fastcgi_passè¯·æ±‚è½¬å‘å’Œfastcgi_paramå˜é‡&lt;br /&gt;&lt;/p&gt;&lt;p&gt;å®˜æ–¹æ–‡æ¡£ï¼š
&lt;a href=&quot;https://nginx.org/en/docs/http/ngx_http_fastcgi_module.html#fastcgi_pass&quot;&gt;https://nginx.org/en/docs/http/ngx_http_fastcgi_module.html#fastcgi_pass&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;https://nginx.org/en/docs/http/ngx_http_fastcgi_module.html#fastcgi_index&quot;&gt;https://nginx.org/en/docs/http/ngx_http_fastcgi_module.html#fastcgi_index&lt;/a&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;é…ç½®ç¤ºä¾‹ï¼š&lt;br /&gt;&lt;/p&gt;&lt;p&gt;é¦–å…ˆè¿›å…¥/etc/nginx/nginx.confæ–‡ä»¶ï¼Œç¡®ä¿include /etc/nginx/conf.d/*.conf;è¯¥è¡Œæœªè¢«æ³¨é‡Šæ‰ã€‚&lt;br /&gt;&lt;/p&gt;&lt;p&gt;ç„¶åè¿›å…¥include /etc/nginx/conf.d/ç›®å½•å†…ï¼Œæ–°å»ºä¸€ä¸ª.confæ–‡ä»¶ã€‚&lt;br /&gt;&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;server{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;   &lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;listen &lt;/span&gt;&lt;span&gt;80&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;   &lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;server_name &lt;/span&gt;&lt;span&gt;_;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;# é™æ€è¯·æ±‚ï¼Œèµ„æºå­˜æ”¾è·¯å¾„ root /code; index index.php index.html;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;# åŠ¨æ€è¯·æ±‚å¤„ç†&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;location&lt;/span&gt;&lt;span&gt; ~ &lt;/span&gt;&lt;span&gt;\.php$ &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;       &lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;root &lt;/span&gt;&lt;span&gt;/code;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;       &lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;fastcgi_pass &lt;/span&gt;&lt;span&gt;127.0.0.1:9000;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;       &lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;fastcgi_index &lt;/span&gt;&lt;span&gt;index.php;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;       &lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;fastcgi_param &lt;/span&gt;&lt;span&gt;SCRIPT_FILENAME $&lt;/span&gt;&lt;span&gt;document_root&lt;/span&gt;&lt;span&gt;$&lt;/span&gt;&lt;span&gt;fastcgi_script_name&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;       &lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;include &lt;/span&gt;&lt;span&gt;fastcgi_params;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;å…¶ä¸­$document_root è¡¨ç¤ºå½“å‰locatinè®¾ç½®çš„rootæˆ–æ˜¯aliasçš„ç›®å½•ï¼ŒSCRIPT_FILENAME ç”¨äºåœ¨phpä¸­ç¡®å®šè„šæœ¬åå­—ï¼Œfastcgi_script_name ä¸ºè¯·æ±‚çš„URLã€‚&lt;br /&gt;&lt;/p&gt;&lt;p&gt;location ~ .php$ æ˜¯ä¸€ä¸ªåŒ¹é…è§„åˆ™ï¼Œæ„æ€æ˜¯æ‰€æœ‰ä»¥.phpç»“å°¾çš„è¯·æ±‚éƒ½ä¼šäº¤ç”±è¿™ä¸ªlocationä¸‹çš„é…ç½®è¿›è¡Œå¤„ç†ä¹Ÿå°±æ˜¯äº¤ç”±ä½äºæœ¬æœº9000ç«¯å£çš„phpåç«¯ç¨‹åºæ¥å¤„ç†ã€‚&lt;br /&gt;&lt;/p&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;åˆ›å»ºæµ‹è¯•æ–‡ä»¶&lt;a href=&quot;#åˆ›å»ºæµ‹è¯•æ–‡ä»¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;åˆ›å»ºåˆ›å»ºphpinfoæµ‹è¯•æ–‡ä»¶&lt;a href=&quot;#åˆ›å»ºåˆ›å»ºphpinfoæµ‹è¯•æ–‡ä»¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;é¦–å…ˆåˆ›å»ºä¹‹å‰åœ¨é…ç½®æ–‡ä»¶ä¸­å†™å…¥çš„æ–‡ä»¶å­˜æ”¾ç›®å½•&lt;br /&gt;&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;mkdir&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/code&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;ç„¶ååˆ›å»ºphpinfoæ–‡ä»¶&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;touch&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/code/phpinfo.php&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;cat&lt;/span&gt;&lt;span&gt; &amp;gt;&amp;gt; &lt;/span&gt;&lt;span&gt;/code/phpinfo.php&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;&amp;lt; &lt;/span&gt;&lt;span&gt;EOF&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;lt;?php&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;phpinfo&lt;/span&gt;&lt;span&gt;();&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;?&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;EOF&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;æ£€æŸ¥nginxè¯­æ³•å¹¶é‡è½½é…ç½®æ–‡ä»¶&lt;br /&gt;&lt;/p&gt;&lt;p&gt;æ¥ä¸‹æ¥å¯ä»¥ä½¿ç”¨ip/phpinfo.phpï¼Œå¦‚192.168.0.7/phpinfo.phpæ¥æŸ¥çœ‹æ˜¯å¦æˆåŠŸã€‚å‡ºç°ç±»ä¼¼ä¸‹é¢çš„é¡µé¢å°±è¯´æ˜æˆ‘ä»¬å‘é€çš„åŠ¨æ€è¯·æ±‚æˆåŠŸåœ°è¢«nginxé€šè¿‡fastcgiè½¬å‘ç»™phpåç«¯è¿›è¡Œå¤„ç†äº†ã€‚
&lt;/p&gt;&lt;figure&gt;&lt;img src=&quot;https://blog.freelytomorrow.com/articles_img/single-lnmp/phpinfo.png&quot; alt=&quot;&quot; /&gt;&lt;figcaption&gt;phpinfo&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;æµ‹è¯•ä¸MySQLçš„é“¾æ¥&lt;a href=&quot;#æµ‹è¯•ä¸mysqlçš„é“¾æ¥&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;åœ¨/codeç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªmysql-test.phpæ–‡ä»¶ï¼Œå¹¶å†™å…¥å¦‚ä¸‹å†…å®¹&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;?&lt;/span&gt;&lt;/span&gt;&lt;span&gt;php&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;$server&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&quot;127.0.0.1&quot;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;$mysql_user&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&quot;root&quot;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;$mysql_pwd&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&quot;123456&quot;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;// åˆ›å»ºæ•°æ®åº“è¿æ¥&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;$conn&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;mysqli_connect&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;$server&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;$mysql_user&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;$mysql_pwd&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;// æ£€æµ‹è¿é€šæ€§&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;$conn&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;echo&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;Connect to mysql database successful &lt;/span&gt;&lt;span&gt;\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;die&lt;/span&gt;&lt;span&gt;( &lt;/span&gt;&lt;span&gt;&quot;Connection failed: &quot;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;mysqli_connect_error&lt;/span&gt;&lt;span&gt;());&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;14&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;15&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;?&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å¤š&lt;/span&gt;&lt;span&gt;æ˜¾ç¤ºæ›´å°‘&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;ç„¶åè®¿é—®ip/mysql-test.phpæ–‡ä»¶ï¼Œå¦‚æœæ˜¾ç¤ºâ€Connect to mysql database successfulâ€åˆ™è¯´æ˜ä¸PHPä¸MySQLçš„é“¾æ¥æ­£å¸¸ã€‚&lt;br /&gt;&lt;/p&gt;&lt;p&gt;è‡³æ­¤ï¼ŒLNMPæ¶æ„å°±æˆåŠŸéƒ¨ç½²äº†ã€‚ç°åœ¨è®¿é—®ä½ çš„IPåº”è¯¥å¯ä»¥å¾—åˆ°ä¸€ä¸ªCentOSçš„ä»‹ç»é¡µé¢ã€‚&lt;br /&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;
&lt;section&gt;&lt;h2&gt;éƒ¨ç½²Wordpress&lt;a href=&quot;#éƒ¨ç½²wordpress&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h2&gt;&lt;section&gt;&lt;h3&gt;åˆ›å»ºè™šæ‹Ÿä¸»æœºçš„é…ç½®æ–‡ä»¶&lt;a href=&quot;#åˆ›å»ºè™šæ‹Ÿä¸»æœºçš„é…ç½®æ–‡ä»¶&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;server{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;   &lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;listen &lt;/span&gt;&lt;span&gt;80&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;   &lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;server_name &lt;/span&gt;&lt;span&gt;blog.free.cc;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;# é™æ€è¯·æ±‚ï¼Œèµ„æºå­˜æ”¾è·¯å¾„ root /code/wordpress;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;   &lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;index &lt;/span&gt;&lt;span&gt;index.php index.html;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;# åŠ¨æ€è¯·æ±‚å¤„ç†&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;location&lt;/span&gt;&lt;span&gt; ~ &lt;/span&gt;&lt;span&gt;\.php$ &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;       &lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;root &lt;/span&gt;&lt;span&gt;/code/wordpress;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;       &lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;fastcgi_pass &lt;/span&gt;&lt;span&gt;127.0.0.1:9000;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;10&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;       &lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;fastcgi_index &lt;/span&gt;&lt;span&gt;index.php;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;11&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;       &lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span&gt;fastcgi_param &lt;/span&gt;&lt;span&gt;SCRIPT_FILENAME $&lt;/span&gt;&lt;span&gt;document_root&lt;/span&gt;&lt;span&gt;$&lt;/span&gt;&lt;span&gt;fastcgi_script_name&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;span&gt; include &lt;/span&gt;&lt;span&gt;fastcgi_params;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;12&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;13&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;ä¸‹è½½wordpressæºç &lt;a href=&quot;#ä¸‹è½½wordpressæºç &quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;cd&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/code/&lt;/span&gt;&lt;span&gt; ; &lt;/span&gt;&lt;span&gt;wget&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;https://cn.wordpress.org/latest-zh_CN.zip&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;è§£å‹ç¼©å¹¶æˆæƒ&lt;/p&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;unzip&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;latest-zh_CN.zip&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;chown&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-R&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;www.www&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/code/&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;åˆ›å»ºMySQLæ•°æ®åº“&lt;a href=&quot;#åˆ›å»ºmysqlæ•°æ®åº“&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;Terminal window&lt;/span&gt;&lt;/figcaption&gt;&lt;pre&gt;&lt;code&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;mysql&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-u&lt;/span&gt;&lt;span&gt;&quot;root&quot;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-p&lt;/span&gt;&lt;span&gt;&quot;password&quot;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-e&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;create database database_name&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/section&gt;&lt;section&gt;&lt;h3&gt;è¿›è¡Œwordpresså®‰è£…&lt;a href=&quot;#è¿›è¡Œwordpresså®‰è£…&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;è®¿é—®ä½ çš„IPåœ°å€ï¼Œå¯ä»¥çœ‹è§ä¸€ä¸ªå®‰è£…å¯¼èˆªç•Œé¢&lt;br /&gt;
æ•°æ®åº“åå¡«ä½ åˆšåˆšè‡ªå·±åˆ›å»ºçš„æ•°æ®åº“åç§°ï¼›&lt;br /&gt;
æ•°æ®åº“ä¸»æœºå¡«localhost:3306&lt;br /&gt;
è¡¨å‰ç¼€ä¸é‡è¦ï¼Œå¯æ”¹å¯ä¸æ”¹ã€‚&lt;br /&gt;&lt;/p&gt;&lt;p&gt;å®Œæˆå®‰è£…åå°±è¿›å…¥åˆ°äº†Wordpressåå°ï¼Œå¼€å§‹åˆ›é€ è‡ªå·±çš„ç½‘ç«™æŠŠï¼&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;</content:encoded></item></channel></rss>