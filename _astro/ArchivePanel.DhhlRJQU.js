import{o as t}from"./index-client.B4D_S6KF.js";import{i as a}from"./lifecycle.i5tTI5H4.js";import{a as e,p as s,b as r,s as i,h as o,g as l,r as n,m as d,i as c,c as p,u,t as v,d as m}from"./template.u955vnAV.js";import{s as g}from"./render.B8C2nj67.js";import{e as h,i as f}from"./each.CBIK4qww.js";import{p as x,s as w,i as b}from"./translation.Chm_WEWT.js";import{I as y}from"./zh_TW.BlK-cjap.js";import{g as j}from"./url-utils.D-JBaO7r.js";var z=o('<a class="group btn-plain block! h-10 w-full rounded-lg hover:text-[initial]"><div class="flex flex-row justify-start items-center h-full"><div class="w-[15%] md:w-[10%] transition text-sm text-right text-50"> </div> <div class="w-[15%] md:w-[10%] relative dash-line h-full flex items-center"><div class="transition-all mx-auto w-1 h-1 rounded group-hover:h-5\n                       bg-[oklch(0.5_0.05_var(--hue))] group-hover:bg-(--primary)\n                       outline outline-4 z-50\n                       outline-(--card-bg)\n                       group-hover:outline-(--btn-plain-bg-hover)\n                       group-active:outline-(--btn-plain-bg-active)"></div></div> <div class="w-[70%] md:max-w-[65%] md:w-[65%] text-left font-bold\n                     group-hover:translate-x-1 transition-all group-hover:text-(--primary)\n                     text-75 pr-8 whitespace-nowrap text-ellipsis overflow-hidden"> </div> <div class="hidden md:block md:w-[15%] text-left text-sm transition\n                     whitespace-nowrap text-ellipsis overflow-hidden text-30"> </div></div></a>'),A=o('<div><div class="flex flex-row w-full items-center h-15"><div class="w-[15%] md:w-[10%] transition text-2xl font-bold text-right text-75"> </div> <div class="w-[15%] md:w-[10%]"><div class="h-3 w-3 bg-none rounded-full outline outline-(--primary) mx-auto\n                  -outline-offset-2 z-50 outline-3"></div></div> <div class="w-[70%] md:w-[80%] transition text-left text-50"> </div></div> <!></div>'),S=o('<div class="card-base px-8 py-6"></div>');function $(o,$){r($,!1);let k=x($,"tags",28,()=>[]),C=x($,"categories",28,()=>[]),I=x($,"sortedPosts",24,()=>[]);const T=new URLSearchParams(window.location.search);k(T.has("tag")?T.getAll("tag"):[]),C(T.has("category")?T.getAll("category"):[]);const _=T.get("uncategorized");let N=d([]);t(async()=>{let t=I();k().length>0&&(t=t.filter(t=>Array.isArray(t.data.tags)&&t.data.tags.some(t=>k().includes(t)))),C().length>0&&(t=t.filter(t=>t.data.category&&C().includes(t.data.category))),_&&(t=t.filter(t=>!t.data.category)),t=t.slice().sort((t,a)=>a.data.published.getTime()-t.data.published.getTime());const a=t.reduce((t,a)=>{const e=a.data.published.getFullYear();return t[e]||(t[e]=[]),t[e].push(a),t},{}),e=Object.keys(a).map(t=>({year:Number.parseInt(t,10),posts:a[Number.parseInt(t,10)]}));e.sort((t,a)=>a.year-t.year),i(N,e)}),a();var P=S();h(P,5,()=>l(N),f,(t,a)=>{var s=A(),r=c(s),i=c(r),o=c(i,!0);n(i);var d=p(i,4),x=c(d);n(d),n(r);var S=p(r,2);h(S,1,()=>(l(a),u(()=>l(a).posts)),f,(t,a)=>{var s=z(),r=c(s),i=c(r),o=c(i,!0);n(i);var d=p(i,4),h=c(d,!0);n(d);var f=p(d,2),x=c(f,!0);n(f),n(r),n(s),v((t,e,r)=>{w(s,"href",t),w(s,"aria-label",(l(a),u(()=>l(a).data.title))),g(o,e),g(h,(l(a),u(()=>l(a).data.title))),g(x,r)},[()=>(m(j),l(a),u(()=>j(l(a).id))),()=>(l(a),u(()=>{return`${((t=l(a).data.published).getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")}`;var t})),()=>(l(a),u(()=>l(a).data.tags.map(t=>`#${t}`).join(" ")))]),e(t,s)}),n(s),v(t=>{g(o,(l(a),u(()=>l(a).year))),g(x,`${l(a),u(()=>l(a).posts.length)??""} ${t??""}`)},[()=>(m(b),l(a),m(y),u(()=>b(1===l(a).posts.length?y.postCount:y.postsCount)))]),e(t,s)}),n(P),e(o,P),s()}export{$ as default};
