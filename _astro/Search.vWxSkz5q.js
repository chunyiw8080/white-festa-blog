import{o as t}from"./index-client.B4D_S6KF.js";import{i as e}from"./lifecycle.i5tTI5H4.js";import{ac as a,ad as s,f as i,t as r,g as n,e as o,a as l,p as c,b as d,s as p,c as m,d as f,u as h,h as g,m as v,i as u,r as b,ae as x}from"./template.u955vnAV.js";import{s as w}from"./render.B8C2nj67.js";import{i as y}from"./if.Dwju0AGJ.js";import{e as k,i as j}from"./each.CBIK4qww.js";import{I,h as L}from"./Icon.DkF1rRWp.js";import{s as z,r as E,i as S}from"./translation.HCG9qhQc.js";import{b as _}from"./input.CfSniAlm.js";import{I as B}from"./zh_TW.DyBwiqQV.js";import{u as T,a as W}from"./url-utils.DmiSD4rp.js";/* empty css                        */import"./branches.B1fGqtGm.js";/* empty css                        */function P(t,e){window.location.href=t}var C=g('<div class="transition first-of-type:mt-2 lg:first-of-type:mt-0 block rounded-xl text-lg px-3 py-2 text-50"> </div>'),D=g('<div class="transition text-sm text-50" style="display: flex; align-items: flex-start; margin-top: 0.1rem"><span style="display: inline-block; background-color: var(--btn-plain-bg-hover); color: var(--primary); padding: 0.1em 0.4em; border-radius: 5px; font-size: 0.75em; font-weight: 600; margin-right: 0.5em; shrink: 0;"> </span> <div><!></div></div>'),R=g('<div class="transition text-sm text-30" style="display: flex; align-items: flex-start; margin-top: 0.1rem"><span style="display: inline-block; background-color: var(--btn-plain-bg-active); color: var(--primary); padding: 0.1em 0.4em; border-radius: 5px; font-size: 0.75em; font-weight: 600; margin-right: 0.5em; shrink: 0;"> </span> <div><!></div></div>'),V=g('<a class="transition first-of-type:mt-2 lg:first-of-type:mt-0 group block\n           rounded-xl text-lg px-3 py-2 hover:bg-(--btn-plain-bg-hover) active:bg-(--btn-plain-bg-active)"><div class="transition text-90 inline-flex font-bold group-hover:text-(--primary)"><!> <!></div> <!> <!></a>'),A=g('<a class="transition first-of-type:mt-2 lg:first-of-type:mt-0 group block rounded-xl text-lg px-3 py-2 hover:bg-(--btn-plain-bg-hover) active:bg-(--btn-plain-bg-active) text-(--primary) font-bold text-center"><span class="inline-flex items-center"> <!></span></a>'),F=g("<!> <!>",1),G=g('<div class="transition first-of-type:mt-2 lg:first-of-type:mt-0 block rounded-xl text-lg px-3 py-2 text-50"> </div>'),H=g('<div class="transition first-of-type:mt-2 lg:first-of-type:mt-0 block rounded-xl text-lg px-3 py-2 text-50"> </div>'),M=g('<div id="search-bar" class="hidden lg:flex transition-all items-center h-11 mr-2 rounded-lg\n      bg-black/4 hover:bg-black/6 focus-within:bg-black/6\n      dark:bg-white/5 dark:hover:bg-white/10 dark:focus-within:bg-white/10\n"><!> <input class="transition-all pl-10 text-sm bg-transparent outline-0\n         h-full w-40 active:w-60 focus:w-60 text-black/50 dark:text-white/50 svelte-1n2o1uz"/></div> <button aria-label="Search Panel" id="search-switch" class="btn-plain scale-animation lg:hidden! rounded-lg w-11 h-11 active:scale-90"><!></button> <div id="search-panel" class="float-panel float-panel-closed search-panel absolute md:w-120\ntop-20 left-4 md:left-[unset] right-4 shadow-2xl rounded-2xl p-2 svelte-1n2o1uz"><div id="search-bar-inside" class="flex relative lg:hidden transition-all items-center h-11 rounded-xl\n      bg-black/4 hover:bg-black/6 focus-within:bg-black/6\n      dark:bg-white/5 dark:hover:bg-white/10 dark:focus-within:bg-white/10\n  "><!> <input class="pl-10 absolute inset-0 text-sm bg-transparent outline-0\n               focus:w-60 text-black/50 dark:text-white/50 svelte-1n2o1uz"/></div> <!></div>',1);function N(g,N){d(N,!1);let U,$=v(""),q=v(""),J=v([]),K=v(!1),O=v(!1);T("/"),T("/");const Q=(t,e)=>{const a=document.getElementById("search-panel");!a||e&&!n($)||!e&&!n(q)||(t?a.classList.remove("float-panel-closed"):a.classList.add("float-panel-closed"))},X=(t,e)=>{t.preventDefault(),document.getElementById("search-panel")?.classList.add("float-panel-closed"),p($,""),p(q,""),p(J,[]),function(t,e){if(t&&"string"==typeof t)if(t.startsWith("http://")||t.startsWith("https://")||t.startsWith("//"))window.open(t,"_blank");else{if(t.startsWith("#")){const e=document.getElementById(t.slice(1));return void(e&&e.scrollIntoView({behavior:"smooth"}))}if("undefined"!=typeof window&&window.swup)try{e?.replace||window.swup.navigate(t)}catch(a){console.error("Swup navigation failed:",a),P(t)}else P(t)}else console.warn("navigateToPage: Invalid URL provided")}(e)},Y=async(t,e)=>{if(!t)return Q(!1,e),void p(J,[]);n(O)&&(p(K,!0),clearTimeout(U),U=setTimeout(async()=>{try{let a=[];if(window.pagefind){const e=await window.pagefind.search(t);a=await Promise.all(e.results.map(t=>t.data()))}else 0;p(J,a),Q(!0,e)}catch(a){console.error("Search error:",a),p(J,[]),Q(!1,e)}finally{p(K,!1)}},300))};t(()=>{const t=()=>{p(O,!0),n($)&&Y(n($),!0),n(q)&&Y(n(q),!1)};window.pagefind?t():(document.addEventListener("pagefindready",t,{once:!0}),document.addEventListener("pagefindloaderror",t,{once:!0}))}),a(()=>(n(O),n($)),()=>{n(O)&&(n($)||""===n($))&&Y(n($),!0)}),a(()=>(n(O),n(q)),()=>{n(O)&&(n(q)||""===n(q))&&Y(n(q),!1)}),s(),e();var Z=M(),tt=i(Z),et=u(tt);I(et,{icon:"material-symbols:search",class:"absolute text-[1.25rem] pointer-events-none ml-3 transition my-auto text-black/30 dark:text-white/30"});var at=m(et,2);E(at),b(tt);var st=m(tt,2),it=u(st);I(it,{icon:"material-symbols:search",class:"text-[1.25rem]"}),b(st);var rt=m(st,2),nt=u(rt),ot=u(nt);I(ot,{icon:"material-symbols:search",class:"absolute text-[1.25rem] pointer-events-none ml-3 transition my-auto text-black/30 dark:text-white/30"});var lt=m(ot,2);E(lt),b(nt);var ct=m(nt,2),dt=t=>{var e=C(),a=u(e,!0);b(e),r(t=>w(a,t),[()=>(f(S),f(B),h(()=>S(B.searchLoading)))]),l(t,e)},pt=t=>{var e=F(),a=i(e);k(a,1,()=>(n(J),h(()=>n(J).slice(0,5))),j,(t,e)=>{var a=V(),s=u(a),i=u(s);L(i,()=>(n(e),h(()=>n(e).meta.title)));var c=m(i,2);I(c,{icon:"fa7-solid:chevron-right",class:"transition text-[0.75rem] translate-x-1 my-auto text-(--primary)"}),b(s);var d=m(s,2),p=t=>{var a=D(),s=u(a),i=u(s,!0);b(s);var o=m(s,2),c=u(o);L(c,()=>(n(e),h(()=>n(e).excerpt))),b(o),b(a),r(t=>w(i,t),[()=>(f(S),f(B),h(()=>S(B.searchSummary)))]),l(t,a)},g=x(()=>(n(e),h(()=>n(e).excerpt.includes("<mark>"))));y(d,t=>{n(g)&&t(p)});var v=m(d,2),k=t=>{var a=R(),s=u(a),i=u(s,!0);b(s);var o=m(s,2),c=u(o);L(c,()=>(n(e),h(()=>n(e).content))),b(o),b(a),r(t=>w(i,t),[()=>(f(S),f(B),h(()=>S(B.searchContent)))]),l(t,a)},j=x(()=>(n(e),h(()=>n(e).content&&n(e).content.includes("<mark>"))));y(v,t=>{n(j)&&t(k)}),b(a),r(()=>z(a,"href",(n(e),h(()=>n(e).url)))),o("click",a,t=>X(t,n(e).url)),l(t,a)});var s=m(a,2),c=t=>{var e=A(),a=u(e),s=u(a),i=m(s);I(i,{icon:"fa7-solid:arrow-right",class:"transition text-[0.75rem] ml-1"}),b(a),b(e),r((t,a)=>{z(e,"href",t),w(s,`${a??""} `)},[()=>(f(W),n($),n(q),h(()=>W(n($)||n(q)))),()=>(f(S),f(B),n(J),h(()=>S(B.searchViewMore).replace("{count}",(n(J).length-5).toString())))]),o("click",e,t=>X(t,W(n($)||n(q)))),l(t,e)};y(s,t=>{n(J),h(()=>n(J).length>5)&&t(c)}),l(t,e)},mt=t=>{var e=G(),a=u(e,!0);b(e),r(t=>w(a,t),[()=>(f(S),f(B),h(()=>S(B.searchNoResults)))]),l(t,e)},ft=t=>{var e=H(),a=u(e,!0);b(e),r(t=>w(a,t),[()=>(f(S),f(B),h(()=>S(B.searchTypeSomething)))]),l(t,e)};y(ct,t=>{n(K)?t(dt):(n(J),h(()=>n(J).length>0)?t(pt,1):(n(J),h(()=>0===n(J).length)?t(mt,2):(n($)||n(q))&&t(ft,3)))}),b(rt),r((t,e)=>{z(at,"placeholder",t),z(lt,"placeholder",e)},[()=>(f(S),f(B),h(()=>S(B.search))),()=>(f(S),f(B),h(()=>S(B.search)))]),_(at,()=>n($),t=>p($,t)),o("focus",at,()=>Y(n($),!0)),o("click",st,()=>{document.getElementById("search-panel")?.classList.toggle("float-panel-closed")}),_(lt,()=>n(q),t=>p(q,t)),l(g,Z),c()}export{N as default};
